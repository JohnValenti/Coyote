<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>QuickViewSummaryPC.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">QA Code Coverage</a> &gt; <a href="index.source.html" class="el_package">com.bluepumpkin.web.am.adherence.quickview</a> &gt; <span class="el_source">QuickViewSummaryPC.java</span></div><h1>QuickViewSummaryPC.java</h1><pre class="source lang-java linenums">package com.bluepumpkin.web.am.adherence.quickview;

import java.util.*;

import com.bluepumpkin.ejb.bbm.rtaamanager.model.*;
import com.witness.web.uif.pagecomponent.container.Collapsible2ColFormPC;
import com.witness.web.uif.system.RequestContext;
import com.witness.web.uif.util.*;
import com.witness.web.uif.pagecomponent.list.MultiColListPC;
import com.witness.web.uif.pagecomponent.DefaultMultiColumnNodeData;
import com.bluepumpkin.web.am.l10n.AmWebBundleKey;
import com.witness.web.uif.util.html.CSSUtil;

/**
 * Title:        Quick View Summary Page Component
 * Description:  A collapsable container that shows  Quick View summary
 * Copyright:    Copyright (c) 2002
 * Company:      Blue Pumpkin Software, Inc
 * @author       Shimon Kakon
 * @version 1.0
 */

public class QuickViewSummaryPC extends Collapsible2ColFormPC {

	// Activity List headers
	public static final String ACTIVITY_NAME = &quot;activityName&quot;;
	public static final String SCHEDULE = &quot;schedule&quot;;
	public static final String ACTUAL = &quot;actual&quot;;

<span class="nc" id="L30">	protected StringBuffer m_innerTemplate = null;</span>
<span class="nc" id="L31">	private MultiColListPC m_activityList = null; //this is the activity summary list</span>

	public QuickViewSummaryPC(RequestContext context, ResourceBundle bundle) {
<span class="nc" id="L34">		super(context, bundle);</span>
<span class="nc" id="L35">		setTitle(i18n(m_bundle, AmWebBundleKey.ADHERENCE_STATUS_SUMMARY));</span>
<span class="nc" id="L36">		m_activityList = MultiColPCFactory.getMultiColListPC(context, i18n(m_bundle, AmWebBundleKey.ACTIVITIES_GRID), false, true);</span>
<span class="nc" id="L37">		MultiColPCFactory.addAriaToMultiColListPC(m_activityList, context, true, true, true, true, true);</span>
		//No need since the component is added later: addChildComponent(m_activityList);
<span class="nc" id="L39">	}</span>

	public void createForm(AdheranceStatusData adhStatus, int selectedSize, boolean collapsed) {
<span class="nc" id="L42">		setCollapsed(collapsed);</span>
<span class="nc" id="L43">		m_innerTemplate = new StringBuffer(512);</span>
<span class="nc" id="L44">		int i = 0;</span>
		// the number of selected employees
<span class="nc" id="L46">		m_innerTemplate.append(addToTemplate(AmWebBundleKey.TOTAL_SELECTED, i++));</span>
<span class="nc" id="L47">		addFormComponent(String.valueOf(selectedSize), AmWebBundleKey.TOTAL_SELECTED);</span>

		// total in
<span class="nc" id="L50">		m_innerTemplate.append(addToTemplate(AmWebBundleKey.TOTAL_IN, i++));</span>
<span class="nc" id="L51">		addFormComponent(String.valueOf(adhStatus.getTotalWorking()), AmWebBundleKey.TOTAL_IN);</span>

		 // total out of adherence
<span class="nc" id="L54">		m_innerTemplate.append(addToTemplate(AmWebBundleKey.OUT_OF_ADHERENCE, i++));</span>
<span class="nc" id="L55">		addFormComponent(String.valueOf(adhStatus.getNumOutOfAdherance()), AmWebBundleKey.OUT_OF_ADHERENCE);</span>

		// total too long in state
<span class="nc" id="L58">		m_innerTemplate.append(addToTemplate(AmWebBundleKey.TOO_LONG_IN_STATE, i++));</span>
<span class="nc" id="L59">		addFormComponent(String.valueOf(adhStatus.getNumTooLongInState()), AmWebBundleKey.TOO_LONG_IN_STATE);</span>

		// activity status list
<span class="nc" id="L62">		m_innerTemplate.append(addToTemplate(AmWebBundleKey.ACTIVITY, i++));</span>
<span class="nc bnc" id="L63" title="All 2 branches missed.">		if(selectedSize &gt; 0) {</span>
<span class="nc" id="L64">			Collection activityStatusSummary = adhStatus.getActivityStatusSummaries().values();</span>
<span class="nc bnc" id="L65" title="All 4 branches missed.">			if (activityStatusSummary != null &amp;&amp; activityStatusSummary.size() &gt; 0) {</span>
<span class="nc" id="L66">				initActivityList();</span>
<span class="nc" id="L67">				createActivityListModel(activityStatusSummary);</span>
<span class="nc" id="L68">				addComponent(m_activityList);</span>
			}
			else {
<span class="nc" id="L71">				addFormComponent(i18n(m_bundle, AmWebBundleKey.ADHERENCE_STATUS_ACTIVITY_NULL), AmWebBundleKey.ACTIVITY);</span>
			}
<span class="nc" id="L73">		}</span>
		else {
<span class="nc" id="L75">			addFormComponent(HtmlUtil.NBSP, AmWebBundleKey.ACTIVITY);</span>
		}
        
        /*
        // Scheduled In-Office Hours (from 12:00 AM to current time)
        m_innerTemplate.append(addToTemplate(AmWebBundleKey.MY_ADHERENCE_SUMMARY_SCHEDULED, i++));
        addComponent(String.valueOf(adhStatus.getNumTooLongInState())); //TBD

        // Exceptions During In-Office Hours (from 12:00 AM to current time)
        m_innerTemplate.append(addToTemplate(AmWebBundleKey.MY_ADHERENCE_SUMMARY_EXCEPTIONS, i++));
        addComponent(String.valueOf(adhStatus.getNumTooLongInState())); //TBD

        // Percent Time Adhering (from 12:00 AM to current time)
        m_innerTemplate.append(addToTemplate(AmWebBundleKey.MY_ADHERENCE_SUMMARY_PERCENTAGE, i++));
        addComponent(String.valueOf(adhStatus.getNumTooLongInState())); //TBD
        */
<span class="nc" id="L91">	}</span>

	public void createEmptyForm(boolean collapsed) {
<span class="nc" id="L94">		AdheranceStatusData adhStatus = new AdheranceStatusData(Collections.emptyList(), new HashMap(0), new HashMap(0), 0, 0, 0, 0, 0, 0);</span>
<span class="nc" id="L95">		createForm(adhStatus, 0, collapsed);</span>
<span class="nc" id="L96">	}</span>

	/**
	 * Get string of the HTML representing this component.
	 */
	public String getHtmlDisplay() {
<span class="nc bnc" id="L102" title="All 2 branches missed.">		if(m_innerTemplate != null) {</span>
<span class="nc" id="L103">			return super.getHtmlDisplay(m_innerTemplate.toString());</span>
		}
		else {
<span class="nc" id="L106">			return super.getHtmlDisplay(&quot;&quot;);</span>
		}
	}

	private void initActivityList() {
		// Set up Headers
<span class="nc" id="L112">		m_activityList.getHeader().addColumnHeaderData(ACTIVITY_NAME, i18n(m_bundle, AmWebBundleKey.ACTIVITY_NAME)); //508</span>
<span class="nc" id="L113">		m_activityList.getHeader().addColumnHeaderData(SCHEDULE, i18n(m_bundle, AmWebBundleKey.ADHERENCE_SCHEDULED_TITLE));</span>
<span class="nc" id="L114">		m_activityList.getHeader().addColumnHeaderData(ACTUAL, i18n(m_bundle, AmWebBundleKey.ACTUAL));</span>
		// Set up basic table properties
<span class="nc" id="L116">		m_activityList.setIsBorderEnabled(true);</span>
<span class="nc" id="L117">		m_activityList.setEnabled(false);</span>
<span class="nc bnc" id="L118" title="All 2 branches missed.">		if (!isAccessibilityComplianceMode()) {</span>
<span class="nc" id="L119">			m_activityList.setUseWrapper(false);</span>
		}
<span class="nc" id="L121">		m_activityList.setRowSelectable(false);</span>
<span class="nc" id="L122">		m_activityList.getHeader().setSortable(false);</span>
		//m_activityList.getHeader().setDefaultSortColumn(ACTIVITY_NAME);
		//m_activityList.setIsAutoSortEnabled(true);
<span class="nc" id="L125">	}</span>

	private void createActivityListModel(Collection colActivityStatus) {
<span class="nc" id="L128">		ArrayList activityStatusArray = new ArrayList(colActivityStatus.size());</span>
<span class="nc bnc" id="L129" title="All 2 branches missed.">		for (Iterator it = colActivityStatus.iterator(); it.hasNext(); ) {</span>
<span class="nc" id="L130">			ActivityAdheranceStatusSummary activityAdhStatus = (ActivityAdheranceStatusSummary)it.next();</span>
<span class="nc" id="L131">			DefaultMultiColumnNodeData rowData = new DefaultMultiColumnNodeData(activityAdhStatus.getActivityID());</span>
            
			// Activity name
<span class="nc" id="L134">			rowData.add(activityAdhStatus.getActivityName(), CSSUtil.STYLE_NORMAL_LEFT);</span>
            
			// Total number of scheduled activity
<span class="nc" id="L137">			rowData.add(String.valueOf(activityAdhStatus.getNumScheduled()));</span>
            
			// Total number of actual activity
<span class="nc" id="L140">			rowData.add(String.valueOf(activityAdhStatus.getNumWorking()));</span>
            
<span class="nc" id="L142">			activityStatusArray.add(rowData);</span>
<span class="nc" id="L143">		}</span>
<span class="nc" id="L144">		m_activityList.setListModel(activityStatusArray);</span>
<span class="nc" id="L145">	}</span>


}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>