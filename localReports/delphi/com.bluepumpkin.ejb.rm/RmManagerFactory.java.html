<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>RmManagerFactory.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">QA Code Coverage</a> &gt; <a href="index.source.html" class="el_package">com.bluepumpkin.ejb.rm</a> &gt; <span class="el_source">RmManagerFactory.java</span></div><h1>RmManagerFactory.java</h1><pre class="source lang-java linenums">package com.bluepumpkin.ejb.rm;

import java.util.Map;
import java.util.Properties;
import java.util.concurrent.ConcurrentHashMap;

import javax.naming.Context;
import javax.naming.InitialContext;
import javax.rmi.PortableRemoteObject;

import com.bluepumpkin.common.logging.Category;
import com.bluepumpkin.common.util.SystemProperties;
import com.bluepumpkin.ejb.bbm.base.BbmCreateException;
import com.bluepumpkin.ejb.rm.requests.common.ejb.RequestUtil;
import com.bluepumpkin.ejb.rm.requests.common.model.Request;
import com.bluepumpkin.ejb.rm.requests.commonrequestmanager.ejb.CommonRequestManager;
import com.bluepumpkin.ejb.rm.requests.commonrequestmanager.ejb.CommonRequestManagerEJBHome;
import com.bluepumpkin.ejb.rm.requests.commonrequestmanager.model.IRequestType;
import com.bluepumpkin.ejb.rm.requests.custshift.ejb.CustShiftReqMgr;
import com.bluepumpkin.ejb.rm.requests.custshift.ejb.CustShiftReqMgrEJBHome;
import com.bluepumpkin.ejb.rm.requests.flextime.ejb.FlexTimeRequestManager;
import com.bluepumpkin.ejb.rm.requests.flextime.ejb.FlexTimeRequestManagerEJBHome;
import com.bluepumpkin.ejb.rm.requests.shiftbid.shiftbidauction.ejb.ShiftBidAuctionManager;
import com.bluepumpkin.ejb.rm.requests.shiftbid.shiftbidauction.ejb.ShiftBidAuctionManagerEJBHome;
import com.bluepumpkin.ejb.rm.requests.shiftbid.shiftbidrequest.ejb.ShiftBidRequestManager;
import com.bluepumpkin.ejb.rm.requests.shiftbid.shiftbidrequest.ejb.ShiftBidRequestManagerEJBHome;
import com.bluepumpkin.ejb.rm.requests.swap.posting.ejb.ShiftSwapPostingManager;
import com.bluepumpkin.ejb.rm.requests.swap.posting.ejb.ShiftSwapPostingManagerEJBHome;
import com.bluepumpkin.ejb.rm.requests.swap.request.ejb.ShiftSwapRequestManager;
import com.bluepumpkin.ejb.rm.requests.swap.request.ejb.ShiftSwapRequestManagerEJBHome;
import com.bluepumpkin.ejb.rm.requests.timeoff.ejb.TORequestManager;
import com.bluepumpkin.ejb.rm.requests.timeoff.ejb.TORequestManagerEJBHome;
import com.bluepumpkin.ejb.rm.requests.timeoff.hoursperday.ejb.TOHoursPerDayManager;
import com.bluepumpkin.ejb.rm.requests.timeoff.hoursperday.ejb.TOHoursPerDayManagerEJBHome;
import com.bluepumpkin.ejb.rm.requests.timeoff.intervalallocation.ejb.TimeOffIntervalAllocationManager;
import com.bluepumpkin.ejb.rm.requests.timeoff.intervalallocation.ejb.TimeOffIntervalAllocationManagerEJBHome;
import com.bluepumpkin.ejb.rm.requests.timeoff.waitlist.ejb.TOWaitlistManager;
import com.bluepumpkin.ejb.rm.requests.timeoff.waitlist.ejb.TOWaitlistManagerEJBHome;
import com.bluepumpkin.ejb.rm.requests.timeoff.withdraw.ejb.TOWithdrawManager;
import com.bluepumpkin.ejb.rm.requests.timeoff.withdraw.ejb.TOWithdrawManagerEJBHome;
import com.bluepumpkin.ejb.rm.setup.autoprocessing.ejb.AutoProcessingRuleManager;
import com.bluepumpkin.ejb.rm.setup.autoprocessing.ejb.AutoProcessingRuleManagerEJBHome;
import com.bluepumpkin.ejb.rm.setup.calendartimeoff.ejb.CalendarTimeOffDayFacade;
import com.bluepumpkin.ejb.rm.setup.calendartimeoff.ejb.CalendarTimeOffDayFacadeEJBHome;
import com.bluepumpkin.ejb.rm.setup.filingrules.ejb.RequestFilingRuleManager;
import com.bluepumpkin.ejb.rm.setup.filingrules.ejb.RequestFilingRuleManagerEJBHome;
import com.bluepumpkin.ejb.rm.setup.settings.ejb.OrganizationConfigManager;
import com.bluepumpkin.ejb.rm.setup.settings.ejb.OrganizationConfigManagerEJBHome;
import com.bluepumpkin.ejb.rm.setup.timeoffbid.ejb.TimeOffBiddingManager;
import com.bluepumpkin.ejb.rm.setup.timeoffbid.ejb.TimeOffBiddingManagerEJBHome;
import com.bluepumpkin.ejb.rm.setup.validation.ejb.ValidationRuleManager;
import com.bluepumpkin.ejb.rm.setup.validation.ejb.ValidationRuleManagerEJBHome;

/**
 * Title:        RmManagerFactory
 * Description:  Factory for instantiating remote interfaces of ejbs.
 * Copyright:    Copyright (c) 2002
 * Company:      Blue Pumpkin Software, Inc.
 *
 * @author Robert Granat
 * @version 1.0
 */

public class RmManagerFactory {
<span class="nc" id="L65">	private static Category m_cat = Log.initCategory(RmManagerFactory.class.getName());</span>

	/*
	 * If false, system is in test mode.  In this mode, bean class instances, instead of EJB remote objects
	 * (remote interface instances hosted in EJB container and instantiated by via EJBHome.create()) are created.
	 */
<span class="nc bnc" id="L71" title="All 2 branches missed.">	public static final boolean m_useEJBRemoteRefs = System.getProperty(&quot;USEBEANCLASSFORTESTING&quot;) == null;</span>

<span class="nc" id="L73">	private static ShiftSwapRequestManagerEJBHome ssrequestManagerEJBHome = null;</span>
<span class="nc" id="L74">	private static ShiftBidAuctionManagerEJBHome shiftBidAuctionManagerEJBHome = null;</span>
<span class="nc" id="L75">	private static ShiftBidRequestManagerEJBHome shiftBidRequestManagerEJBHome = null;</span>
<span class="nc" id="L76">	private static ShiftSwapPostingManagerEJBHome sspostingManagerEJBHome = null;</span>
<span class="nc" id="L77">	private static AutoProcessingRuleManagerEJBHome autoProcessingRuleManagerEJBHome = null;</span>
<span class="nc" id="L78">	private static RequestFilingRuleManagerEJBHome requestFilingRuleManagerEJBHome = null;</span>
<span class="nc" id="L79">	private static CalendarTimeOffDayFacadeEJBHome calendarTimeOffDayFacadeEJBHome = null;</span>
<span class="nc" id="L80">	private static TORequestManagerEJBHome timeOffRequestManagerEJBHome = null;</span>
<span class="nc" id="L81">	private static FlexTimeRequestManagerEJBHome flextimeRequestManagerEJBHome = null;</span>
<span class="nc" id="L82">	private static OrganizationConfigManagerEJBHome m_OrganizationConfigManagerEJBHome = null;</span>
<span class="nc" id="L83">	private static OrganizationConfigManagerEJBHome m_OrganizationConfigManagerEJBHomeWif = null;</span>
<span class="nc" id="L84">	private static ValidationRuleManagerEJBHome m_ValidationRuleManagerEJBHome = null;</span>
<span class="nc" id="L85">	private static CommonRequestManagerEJBHome commonRequestManagerEJBHome = null;</span>
<span class="nc" id="L86">	private static RmManagerFactory m_instance = new RmManagerFactory();</span>
<span class="nc" id="L87">	private static boolean m_initedForNullUser = false;</span>

	//Does not really need to be concurrent since it is accessed only from functions called from a synchronized method, but safer to use 
	//a ConcurrentHashMap. The intent seems to be store users who have been validated, but code then goes ahead and 
	//recreates the static home references for each new user - why? 
<span class="nc" id="L92">	private static Map&lt;String, Boolean&gt; initedUsers = new ConcurrentHashMap&lt;String, Boolean&gt;();</span>

	//This was a plain static boolean variable, which seems like a bug. The first call to RmManagerFactory.getInstance(true) 
	//would set the boolean variable to true and then each call recreates all the home references which is very expensive. 
	//Changed to ThreadLocal so that only the next call to initialize from the thread which called RmManagerFactory.getInstance(true) 
	//would recreate the static home references. Do not know why this is needed, but assuming that there is a reason for this.  
<span class="nc" id="L98">	private static final ThreadLocal&lt;Boolean&gt; forceInitialization = new ThreadLocal&lt;Boolean&gt;();</span>

<span class="nc" id="L100">	private static TOWaitlistManagerEJBHome toWaitlistManagerEJBHome = null;</span>
<span class="nc" id="L101">	private static TOWithdrawManagerEJBHome toWithdrawManagerEJBHome = null;</span>
<span class="nc" id="L102">	private static TOHoursPerDayManagerEJBHome toHoursPerDayManagerEJBHome = null;</span>
<span class="nc" id="L103">	private static TimeOffIntervalAllocationManagerEJBHome timeOffIntervalAllocationManagerEJBHome = null;</span>
<span class="nc" id="L104">	private static TimeOffBiddingManagerEJBHome timeOffBiddingManagerEJBHome = null;</span>

<span class="nc" id="L106">	private static CustShiftReqMgrEJBHome custShiftReqMgrEJBHome = null;</span>

	public static final String RM_ORGANIZATIONCONFIGMANAGER_EJBHOME = &quot;bluepumpkin/organizationconfigmanager&quot;;
	public static final String RM_ORGANIZATIONCONFIGMANAGER_EJBHOME_WIF = &quot;bluepumpkin/organizationconfigmanager_wif&quot;;

	/**
	 * Construct the Rm manager factory client
	 */
<span class="nc" id="L114">	private RmManagerFactory() {</span>
<span class="nc" id="L115">	}</span>

	public static RmManagerFactory getInstance() {
<span class="nc" id="L118">		return m_instance;</span>
	}

	public static RmManagerFactory getInstance(boolean forceInit) {
<span class="nc" id="L122">		forceInitialization.set(forceInit);</span>
<span class="nc" id="L123">		return m_instance;</span>
	}

	//do we need to recreate the static home references?
	private static boolean needInitialize(String user) {
<span class="nc" id="L128">		Boolean force = forceInitialization.get();</span>
<span class="nc bnc" id="L129" title="All 4 branches missed.">		if (force != null &amp;&amp; force) {</span>
<span class="nc" id="L130">			return true;</span>
		}

<span class="nc bnc" id="L133" title="All 2 branches missed.">		if (user != null) {</span>
<span class="nc bnc" id="L134" title="All 2 branches missed.">			return !initedUsers.containsKey(user);</span>
		}

<span class="nc bnc" id="L137" title="All 2 branches missed.">		return !m_initedForNullUser;</span>
	}

	private static void afterInitialize(String user) {
<span class="nc" id="L141">		forceInitialization.set(false);</span>

<span class="nc bnc" id="L143" title="All 2 branches missed.">		if (user != null) {</span>
<span class="nc" id="L144">			initedUsers.put(user, true);</span>
<span class="nc" id="L145">			return;</span>
		}
<span class="nc" id="L147">		m_initedForNullUser = true;</span>
<span class="nc" id="L148">	}</span>

	static synchronized void initialize(String user, String password) {
<span class="nc bnc" id="L151" title="All 4 branches missed.">		if (!m_useEJBRemoteRefs || !needInitialize(user)) {</span>
<span class="nc" id="L152">			return;</span>
		}

		try {
			//get naming context
<span class="nc" id="L157">			Context ctx = getInitialContext(user, password);</span>
<span class="nc" id="L158">			initializeHomeIntfRefs(ctx);</span>
<span class="nc" id="L159">			afterInitialize(user);</span>

<span class="nc" id="L161">		} catch (Exception e) {</span>
<span class="nc" id="L162">			m_cat.error(e);</span>
<span class="nc" id="L163">			throw new RuntimeException(e);</span>
<span class="nc" id="L164">		}</span>
<span class="nc" id="L165">	}</span>

	private static void initializeHomeIntfRefs(Context ctx) throws Exception {


		// ShiftSwapRequestManager
<span class="nc" id="L171">		Object ref = ctx.lookup(&quot;bluepumpkin/shiftswaprequestmanager&quot;);</span>
<span class="nc" id="L172">		ssrequestManagerEJBHome = (ShiftSwapRequestManagerEJBHome)</span>
<span class="nc" id="L173">		        PortableRemoteObject.narrow(ref, ShiftSwapRequestManagerEJBHome.class);</span>

		// ShiftBidAuctionManager
<span class="nc" id="L176">		ref = ctx.lookup(&quot;bluepumpkin/shiftbidauctionmanager&quot;);</span>
<span class="nc" id="L177">		shiftBidAuctionManagerEJBHome = (ShiftBidAuctionManagerEJBHome)</span>
<span class="nc" id="L178">		        PortableRemoteObject.narrow(ref, ShiftBidAuctionManagerEJBHome.class);</span>

		// ShiftBidRequestManager
<span class="nc" id="L181">		ref = ctx.lookup(&quot;bluepumpkin/shiftbidrequestmanager&quot;);</span>
<span class="nc" id="L182">		shiftBidRequestManagerEJBHome = (ShiftBidRequestManagerEJBHome)</span>
<span class="nc" id="L183">		        PortableRemoteObject.narrow(ref, ShiftBidRequestManagerEJBHome.class);</span>



		// ShiftSwapPostingManager
<span class="nc" id="L188">		ref = ctx.lookup(&quot;bluepumpkin/shiftswappostingmanager&quot;);</span>
<span class="nc" id="L189">		sspostingManagerEJBHome = (ShiftSwapPostingManagerEJBHome)</span>
<span class="nc" id="L190">		        PortableRemoteObject.narrow(ref, ShiftSwapPostingManagerEJBHome.class);</span>

		// AutoProcessingRuleManager
<span class="nc" id="L193">		ref = ctx.lookup(&quot;bluepumpkin/autoprocessingrulemanager&quot;);</span>
<span class="nc" id="L194">		autoProcessingRuleManagerEJBHome = (AutoProcessingRuleManagerEJBHome)</span>
<span class="nc" id="L195">		        PortableRemoteObject.narrow(ref, AutoProcessingRuleManagerEJBHome.class);</span>

		// RequestFilingRuleManager
<span class="nc" id="L198">		ref = ctx.lookup(&quot;bluepumpkin/filingrulemanager&quot;);</span>
<span class="nc" id="L199">		requestFilingRuleManagerEJBHome = (RequestFilingRuleManagerEJBHome)</span>
<span class="nc" id="L200">		        PortableRemoteObject.narrow(ref, RequestFilingRuleManagerEJBHome.class);</span>

		// CalendarTimeOffDayFacade
<span class="nc" id="L203">		ref = ctx.lookup(&quot;bluepumpkin/calendartimeofffacade&quot;);</span>
<span class="nc" id="L204">		calendarTimeOffDayFacadeEJBHome = (CalendarTimeOffDayFacadeEJBHome)</span>
<span class="nc" id="L205">		        PortableRemoteObject.narrow(ref, CalendarTimeOffDayFacadeEJBHome.class);</span>

		// timeOffRequestManager
<span class="nc" id="L208">		ref = ctx.lookup(&quot;bluepumpkin/timeoffrequestmanager&quot;);</span>
<span class="nc" id="L209">		timeOffRequestManagerEJBHome = (TORequestManagerEJBHome)</span>
<span class="nc" id="L210">		        PortableRemoteObject.narrow(ref, TORequestManagerEJBHome.class);</span>

		// flextimeRequestManager
<span class="nc" id="L213">				ref = ctx.lookup(&quot;bluepumpkin/flextimerequestmanager&quot;);</span>
<span class="nc" id="L214">				flextimeRequestManagerEJBHome = (FlexTimeRequestManagerEJBHome)</span>
<span class="nc" id="L215">				        PortableRemoteObject.narrow(ref, FlexTimeRequestManagerEJBHome.class);</span>

		// OrganizationConfigManager
<span class="nc" id="L218">		ref = ctx.lookup(RM_ORGANIZATIONCONFIGMANAGER_EJBHOME);</span>
<span class="nc" id="L219">		m_OrganizationConfigManagerEJBHome = (OrganizationConfigManagerEJBHome)</span>
<span class="nc" id="L220">		        PortableRemoteObject.narrow(ref, OrganizationConfigManagerEJBHome.class);</span>

		// OrganizationConfigManager WhatIf mode
<span class="nc" id="L223">		ref = ctx.lookup(RM_ORGANIZATIONCONFIGMANAGER_EJBHOME_WIF);</span>
<span class="nc" id="L224">		m_OrganizationConfigManagerEJBHomeWif = (OrganizationConfigManagerEJBHome)</span>
<span class="nc" id="L225">		        PortableRemoteObject.narrow(ref, OrganizationConfigManagerEJBHome.class);</span>

		// ValidationRuleManager
<span class="nc" id="L228">		ref = ctx.lookup(&quot;bluepumpkin/validationrulemanager&quot;);</span>
<span class="nc" id="L229">		m_ValidationRuleManagerEJBHome = (ValidationRuleManagerEJBHome)</span>
<span class="nc" id="L230">		        PortableRemoteObject.narrow(ref, ValidationRuleManagerEJBHome.class);</span>

		// CommonRequestManager.
<span class="nc" id="L233">		ref = ctx.lookup(&quot;bluepumpkin/commonrequestmanager&quot;);</span>
<span class="nc" id="L234">		commonRequestManagerEJBHome = (CommonRequestManagerEJBHome)</span>
<span class="nc" id="L235">		        PortableRemoteObject.narrow(ref, CommonRequestManagerEJBHome.class);</span>

		// TOWailistManager

<span class="nc" id="L239">		ref = ctx.lookup(&quot;bluepumpkin/towaitlistmanager&quot;);</span>
<span class="nc" id="L240">		toWaitlistManagerEJBHome = (TOWaitlistManagerEJBHome)</span>
<span class="nc" id="L241">		        PortableRemoteObject.narrow(ref, TOWaitlistManagerEJBHome.class);</span>

<span class="nc" id="L243">		ref = ctx.lookup(&quot;bluepumpkin/tohoursperdaymanager&quot;);</span>
<span class="nc" id="L244">		toHoursPerDayManagerEJBHome = (TOHoursPerDayManagerEJBHome)</span>
<span class="nc" id="L245">		        PortableRemoteObject.narrow(ref, TOHoursPerDayManagerEJBHome.class);</span>

<span class="nc" id="L247">		ref = ctx.lookup(&quot;bluepumpkin/towithdrawmanager&quot;);</span>
<span class="nc" id="L248">		toWithdrawManagerEJBHome = (TOWithdrawManagerEJBHome)</span>
<span class="nc" id="L249">		        PortableRemoteObject.narrow(ref, TOWithdrawManagerEJBHome.class);</span>
<span class="nc" id="L250">		ref = ctx.lookup(&quot;bluepumpkin/custshiftmgr&quot;);</span>
<span class="nc" id="L251">		custShiftReqMgrEJBHome = (CustShiftReqMgrEJBHome)</span>
<span class="nc" id="L252">		        PortableRemoteObject.narrow(ref, CustShiftReqMgrEJBHome.class);</span>

<span class="nc" id="L254">		ref = ctx.lookup(&quot;bluepumpkin/timeoffintervalallocationmanager&quot;);</span>
<span class="nc" id="L255">		timeOffIntervalAllocationManagerEJBHome = (TimeOffIntervalAllocationManagerEJBHome)</span>
<span class="nc" id="L256">		        PortableRemoteObject.narrow(ref, TimeOffIntervalAllocationManagerEJBHome.class);</span>

<span class="nc" id="L258">		ref = ctx.lookup(&quot;bluepumpkin/timeoffbiddingmanager&quot;);</span>
<span class="nc" id="L259">		timeOffBiddingManagerEJBHome = (TimeOffBiddingManagerEJBHome)</span>
<span class="nc" id="L260">		        PortableRemoteObject.narrow(ref, TimeOffBiddingManagerEJBHome.class);</span>

<span class="nc" id="L262">	}</span>

	private static Context getInitialContext(String user, String password)
	        throws Exception {
<span class="nc" id="L266">		String url = SystemProperties.get(&quot;PROVIDER_URL&quot;, &quot;t3://localhost:7001&quot;);</span>
<span class="nc" id="L267">		String provider = SystemProperties.get(&quot;CONTEXT_FACTORY&quot;, &quot;weblogic.jndi.WLInitialContextFactory&quot;);</span>
<span class="nc" id="L268">		Properties properties = new Properties();</span>
<span class="nc" id="L269">		properties.put(Context.INITIAL_CONTEXT_FACTORY, provider);</span>
<span class="nc" id="L270">		properties.put(Context.PROVIDER_URL, url);</span>
<span class="nc bnc" id="L271" title="All 2 branches missed.">		if (user != null) {</span>
<span class="nc" id="L272">			properties.put(Context.SECURITY_PRINCIPAL, user);</span>
<span class="nc bnc" id="L273" title="All 2 branches missed.">			properties.put(Context.SECURITY_CREDENTIALS, password == null ? &quot;&quot; : password);</span>
		}

<span class="nc" id="L276">		return new InitialContext(properties);</span>

	}

	//----------------------------------------------------------------------------
	// Methods that use Home interface methods to generate a Remote interface reference
	//----------------------------------------------------------------------------
	public ShiftSwapRequestManager getShiftSwapRequestManager() throws BbmCreateException {
<span class="nc" id="L284">		return getShiftSwapRequestManager(null, null);</span>
	}

	public ShiftSwapRequestManager getShiftSwapRequestManager(String user, String password)
	        throws BbmCreateException {
		try {
<span class="nc" id="L290">			ShiftSwapRequestManager ssReqMgr = null;</span>
<span class="nc bnc" id="L291" title="All 2 branches missed.">			if (m_useEJBRemoteRefs) {</span>
<span class="nc" id="L292">				initialize(user, password);</span>
<span class="nc" id="L293">				ssReqMgr = ssrequestManagerEJBHome.create();</span>
			} else {
//                ssReqMgr = new ShiftSwapRequestManagerEJB(); //OUTSIDE_CONTAINER
			}

<span class="nc" id="L298">			return ssReqMgr;</span>
<span class="nc" id="L299">		} catch (Exception e) {</span>
<span class="nc" id="L300">			throw RequestUtil.createBbmCreateExceptionWrapper(e, m_cat);</span>
		}
	}


	public ShiftBidAuctionManager getShiftBidAuctionManager() throws BbmCreateException {
<span class="nc" id="L306">		return getShiftBidAuctionManager(null, null);</span>
	}

	public ShiftBidAuctionManager getShiftBidAuctionManager(String user, String password)
	        throws BbmCreateException {
		try {
<span class="nc" id="L312">			ShiftBidAuctionManager sbAuctionMgr = null;</span>
<span class="nc bnc" id="L313" title="All 2 branches missed.">			if (m_useEJBRemoteRefs) {</span>
<span class="nc" id="L314">				initialize(user, password);</span>
<span class="nc" id="L315">				sbAuctionMgr = shiftBidAuctionManagerEJBHome.create();</span>
			} else {
//                sbAuctionMgr = new ShiftBidAuctionManagerEJB(); //OUTSIDE_CONTAINER
			}

<span class="nc" id="L320">			return sbAuctionMgr;</span>
<span class="nc" id="L321">		} catch (Exception e) {</span>
<span class="nc" id="L322">			throw RequestUtil.createBbmCreateExceptionWrapper(e, m_cat);</span>
		}
	}


	public ShiftBidRequestManager getShiftBidRequestManager() throws BbmCreateException {
<span class="nc" id="L328">		return getShiftBidRequestManager(null, null);</span>
	}


	public ShiftBidRequestManager getShiftBidRequestManager(String user, String password)
	        throws BbmCreateException {
		try {
<span class="nc" id="L335">			ShiftBidRequestManager sbReqMgr = null;</span>
<span class="nc bnc" id="L336" title="All 2 branches missed.">			if (m_useEJBRemoteRefs) {</span>
<span class="nc" id="L337">				initialize(user, password);</span>
<span class="nc" id="L338">				sbReqMgr = shiftBidRequestManagerEJBHome.create();</span>
			} else {
//                sbReqMgr = new ShiftBidRequestManagerEJB(); //OUTSIDE_CONTAINER
			}

<span class="nc" id="L343">			return sbReqMgr;</span>
<span class="nc" id="L344">		} catch (Exception e) {</span>
<span class="nc" id="L345">			throw RequestUtil.createBbmCreateExceptionWrapper(e, m_cat);</span>
		}
	}

	public ShiftSwapPostingManager getShiftSwapPostingManager()
	        throws BbmCreateException {
<span class="nc" id="L351">		return getShiftSwapPostingManager(null, null);</span>
	}

	public ShiftSwapPostingManager getShiftSwapPostingManager(String user, String password)
	        throws BbmCreateException {
		try {
<span class="nc" id="L357">			ShiftSwapPostingManager ssPostingMgr = null;</span>
<span class="nc bnc" id="L358" title="All 2 branches missed.">			if (m_useEJBRemoteRefs) {</span>
<span class="nc" id="L359">				initialize(user, password);</span>
<span class="nc" id="L360">				ssPostingMgr = sspostingManagerEJBHome.create();</span>
			} else {
//                ssPostingMgr = new ShiftSwapPostingManagerEJB(); //OUTSIDE_CONTAINER
			}

<span class="nc" id="L365">			return ssPostingMgr;</span>
<span class="nc" id="L366">		} catch (Exception e) {</span>
<span class="nc" id="L367">			throw RequestUtil.createBbmCreateExceptionWrapper(e, m_cat);</span>
		}
	}


	public AutoProcessingRuleManager getAutoProcessingRuleManager()
	        throws BbmCreateException {
<span class="nc" id="L374">		return getAutoProcessingRuleManager(null, null);</span>
	}

	public AutoProcessingRuleManager getAutoProcessingRuleManager(String user, String password)
	        throws BbmCreateException {
		try {
<span class="nc" id="L380">			AutoProcessingRuleManager apRuleMgr = null;</span>
<span class="nc bnc" id="L381" title="All 2 branches missed.">			if (m_useEJBRemoteRefs) {</span>
<span class="nc" id="L382">				initialize(user, password);</span>
<span class="nc" id="L383">				apRuleMgr = autoProcessingRuleManagerEJBHome.create();</span>
			} else {
//                apRuleMgr = new AutoProcessingRuleManagerEJB(); //OUTSIDE_CONTAINER
			}

<span class="nc" id="L388">			return apRuleMgr;</span>
<span class="nc" id="L389">		} catch (Exception e) {</span>
<span class="nc" id="L390">			throw RequestUtil.createBbmCreateExceptionWrapper(e, m_cat);</span>
		}
	}


	public RequestFilingRuleManager getFilingRuleManager()
	        throws BbmCreateException {
<span class="nc" id="L397">		return getFilingRuleManager(null, null);</span>
	}

	public RequestFilingRuleManager getFilingRuleManager(String user, String password)
	        throws BbmCreateException {
		try {
<span class="nc" id="L403">			RequestFilingRuleManager filingRuleMgr = null;</span>
<span class="nc bnc" id="L404" title="All 2 branches missed.">			if (m_useEJBRemoteRefs) {</span>
<span class="nc" id="L405">				initialize(user, password);</span>
<span class="nc" id="L406">				filingRuleMgr = requestFilingRuleManagerEJBHome.create();</span>
			} else {
//                filingRuleMgr = new RequestFilingRuleManagerEJB(); //OUTSIDE_CONTAINER
			}

<span class="nc" id="L411">			return filingRuleMgr;</span>
<span class="nc" id="L412">		} catch (Exception e) {</span>
<span class="nc" id="L413">			throw RequestUtil.createBbmCreateExceptionWrapper(e, m_cat);</span>
		}
	}


	public ValidationRuleManager getValidationRuleManager()
	        throws BbmCreateException {
<span class="nc" id="L420">		return getValidationRuleManager(null, null);</span>
	}

	public ValidationRuleManager getValidationRuleManager(String user, String password)
	        throws BbmCreateException {
		try {
<span class="nc" id="L426">			ValidationRuleManager valRuleMgr = null;</span>

<span class="nc bnc" id="L428" title="All 2 branches missed.">			if (m_useEJBRemoteRefs) {</span>
<span class="nc" id="L429">				initialize(user, password);</span>
<span class="nc" id="L430">				valRuleMgr = m_ValidationRuleManagerEJBHome.create();</span>
			} else {
//                valRuleMgr = new ValidationRuleManagerEJB(); //OUTSIDE_CONTAINER
			}

<span class="nc" id="L435">			return valRuleMgr;</span>
<span class="nc" id="L436">		} catch (Exception e) {</span>
<span class="nc" id="L437">			throw RequestUtil.createBbmCreateExceptionWrapper(e, m_cat);</span>
		}
	}


	public CalendarTimeOffDayFacade getTimeOffDayFacade() throws BbmCreateException {
<span class="nc" id="L443">		return getTimeOffDayFacade(null, null);</span>
	}

	public CalendarTimeOffDayFacade getTimeOffDayFacade(String user, String password)
	        throws BbmCreateException {
		try {
<span class="nc" id="L449">			CalendarTimeOffDayFacade TOCalFacade = null;</span>
<span class="nc bnc" id="L450" title="All 2 branches missed.">			if (m_useEJBRemoteRefs) {</span>
<span class="nc" id="L451">				initialize(user, password);</span>
<span class="nc" id="L452">				TOCalFacade = calendarTimeOffDayFacadeEJBHome.create();</span>
			} else {
//                TOCalFacade = new CalendarTimeOffDayFacadeEJB(); //OUTSIDE_CONTAINER
			}

<span class="nc" id="L457">			return TOCalFacade;</span>
<span class="nc" id="L458">		} catch (Exception e) {</span>
<span class="nc" id="L459">			throw RequestUtil.createBbmCreateExceptionWrapper(e, m_cat);</span>
		}
	}

	public TORequestManager getTimeOffRequestManager()
	        throws BbmCreateException {
<span class="nc" id="L465">		return getTimeOffRequestManager(null, null);</span>
	}

	public FlexTimeRequestManager getFlexTimeRequestManager()
	        throws BbmCreateException {
<span class="nc" id="L470">		return getFlexTimeRequestManager(null, null);</span>
	}

	public TORequestManager getTimeOffRequestManager(String user, String password)
	        throws BbmCreateException {
		try {
<span class="nc" id="L476">			TORequestManager toReqMgr = null;</span>
<span class="nc bnc" id="L477" title="All 2 branches missed.">			if (m_useEJBRemoteRefs) {</span>
<span class="nc" id="L478">				initialize(user, password);</span>
<span class="nc" id="L479">				toReqMgr = timeOffRequestManagerEJBHome.create();</span>
			} else {
//                toReqMgr = new TORequestManagerEJB(); //OUTSIDE_CONTAINER
			}

<span class="nc" id="L484">			return toReqMgr;</span>
<span class="nc" id="L485">		} catch (Exception e) {</span>
<span class="nc" id="L486">			throw RequestUtil.createBbmCreateExceptionWrapper(e, m_cat);</span>
		}
	}

	public FlexTimeRequestManager getFlexTimeRequestManager(String user, String password)
	        throws BbmCreateException {
		try {
<span class="nc" id="L493">			FlexTimeRequestManager flexReqMgr = null;</span>
<span class="nc bnc" id="L494" title="All 2 branches missed.">			if (m_useEJBRemoteRefs) {</span>
<span class="nc" id="L495">				initialize(user, password);</span>
<span class="nc" id="L496">				flexReqMgr = flextimeRequestManagerEJBHome.create();</span>
			} else {
//                flexReqMgr = new FlexRequestManagerEJB(); //OUTSIDE_CONTAINER
			}

<span class="nc" id="L501">			return flexReqMgr;</span>
<span class="nc" id="L502">		} catch (Exception e) {</span>
<span class="nc" id="L503">			throw RequestUtil.createBbmCreateExceptionWrapper(e, m_cat);</span>
		}
	}

	public CommonRequestManager getCommonRequestManager()
	        throws BbmCreateException {
<span class="nc" id="L509">		return getCommonRequestManager(null, null);</span>
	}

	public CommonRequestManager getCommonRequestManager(String user, String password)
	        throws BbmCreateException {
		try {
<span class="nc" id="L515">			CommonRequestManager commonReqMgr = null;</span>
<span class="nc bnc" id="L516" title="All 2 branches missed.">			if (m_useEJBRemoteRefs) {</span>
<span class="nc" id="L517">				initialize(user, password);</span>
<span class="nc" id="L518">				commonReqMgr = commonRequestManagerEJBHome.create();</span>
			} else {
//                commonReqMgr = new CommonRequestManagerEJB(); //OUTSIDE_CONTAINER
			}

<span class="nc" id="L523">			return commonReqMgr;</span>
<span class="nc" id="L524">		} catch (Exception e) {</span>
<span class="nc" id="L525">			throw RequestUtil.createBbmCreateExceptionWrapper(e, m_cat);</span>
		}
	}

	public OrganizationConfigManager getOrganizationConfigManager(boolean isInWhatIfMode)
	        throws BbmCreateException {
<span class="nc" id="L531">		return getOrganizationConfigManager(isInWhatIfMode, null, null);</span>
	}

	public OrganizationConfigManager getOrganizationConfigManager()
	        throws BbmCreateException {
<span class="nc" id="L536">		return getOrganizationConfigManager(null, null);</span>
	}

	public OrganizationConfigManager getOrganizationConfigManager(String user, String password)
	        throws BbmCreateException {
<span class="nc" id="L541">		return getOrganizationConfigManager(false, null, null);</span>
	}

	public OrganizationConfigManager getOrganizationConfigManager(boolean isInWhatIfMode, String user, String password)
	        throws BbmCreateException {
		try {
<span class="nc" id="L547">			OrganizationConfigManager orgCfgMgr = null;</span>
<span class="nc bnc" id="L548" title="All 2 branches missed.">			if (m_useEJBRemoteRefs) {</span>
<span class="nc" id="L549">				initialize(user, password);</span>
<span class="nc bnc" id="L550" title="All 2 branches missed.">				if (!isInWhatIfMode) {</span>
<span class="nc" id="L551">					orgCfgMgr = m_OrganizationConfigManagerEJBHome.create();</span>
				} else {
<span class="nc" id="L553">					orgCfgMgr = m_OrganizationConfigManagerEJBHomeWif.create();</span>
				}
			}

<span class="nc" id="L557">			return orgCfgMgr;</span>
<span class="nc" id="L558">		} catch (Exception e) {</span>
<span class="nc" id="L559">			throw RequestUtil.createBbmCreateExceptionWrapper(e, m_cat);</span>
		}
	}

	public IRequestType getRequestManagerByType(String requestType)
	        throws BbmCreateException {
<span class="nc" id="L565">		return getRequestManagerByType(requestType, null, null);</span>
	}

	public IRequestType getRequestManagerByType(String requestType, String user, String password)
	        throws BbmCreateException {
<span class="nc bnc" id="L570" title="All 2 branches missed.">		if (requestType.equals(Request.REQUESTTYPE_SHIFTBID)) {</span>
<span class="nc" id="L571">			return getShiftBidRequestManager(user, password);</span>
		}

<span class="nc bnc" id="L574" title="All 2 branches missed.">		if (requestType.equals(Request.REQUESTTYPE_SHIFTSWAP)) {</span>
<span class="nc" id="L575">			return getShiftSwapRequestManager(user, password);</span>
<span class="nc bnc" id="L576" title="All 2 branches missed.">		} else if (requestType.equals(Request.REQUESTTYPE_TIMEOFF)) {</span>
<span class="nc" id="L577">			return getTimeOffRequestManager(user, password);</span>
<span class="nc bnc" id="L578" title="All 2 branches missed.">		} else if (requestType.equals(Request.REQUESTTYPE_FLEXTIME)) {</span>
<span class="nc" id="L579">			return getFlexTimeRequestManager(user, password);</span>
<span class="nc bnc" id="L580" title="All 2 branches missed.">		} else if (requestType.equals(Request.REQUESTTYPE_CUSTSHIFT)) {</span>
<span class="nc" id="L581">			return getCustShiftReqMgr(user, password);</span>
		} else
<span class="nc" id="L583">			return null;</span>
	}

	public TOWaitlistManager getTOWaitlistManager(String user, String password) throws BbmCreateException {
		try {
<span class="nc" id="L588">			TOWaitlistManager toReqMgr = null;</span>
<span class="nc bnc" id="L589" title="All 2 branches missed.">			if (m_useEJBRemoteRefs) {</span>
<span class="nc" id="L590">				initialize(user, password);</span>
<span class="nc" id="L591">				toReqMgr = toWaitlistManagerEJBHome.create();</span>
			} else {
				//toReqMgr = new TOWaitlistManagerEJB(); //OUTSIDE_CONTAINER
			}
<span class="nc" id="L595">			return toReqMgr;</span>
<span class="nc" id="L596">		} catch (Exception e) {</span>
<span class="nc" id="L597">			throw RequestUtil.createBbmCreateExceptionWrapper(e, m_cat);</span>
		}
	}

	public TOWaitlistManager getTOWaitlistManager() throws BbmCreateException {
<span class="nc" id="L602">		return getTOWaitlistManager(null, null);</span>
	}

	public TOWithdrawManager getTOWithdrawManager(String user, String password) throws BbmCreateException {
		try {
<span class="nc" id="L607">			TOWithdrawManager toReqMgr = null;</span>
<span class="nc bnc" id="L608" title="All 2 branches missed.">			if (m_useEJBRemoteRefs) {</span>
<span class="nc" id="L609">				initialize(user, password);</span>
<span class="nc" id="L610">				toReqMgr = toWithdrawManagerEJBHome.create();</span>
			} else {
				//toReqMgr = new TOWithdrawManagerEJB(); //OUTSIDE_CONTAINER
			}
<span class="nc" id="L614">			return toReqMgr;</span>
<span class="nc" id="L615">		} catch (Exception e) {</span>
<span class="nc" id="L616">			throw RequestUtil.createBbmCreateExceptionWrapper(e, m_cat);</span>
		}
	}

	public TOWithdrawManager getTOWithdrawManager() throws BbmCreateException {
<span class="nc" id="L621">		return getTOWithdrawManager(null, null);</span>
	}

	public TOHoursPerDayManager getTOHoursPerDayManager(String user, String password) throws BbmCreateException {
		try {
<span class="nc" id="L626">			TOHoursPerDayManager toReqMgr = null;</span>
<span class="nc bnc" id="L627" title="All 2 branches missed.">			if (m_useEJBRemoteRefs) {</span>
<span class="nc" id="L628">				initialize(user, password);</span>
<span class="nc" id="L629">				toReqMgr = toHoursPerDayManagerEJBHome.create();</span>
			} else {
				//toReqMgr = new TOHoursPerDayManagerEJB(); //OUTSIDE_CONTAINER
			}
<span class="nc" id="L633">			return toReqMgr;</span>
<span class="nc" id="L634">		} catch (Exception e) {</span>
<span class="nc" id="L635">			throw RequestUtil.createBbmCreateExceptionWrapper(e, m_cat);</span>
		}
	}

	public TOHoursPerDayManager getTOHoursPerDayManager() throws BbmCreateException {
<span class="nc" id="L640">		return getTOHoursPerDayManager(null, null);</span>
	}

	public TimeOffIntervalAllocationManager getTimeOffIntervalAllocationManager(String user, String password) throws BbmCreateException {
		try {
<span class="nc" id="L645">			TimeOffIntervalAllocationManager mgr = null;</span>
<span class="nc bnc" id="L646" title="All 2 branches missed.">			if (m_useEJBRemoteRefs) {</span>
<span class="nc" id="L647">				initialize(user, password);</span>
<span class="nc" id="L648">				mgr = timeOffIntervalAllocationManagerEJBHome.create();</span>
			} else {

			}
<span class="nc" id="L652">			return mgr;</span>
<span class="nc" id="L653">		} catch (Exception e) {</span>
<span class="nc" id="L654">			throw RequestUtil.createBbmCreateExceptionWrapper(e, m_cat);</span>
		}
	}

	public TimeOffIntervalAllocationManager getTimeOffIntervalAllocationManager() throws BbmCreateException {
<span class="nc" id="L659">		return getTimeOffIntervalAllocationManager(null, null);</span>
	}

	public CustShiftReqMgr getCustShiftReqMgr() throws BbmCreateException {
<span class="nc" id="L663">		return getCustShiftReqMgr(null, null);</span>
	}

	public CustShiftReqMgr getCustShiftReqMgr(String user, String password) throws BbmCreateException {
		try {
<span class="nc" id="L668">			CustShiftReqMgr custShiftReqMgr = null;</span>
<span class="nc bnc" id="L669" title="All 2 branches missed.">			if (m_useEJBRemoteRefs) {</span>
<span class="nc" id="L670">				initialize(user, password);</span>
<span class="nc" id="L671">				custShiftReqMgr = custShiftReqMgrEJBHome.create();</span>
			}
<span class="nc" id="L673">			return custShiftReqMgr;</span>
<span class="nc" id="L674">		} catch (Exception e) {</span>
<span class="nc" id="L675">			throw RequestUtil.createBbmCreateExceptionWrapper(e, m_cat);</span>
		}
	}
	public TimeOffBiddingManager getTimeOffBiddingManager(String user, String password) throws BbmCreateException {
		try {
<span class="nc" id="L680">			TimeOffBiddingManager mgr = null;</span>
<span class="nc bnc" id="L681" title="All 2 branches missed.">			if (m_useEJBRemoteRefs) {</span>
<span class="nc" id="L682">				initialize(user, password);</span>
<span class="nc" id="L683">				mgr = timeOffBiddingManagerEJBHome.create();</span>
			} else {

			}
<span class="nc" id="L687">			return mgr;</span>
<span class="nc" id="L688">		} catch (Exception e) {</span>
<span class="nc" id="L689">			throw RequestUtil.createBbmCreateExceptionWrapper(e, m_cat);</span>
		}
	}

	public TimeOffBiddingManager getTimeOffBiddingManager() throws BbmCreateException {
<span class="nc" id="L694">		return getTimeOffBiddingManager(null, null);</span>
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>