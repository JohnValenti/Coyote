<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>FilingRulePC.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">QA Code Coverage</a> &gt; <a href="index.source.html" class="el_package">com.bluepumpkin.web.rm.setup.filingrules</a> &gt; <span class="el_source">FilingRulePC.java</span></div><h1>FilingRulePC.java</h1><pre class="source lang-java linenums">package com.bluepumpkin.web.rm.setup.filingrules;

import java.util.*;

import com.bluepumpkin.common.datatypes.ID;
import com.bluepumpkin.common.datatypes.LocalDate;
import com.bluepumpkin.common.datatypes.StringsPair;
import com.bluepumpkin.common.util.StringUtil;
import com.bluepumpkin.ejb.rm.setup.filingrules.model.RequestFilingRule;
import com.bluepumpkin.ejb.rm.util.LicenseUtil;
import com.bluepumpkin.ejb.rm.l10n.RmEjbBundleKey;
import com.bluepumpkin.ejb.rm.requests.common.ejb.RequestUtil;
import com.bluepumpkin.ejb.rm.requests.common.model.Request;
import com.bluepumpkin.web.rm.l10n.RmWebBundleKey;
import com.bluepumpkin.web.rm.setup.RmSetupUtil;
import com.witness.web.uif.keys.JavaScriptFileID;
import com.witness.web.uif.pagecomponent.container.ContainerPC;
import com.witness.web.uif.pagecomponent.container.ListContainerPC;
import com.witness.web.uif.pagecomponent.picker.date.DatePickerPC;
import com.witness.web.uif.pagecomponent.picker.date.DateRangePickerPC;
import com.witness.web.uif.system.RequestContext;
import com.witness.web.uif.util.js.*;
import com.witness.web.uif.util.HtmlUtil;
import com.witness.web.uif.util.html.HtmlChoiceInput;

/**
 * Title          FilingRuleEditPageModel
 * Description    Used to display the Create/Edit filing Rule page
 * Copyright      Copyright (c) 2002
 * Company        Blue Pumpkin Software, Inc
 * @author        Shubhangi Chavan
 * @version       1.0
 */
public class FilingRulePC extends ContainerPC {
	private static final String HTML_BR = &quot;&lt;br/&gt;&quot;;
	private static final String FORMPC_WIDTH = &quot;99%&quot;;
	private static final String FWRAPPER = &quot;fWrapper&quot;;
	private static final String HEADERCSS = &quot;tbl2ndHdrLeft&quot;;

	/**
	 * set the form element names
	 *
	 * NOTE: Form field names, for use by field validators;
	 * must begin with lowercase letter
	 */
	private static final String TIME_OFF_ACTIVITY_ID_FN  = &quot;timeOffActivityId&quot;;
	private static final String REQUEST_TYPE_FN       = &quot;requestType&quot;;
	private static final String DAY_RANGE_FN          = &quot;dayRange&quot;;
	private static final String DAY_TYPES_FN          = &quot;dayType&quot;;
	private static final String APPLIED_FN            = &quot;applied&quot;;
	private static final String ORG_SCOPE_FN          = &quot;orgScope&quot;;
	private static final String REQUEST_SUB_TYPE_FN = &quot;requestSubType&quot;;

	private static final String TIME_TYPE_FN          = &quot;timeType&quot;;
	private static final String DATE_COMPARE_FN       = &quot;dateCompare&quot;;
	private static final String DATE_FN               = &quot;date&quot;;
	private static final String DATE_RANGE_FN         = &quot;dateRange&quot;;
	private static final String INTERVAL_TYPE_FN      = &quot;intervalType&quot;;
	protected static final String INTERVAL_COUNT_FN     = &quot;intervalCount&quot;;
	private static final String INTERVAL_UNIT_FN	  = &quot;intervalUnit&quot;;
	private static final String TIME_LINE_FN		  = &quot;timeLine&quot;;

	public static final String DAYRANGE_ALL_DAYS = RequestFilingRule.DAYRANGE_ALL_DAYS;
	public static final String DAYRANGE_DAY_TYPE = RequestFilingRule.DAYRANGE_DAY_TYPE;
	public static final String DAYRANGE_DATES = RequestFilingRule.DAYRANGE_DATES;

	public static final String DATECOMPARISION_ON_DATE = RequestFilingRule.DATECOMPARISION_ON_DATE;
	public static final String DATECOMPARISION_BEFORE_DATE = RequestFilingRule.DATECOMPARISION_BEFORE_DATE;
	public static final String DATECOMPARISION_AFTER_DATE = RequestFilingRule.DATECOMPARISION_AFTER_DATE;

	public static final String INTERVALTYPE_LESSTHAN = RequestFilingRule.INTERVALTYPE_LESSTHAN;
	public static final String INTERVALTYPE_EQUALTO = RequestFilingRule.INTERVALTYPE_EQUALTO;
	public static final String INTERVALTYPE_MORETHAN = RequestFilingRule.INTERVALTYPE_MORETHAN;

	public static final String TIMETYPE_BYDATE = RequestFilingRule.TIMETYPE_BYDATE;
	public static final String TIMETYPE_INTERVAL = RequestFilingRule.TIMETYPE_INTERVAL;

	public static final String FLEX_REQUEST_SUBTYPE_BEFORE = &quot;0&quot;;
	public static final String FLEX_REQUEST_SUBTYPE_AFTER = &quot;1&quot;;

	public static final String RADIO_SCOPE_THIS_ORG_ONLY = RequestFilingRule.SCOPE_THIS_ORG_ONLY;
	public static final String RADIO_SCOPE_SUB_ORGS_NO_OVERRIDE = RequestFilingRule.SCOPE_SUB_ORGS_NO_OVERRIDE;
	public static final String RADIO_SCOPE_SUB_ORGS_ALLOW_OVERRIDE = RequestFilingRule.SCOPE_SUB_ORGS_ALLOW_OVERRIDE;


	private ResourceBundle     m_rmBundle;
	private ResourceBundle rmEjbBundle;

<span class="nc" id="L89">	private String             m_pageType = RENDER_TIME_OFF_PAGE;</span>
	private DatePickerPC       m_fileByDatePC;
	private DateRangePickerPC  m_dateRangePC;
	private ListContainerPC    m_affectedRequestsPC;
	private ListContainerPC    m_filedByPC;
	private ListContainerPC    m_orgScopePC;
	private RequestFilingRule  m_filingRule;
	private TimeZone		   m_orgTimeZone;
<span class="nc" id="L97">	private int				   m_intervalCount = 1;</span>
	private String			   m_intervalUnit;

<span class="nc" id="L100">	private Collection m_timeOffTypeList    = new ArrayList();</span>
<span class="nc" id="L101">	private Collection m_dayTypeList        = new ArrayList();</span>
<span class="nc" id="L102">	private Collection m_dateComparisonList = new ArrayList();</span>
<span class="nc" id="L103">	private Collection m_intervalTypeList   = new ArrayList();</span>
<span class="nc" id="L104">	private Collection m_intervalUnitList   = new ArrayList();</span>
<span class="nc" id="L105">	private Collection&lt;StringsPair&gt; flexBeforeAfterList = new ArrayList&lt;StringsPair&gt;();</span>

	//&quot;time-off&quot;;
	private static final String RENDER_TIME_OFF_PAGE    = Request.REQUESTTYPE_TIMEOFF;
	//&quot;time-off-withdraw&quot;;
	private static final String RENDER_TIME_OFF_WITHDRAW_PAGE    = Request.REQUESTTYPE_TIMEOFF_WITHDRAW;
	//&quot;shift-swap&quot;;
	private static final String RENDER_SHIFT_SWAP_PAGE  = Request.REQUESTTYPE_SHIFTSWAP;
	//&quot;shift-bid&quot;;
	private static final String RENDER_SHIFT_BID_PAGE   = Request.REQUESTTYPE_SHIFTBID;
	//&quot;custom-shift&quot;;
	private static final String RENDER_CUSTOM_SHIFT_PAGE   = Request.REQUESTTYPE_CUSTSHIFT;
	private static final String RENDER_FLEX_TIME_PAGE   = Request.REQUESTTYPE_FLEXTIME;
	//&quot;shift-swap-withdraw&quot;;
	private static final String RENDER_SHIFT_SWAP_WITHDRAW_PAGE    = Request.REQUESTTYPE_SHIFTSWAP_WITHDRAW;

	public FilingRulePC(RequestContext context, RequestFilingRule filingRule, TimeZone orgTimeZone) {
<span class="nc" id="L122">		super(context);</span>
		// NOTE: Need to set name before add child because of issue with ContainerPC
		// It changes the name of child components which is causing issue with pickers
<span class="nc" id="L125">		setName(&quot;filingrulePC&quot;);</span>
<span class="nc" id="L126">		m_rmBundle = m_localizer.getBundle(RmWebBundleKey.BUNDLE_NAME);</span>
<span class="nc" id="L127">		rmEjbBundle = m_localizer.getBundle(RmEjbBundleKey.BUNDLE_NAME);</span>

<span class="nc bnc" id="L129" title="All 2 branches missed.">		if (filingRule != null) {</span>
<span class="nc" id="L130">			m_filingRule = filingRule;</span>
		}

<span class="nc" id="L133">		m_orgTimeZone = orgTimeZone;</span>
<span class="nc" id="L134">		m_fileByDatePC = new DatePickerPC(context, DATE_FN);</span>
<span class="nc" id="L135">		m_fileByDatePC.setTimeZone(orgTimeZone);</span>
<span class="nc" id="L136">		m_fileByDatePC.setIsTimeEnabled(true);</span>

<span class="nc" id="L138">		m_dateRangePC = new DateRangePickerPC(context, DATE_RANGE_FN, orgTimeZone);</span>
<span class="nc" id="L139">		m_dateRangePC.getEndDatePickerPC().setIsTimeEnabled(true);</span>
<span class="nc" id="L140">		m_dateRangePC.getStartDatePickerPC().setIsTimeEnabled(true);</span>

<span class="nc" id="L142">		addChildComponent(m_fileByDatePC);</span>
<span class="nc" id="L143">		addChildComponent(m_dateRangePC);</span>

<span class="nc" id="L145">		m_affectedRequestsPC = new ListContainerPC(context);</span>
<span class="nc" id="L146">		m_filedByPC = new ListContainerPC(context);</span>
<span class="nc" id="L147">		m_orgScopePC = new ListContainerPC(context);</span>
<span class="nc" id="L148">		setPageType(getRequestType());</span>

<span class="nc" id="L150">		addRequiredJavaScriptFile(JavaScriptFileID.JQUERY);</span>
<span class="nc" id="L151">	}</span>

	public void setPageType(String pageType) {
<span class="nc" id="L154">		m_pageType = pageType;</span>
<span class="nc" id="L155">	}</span>

	public void setRequestFilingRule(RequestFilingRule filingRule) {
<span class="nc" id="L158">		m_filingRule = filingRule;</span>
<span class="nc" id="L159">	}</span>

	public void  setTimeOffTypeList(Collection timeOffTypeList) {
<span class="nc" id="L162">		m_timeOffTypeList = timeOffTypeList;</span>
<span class="nc" id="L163">	}</span>

	public void setDayTypeList(Collection dayTypeList) {
<span class="nc" id="L166">		m_dayTypeList = dayTypeList;</span>
<span class="nc" id="L167">	}</span>

	public void setComparisonTypeList(Collection dateComparisonTypeList) {
<span class="nc" id="L170">		m_dateComparisonList = dateComparisonTypeList;</span>
<span class="nc" id="L171">	}</span>

	public void setIntervalTypeList(Collection intervalTypeList) {
<span class="nc" id="L174">		m_intervalTypeList = intervalTypeList;</span>
<span class="nc" id="L175">	}</span>

	public void setIntervalUnitList(Collection intervalUnitList) {
<span class="nc" id="L178">		m_intervalUnitList = intervalUnitList;</span>
<span class="nc" id="L179">	}</span>

	public void setFlexBeforeAfterList(Collection&lt;StringsPair&gt; theFlexBeforeAfterList) {
<span class="nc" id="L182">		flexBeforeAfterList = theFlexBeforeAfterList;</span>
<span class="nc" id="L183">	}</span>

	/**
	 * Get string of the HTML representing this component.
	 */
	@Override
	public String getHtmlDisplay() {
<span class="nc" id="L190">		setTemplate(&quot;&lt;table width=\&quot;99%\&quot; border=\&quot;0\&quot; cellspacing=\&quot;5\&quot; cellpadding=\&quot;0\&quot;&gt;&quot; + &quot;&lt;tr&gt;&lt;td&gt;{0}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;{1}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;{2}&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&quot;);</span>
<span class="nc bnc" id="L191" title="All 2 branches missed.">		if (m_pageType.equals(RENDER_SHIFT_BID_PAGE)) {</span>
<span class="nc" id="L192">			m_affectedRequestsPC = null;</span>
<span class="nc" id="L193">			addComponent(getFiledByContainer());</span>
<span class="nc" id="L194">			addComponent(&quot;&quot;);</span>
		} else {
			String affectedRequestsTitle;
<span class="nc bnc" id="L197" title="All 2 branches missed.">			if (m_pageType.equals(RENDER_SHIFT_SWAP_PAGE)) {</span>
<span class="nc" id="L198">				affectedRequestsTitle = RmWebBundleKey.ORG_RM_FILING_RULE_SS_REQUEST_TITLE;</span>
<span class="nc bnc" id="L199" title="All 2 branches missed.">			} else if (m_pageType.equals(RENDER_CUSTOM_SHIFT_PAGE)) {</span>
<span class="nc" id="L200">				affectedRequestsTitle = RmWebBundleKey.ORG_RM_FILING_RULE_CS_REQUEST_TITLE;</span>
<span class="nc bnc" id="L201" title="All 2 branches missed.">			} else if (m_pageType.equals(RENDER_TIME_OFF_WITHDRAW_PAGE)) {</span>
<span class="nc" id="L202">				affectedRequestsTitle = RmWebBundleKey.ORG_RM_FILING_RULE_APPROVED_TO_WITHDRAW_REQUEST_TITLE;</span>
<span class="nc bnc" id="L203" title="All 2 branches missed.">			} else if (m_pageType.equals(RENDER_SHIFT_SWAP_WITHDRAW_PAGE)) {</span>
<span class="nc" id="L204">				affectedRequestsTitle = RmWebBundleKey.ORG_RM_FILING_RULE_APPROVED_SS_WITHDRAW_REQUEST_TITLE;</span>
<span class="nc bnc" id="L205" title="All 2 branches missed.">			}else if (m_pageType.equals(RENDER_FLEX_TIME_PAGE)) {</span>
<span class="nc" id="L206">				affectedRequestsTitle = RmWebBundleKey.ORG_RM_FILING_RULE_FT_REQUEST_TITLE;</span>
			} else {
<span class="nc" id="L208">				affectedRequestsTitle = RmWebBundleKey.ORG_RM_FILING_RULE_TO_REQUEST_TITLE;</span>
			}

<span class="nc" id="L211">			m_affectedRequestsPC.setTitle(i18n(m_rmBundle, affectedRequestsTitle));</span>
<span class="nc bnc" id="L212" title="All 4 branches missed.">			if (m_pageType.equals(RENDER_TIME_OFF_WITHDRAW_PAGE) || m_pageType.equals(RENDER_SHIFT_SWAP_WITHDRAW_PAGE)) {</span>
<span class="nc" id="L213">				addComponent(&quot;&quot;);</span>
			} else {
<span class="nc" id="L215">				addComponent(getAffectedRequestsContainer());</span>
			}
<span class="nc" id="L217">			addComponent(getFiledByContainer());</span>
		}

<span class="nc" id="L220">		addComponent(getOrgScopeContainer());</span>
<span class="nc" id="L221">		return super.getHtmlDisplay();</span>
	}//getHtmlDisplay

	/**
	 * Display the data to the user by fetching the value from the
	 * m_filingRule object
	 */
	private ListContainerPC getAffectedRequestsContainer() {
<span class="nc" id="L229">		m_affectedRequestsPC.setWidth(FORMPC_WIDTH);</span>
<span class="nc" id="L230">		m_affectedRequestsPC.setWrapperCSSClass(FWRAPPER);</span>
<span class="nc" id="L231">		m_affectedRequestsPC.setLastRowType(ListContainerPC.LAST_ROW_NONE);</span>
<span class="nc" id="L232">		m_affectedRequestsPC.setHeaderCSSSClass(HEADERCSS);</span>

<span class="nc" id="L234">		String dayRangeChoice = getDayRangeChoice();</span>
<span class="nc" id="L235">		String hiddenInput = &quot;&quot;;</span>

<span class="nc bnc" id="L237" title="All 2 branches missed.">		if(m_pageType.equals(RENDER_TIME_OFF_PAGE))	{</span>

<span class="nc" id="L239">			hiddenInput = HtmlUtil.makeHiddenInput(REQUEST_TYPE_FN,Request.REQUESTTYPE_TIMEOFF);</span>

<span class="nc" id="L241">			m_affectedRequestsPC.addRowData(hiddenInput + getActivitySelectionRow());</span>
<span class="nc" id="L242">			m_affectedRequestsPC.addRowData(getAllOptionRow(dayRangeChoice,&quot;TO&quot;));</span>
<span class="nc" id="L243">			m_affectedRequestsPC.addRowData(getDayTypeSelectionRow(dayRangeChoice));</span>

<span class="nc bnc" id="L245" title="All 2 branches missed.">		} else if(m_pageType.equals(RENDER_SHIFT_SWAP_PAGE)) {</span>

<span class="nc" id="L247">			hiddenInput = HtmlUtil.makeHiddenInput(REQUEST_TYPE_FN,Request.REQUESTTYPE_SHIFTSWAP);</span>
<span class="nc" id="L248">			m_affectedRequestsPC.addRowData(hiddenInput + getAllOptionRow(dayRangeChoice,&quot;SS&quot;));</span>

<span class="nc bnc" id="L250" title="All 2 branches missed.">		} else if(m_pageType.equals(RENDER_CUSTOM_SHIFT_PAGE)) {</span>

<span class="nc" id="L252">			hiddenInput = HtmlUtil.makeHiddenInput(REQUEST_TYPE_FN,Request.REQUESTTYPE_CUSTSHIFT);</span>
<span class="nc" id="L253">			m_affectedRequestsPC.addRowData(hiddenInput + RmSetupUtil.geCustomShiftCheckboxesRow(m_rmBundle, m_localizer,</span>
<span class="nc" id="L254">					m_filingRule.getRequestSubTypeRegNewShift(), m_filingRule.getRequestSubTypeRegShiftChange(),</span>
<span class="nc" id="L255">					m_filingRule.getRequestSubTypeOTNewShift(), m_filingRule.getRequestSubTypeOTShiftChange()));</span>
<span class="nc" id="L256">			m_affectedRequestsPC.addRowData(&quot;&lt;b&gt;&quot; + i18n(m_rmBundle, RmWebBundleKey.ORG_RM_FILING_RULE_REQUESTED_DATES) + &quot;&lt;/b&gt;&quot;);</span>
<span class="nc" id="L257">			m_affectedRequestsPC.addRowData(getAllOptionRow(dayRangeChoice,&quot;SC&quot;));</span>
<span class="nc bnc" id="L258" title="All 2 branches missed.">		} else if(m_pageType.equals(RENDER_FLEX_TIME_PAGE))	{</span>

<span class="nc" id="L260">			hiddenInput = HtmlUtil.makeHiddenInput(REQUEST_TYPE_FN,Request.REQUESTTYPE_FLEXTIME);</span>

<span class="nc" id="L262">			m_affectedRequestsPC.addRowData(hiddenInput + getActivitySelectionRow());</span>
<span class="nc" id="L263">			m_affectedRequestsPC.addRowData(getFlexBeforeAfterRow());</span>
<span class="nc" id="L264">			m_affectedRequestsPC.addRowData(HTML_BR);</span>

<span class="nc" id="L266">			m_affectedRequestsPC.addRowData(getAllOptionRow(dayRangeChoice,&quot;FT&quot;));</span>
<span class="nc" id="L267">			m_affectedRequestsPC.addRowData(getDayTypeSelectionRow(dayRangeChoice));</span>

		}

		// in either case add the selection row that contains the Date range option
<span class="nc" id="L272">		m_affectedRequestsPC.addRowData(hiddenInput + getDayRangeRow(dayRangeChoice));</span>

<span class="nc" id="L274">		return m_affectedRequestsPC;</span>
	}

	/**
	 * Display the data to the user by fetching the value from the m_filingRule object
	 */
	private ListContainerPC getFiledByContainer() {
<span class="nc" id="L281">		m_filedByPC.setTitle(i18n(m_rmBundle, RmWebBundleKey.ORG_RM_FILING_RULE_FILED_BY_TITLE));</span>
<span class="nc" id="L282">		m_filedByPC.setWidth(FORMPC_WIDTH);</span>
<span class="nc" id="L283">		m_filedByPC.setWrapperCSSClass(FWRAPPER);</span>
<span class="nc" id="L284">		m_filedByPC.setLastRowType(ListContainerPC.LAST_ROW_NONE);</span>
<span class="nc" id="L285">		m_filedByPC.setHeaderCSSSClass(HEADERCSS);</span>

<span class="nc" id="L287">		String hiddenAdvInput = HtmlUtil.makeHiddenInput(APPLIED_FN, getApplied());</span>

<span class="nc bnc" id="L289" title="All 4 branches missed.">		if (m_pageType.equals(RENDER_SHIFT_BID_PAGE) || m_pageType.equals(RENDER_TIME_OFF_WITHDRAW_PAGE)) { //SB &amp; TOWITHDRAW</span>
<span class="nc bnc" id="L290" title="All 2 branches missed.">			String requestType = m_pageType.equals(RENDER_SHIFT_BID_PAGE) ? Request.REQUESTTYPE_SHIFTBID : RENDER_TIME_OFF_WITHDRAW_PAGE;</span>
<span class="nc" id="L291">			String hiddenInput1 = HtmlUtil.makeHiddenInput(REQUEST_TYPE_FN, requestType);</span>
<span class="nc" id="L292">			String hiddenInput2 = HtmlUtil.makeHiddenInput(TIME_TYPE_FN, TIMETYPE_INTERVAL);</span>
<span class="nc bnc" id="L293" title="All 2 branches missed.">			String reqTypeStr = m_pageType.equals(RENDER_SHIFT_BID_PAGE)?</span>
					&quot;SB&quot;:&quot;TOWITHDRAW&quot;;
<span class="nc" id="L295">			m_filedByPC.addRowData(hiddenAdvInput + hiddenInput1 + hiddenInput2 + getInAdvanceLabel(reqTypeStr));</span>

<span class="nc bnc" id="L297" title="All 2 branches missed.">		} else if (m_pageType.equals(RENDER_SHIFT_SWAP_WITHDRAW_PAGE)) {</span>
			//SSWITHDRAW
<span class="nc" id="L299">			String requestType = RENDER_SHIFT_SWAP_WITHDRAW_PAGE;</span>
<span class="nc" id="L300">			String hiddenInput1 = HtmlUtil.makeHiddenInput(REQUEST_TYPE_FN, requestType);</span>
<span class="nc" id="L301">			String hiddenInput2 = HtmlUtil.makeHiddenInput(TIME_TYPE_FN, TIMETYPE_INTERVAL);</span>
<span class="nc" id="L302">			String reqTypeStr = &quot;SSWITHDRAW&quot;;</span>
<span class="nc" id="L303">			m_filedByPC.addRowData(hiddenAdvInput + hiddenInput1 + hiddenInput2 + getInAdvanceLabel(reqTypeStr));</span>

<span class="nc bnc" id="L305" title="All 2 branches missed.">		} else if (m_pageType.equals(RENDER_FLEX_TIME_PAGE)) {</span>
			//Flex Time
<span class="nc" id="L307">			String reqTypeStr = &quot;FT&quot;;</span>
<span class="nc" id="L308">			String hiddenInput1 = HtmlUtil.makeHiddenInput(TIME_TYPE_FN, TIMETYPE_INTERVAL);</span>
<span class="nc" id="L309">			m_filedByPC.addRowData(hiddenAdvInput + hiddenInput1 +  getInAdvanceRow(reqTypeStr, false));</span>
<span class="nc" id="L310">		} else {</span>
			//SS &amp; TO &amp; CS
<span class="nc bnc" id="L312" title="All 2 branches missed.">			String reqTypeStr = m_pageType.equals(RENDER_SHIFT_SWAP_PAGE) ? &quot;SS&quot; : &quot;TO&quot;;</span>
<span class="nc bnc" id="L313" title="All 2 branches missed.">			reqTypeStr = m_pageType.equals(RENDER_CUSTOM_SHIFT_PAGE) ? &quot;CS&quot; : reqTypeStr;</span>

<span class="nc" id="L315">			m_filedByPC.addRowData(getDateCompareRow());</span>
<span class="nc" id="L316">			m_filedByPC.addRowData(hiddenAdvInput + getInAdvanceRow(reqTypeStr,true));</span>

		}

<span class="nc" id="L320">		m_filedByPC.initForDisplay();</span>

<span class="nc" id="L322">		return m_filedByPC;</span>
	}

	/**
	 * Return the organization scope for this filing rule.
	 * @return one of: SCOPE_THIS_ORG_ONLY, SCOPE_SUB_ORGS_NO_OVERRIDE, SCOPE_SUB_ORGS_ALLOW_OVERRIDE.
	 */
	public String getOrgScope() {
<span class="nc" id="L330">		String scope = m_filingRule.getOrgScope();</span>
<span class="nc bnc" id="L331" title="All 4 branches missed.">		if (scope == null || scope.length()==0)</span>
		{
<span class="nc" id="L333">			return RequestFilingRule.SCOPE_SUB_ORGS_ALLOW_OVERRIDE; //default</span>
		}

<span class="nc" id="L336">		return scope;</span>
	}
	/**
	 * Set the organization scope for this filing rule.
	 * @param orgScope - Must be one of: SCOPE_THIS_ORG_ONLY, SCOPE_SUB_ORGS_NO_OVERRIDE, SCOPE_SUB_ORGS_ALLOW_OVERRIDE.
	 */
	public void setOrgScope(String orgScope) {
<span class="nc" id="L343">		m_filingRule.setOrgScope(orgScope);</span>
<span class="nc" id="L344">	}</span>

	/**
	 * Display the container containing radio buttons for choosing whether to apply this
	 * rule to this org only, to children with no override, and to children with
	 * override. This is for the org-scoping consistency project in V11.
	 */
	private ListContainerPC getOrgScopeContainer()
	{
<span class="nc" id="L353">		m_orgScopePC.setTitle(i18n(m_rmBundle, RmWebBundleKey.LABEL_APPLY_SUB_ORG));</span>
<span class="nc" id="L354">		m_orgScopePC.setWidth(FORMPC_WIDTH);</span>
<span class="nc" id="L355">		m_orgScopePC.setWrapperCSSClass(FWRAPPER);</span>
<span class="nc" id="L356">		m_orgScopePC.setLastRowType(ListContainerPC.LAST_ROW_NONE);</span>
<span class="nc" id="L357">		m_orgScopePC.setHeaderCSSSClass(HEADERCSS);</span>

<span class="nc" id="L359">		String selectedChoice = getOrgScope();</span>

<span class="nc" id="L361">		m_orgScopePC.addRowData(getApplyToThisOrgOnlyRow(selectedChoice));</span>
<span class="nc" id="L362">		m_orgScopePC.addRowData(getApplyToSubOrgsNoOverrideRow(selectedChoice));</span>
<span class="nc" id="L363">		m_orgScopePC.addRowData(getApplyToSubOrgsAllowOverrideRow(selectedChoice));</span>

<span class="nc" id="L365">		return m_orgScopePC;</span>
	}

	/**
	 * @return String - which requests affected by the rule - radio button value
	 */
	private String getDayRangeChoice(){
<span class="nc bnc" id="L372" title="All 2 branches missed.">		String dayRangeChoice = (m_filingRule != null) ? m_filingRule.getDayRange() : &quot;&quot;;</span>
<span class="nc bnc" id="L373" title="All 2 branches missed.">		if (StringUtil.isEmpty(dayRangeChoice)) {</span>
<span class="nc" id="L374">			dayRangeChoice = DAYRANGE_ALL_DAYS ;</span>
		}
<span class="nc" id="L376">		return dayRangeChoice;</span>
	}

	/**
	 * @return String - TO activities selector code and its label
	 */
	private String getActivitySelectionRow() {
<span class="nc bnc" id="L383" title="All 2 branches missed.">		ID id = (m_filingRule != null) ? m_filingRule.getActivityId() : null;</span>
<span class="nc bnc" id="L384" title="All 2 branches missed.">		String activityIdString = (id != null) ? id.toString() : &quot;&quot;;</span>
<span class="nc" id="L385">		String selectInput = HtmlUtil.makeSelectInput(TIME_OFF_ACTIVITY_ID_FN,</span>
				activityIdString, JSUtil.ON_CHANGE, m_timeOffTypeList);

<span class="nc" id="L388">		Object args[] = new Object[]{ selectInput };</span>
<span class="nc" id="L389">		return m_localizer.i18n(m_rmBundle,RmWebBundleKey.ORG_RM_FILING_RULE_LIST_TO_TYPE_LABEL, args);</span>
	}

	/**
	 * @param dayRangeChoice - selected radio button value
	 * @param rCode - request type code &quot;TO&quot;/&quot;SS&quot;/SB&quot;
	 * @return String - radio button html for All Requests option
	 */
	private String getAllOptionRow(String dayRangeChoice, String rCode){

<span class="nc bnc" id="L399" title="All 4 branches missed.">		String key = (rCode.equals(&quot;SS&quot;) || rCode.equals(&quot;SC&quot;)) ?</span>
<span class="nc" id="L400">				i18n(m_rmBundle, RmWebBundleKey.ORG_RM_FILING_RULE_SS_ALL_LABEL) :</span>
<span class="nc" id="L401">					i18n(rmEjbBundle, RmEjbBundleKey.ORG_RM_FILING_RULE_LIST_ALL_REQUESTS_LABEL);</span>
<span class="nc" id="L402">				return HtmlChoiceInput.makeRadioInput(DAY_RANGE_FN,	//name</span>
						DAYRANGE_ALL_DAYS,	//value sent to server if selected
						&quot;&quot;, //label
<span class="nc" id="L405">						dayRangeChoice.equals(DAYRANGE_ALL_DAYS),	//isSelected</span>
						false, 	//isDisabled,
						JSUtil.ON_CHANGE) //onClickJS
						+ key;
	}

	/**
	 * Get the &quot;When the time iff is before/after the makeup&quot; row for Flex Time filing rules.
	 * @return String - html for the row.
	 */
	private String getFlexBeforeAfterRow() {
<span class="nc" id="L416">		String selectInput = HtmlUtil.makeSelectInput(REQUEST_SUB_TYPE_FN, getFlexSubTypeString(), JSUtil.ON_CHANGE, flexBeforeAfterList);</span>
<span class="nc" id="L417">		Object args[] = new Object[]{ selectInput };</span>
<span class="nc" id="L418">		return m_localizer.i18n(m_rmBundle,</span>
				RmWebBundleKey.ORG_RM_FILING_RULE_LIST_TIMEOFF_BEFORE_OR_AFTER_MAKEUP, args);
	}

	private String getFlexSubTypeString() {
<span class="nc" id="L423">		int subType = m_filingRule.getRequestSubType();</span>
<span class="nc bnc" id="L424" title="All 2 branches missed.">		return (subType == RequestFilingRule.REQUEST_SUB_TYPE_TIMEOFF_BEFORE_MAKEUP) ? FLEX_REQUEST_SUBTYPE_BEFORE : FLEX_REQUEST_SUBTYPE_AFTER;</span>
	}

	/**
	 * @param dayRangeChoice - selected radio button value
	 * @return String - radio button html for day type selector option
	 */
	private String getDayTypeSelectionRow(String dayRangeChoice){

<span class="nc bnc" id="L433" title="All 2 branches missed.">		String dayType = (m_filingRule.getDayType()==null) ? &quot;&quot; : m_filingRule.getDayType();</span>
<span class="nc" id="L434">		String selectInput = HtmlUtil.makeSelectInput(DAY_TYPES_FN,dayType, JSUtil.ON_CHANGE, m_dayTypeList);</span>

<span class="nc" id="L436">		Object args[] = new Object[]{ selectInput };</span>
<span class="nc" id="L437">		String dayTypeLabel = m_localizer.i18n(rmEjbBundle,</span>
				RmEjbBundleKey.ORG_RM_FILING_RULE_LIST_FOR_DAYS_LABEL, args);

<span class="nc" id="L440">		return	HtmlChoiceInput.makeRadioInput(DAY_RANGE_FN,</span>
				DAYRANGE_DAY_TYPE,
				&quot;&quot;,	//label
<span class="nc" id="L443">				dayRangeChoice.equals(DAYRANGE_DAY_TYPE),	//isSelected</span>
				false, 	//isDisabled,
				JSUtil.ON_CHANGE)	//onClickJS
				+ dayTypeLabel;
	}

	/**
	 * @param dayRangeChoice - selected radio button value
	 * @return String - radio button html for day range picker option
	 */
	private String getDayRangeRow(String dayRangeChoice){

<span class="nc" id="L455">		Object args[] = new Object[]{ getDateRangeUI() };</span>
<span class="nc" id="L456">		String rangeLabel = m_localizer.i18n(rmEjbBundle,</span>
				RmEjbBundleKey.ORG_RM_FILING_RULE_LIST_FROM_DATE_LABEL, args);

<span class="nc" id="L459">		return	HtmlChoiceInput.makeRadioInput(DAY_RANGE_FN,</span>
				DAYRANGE_DATES,
				&quot;&quot;,	//label
<span class="nc" id="L462">				dayRangeChoice.equals(DAYRANGE_DATES),	//isSelected</span>
				false, 	//isDisabled,
				JSUtil.ON_CHANGE)	//onClickJS
				+ rangeLabel;
	}

	/**
	 * Return the radio button and label for the &quot;Apply to this org only&quot; option.
	 * @param selectedChoice - selected radio button value
	 * @return String - radio button html for the row
	 */
	private String getApplyToThisOrgOnlyRow(String selectedChoice)
	{
<span class="nc" id="L475">		String rowLabel = m_localizer.i18n(m_rmBundle, RmWebBundleKey.LABEL_APPLY_THIS_ORG);</span>

<span class="nc" id="L477">		return  HtmlChoiceInput.makeRadioInput(ORG_SCOPE_FN,</span>
				RADIO_SCOPE_THIS_ORG_ONLY,
				&quot;&quot;, //label
<span class="nc" id="L480">				selectedChoice.equals(RADIO_SCOPE_THIS_ORG_ONLY), //isSelected</span>
				false,  //isDisabled,
				JSUtil.ON_CHANGE) //onClickJS
				+ rowLabel;
	}

	/**
	 * Return the radio button and label for the &quot;Apply to sub-orgs (no override)&quot; option.
	 * @param selectedChoice - selected radio button value
	 * @return String - radio button html for the row
	 */
	private String getApplyToSubOrgsNoOverrideRow(String selectedChoice)
	{
<span class="nc" id="L493">		String rowLabel = m_localizer.i18n(m_rmBundle, RmWebBundleKey.LABEL_APPLY_SUB_ORG_NO_OVERRIDE);</span>

<span class="nc" id="L495">		return  HtmlChoiceInput.makeRadioInput(ORG_SCOPE_FN,</span>
				RADIO_SCOPE_SUB_ORGS_NO_OVERRIDE,
				&quot;&quot;, //label
<span class="nc" id="L498">				selectedChoice.equals(RADIO_SCOPE_SUB_ORGS_NO_OVERRIDE), //isSelected</span>
				false,  //isDisabled,
				JSUtil.ON_CHANGE) //onClickJS
				+ rowLabel;
	}

	/**
	 * Return the radio button and label for the &quot;Apply to sub-orgs (no override)&quot; option.
	 * @param selectedChoice - selected radio button value
	 * @return String - radio button html for the row
	 */
	private String getApplyToSubOrgsAllowOverrideRow(String selectedChoice)
	{
<span class="nc" id="L511">		String rowLabel = m_localizer.i18n(m_rmBundle, RmWebBundleKey.LABEL_APPLY_SUB_ORG_OVERRIDE);</span>

<span class="nc" id="L513">		return  HtmlChoiceInput.makeRadioInput(ORG_SCOPE_FN,</span>
				RADIO_SCOPE_SUB_ORGS_ALLOW_OVERRIDE,
				&quot;&quot;, //label
<span class="nc" id="L516">				selectedChoice.equals(RADIO_SCOPE_SUB_ORGS_ALLOW_OVERRIDE), //isSelected</span>
				false,  //isDisabled,
				JSUtil.ON_CHANGE) //onClickJS
				+ rowLabel;
	}



	/**
	 * @return String - html code for date range picker for the rule
	 */
	private String getDateRangeUI(){
<span class="nc" id="L528">		Calendar aStartCal = Calendar.getInstance(m_orgTimeZone, m_locale);</span>
<span class="nc bnc" id="L529" title="All 2 branches missed.">		Date startDate = (m_filingRule != null) ? m_filingRule.getStartDate() : null;</span>
<span class="nc bnc" id="L530" title="All 2 branches missed.">		if (startDate != null) {</span>
<span class="nc" id="L531">			aStartCal.setTime(startDate);</span>
		}
<span class="nc" id="L533">		LocalDate startLdt = new LocalDate(aStartCal);</span>
<span class="nc" id="L534">		m_dateRangePC.getStartDatePickerPC().setDate(startLdt);</span>

<span class="nc" id="L536">		Calendar aEndCal = Calendar.getInstance(m_orgTimeZone, m_locale);</span>
<span class="nc bnc" id="L537" title="All 2 branches missed.">		Date endDate = (m_filingRule != null) ? m_filingRule.getEndDate() : null;</span>
<span class="nc bnc" id="L538" title="All 2 branches missed.">		if (endDate != null) {</span>
<span class="nc" id="L539">			aEndCal.setTime(endDate);</span>
		} else {
<span class="nc" id="L541">			aEndCal.add(Calendar.DATE, 1);</span>
		}
<span class="nc" id="L543">		LocalDate endLdt = new LocalDate(aEndCal);</span>
<span class="nc" id="L544">		m_dateRangePC.getEndDatePickerPC().setDate(endLdt);</span>

<span class="nc" id="L546">		m_dateRangePC.initForDisplay();</span>
<span class="nc" id="L547">		return m_dateRangePC.toString();</span>
	}

	/**
	 * @return String - radio button html for date comparison row
	 */
	private String getDateCompareRow(){

<span class="nc bnc" id="L555" title="All 2 branches missed.">		String timeType = (m_filingRule != null) ? m_filingRule.getTimeType() : null;</span>
<span class="nc bnc" id="L556" title="All 2 branches missed.">		if (StringUtil.isEmpty(timeType)) {</span>
<span class="nc" id="L557">			timeType = TIMETYPE_BYDATE;</span>
		}

<span class="nc" id="L560">		Object args[] = new Object[]{ getOnBeforeAfterSelector(), getDatePickerText() };</span>
<span class="nc" id="L561">		String dateCompareLabel = m_localizer.i18n(rmEjbBundle,</span>
				RmEjbBundleKey.ORG_RM_FILING_RULE_SB_ON_BEFORE_AFTER, args);

<span class="nc" id="L564">		return HtmlChoiceInput.makeRadioInput(TIME_TYPE_FN,</span>
				TIMETYPE_BYDATE,
				&quot;&quot;,
<span class="nc" id="L567">				timeType.equals(TIMETYPE_BYDATE),	//isSelected</span>
				false, 	//isDisabled,
				JSUtil.ON_CHANGE)	//onClickJS
				+ dateCompareLabel;
	}

	/** Returns {on/before/after} selector html */
	private String getOnBeforeAfterSelector(){
<span class="nc bnc" id="L575" title="All 2 branches missed.">		String dateCompar = (m_filingRule != null) ? m_filingRule.getDateComparision() : null;</span>
<span class="nc bnc" id="L576" title="All 2 branches missed.">		if (StringUtil.isEmpty(dateCompar)) {</span>
<span class="nc" id="L577">			dateCompar = DATECOMPARISION_ON_DATE;</span>
		}
<span class="nc" id="L579">		return HtmlUtil.makeSelectInput(DATE_COMPARE_FN, dateCompar, JSUtil.ON_CHANGE, m_dateComparisonList);</span>
	}

	/** Returns the DatePicker for when to file row html */
	private String getDatePickerText() {
<span class="nc" id="L584">		Calendar aCal = Calendar.getInstance(m_orgTimeZone, m_locale);</span>
<span class="nc" id="L585">		Date date = m_filingRule.getFileByDate();</span>
<span class="nc bnc" id="L586" title="All 2 branches missed.">		if (date != null) {</span>
<span class="nc" id="L587">			aCal.setTime(date);</span>
		}
<span class="nc" id="L589">		LocalDate ldt = new LocalDate(aCal);</span>
<span class="nc" id="L590">		m_fileByDatePC.setDate(ldt);</span>
<span class="nc" id="L591">		m_fileByDatePC.initForDisplay();</span>
<span class="nc" id="L592">		return m_fileByDatePC.toString();</span>
	}

	/**
	 * @param rCode - request type code &quot;TO&quot;/&quot;TOWITHDRAW&quot;/&quot;SS&quot;/SB/FT&quot;
	 * @return String - label text for in advance option
	 */
	private String getInAdvanceLabel(String rCode) {
		//get the dropdown with the options Less than / Equal to / More than
<span class="nc" id="L601">		String intervalType = m_filingRule.getIntervalType();</span>
<span class="nc" id="L602">		String intervalTypeInput = HtmlUtil.makeSelectInput(INTERVAL_TYPE_FN,intervalType, JSUtil.ON_CHANGE, m_intervalTypeList);</span>

<span class="nc" id="L604">		StringsPair intervalCountAndUnit = RequestUtil.getIntervalCountAndUnit(m_filingRule.getIntervalDays(), rCode.equals(&quot;FT&quot;));</span>

		//get the input field for the number of days/hours/minutes to be entered by the user
<span class="nc" id="L607">		String intervalCountInput = HtmlUtil.makeTextInput(INTERVAL_COUNT_FN, 5, 3, intervalCountAndUnit.getKey(), JSUtil.ON_CHANGE);</span>

		//get the dropdown with options Days/Hours/Minutes
<span class="nc" id="L610">		String unitTypeInput = HtmlUtil.makeSelectInput(INTERVAL_UNIT_FN, intervalCountAndUnit.getValue(), JSUtil.ON_CHANGE, m_intervalUnitList);</span>

		String templateKey;
<span class="nc" id="L613">		String retVal = null;</span>
		Object[] args;
<span class="nc bnc" id="L615" title="All 2 branches missed.">		if (rCode.equals(&quot;SB&quot;)) {</span>
<span class="nc" id="L616">			templateKey = RmWebBundleKey.ORG_RM_FILING_RULE_SB_ADVANCE_SUFFIX_LABEL;</span>
<span class="nc" id="L617">			args = new Object[]{ intervalTypeInput, intervalCountInput, unitTypeInput };</span>
<span class="nc" id="L618">			retVal = m_localizer.i18n(m_rmBundle, templateKey, args);</span>
<span class="nc bnc" id="L619" title="All 6 branches missed.">		} else if (rCode.equals(&quot;TO&quot;) || rCode.equals(&quot;TOWITHDRAW&quot;) || rCode.equals(&quot;FT&quot;) ) {</span>
<span class="nc" id="L620">			templateKey = RmEjbBundleKey.ORG_RM_FILING_RULE_LIST_ADVANCE_LABEL;</span>
<span class="nc" id="L621">			args = new Object[]{ intervalTypeInput, intervalCountInput, unitTypeInput,</span>
<span class="nc" id="L622">					getAdvancePastSelector() };</span>
<span class="nc" id="L623">			retVal = m_localizer.i18n(rmEjbBundle, templateKey, args);</span>
		} else {
			// rCode is &quot;SS&quot; or &quot;CS&quot;
			String advPastSelector;
<span class="nc bnc" id="L627" title="All 4 branches missed.">			if (&quot;CS&quot;.equals(rCode) &amp;&amp; LicenseUtil.isAdvancedRMLicense()) {</span>
				// with advanced license and custom shift, allow to config filing
				// &quot;in the past&quot; and &quot;in advanced&quot;
<span class="nc" id="L630">				advPastSelector = getAdvancePastSelector();</span>
			} else {
				// no advanced license, custom shift and shift swap , allow to
				// config filing &quot;in advanced&quot; only
<span class="nc" id="L634">				advPastSelector = m_localizer.i18n(rmEjbBundle, RmEjbBundleKey.ORG_RM_FILING_RULE_IN_ADVANCE);</span>
			}

<span class="nc" id="L637">			args = new Object[] { intervalTypeInput, intervalCountInput, unitTypeInput, advPastSelector };</span>

<span class="nc" id="L639">			templateKey = RmEjbBundleKey.ORG_RM_FILING_RULE_LIST_ADVANCE_LABEL;</span>
<span class="nc" id="L640">			retVal = m_localizer.i18n(rmEjbBundle, templateKey, args);</span>
		}

<span class="nc" id="L643">		return retVal;</span>
	}

	private String getAdvancePastSelector() {
<span class="nc" id="L647">		String selectedValue = String.valueOf( m_filingRule.getTimeLine() );</span>
<span class="nc" id="L648">		Collection options = new ArrayList(2);</span>
<span class="nc" id="L649">		options.add(new StringsPair( String.valueOf(RequestFilingRule.TIMELINE_IN_ADVANCE),</span>
<span class="nc" id="L650">				m_localizer.i18n(rmEjbBundle, RmEjbBundleKey.ORG_RM_FILING_RULE_IN_ADVANCE) ));</span>
<span class="nc" id="L651">		options.add(new StringsPair( String.valueOf(RequestFilingRule.TIMELINE_IN_THE_PAST),</span>
<span class="nc" id="L652">				m_localizer.i18n(rmEjbBundle, RmEjbBundleKey.ORG_RM_FILING_RULE_IN_PAST) ));</span>
<span class="nc" id="L653">		return HtmlUtil.makeSelectInput(TIME_LINE_FN, selectedValue, JSUtil.ON_CHANGE, options);</span>
	}

	/**
	 * @param rCode - request type code &quot;TO&quot;/&quot;TOWITHDRAW&quot;/&quot;SS&quot;/SB/CS/FT&quot;
	 * @return String - radio button html for in advance option
	 */
	private String getInAdvanceRow(String rCode, boolean includeRadio) {

<span class="nc bnc" id="L662" title="All 2 branches missed.">		String timeType = (m_filingRule != null) ? m_filingRule.getTimeType() : null;</span>
<span class="nc bnc" id="L663" title="All 2 branches missed.">		if (StringUtil.isEmpty(timeType)) {</span>
<span class="nc" id="L664">			timeType = TIMETYPE_BYDATE;</span>
		}

<span class="nc" id="L667">		String inAdvanceLabel = getInAdvanceLabel(rCode);</span>

<span class="nc bnc" id="L669" title="All 2 branches missed.">		String radio = !includeRadio ? &quot;&quot; :</span>
<span class="nc" id="L670">			HtmlChoiceInput.makeRadioInput(TIME_TYPE_FN,</span>
					TIMETYPE_INTERVAL,
					&quot;&quot;,
<span class="nc" id="L673">					timeType.equals(TIMETYPE_INTERVAL),</span>
					false,
					JSUtil.ON_CHANGE);

<span class="nc" id="L677">		return radio + inAdvanceLabel;</span>
	}

	public void setTimeOffActivityId(String id) {
<span class="nc" id="L681">		m_filingRule.setActivityId(new ID(id));</span>
<span class="nc" id="L682">	}</span>

	public String getTimeOffActivityId() {
<span class="nc" id="L685">		ID id = m_filingRule.getActivityId();</span>
<span class="nc bnc" id="L686" title="All 2 branches missed.">		if (id == null) {</span>
<span class="nc" id="L687">			return &quot;&quot;;</span>
		}
<span class="nc" id="L689">		return id.toString();</span>
	}

	public void setRequestType(String requestType) {
<span class="nc" id="L693">		m_filingRule.setRequestType(requestType);</span>
<span class="nc" id="L694">	}</span>

	public String getRequestType() {
<span class="nc" id="L697">		return m_filingRule.getRequestType();</span>
	}


	public void setDayRange(String dayRange) {
<span class="nc" id="L702">		m_filingRule.setDayRange(dayRange);</span>
<span class="nc" id="L703">	}</span>

	public String getDayRange() {
<span class="nc" id="L706">		return m_filingRule.getDayRange();</span>
	}

	public void setDayType(String dayType) {
<span class="nc" id="L710">		m_filingRule.setDayType(dayType);</span>
<span class="nc" id="L711">	}</span>

	public Date[] getDateRange() {
<span class="nc" id="L714">		return new Date[] { m_filingRule.getStartDate(),</span>
<span class="nc" id="L715">				m_filingRule.getEndDate() };</span>
	}

	public void setDateRange(Date dateRange[]) {
<span class="nc" id="L719">		m_filingRule.setStartDate(dateRange[0]);</span>
<span class="nc" id="L720">		m_filingRule.setEndDate(dateRange[0]);</span>
<span class="nc" id="L721">	}</span>

	public void setDateRange(Date startDate, Date endDate) {
<span class="nc" id="L724">		m_filingRule.setStartDate(startDate);</span>
<span class="nc" id="L725">		m_filingRule.setEndDate(endDate);</span>
<span class="nc" id="L726">	}</span>

	public void setDateRangeStart(Date startDate) {
<span class="nc" id="L729">		m_filingRule.setStartDate(startDate);</span>
<span class="nc" id="L730">	}</span>

	public void setDateRangeEnd(Date endDate) {
<span class="nc" id="L733">		m_filingRule.setEndDate(endDate);</span>
<span class="nc" id="L734">	}</span>

	public String getDayType() {
<span class="nc" id="L737">		return m_filingRule.getDayType();</span>
	}

	public void setStartDate(Date startDate) {
<span class="nc" id="L741">		m_filingRule.setStartDate(startDate);</span>
<span class="nc" id="L742">	}</span>

	public Date getStartDate() {
<span class="nc" id="L745">		return m_filingRule.getStartDate();</span>
	}

	public void setEndDate(Date endDate) {
<span class="nc" id="L749">		m_filingRule.setEndDate(endDate);</span>
<span class="nc" id="L750">	}</span>

	public Date getEndDate() {
<span class="nc" id="L753">		return m_filingRule.getEndDate();</span>
	}

	public void setApplied(String applied) {
<span class="nc bnc" id="L757" title="All 4 branches missed.">		m_filingRule.setApplied(applied != null &amp;&amp; applied.equals(&quot;true&quot;));</span>
<span class="nc" id="L758">	}</span>

	public String getApplied() {
<span class="nc bnc" id="L761" title="All 2 branches missed.">		return m_filingRule.getApplied() ? &quot;true&quot; : &quot;false&quot;;</span>
	}
	public void setTimeType(String timeType) {
<span class="nc" id="L764">		m_filingRule.setTimeType(timeType);</span>
<span class="nc" id="L765">	}</span>

	public String getTimeType() {
<span class="nc" id="L768">		return m_filingRule.getTimeType();</span>
	}

	public void setDateCompare(String dateCompare) {
<span class="nc" id="L772">		m_filingRule.setDateComparision(dateCompare);</span>
<span class="nc" id="L773">	}</span>

	public String getDateCompare() {
<span class="nc" id="L776">		return m_filingRule.getDateComparision();</span>
	}

	public void setDate(Date date) {
<span class="nc" id="L780">		m_filingRule.setFileByDate(date);</span>
<span class="nc" id="L781">	}</span>

	public Date getDate() {
<span class="nc" id="L784">		return m_filingRule.getFileByDate();</span>
	}

	public void setIntervalType(String intervalType) {
<span class="nc" id="L788">		m_filingRule.setIntervalType(intervalType);</span>
<span class="nc" id="L789">	}</span>

	public String getIntervalType() {
<span class="nc" id="L792">		return m_filingRule.getIntervalType();</span>
	}

	public String getIntervalUnit(){
<span class="nc bnc" id="L796" title="All 2 branches missed.">		return (StringUtil.isEmpty(m_intervalUnit))? RequestUtil.DAYS : m_intervalUnit;</span>
	}

	public void setIntervalUnit(String intervalUnit){
<span class="nc" id="L800">		m_intervalUnit = intervalUnit;</span>
<span class="nc" id="L801">	}</span>

	public int getExtractedIntervalCount(){
<span class="nc bnc" id="L804" title="All 2 branches missed.">		if (getRequestType().equals(RENDER_FLEX_TIME_PAGE)) {</span>
<span class="nc bnc" id="L805" title="All 4 branches missed.">			if (m_intervalUnit == null || m_intervalUnit.equals(RequestUtil.DAYS)) {</span>
<span class="nc" id="L806">				return m_intervalCount * 24 * 60;</span>
<span class="nc bnc" id="L807" title="All 2 branches missed.">			} else if (m_intervalUnit.equals(RequestUtil.HOURS)) {</span>
<span class="nc" id="L808">				return m_intervalCount * 60;</span>
			} else {
<span class="nc" id="L810">				return m_intervalCount;</span>
			}
		} else {
<span class="nc bnc" id="L813" title="All 4 branches missed.">			return (m_intervalUnit == null || m_intervalUnit.equals(RequestUtil.DAYS))?</span>
					m_intervalCount * 24 :
						m_intervalCount;
		}
	}

	public void setIntervalCount(String intervalCount){
<span class="nc" id="L820">		m_intervalCount = Integer.parseInt(intervalCount);</span>
<span class="nc" id="L821">	}</span>

	public int getIntervalCount() {
<span class="nc" id="L824">		return m_filingRule.getIntervalDays();</span>
	}

	public void setTimeLine(int value) {
<span class="nc" id="L828">		m_filingRule.setTimeLine(value);</span>
<span class="nc" id="L829">	}</span>

	public Date getExtractedDate() {
<span class="nc" id="L832">		return m_fileByDatePC.getDate();</span>
	}

	public Date getExtractedDateRangeStart() {
<span class="nc" id="L836">		return m_dateRangePC.getStartDatePickerPC().getDate();</span>
	}

	public Date getExtractedDateRangeEnd() {
<span class="nc" id="L840">		return m_dateRangePC.getEndDatePickerPC().getDate();</span>
	}

	/**
	 * Get the request sub type. Currently, it is only used by the Custom Shift request type.
	 * @return the request sub type. This is an integer whose bits give information which may
	 * vary by request type.
	 */
	public int getRequestSubType() {
<span class="nc" id="L849">		return m_filingRule.getRequestSubType();</span>
	}

	/**
	 * Set the request sub type. Currently, it is only used by the Custom Shift request type.
	 * @param requestSubType - the request sub type. This is an integer whose bits give information which may
	 * vary by request type.
	 */
	public void setRequestSubType(int type){
<span class="nc" id="L858">		m_filingRule.setRequestSubType(type);</span>
<span class="nc" id="L859">	}</span>

	/**
	 * Sets whether this filing rule includes the &quot;Regular New Shift&quot; Custom Shift request sub-type.
	 */
	public void setRequestSubTypeRegNewShift(boolean isSet)
	{
<span class="nc" id="L866">		m_filingRule.setRequestSubTypeRegNewShift(isSet);</span>
<span class="nc" id="L867">	}</span>
	/**
	 * Sets whether this filing rule includes the &quot;Regular Shift Change&quot; Custom Shift request sub-type.
	 */
	public void setRequestSubTypeRegShiftChange(boolean isSet)
	{
<span class="nc" id="L873">		m_filingRule.setRequestSubTypeRegShiftChange(isSet);</span>
<span class="nc" id="L874">	}</span>
	/**
	 * Sets whether this filing rule includes the &quot;OT New Shift&quot; Custom Shift request sub-type.
	 */
	public void setRequestSubTypeOTNewShift(boolean isSet)
	{
<span class="nc" id="L880">		m_filingRule.setRequestSubTypeOTNewShift(isSet);</span>
<span class="nc" id="L881">	}</span>
	/**
	 * Sets whether this filing rule includes the &quot;OT Shift Change&quot; Custom Shift request sub-type.
	 */
	public void setRequestSubTypeOTShiftChange(boolean isSet)
	{
<span class="nc" id="L887">		m_filingRule.setRequestSubTypeOTShiftChange(isSet);</span>
<span class="nc" id="L888">	}</span>

	/**
	 * Return Custom JavaScript.
	 */
	@Override
	public String getCustomJavaScript()
	{
<span class="nc" id="L896">		StringBuffer sb = new StringBuffer(512);</span>
<span class="nc" id="L897">		sb.append(super.getCustomJavaScript());</span>

<span class="nc bnc" id="L899" title="All 2 branches missed.">		if (m_pageType.equals(RENDER_CUSTOM_SHIFT_PAGE)) {</span>
<span class="nc" id="L900">			RmSetupUtil.getCustomJavaScriptForCustShift(sb, m_localizer, m_rmBundle);</span>
		}

<span class="nc" id="L903">		return sb.toString();</span>
	}
	private String i18n(String key) {
<span class="nc" id="L906">		return i18n(m_rmBundle, key);</span>
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>