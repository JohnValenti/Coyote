<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>ShiftBidAuction.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">QA Code Coverage</a> &gt; <a href="index.source.html" class="el_package">com.bluepumpkin.ejb.rm.requests.shiftbid.shiftbidauction.model</a> &gt; <span class="el_source">ShiftBidAuction.java</span></div><h1>ShiftBidAuction.java</h1><pre class="source lang-java linenums">package com.bluepumpkin.ejb.rm.requests.shiftbid.shiftbidauction.model;

/**
 * Title:        ShiftBidAuction
 * Description:  This class represents a shiftBidAuction
 * Copyright:    Copyright (c) 2002
 * Company:      Blue Pumpkin Software, Inc.
 * @author       Jagdish Seelam
 * @version 1.0
 */

import java.util.Date;

import com.bluepumpkin.common.datatypes.ID;
import com.bluepumpkin.ejb.bbm.campaign.model.Campaign;
import com.bluepumpkin.ejb.bbm.campaign.model.SchedulingPeriod;
import com.bluepumpkin.ejb.bbm.vo.FieldInfo;
import com.bluepumpkin.ejb.bbm.vo.ValueObjectNode;
import com.bluepumpkin.ejb.rm.requests.common.model.RequestDetailLevel;



/**
 * Represents an auction that allows schedule bidding.
 *
 * &lt;p&gt; see {@link com.bluepumpkin.ejb.rm.requests.shiftbid.shiftbidauction.ejb.ShiftBidAuctionManager ShiftBidAuctionManager}
 * for further information.
 *
 */
public class ShiftBidAuction extends ValueObjectNode implements Cloneable
{
<span class="nc" id="L32">    private static final ShiftBidAuctionFieldInfo m_fieldInfo = new ShiftBidAuctionFieldInfo();</span>

    /**
     * ID, campaignID, creationTime, startTime, endTime, deadLineTime, Name, isForSingleShifts,
     * creatorID, BounsForNoAcceptedBids.
     */
    public static final long DL_BASIC = RequestDetailLevel.DL_BASIC;

    /**
     * campaign object
     */
    public static final long DL_CAMPAIGN = RequestDetailLevel.DL_CAMPAIGN;

    /**
     * number of biddbale schedules
     */
    //public static final int DL_NUM_OF_BIDDABLE_SCHED_INSTANCES = 4;

    /**
     * number of agents bidding for this auction.
     */
    //public static final int DL_NUM_BIDDING = 8;

    /**
     * Include expired auctions
     */
    public static final long DL_EXCLUDE_EXPIRED_AUCTION = RequestDetailLevel.DL_EXCLUDE_EXPIRED_AUCTION;

    public static final int STATUS_CLOSED_FOR_BIDDING = 1;
    public static final int STATUS_OPEN_FOR_BIDDING = 2;

    //private transient Class m_parentDAO;

    private Campaign m_campaign;

    private SchedulingPeriod m_schedulingPeriod;

    private transient ShiftBidAuctionOptMethods m_shiftBidAuctionOptMethods;

    private transient ShiftBidAuctionSetters m_shiftBidAuctionSetters;

<span class="nc" id="L73">    private long m_detailLevel = DL_BASIC;</span>

<span class="nc" id="L75">    public class ShiftBidAuctionOptMethods  {</span>
        /**
         * The returned campaign object is not complete, ie. not all of its fields are
         * populated.  Only the getID() and getName() methods will return valid values.
         * Note that getID() returns the SID (ID datatype) and not the Director Enterprise
         * world ID (string datatype)
         *
         * @return
         */
        public Campaign getCampaign() {
<span class="nc" id="L85">            return m_campaign;</span>
        }

        /**
         * Does not return a complete object.  Only the methods getID(), getCampaignID(),
         * getStartTime() and getEndTime() will return valid values.
         *
         * @return
         */
        public SchedulingPeriod getSP()  {
<span class="nc" id="L95">            return m_schedulingPeriod;</span>
        }

        /**
         * @param campID
         */
        public ID getCampaignID() {
<span class="nc" id="L102">            return getFieldValueID(ShiftBidAuctionFieldInfo.SHIFTBIDAUCTION_I_CAMPAIGNID);</span>
        }
    }

<span class="nc" id="L106">    public class ShiftBidAuctionSetters  {</span>
        public void setNumOfBiddableScheduleInstances(int numOfBiddableScheds) {
<span class="nc" id="L108">            setFieldValue(ShiftBidAuctionFieldInfo.SHIFTBIDAUCTION_N_NUMOFBIDDABLESCHEDINST, numOfBiddableScheds);</span>
<span class="nc" id="L109">        }</span>


        public void setNumBidders(int numBidding) {
<span class="nc" id="L113">            setFieldValue(ShiftBidAuctionFieldInfo.SHIFTBIDAUCTION_N_NUMOFBIDDERS, numBidding);</span>
<span class="nc" id="L114">        }</span>

        public void setSchedulingPeriodStartTime(Date startTime)  {
<span class="nc" id="L117">            setFieldValue(ShiftBidAuctionFieldInfo.SHIFTBIDAUCTION_D_STARTTIME, startTime);</span>
<span class="nc" id="L118">        }</span>

        public void setSchedulingPeriodEndTime(Date endTime)  {
<span class="nc" id="L121">            setFieldValue(ShiftBidAuctionFieldInfo.SHIFTBIDAUCTION_D_ENDTIME, endTime);</span>
<span class="nc" id="L122">        }</span>

        public void setCampaign(Campaign camp)  {
<span class="nc" id="L125">            m_campaign = camp;</span>
<span class="nc" id="L126">        }</span>

        public void setSP(SchedulingPeriod sp)  {
<span class="nc" id="L129">            m_schedulingPeriod = sp;</span>
<span class="nc" id="L130">        }</span>

        /**
         * @param campID
         */
        public void setCampaignID(ID campID) {
<span class="nc" id="L136">            setFieldValue(ShiftBidAuctionFieldInfo.SHIFTBIDAUCTION_I_CAMPAIGNID, campID);</span>
<span class="nc" id="L137">        }</span>
    }


    /**
     * Object.clone() does a bitwise copy of the object.
     * ValueObjectBase().clone() allocates a new array and copies of m_arrFieldValues array.
     *
     *
     * @see java.lang.Object#clone()
     */
//    public Object clone() throws CloneNotSupportedException {
//        ShiftBidAuction sbAuction = (ShiftBidAuction) super.clone();
//
//        sbAuction.m_detailLevel = m_detailLevel;
//        sbAuction.m_schedulingPeriod = m_schedulingPeriod;
//        sbAuction.m_campaign = m_campaign;
//
//        return sbAuction;
//    }

    public ShiftBidAuction(/*Class parentDAO, */long detailLevel) {
<span class="nc" id="L159">        super();</span>
<span class="nc" id="L160">        m_detailLevel = detailLevel;</span>
        //m_parentDAO = parentDAO;
<span class="nc" id="L162">    }</span>

    @Override
    protected FieldInfo getFieldInfo() {
<span class="nc" id="L166">		return m_fieldInfo;</span>
	}

	public ID getCreatorID() {
<span class="nc" id="L170">		return getFieldValueID(ShiftBidAuctionFieldInfo.SHIFTBIDAUCTION_I_CREATORID);</span>
	}

	public ID getSPID() {
<span class="nc" id="L174">		return getFieldValueID(ShiftBidAuctionFieldInfo.SHIFTBIDAUCTION_I_SPID);</span>
	}

	public String getName() {
<span class="nc" id="L178">		return getFormattedFieldValue(ShiftBidAuctionFieldInfo.SHIFTBIDAUCTION_S_NAME);</span>
	}

	public Date getAuctionDeadLine() {
<span class="nc" id="L182">		return getFieldValueDate(ShiftBidAuctionFieldInfo.SHIFTBIDAUCTION_D_DEADLINETIME);</span>
	}

    public Date getCreationTime() {
<span class="nc" id="L186">        return getFieldValueDate(ShiftBidAuctionFieldInfo.SHIFTBIDAUCTION_D_CREATIONTIME);</span>
    }

    /**
     * Start time for the scheduling period associated with
     * this auction.
     *
     * @return
     */
    public Date getStartTime() {
<span class="nc" id="L196">        return getFieldValueDate(ShiftBidAuctionFieldInfo.SHIFTBIDAUCTION_D_STARTTIME);</span>
    }

    /**
     * End time for the scheduling period (presently the end time of the SP associated with
     * this auction).
     *
     * @return
     */
    public Date getEndTime() {
<span class="nc" id="L206">        return getFieldValueDate(ShiftBidAuctionFieldInfo.SHIFTBIDAUCTION_D_ENDTIME);</span>
    }

    /**
     * End time for the scheduling period (presently the end time of the SP associated with
     * this auction).
     *
     * @return
     */
//    public Date getSchedulingPeriodStartTime()  {
//        return getFieldValueDate(ShiftBidAuctionFieldInfo.SHIFTBIDAUCTION_D_STARTTIME);
//    }
//
    /**
     * End time for the scheduling period (presently the end time of the SP associated with
     * this auction).
     *
     * @return
     */
//    public Date getSchedulingPeriodEndTime()  {
//        return getFieldValueDate(ShiftBidAuctionFieldInfo.SHIFTBIDAUCTION_D_ENDTIME);
//    }

//	public Date getAuctionPeriodStart() {
//		return getFieldValueDate(ShiftBidAuctionFieldInfo.SHIFTBIDAUCTION_D_STARTTIME);
//	}

//	public Date getAuctionPeriodEnd() {
//		return getFieldValueDate(ShiftBidAuctionFieldInfo.SHIFTBIDAUCTION_D_ENDTIME);
//	}

    public int getStatus()  {
<span class="nc" id="L238">        return getFieldValueInt(ShiftBidAuctionFieldInfo.SHIFTBIDAUCTION_N_STATUS);</span>
    }

    /**
     * @return
     */
    public boolean getIsAuctionOpen() {
<span class="nc bnc" id="L245" title="All 2 branches missed.">        return getStatus() == STATUS_OPEN_FOR_BIDDING;</span>
    }

    public int getBonusForNoBidsAccepted()  {
<span class="nc" id="L249">        return getFieldValueInt(ShiftBidAuctionFieldInfo.SHIFTBIDAUCTION_N_BONUSFORNOBIDS);</span>
    }

    public int getNumOfBiddableScheduleInstances() {
<span class="nc" id="L253">        return getFieldValueInt(ShiftBidAuctionFieldInfo.SHIFTBIDAUCTION_N_NUMOFBIDDABLESCHEDINST);</span>
    }

    public int getNumOfBidders() {
<span class="nc" id="L257">        return getFieldValueInt(ShiftBidAuctionFieldInfo.SHIFTBIDAUCTION_N_NUMOFBIDDERS);</span>
    }

    public int getMaxShiftBlocksPerBid() {
<span class="nc" id="L261">        return getFieldValueInt(ShiftBidAuctionFieldInfo.SHIFTBIDAUCTION_N_MAXSHIFTBLOCKSPERBID);</span>
    }

    public boolean getUsesScoring()  {
<span class="nc" id="L265">        return getFieldValueBoolean(ShiftBidAuctionFieldInfo.SHIFTBIDAUCTION_B_ISSCORED);</span>
    }

    public boolean getBidsOnlyWithinOrg()  {
<span class="nc" id="L269">        return getFieldValueBoolean(ShiftBidAuctionFieldInfo.SHIFTBIDAUCTION_B_ISNATIVEORGANIZATION);</span>
    }

    public boolean getIsFullPeriodSchedule()  {
<span class="nc bnc" id="L273" title="All 2 branches missed.">        return !getFieldValueBoolean(ShiftBidAuctionFieldInfo.SHIFTBIDAUCTION_B_ISFORSINGLESHIFTS);</span>
    }

    public boolean getIsMultiShift()  {
<span class="nc" id="L277">        return getFieldValueBoolean(ShiftBidAuctionFieldInfo.SHIFTBIDAUCTION_B_ISMULTISHIFT);</span>
    }

    public boolean getIsRequiredBids()  {
<span class="nc" id="L281">        return getFieldValueBoolean(ShiftBidAuctionFieldInfo.SHIFTBIDAUCTION_B_ISREQUIREDBIDS);</span>
    }
    public int getNumOfBidSubmissions() {
<span class="nc" id="L284">        return getFieldValueInt(ShiftBidAuctionFieldInfo.SHIFTBIDAUCTION_N_NUMOFBIDSUBMISSIONS);</span>
    }
    public boolean getIsDisplayBasedOn()  {
<span class="nc" id="L287">        return getFieldValueBoolean(ShiftBidAuctionFieldInfo.SHIFTBIDAUCTION_B_ISDISPLAYBASEDON);</span>
    }
    public int getValueDisplayBasedOn() {
<span class="nc" id="L290">        return getFieldValueInt(ShiftBidAuctionFieldInfo.SHIFTBIDAUCTION_N_VALUEDISPLAYBASEDON);</span>
    }

    public int getMinHoursPerDay() {
<span class="nc" id="L294">        return getFieldValueInt(ShiftBidAuctionFieldInfo.SHIFTBIDAUCTION_N_MINHOURSPERDAY);</span>
    }

    public int getMaxHoursPerDay() {
<span class="nc" id="L298">        return getFieldValueInt(ShiftBidAuctionFieldInfo.SHIFTBIDAUCTION_N_MAXHOURSPERDAY);</span>
    }

    public boolean getIncPrevSchedEmp()  {
<span class="nc" id="L302">        return getFieldValueBoolean(ShiftBidAuctionFieldInfo.SHIFTBIDAUCTION_B_INCPREVSCHEDEMP);</span>
    }

    public int getMaxConsecDaysPerBid() {
<span class="nc" id="L306">        return getFieldValueInt(ShiftBidAuctionFieldInfo.SHIFTBIDAUCTION_N_MAXCONSECDAYSPERBID);</span>
    }

    public long getDetailLevel()  {
<span class="nc" id="L310">        return m_detailLevel;</span>
    }

    //use getUsesScoring().
//    public boolean getIsScored() {
//        return getFieldValueBoolean(ShiftBidAuctionFieldInfo.SHIFTBIDAUCTION_B_ISSCORED);
//    }

    public ShiftBidAuctionOptMethods getOptMethods()  {
<span class="nc bnc" id="L319" title="All 2 branches missed.">        return (m_shiftBidAuctionOptMethods = (m_shiftBidAuctionOptMethods == null)?</span>
            new ShiftBidAuctionOptMethods():m_shiftBidAuctionOptMethods);
    }

    public ShiftBidAuctionSetters getSetters()  {
<span class="nc bnc" id="L324" title="All 2 branches missed.">        return (m_shiftBidAuctionSetters = (m_shiftBidAuctionSetters == null)?</span>
            new ShiftBidAuctionSetters():m_shiftBidAuctionSetters);
    }

	// setters
	public void setCreatorID(ID id) {
<span class="nc" id="L330">		setFieldValue(ShiftBidAuctionFieldInfo.SHIFTBIDAUCTION_I_CREATORID, id);</span>
<span class="nc" id="L331">	}</span>

	public void setSPID(ID id) {
<span class="nc" id="L334">		setFieldValue(ShiftBidAuctionFieldInfo.SHIFTBIDAUCTION_I_SPID, id);</span>
<span class="nc" id="L335">	}</span>

	public void setName(String name) {
<span class="nc" id="L338">		setFieldValue(ShiftBidAuctionFieldInfo.SHIFTBIDAUCTION_S_NAME, name);</span>
<span class="nc" id="L339">	}</span>

    public boolean isStatusClosed() {
<span class="nc bnc" id="L342" title="All 2 branches missed.">        return getStatus() == STATUS_CLOSED_FOR_BIDDING;</span>
    }

    public boolean isStatusOpen() {
<span class="nc bnc" id="L346" title="All 2 branches missed.">        return getStatus() == STATUS_OPEN_FOR_BIDDING;</span>
    }

//	public void setStartDate(Date sDate) {
//		setFieldValue(ShiftBidAuctionFieldInfo.SHIFTBIDAUCTION_D_STARTTIME, sDate);
//	}

//	public void setEndDate(Date eDate) {
//		setFieldValue(ShiftBidAuctionFieldInfo.SHIFTBIDAUCTION_D_ENDTIME, eDate);
//	}

	public void setDeadlineDate(Date eDate) {
<span class="nc" id="L358">		setFieldValue(ShiftBidAuctionFieldInfo.SHIFTBIDAUCTION_D_DEADLINETIME, eDate);</span>
<span class="nc" id="L359">	}</span>
	public void setCreationTime(Date eDate) {
<span class="nc" id="L361">		setFieldValue(ShiftBidAuctionFieldInfo.SHIFTBIDAUCTION_D_CREATIONTIME, eDate);</span>
<span class="nc" id="L362">	}</span>

    public void setStatus(int status)  {
<span class="nc" id="L365">        setFieldValue(ShiftBidAuctionFieldInfo.SHIFTBIDAUCTION_N_STATUS, status);</span>
<span class="nc" id="L366">    }</span>

    public void setBonusForNoBidsAccepted(int bonus)  {
<span class="nc" id="L369">        setFieldValue(ShiftBidAuctionFieldInfo.SHIFTBIDAUCTION_N_BONUSFORNOBIDS, bonus);</span>
<span class="nc" id="L370">    }</span>

    public void setUsesScoring(boolean usesScoring)  {
<span class="nc" id="L373">        setFieldValue(ShiftBidAuctionFieldInfo.SHIFTBIDAUCTION_B_ISSCORED, usesScoring);</span>
<span class="nc" id="L374">    }</span>

    public void setBidsOnlyWithinOrg(boolean bidsWithinOrg)  {
<span class="nc" id="L377">        setFieldValue(ShiftBidAuctionFieldInfo.SHIFTBIDAUCTION_B_ISNATIVEORGANIZATION, bidsWithinOrg);</span>
<span class="nc" id="L378">    }</span>

    public void setIsFullPeriodSchedule(boolean isFullPeriodSched)  {
<span class="nc bnc" id="L381" title="All 2 branches missed.">        setFieldValue(ShiftBidAuctionFieldInfo.SHIFTBIDAUCTION_B_ISFORSINGLESHIFTS, !isFullPeriodSched);</span>
<span class="nc" id="L382">    }</span>

    public void setIsMultiShift(boolean isMultiShift)  {
<span class="nc" id="L385">        setFieldValue(ShiftBidAuctionFieldInfo.SHIFTBIDAUCTION_B_ISMULTISHIFT, isMultiShift);</span>
<span class="nc" id="L386">    }</span>
    public void setIsRequiredBids(boolean val)  {
<span class="nc" id="L388">        setFieldValue(ShiftBidAuctionFieldInfo.SHIFTBIDAUCTION_B_ISREQUIREDBIDS, val);</span>
<span class="nc" id="L389">    }</span>
    public void setNumOfBidSubmissions(int val)  {
<span class="nc" id="L391">        setFieldValue(ShiftBidAuctionFieldInfo.SHIFTBIDAUCTION_N_NUMOFBIDSUBMISSIONS, val);</span>
<span class="nc" id="L392">    }</span>
    public void setIsDisplayBasedOn(boolean val)  {
<span class="nc" id="L394">        setFieldValue(ShiftBidAuctionFieldInfo.SHIFTBIDAUCTION_B_ISDISPLAYBASEDON, val);</span>
<span class="nc" id="L395">    }</span>
    public void setValueDisplayBasedOn(int val)  {
<span class="nc" id="L397">        setFieldValue(ShiftBidAuctionFieldInfo.SHIFTBIDAUCTION_N_VALUEDISPLAYBASEDON, val);</span>
<span class="nc" id="L398">    }</span>

    public void setMinHoursPerDay(int hours)  {
<span class="nc" id="L401">        setFieldValue(ShiftBidAuctionFieldInfo.SHIFTBIDAUCTION_N_MINHOURSPERDAY, hours);</span>
<span class="nc" id="L402">    }</span>

    public void setMaxHoursPerDay(int hours)  {
<span class="nc" id="L405">        setFieldValue(ShiftBidAuctionFieldInfo.SHIFTBIDAUCTION_N_MAXHOURSPERDAY, hours);</span>
<span class="nc" id="L406">    }</span>

    public void setMaxShiftBlocksPerBid(int maxShiftBlocks) {
<span class="nc" id="L409">		setFieldValue(ShiftBidAuctionFieldInfo.SHIFTBIDAUCTION_N_MAXSHIFTBLOCKSPERBID, maxShiftBlocks);</span>
<span class="nc" id="L410">	}</span>

    public void setIncPrevSchedEmp(boolean incPrevSchedEmp)  {
<span class="nc" id="L413">        setFieldValue(ShiftBidAuctionFieldInfo.SHIFTBIDAUCTION_B_INCPREVSCHEDEMP, incPrevSchedEmp);</span>
<span class="nc" id="L414">    }</span>

    public void setMaxConsecDaysPerBid(int maxConsecDays) {
<span class="nc" id="L417">		setFieldValue(ShiftBidAuctionFieldInfo.SHIFTBIDAUCTION_N_MAXCONSECDAYSPERBID, maxConsecDays);</span>
<span class="nc" id="L418">	}</span>

	/*public String toString() {
		StringBuffer sb = new StringBuffer(1024);
		sb.append(&quot;ShiftBidAuction@&quot;);
		sb.append(Integer.toHexString(hashCode()));
		sb.append('[');
		FieldInfoEntry fieldEntries[] = m_fieldInfo.getFieldInfo();
		for (int j = 0; j &lt; fieldEntries.length; j++) {
			sb.append(fieldEntries[j].getFieldName());
			sb.append(&quot; = &quot;);
			sb.append(getFieldValue(j));
			sb.append('\n');
		}
		sb.append(']');
		return sb.toString();
	}*/

	public static void main(String[] args) {
<span class="nc" id="L437">		return;</span>
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>