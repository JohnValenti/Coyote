<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>ValueObjectAggEventTemplate.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">QA Code Coverage</a> &gt; <a href="index.source.html" class="el_package">com.bluepumpkin.ejb.bbm.schedule.model</a> &gt; <span class="el_source">ValueObjectAggEventTemplate.java</span></div><h1>ValueObjectAggEventTemplate.java</h1><pre class="source lang-java linenums">package com.bluepumpkin.ejb.bbm.schedule.model;

/**
 * Title:        Blue Pumpkin Software Basic Business Model
 * Description:  This is an extension of the value object class that
 *               aggregates a CalendarEventTemplate object
 * Copyright:    Copyright (c) 2002
 * Company:      Blue Pumpkin Software, inc
 * @author       Greg Fihctenholtz
 * @version 1.0
 */
import java.io.*;
import java.util.*;
import com.bluepumpkin.common.datatypes.ID;
import com.bluepumpkin.ejb.bbm.vo.*;

<span class="fc" id="L17">public abstract class ValueObjectAggEventTemplate extends ValueObjectNode implements CalendarEventTemplate,</span>
		Externalizable {
	/** aggregated CalendarEventTemplate value object */
<span class="fc" id="L20">	private CalendarEventTemplateImpl m_aggTemplate = null;</span>

	/**
	 * This is a helper method meant to be called only from within the Schedule
	 * Access Manager EJB
	 */
	public CalendarEventTemplateImpl getAggregatedTemplate() {
<span class="pc bpc" id="L27" title="1 of 2 branches missed.">		if (m_aggTemplate == null) {</span>
<span class="nc" id="L28">			m_aggTemplate = new CalendarEventTemplateImpl();</span>
		}

<span class="fc bfc" id="L31" title="All 2 branches covered.">		if (m_aggTemplate.getID() == null) {</span>
<span class="fc" id="L32">			ID thisID = this.getID();</span>
<span class="pc bpc" id="L33" title="1 of 2 branches missed.">			if (thisID != null) {</span>
<span class="nc" id="L34">				m_aggTemplate.setID(thisID);</span>
			}
		}
<span class="fc" id="L37">		return m_aggTemplate;</span>
	}

	/**
	 * This is a helper method meant to be called only from within the Schedule
	 * Access Manager EJB
	 */
	public void setAggregatedTemplate(CalendarEventTemplateImpl base) {
<span class="fc" id="L45">		m_aggTemplate = base;</span>
<span class="fc" id="L46">	}</span>

	/**
	 * &lt;B&gt;getDescription&lt;/B&gt;
	 * &lt;P&gt;
	 * 
	 * @return String description of event
	 */
	public String getDescription() {
<span class="nc" id="L55">		return getAggregatedTemplate().getDescription();</span>
	}

	/** sets the event description */
	public void setDescription(String strDescription) {
<span class="nc" id="L60">		getAggregatedTemplate().setDescription(strDescription);</span>
<span class="nc" id="L61">	}</span>

	/**
	 * Returns the type of the calendar event object instances of which this
	 * template will create. See the com.bluepumpkin.ejb.bbm.activity.Event
	 * class for possible values.
	 */
	public int getEventType() {
<span class="nc" id="L69">		return getAggregatedTemplate().getEventType();</span>
	}

	/**
	 * &lt;B&gt;getDuration&lt;/B&gt;
	 * &lt;P&gt;
	 * 
	 * @return int - duration (in minutes) of the event
	 */
	public int getDuration() {
<span class="fc" id="L79">		return getAggregatedTemplate().getDuration();</span>
	}

	/** sets the event duration (in minutes) */
	public void setDuration(int nMinutes) {
<span class="nc" id="L84">		getAggregatedTemplate().setDuration(nMinutes);</span>
<span class="nc" id="L85">	}</span>

	/**
	 * &lt;B&gt;getActivityID&lt;/B&gt;
	 * &lt;P&gt;
	 * 
	 * @return the unique ID of this event's activity
	 */
	public ID getActivityID() {
<span class="nc" id="L94">		return getAggregatedTemplate().getActivityID();</span>
	}

	/** sets the activity ID for this event */
	public void setActivityID(ID activityID) {
<span class="nc" id="L99">		getAggregatedTemplate().setActivityID(activityID);</span>
<span class="nc" id="L100">	}</span>

	/**
	 * Returns the shift overlap type of the events instantiated by the event
	 * template. This property only applies to a template that will instantiate
	 * regular calendar event assignments.
	 */
	public short getOverlapType() {
<span class="nc" id="L108">		return getAggregatedTemplate().getOverlapType();</span>
	}

	/**
	 * Sets the overlap type of the event template. This property only applies
	 * to a template that will instantiate regular calendar event assignments.
	 */
	public void setOverlapType(short nOverlapType) {
<span class="nc" id="L116">		getAggregatedTemplate().setOverlapType(nOverlapType);</span>
<span class="nc" id="L117">	}</span>

	/**
	 * Sets the overlay precendence precedence on all of the event instances of
	 * this event template, as an integer value, with a higher value being a
	 * higher precedence and 0 being lowest. If there are several overlaying
	 * events this value is used to determine which event takes precedence
	 */
	public void setOverlayPrecedence(int precedence) {
<span class="nc" id="L126">		getAggregatedTemplate().setOverlayPrecedence(precedence);</span>
<span class="nc" id="L127">	}</span>

	/**
	 * Returns the overlay precedence of all of the event instances of this
	 * template
	 */
	public int getOverlayPrecedence() {
<span class="nc" id="L134">		return getAggregatedTemplate().getOverlayPrecedence();</span>
	}

	/**
	 * Returns a collection of work resource attendees for this event template
	 */
	public Collection&lt;ID&gt; getWorkResourceIDs() {
<span class="fc" id="L141">		return getAggregatedTemplate().getWorkResourceIDs();</span>
	}

	/**
	 * Adds a work resource as attendee to this event
	 */
	public void addWorkResourceID(ID workResourceID) {
<span class="nc" id="L148">		getAggregatedTemplate().addWorkResourceID(workResourceID);</span>
<span class="nc" id="L149">	}</span>

	/**
	 * Removes a work resource as an attendee from this event
	 */
	public void removeWorkResourceID(ID workResourceID) {
<span class="nc" id="L155">		getAggregatedTemplate().removeWorkResourceID(workResourceID);</span>
<span class="nc" id="L156">	}</span>

	/**
	 * This method was requested by Tyler for keeping track of which template
	 * attendees have been removed so that she can check their conflicts
	 */
	public Collection getRemovedWorkResourceIDs() {
<span class="nc" id="L163">		return getAggregatedTemplate().getRemovedWorkResourceIDs();</span>
	}

	/**
	 * These accessors are needed for multi-user support
	 */
	public String getObjectVersionNumber() {
<span class="nc" id="L170">		return getAggregatedTemplate().getObjectVersionNumber();</span>
	}

	public void setObjectVersionNumber(String strValue) {
<span class="nc" id="L174">		getAggregatedTemplate().setObjectVersionNumber(strValue);</span>
<span class="nc" id="L175">	}</span>

	public String getUpdateUser() {
<span class="nc" id="L178">		return getAggregatedTemplate().getUpdateUser();</span>
	}

	public void setUpdateUser(String strValue) {
<span class="nc" id="L182">		getAggregatedTemplate().setUpdateUser(strValue);</span>
<span class="nc" id="L183">	}</span>

	/**
	 * Creates a single calendar event assignment on a given date using
	 * parameters of this template.
	 */
	public CalendarEventAssignment getEventInstance(Date dtEventStart, Collection&lt;ID&gt; attendees) {
<span class="fc" id="L190">		return getAggregatedTemplate().getEventInstance(dtEventStart, attendees);</span>
	}

	/**
	 * Creates a single calendar event assignment on a given date using
	 * parameters of this template.
	 */
	// Fix for QA 55778. Calculate end time and pass it on for duration
	// calculation.
	// This is only for recurring events
	public CalendarEventAssignment getRecurringEventInstance(Date dtEventStart, Date dtEndTime, Collection&lt;ID&gt; attendees) {
<span class="nc" id="L201">		return getAggregatedTemplate().getRecurringEventInstance(dtEventStart, dtEndTime, attendees);</span>
	}

	/**
	 * Provides some rudimentary checking for validity of this event template
	 * object
	 */
	public void checkIsValid() throws java.io.InvalidObjectException {
<span class="fc" id="L209">		getAggregatedTemplate().checkIsValid();</span>
<span class="fc" id="L210">	}</span>

	/**
	 * Return the latest possible time that some instance of this calendar event
	 * template may end.
	 */
	public abstract Date getLatestPossibleEndTime();

	/**
	 * Returns the earliest possible time that some instance of this calendar
	 * event template may begin.
	 */
	public abstract Date getEarliestPossibleStartTime();

	/**
	 * Reconstitute this object from a stream (i.e., deserialize it).
	 */
	public void readExternal(ObjectInput in) throws IOException, ClassNotFoundException {
<span class="fc" id="L228">		ValueObjectUtil.defaultReadExternal(this, in);</span>
<span class="fc" id="L229">		m_aggTemplate = (CalendarEventTemplateImpl) in.readObject();</span>
<span class="fc" id="L230">	}</span>

	/**
	 * Save the state of this object to a stream (i.e., serialize it).
	 */
	public void writeExternal(ObjectOutput out) throws IOException {
<span class="fc" id="L236">		ValueObjectUtil.defaultWriteExternal(this, out);</span>
<span class="fc" id="L237">		out.writeObject(m_aggTemplate);</span>
<span class="fc" id="L238">	}</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>