<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>QuickViewSummaryPC.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">QA Code Coverage</a> &gt; <a href="index.source.html" class="el_package">com.bluepumpkin.web.am.adherence.quickview</a> &gt; <span class="el_source">QuickViewSummaryPC.java</span></div><h1>QuickViewSummaryPC.java</h1><pre class="source lang-java linenums">package com.bluepumpkin.web.am.adherence.quickview;

import java.util.*;

import com.bluepumpkin.ejb.bbm.rtaamanager.model.*;
import com.witness.web.uif.pagecomponent.container.Collapsible2ColFormPC;
import com.witness.web.uif.system.RequestContext;
import com.witness.web.uif.util.*;
import com.witness.web.uif.pagecomponent.list.MultiColListPC;
import com.witness.web.uif.pagecomponent.DefaultMultiColumnNodeData;
import com.bluepumpkin.web.am.l10n.AmWebBundleKey;
import com.witness.web.uif.util.html.CSSUtil;

/**
 * Title:        Quick View Summary Page Component
 * Description:  A collapsable container that shows  Quick View summary
 * Copyright:    Copyright (c) 2002
 * Company:      Blue Pumpkin Software, Inc
 * @author       Shimon Kakon
 * @version 1.0
 */

public class QuickViewSummaryPC extends Collapsible2ColFormPC {

	// Activity List headers
	public static final String ACTIVITY_NAME = &quot;activityName&quot;;
	public static final String SCHEDULE = &quot;schedule&quot;;
	public static final String ACTUAL = &quot;actual&quot;;

<span class="nc" id="L30">	protected StringBuffer m_innerTemplate = null;</span>
<span class="nc" id="L31">	private MultiColListPC m_activityList = null; //this is the activity summary list</span>

	public QuickViewSummaryPC(RequestContext context, ResourceBundle bundle) {
<span class="nc" id="L34">		super(context, bundle);</span>
<span class="nc" id="L35">		setTitle(i18n(m_bundle, AmWebBundleKey.ADHERENCE_STATUS_SUMMARY));</span>
<span class="nc" id="L36">		m_activityList = new MultiColListPC(context);</span>
		//No need since the component is added later: addChildComponent(m_activityList);
<span class="nc" id="L38">	}</span>

	public void createForm(AdheranceStatusData adhStatus, int selectedSize, boolean collapsed) {
<span class="nc" id="L41">		setCollapsed(collapsed);</span>
<span class="nc" id="L42">		m_innerTemplate = new StringBuffer(512);</span>
<span class="nc" id="L43">		int i = 0;</span>
		// the number of selected employees
<span class="nc" id="L45">		m_innerTemplate.append(addToTemplate(AmWebBundleKey.TOTAL_SELECTED, i++));</span>
<span class="nc" id="L46">		addComponent(String.valueOf(selectedSize));</span>

		// total in
<span class="nc" id="L49">		m_innerTemplate.append(addToTemplate(AmWebBundleKey.TOTAL_IN, i++));</span>
<span class="nc" id="L50">		addComponent(String.valueOf(adhStatus.getTotalWorking()));</span>

		 // total out of adherence
<span class="nc" id="L53">		m_innerTemplate.append(addToTemplate(AmWebBundleKey.OUT_OF_ADHERENCE, i++));</span>
<span class="nc" id="L54">		addComponent(String.valueOf(adhStatus.getNumOutOfAdherance()));</span>

		// total too long in state
<span class="nc" id="L57">		m_innerTemplate.append(addToTemplate(AmWebBundleKey.TOO_LONG_IN_STATE, i++));</span>
<span class="nc" id="L58">		addComponent(String.valueOf(adhStatus.getNumTooLongInState()));</span>

		// activity status list
<span class="nc" id="L61">		m_innerTemplate.append(addToTemplate(AmWebBundleKey.ACTIVITY, i++));</span>
<span class="nc bnc" id="L62" title="All 2 branches missed.">		if(selectedSize &gt; 0) {</span>
<span class="nc" id="L63">			Collection activityStatusSummary = adhStatus.getActivityStatusSummaries().values();</span>
<span class="nc bnc" id="L64" title="All 4 branches missed.">			if (activityStatusSummary != null &amp;&amp; activityStatusSummary.size() &gt; 0) {</span>
<span class="nc" id="L65">				initActivityList();</span>
<span class="nc" id="L66">				createActivityListModel(activityStatusSummary);</span>
<span class="nc" id="L67">				addComponent(m_activityList);</span>
			}
			else {
<span class="nc" id="L70">				addComponent(i18n(m_bundle, AmWebBundleKey.ADHERENCE_STATUS_ACTIVITY_NULL));</span>
			}
<span class="nc" id="L72">		}</span>
		else {
<span class="nc" id="L74">			addComponent(HtmlUtil.NBSP);</span>
		}
        
        /*
        // Scheduled In-Office Hours (from 12:00 AM to current time)
        m_innerTemplate.append(addToTemplate(AmWebBundleKey.MY_ADHERENCE_SUMMARY_SCHEDULED, i++));
        addComponent(String.valueOf(adhStatus.getNumTooLongInState())); //TBD

        // Exceptions During In-Office Hours (from 12:00 AM to current time)
        m_innerTemplate.append(addToTemplate(AmWebBundleKey.MY_ADHERENCE_SUMMARY_EXCEPTIONS, i++));
        addComponent(String.valueOf(adhStatus.getNumTooLongInState())); //TBD

        // Percent Time Adhering (from 12:00 AM to current time)
        m_innerTemplate.append(addToTemplate(AmWebBundleKey.MY_ADHERENCE_SUMMARY_PERCENTAGE, i++));
        addComponent(String.valueOf(adhStatus.getNumTooLongInState())); //TBD
        */
<span class="nc" id="L90">	}</span>

	public void createEmptyForm(boolean collapsed) {
<span class="nc" id="L93">		AdheranceStatusData adhStatus = new AdheranceStatusData(Collections.EMPTY_LIST, new HashMap(0), new HashMap(0), 0, 0, 0, 0, 0, 0);</span>
<span class="nc" id="L94">		createForm(adhStatus, 0, collapsed);</span>
<span class="nc" id="L95">	}</span>

	/**
	 * Get string of the HTML representing this component.
	 */
	public String getHtmlDisplay() {
<span class="nc bnc" id="L101" title="All 2 branches missed.">		if(m_innerTemplate != null) {</span>
<span class="nc" id="L102">			return super.getHtmlDisplay(m_innerTemplate.toString());</span>
		}
		else {
<span class="nc" id="L105">			return super.getHtmlDisplay(&quot;&quot;);</span>
		}
	}

	private void initActivityList() {
		// Set up Headers
<span class="nc" id="L111">		m_activityList.getHeader().addColumnHeaderData(ACTIVITY_NAME, i18n(m_bundle, AmWebBundleKey.ACTIVITY_NAME)); //508</span>
<span class="nc" id="L112">		m_activityList.getHeader().addColumnHeaderData(SCHEDULE, i18n(m_bundle, AmWebBundleKey.ADHERENCE_SCHEDULED_TITLE));</span>
<span class="nc" id="L113">		m_activityList.getHeader().addColumnHeaderData(ACTUAL, i18n(m_bundle, AmWebBundleKey.ACTUAL));</span>
		// Set up basic table properties
<span class="nc" id="L115">		m_activityList.setIsBorderEnabled(true);</span>
<span class="nc" id="L116">		m_activityList.setEnabled(false);</span>
<span class="nc" id="L117">		m_activityList.setUseWrapper(false);</span>
<span class="nc" id="L118">		m_activityList.setRowSelectable(false);</span>
<span class="nc" id="L119">		m_activityList.getHeader().setSortable(false);</span>
		//m_activityList.getHeader().setDefaultSortColumn(ACTIVITY_NAME);
		//m_activityList.setIsAutoSortEnabled(true);
<span class="nc" id="L122">	}</span>

	private void createActivityListModel(Collection colActivityStatus) {
<span class="nc" id="L125">		ArrayList activityStatusArray = new ArrayList(colActivityStatus.size());</span>
<span class="nc bnc" id="L126" title="All 2 branches missed.">		for (Iterator it = colActivityStatus.iterator(); it.hasNext(); ) {</span>
<span class="nc" id="L127">			ActivityAdheranceStatusSummary activityAdhStatus = (ActivityAdheranceStatusSummary)it.next();</span>
<span class="nc" id="L128">			DefaultMultiColumnNodeData rowData = new DefaultMultiColumnNodeData(activityAdhStatus.getActivityID());</span>
            
			// Activity name
<span class="nc" id="L131">			rowData.add(activityAdhStatus.getActivityName(), CSSUtil.STYLE_NORMAL_LEFT);</span>
            
			// Total number of scheduled activity
<span class="nc" id="L134">			rowData.add(String.valueOf(activityAdhStatus.getNumScheduled()));</span>
            
			// Total number of actual activity
<span class="nc" id="L137">			rowData.add(String.valueOf(activityAdhStatus.getNumWorking()));</span>
            
<span class="nc" id="L139">			activityStatusArray.add(rowData);</span>
<span class="nc" id="L140">		}</span>
<span class="nc" id="L141">		m_activityList.setListModel(activityStatusArray);</span>
<span class="nc" id="L142">	}</span>


}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>