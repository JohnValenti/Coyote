<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>QuickViewDaySummaryPC.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">QA Code Coverage</a> &gt; <a href="index.source.html" class="el_package">com.bluepumpkin.web.am.adherence.quickview</a> &gt; <span class="el_source">QuickViewDaySummaryPC.java</span></div><h1>QuickViewDaySummaryPC.java</h1><pre class="source lang-java linenums">package com.bluepumpkin.web.am.adherence.quickview;

import java.util.*;

import com.bluepumpkin.ejb.bbm.rtaamanager.model.*;
import com.bluepumpkin.ejb.bbm.util.AdherenceSummaryUtil;
import com.witness.web.uif.pagecomponent.container.Collapsible2ColFormPC;
import com.witness.web.uif.system.RequestContext;
import com.witness.web.uif.util.*;
import com.witness.web.uif.pagecomponent.list.MultiColListPC;
import com.witness.web.uif.pagecomponent.DefaultMultiColumnNodeData;
import com.bluepumpkin.web.am.l10n.AmWebBundleKey;

/**
 * Title:        Quick View Summary Page Component
 * Description:  A collapsable container that shows  Quick View summary
 * Copyright:    Copyright (c) 2002
 * Company:      Blue Pumpkin Software, Inc
 * @author       Shimon Kakon
 * @version 1.0
 */

public class QuickViewDaySummaryPC extends Collapsible2ColFormPC {

<span class="nc" id="L25">    protected StringBuffer m_innerTemplate = null;</span>

    public QuickViewDaySummaryPC(RequestContext context, ResourceBundle bundle) {
<span class="nc" id="L28">        super(context, bundle);</span>
<span class="nc" id="L29">        setTitle(i18n(m_bundle, AmWebBundleKey.ADHERENCE_DAY_SUMMARY));</span>
<span class="nc" id="L30">    }</span>

    public void createForm(AdheranceStatusData adhStatus, int selectedSize, boolean collapsed) {
<span class="nc" id="L33">        setCollapsed(collapsed);</span>
<span class="nc" id="L34">        m_innerTemplate = new StringBuffer(512);</span>
<span class="nc" id="L35">        int i = 0;</span>
        
        // Scheduled In-Office Hours (from 12:00 AM to current time)
        //Changing type to long from int for scheduled (QA-96175) to avoid int overflow issue.
<span class="nc" id="L39">        long scheduled = adhStatus.getNumSummaryScheduled();</span>
<span class="nc" id="L40">        m_innerTemplate.append(addToTemplate(AmWebBundleKey.MY_ADHERENCE_SUMMARY_SCHEDULED, i++));</span>
<span class="nc" id="L41">        addComponent(m_localizer.formatDurationInSecs(AdherenceSummaryUtil.getRoundedSeconds(scheduled)));</span>

        // Exceptions During In-Office Hours (from 12:00 AM to current time)
        //Changing type to long from int for exceptions (QA-96175) to avoid int overflow issue.
<span class="nc" id="L45">        long exceptions = adhStatus.getNumSummaryExceptions();</span>
<span class="nc" id="L46">        m_innerTemplate.append(addToTemplate(AmWebBundleKey.MY_ADHERENCE_SUMMARY_EXCEPTIONS, i++));</span>
<span class="nc" id="L47">        addComponent(m_localizer.formatDurationInSecs(AdherenceSummaryUtil.getRoundedSeconds(exceptions)));</span>

        // Percent Time Adhering (from 12:00 AM to current time)
<span class="nc" id="L50">        float percentage = adhStatus.getNumSummaryPercentage();</span>
<span class="nc" id="L51">        m_innerTemplate.append(addToTemplate(AmWebBundleKey.MY_ADHERENCE_SUMMARY_PERCENTAGE, i++));</span>
<span class="nc bnc" id="L52" title="All 2 branches missed.">        String percentString = (scheduled &gt; 0) ? m_localizer.formatPercentage(percentage, 0) : HtmlUtil.NBSP;</span>
<span class="nc" id="L53">        addComponent(percentString);      </span>
<span class="nc" id="L54">    }</span>

    public void createEmptyForm(boolean collapsed) {
<span class="nc" id="L57">        AdheranceStatusData adhStatus = new AdheranceStatusData(Collections.EMPTY_LIST, new HashMap(0), new HashMap(0), 0, 0, 0, 0, 0, 0);</span>
<span class="nc" id="L58">        createForm(adhStatus, 0, collapsed);</span>
<span class="nc" id="L59">    }</span>

    /**
     * Get string of the HTML representing this component.
     */
    public String getHtmlDisplay() {
<span class="nc bnc" id="L65" title="All 2 branches missed.">        if(m_innerTemplate != null) {</span>
<span class="nc" id="L66">            return super.getHtmlDisplay(m_innerTemplate.toString());</span>
        }
        else {
<span class="nc" id="L69">            return super.getHtmlDisplay(&quot;&quot;);</span>
        }
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>