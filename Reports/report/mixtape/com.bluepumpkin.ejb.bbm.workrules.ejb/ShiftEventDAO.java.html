<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>ShiftEventDAO.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">QA Code Coverage</a> &gt; <a href="index.source.html" class="el_package">com.bluepumpkin.ejb.bbm.workrules.ejb</a> &gt; <span class="el_source">ShiftEventDAO.java</span></div><h1>ShiftEventDAO.java</h1><pre class="source lang-java linenums">package com.bluepumpkin.ejb.bbm.workrules.ejb;

import java.util.Collection;
import java.util.Comparator;
import java.util.Date;
import java.util.HashMap;
import java.util.LinkedHashMap;
import java.util.List;
import java.util.Map;

import com.bluepumpkin.common.datatypes.ID;
import com.bluepumpkin.common.datatypes.PaginationPair;
import com.bluepumpkin.common.jdmo.Jdmo;
import com.bluepumpkin.common.jdmo.JdmoException;
import com.bluepumpkin.common.jdmo.JdmoRowset;
import com.bluepumpkin.common.jdmo.JdmoUtil;
import com.bluepumpkin.ejb.bbm.activity.ejb.ActivityDAO;
import com.bluepumpkin.ejb.bbm.activity.model.ActivityFieldInfo;
import com.bluepumpkin.ejb.bbm.base.BbmFinderException;
import com.bluepumpkin.ejb.bbm.campaign.model.CampaignFieldInfo;
import com.bluepumpkin.ejb.bbm.campaign.model.SchedulingPeriod;
import com.bluepumpkin.ejb.bbm.dao.DAOUtil;
import com.bluepumpkin.ejb.bbm.dao.JunctionTableRelationship;
import com.bluepumpkin.ejb.bbm.dao.OneToManyOneWayRelationship;
import com.bluepumpkin.ejb.bbm.dao.RichObjectDAO;
import com.bluepumpkin.ejb.bbm.vo.DBSortField;
import com.bluepumpkin.ejb.bbm.vo.FieldInfo;
import com.bluepumpkin.ejb.bbm.vo.ValueObjectBase;
import com.bluepumpkin.ejb.bbm.workresource.model.OrganizationFieldInfo;
import com.bluepumpkin.ejb.bbm.workrules.model.ShiftEvent;
import com.bluepumpkin.ejb.bbm.workrules.model.ShiftEventActivity;
import com.bluepumpkin.ejb.bbm.workrules.model.ShiftEventActivityDAO;
import com.bluepumpkin.ejb.bbm.workrules.model.ShiftEventActivityFieldInfo;
import com.bluepumpkin.ejb.bbm.workrules.model.ShiftEventFieldInfo;
import com.bluepumpkin.ejb.bbm.workrules.model.ShiftEventSortField;
import com.bluepumpkin.ejb.bbm.workrules.model.ShiftEventStartTimeType;
import com.bluepumpkin.ejb.bbm.workrules.model.WorkRuleUtil;

public class ShiftEventDAO extends RichObjectDAO&lt;ShiftEvent&gt; {
	// meta data information
<span class="fc" id="L41">	private static FieldInfo m_fieldInfo = new ShiftEventFieldInfo();</span>
<span class="fc" id="L42">	protected FieldInfo getFieldInfo() { return m_fieldInfo; }</span>
<span class="fc" id="L43">	private ActivityFieldInfo afi = new ActivityFieldInfo();</span>
<span class="fc" id="L44">	private OrganizationFieldInfo ofi = new OrganizationFieldInfo();</span>
<span class="fc" id="L45">	private ShiftEventActivityFieldInfo seafi = new ShiftEventActivityFieldInfo();</span>
	
<span class="fc" id="L47">	private final String activitySortFieldKey = afi.getTableName() + &quot;_&quot; +  afi.getFieldName(ActivityFieldInfo.ACTIVITY_NAME);</span>
<span class="fc" id="L48">	private final String organizationSortFieldKey = ofi.getTableName() + &quot;_&quot; + ofi.getFieldName(OrganizationFieldInfo.ORGANIZATION_NAME);</span>
<span class="fc" id="L49">	private final String shiftEventActivitySortFieldKey = seafi.getTableName() + &quot;_&quot; + seafi.getFieldName(ShiftEventActivityFieldInfo.ShiftEventActivityColumn.ShiftEventID.getIndex());</span>
	
	private ActivityDAO aDAO;
	private ShiftEventActivityDAO seaDAO;
	
	public ShiftEventDAO() {
<span class="fc" id="L55">		super();</span>
<span class="fc" id="L56">	}</span>

	public ShiftEventDAO(Jdmo dmo) {
<span class="fc" id="L59">		super(dmo);</span>
<span class="fc" id="L60">	}</span>

	@Override
	protected ShiftEvent createValueObject() {
<span class="fc" id="L64">		return new ShiftEvent();</span>
	}
	

	@Override
	protected void buildDBRelationships() {
<span class="fc" id="L70">		aDAO = new ActivityDAO(m_dmo);</span>
<span class="fc" id="L71">		seaDAO = new ShiftEventActivityDAO(m_dmo);</span>
		
<span class="fc" id="L73">		addRelationship(new OneToManyOneWayRelationship(this, aDAO, getFieldInfo().getFieldIndexByName(&quot;ACTIVITYID&quot;),</span>
<span class="fc" id="L74">				aDAO.getFieldInfo().getFieldIndexByName(&quot;ID&quot;), ShiftEvent.ACTIVITY_RELATIONSHIP_KEY));</span>
<span class="fc" id="L75">		addRelationship(new JunctionTableRelationship(this, aDAO, seaDAO,</span>
<span class="fc" id="L76">				getFieldInfo().getFieldIndexByName(&quot;ID&quot;),</span>
<span class="fc" id="L77">				seaDAO.getFieldInfo().getFieldIndexByName(&quot;SHIFTEVENTID&quot;),</span>
<span class="fc" id="L78">				seaDAO.getFieldInfo().getFieldIndexByName(&quot;ACTIVITYID&quot;), </span>
<span class="fc" id="L79">				aDAO.getFieldInfo().getFieldIndexByName(&quot;ID&quot;), ShiftEvent.SHIFT_EVENT_ACTIVITY_RELATIONSHIP_KEY));</span>
<span class="fc" id="L80">	}</span>

	@Override
	public void setJunctionFieldsOnCreate(String relationshipKey, ShiftEvent shift, ValueObjectBase junctionObject,
			ValueObjectBase relatedObject, int index) 
	{
<span class="nc" id="L86">		ShiftEventActivity sea = (ShiftEventActivity)junctionObject;</span>
<span class="nc" id="L87">		sea.setCreatedBy(getCallerPrincipal());</span>
<span class="nc" id="L88">		sea.setCreated(new Date(System.currentTimeMillis()));</span>
<span class="nc" id="L89">	}</span>
	
	/**
	 * Returns a complete list of IDs and the first chunk of data to be displayed
	 * @param orgID
	 * @param sortFieldIndices
	 * @param isAscendingSort
	 * @return
	 * @throws BbmFinderException
	 */
	public PaginationPair&lt;ShiftEvent&gt; getCompletePaginationDataSetForOrg(ID orgID, boolean isAscendingSort,
			int pageIDSize, int pageIndex, LinkedHashMap&lt;DBSortField, Comparator&gt; sortFieldMap,
			Collection&lt;ID&gt; filteredIDs, String filterByName) throws BbmFinderException {
<span class="fc" id="L102">		StringBuffer whereClause = new StringBuffer();</span>
<span class="fc" id="L103">		whereClause.append(DAOUtil.getCurrentObjectsByOrgHierarchySQLString(orgID));</span>
<span class="pc bpc" id="L104" title="3 of 4 branches missed.">		if (filterByName != null &amp;&amp; filterByName.length() &gt; 0) {</span>
<span class="nc" id="L105">			whereClause.append(&quot; AND A.&quot; + getFieldInfo().getFieldName(ShiftEventFieldInfo.SHIFTEVENT_NAME) + &quot; LIKE '%&quot;).</span>
<span class="nc" id="L106">			append(filterByName.replaceAll(&quot;'&quot;, &quot;''&quot;)).append(&quot;%'&quot;);</span>
		}
<span class="fc" id="L108">		return getCompletePaginationDataSet(whereClause.toString(),</span>
				isAscendingSort, pageIDSize, pageIndex, sortFieldMap, filteredIDs);
	}
	
	public Collection&lt;ShiftEvent&gt; getObjects(String strWhere) throws BbmFinderException
	{
<span class="fc" id="L114">		StringBuffer sb = new StringBuffer();</span>
<span class="fc" id="L115">		sb.append(&quot;(A.DELETEONDATE IS NULL OR A.DELETEONDATE &gt; &quot;);</span>
<span class="fc" id="L116">		sb.append(JdmoUtil.asSqlLiteral(new Date(System.currentTimeMillis())));</span>
<span class="fc" id="L117">		sb.append(&quot;)&quot;);</span>
<span class="pc bpc" id="L118" title="1 of 2 branches missed.">		sb.append(strWhere == null ? &quot;&quot; : &quot; AND &quot; + strWhere);</span>
<span class="fc" id="L119">		StringBuffer strSQL = getQuerySQL(sb);</span>
	
<span class="fc" id="L121">		return getObjectsGivenFullSqlQueryStr(strSQL.toString());</span>
	}
	
	/**
	 * Returns a complete list of IDs and the first chunk of data to be displayed
	 * @param orgID
	 * @param sortFieldIndices
	 * @param isAscendingSort
	 * @return
	 * @throws BbmFinderException
	 */
	public PaginationPair&lt;ShiftEvent&gt; getCompletePaginationDataSetForSchedulingPeriod(SchedulingPeriod sp,
			boolean isAscendingSort, int pageIDSize, int pageIndex,
			LinkedHashMap&lt;DBSortField, Comparator&gt; sortFieldMap, Collection&lt;ID&gt; filteredIDs, String filterByName)
			throws BbmFinderException {
<span class="nc" id="L136">		StringBuffer whereClause = new StringBuffer();</span>
<span class="nc" id="L137">		whereClause.append(DAOUtil.getCurrentObjectsBySchedulingPeriodSQLString(sp));</span>
<span class="nc bnc" id="L138" title="All 4 branches missed.">		if (filterByName != null &amp;&amp; filterByName.length() &gt; 0) {</span>
<span class="nc" id="L139">			whereClause.append(&quot; AND A.&quot; + getFieldInfo().getFieldName(ShiftEventFieldInfo.SHIFTEVENT_NAME) + &quot; LIKE '%&quot;).</span>
<span class="nc" id="L140">			append(filterByName.replaceAll(&quot;'&quot;, &quot;''&quot;)).append(&quot;%'&quot;);</span>
		}
<span class="nc" id="L142">		return getCompletePaginationDataSet(whereClause.toString(),</span>
				isAscendingSort, pageIDSize, pageIndex, sortFieldMap, filteredIDs);		
	}
	
	@Override
	protected void buildSortQuery(List&lt;DBSortField&gt; sortFields, StringBuffer selectQuery, StringBuffer fromQuery,
			StringBuffer whereQuery, StringBuffer groupByQuery, StringBuffer orderByQuery) {
<span class="fc bfc" id="L149" title="All 2 branches covered.">		for (DBSortField sortField : sortFields) {</span>
<span class="pc bpc" id="L150" title="13 of 14 branches missed.">			switch((ShiftEventSortField)sortField) {</span>
				case ID:
<span class="fc" id="L152">					WorkRuleUtil.appendCommaIfPassStringIsNotEmpty(orderByQuery).append(getFieldInfo().getIDFieldName());</span>
<span class="fc" id="L153">					break;</span>
				case NAME:
<span class="nc" id="L155">					selectQuery.append(&quot;, A.&quot;).append(getFieldInfo().getFieldName(ShiftEventFieldInfo.SHIFTEVENT_NAME));</span>
<span class="nc" id="L156">					WorkRuleUtil.appendCommaIfPassStringIsNotEmpty(orderByQuery).append(getFieldInfo().getFieldName(ShiftEventFieldInfo.SHIFTEVENT_NAME));</span>
<span class="nc" id="L157">					break;</span>
				case ACTIVITY:
<span class="nc" id="L159">					selectQuery.append(&quot;, (SELECT B.&quot;).append(afi.getFieldName(ActivityFieldInfo.ACTIVITY_NAME)).append(</span>
<span class="nc" id="L160">						&quot; FROM &quot;).append(afi.getTableName()).append(&quot; B WHERE B.&quot;).append(afi.getIDFieldName()).append(</span>
<span class="nc" id="L161">						&quot; = A.&quot;).append(getFieldInfo().getFieldName(ShiftEventFieldInfo.SHIFTEVENT_ACTIVITYID)).append(</span>
<span class="nc" id="L162">						&quot;) AS &quot;).append(afi.getTableName()).append(&quot;_&quot;).append(afi.getFieldName(ActivityFieldInfo.ACTIVITY_NAME));</span>
<span class="nc" id="L163">					WorkRuleUtil.appendCommaIfPassStringIsNotEmpty(orderByQuery).append(activitySortFieldKey);</span>
<span class="nc" id="L164">					break;</span>
				case LENGTH:
<span class="nc" id="L166">					selectQuery.append(&quot;, A.&quot;).append(getFieldInfo().getFieldName(ShiftEventFieldInfo.SHIFTEVENT_LENGTH));</span>
<span class="nc" id="L167">					WorkRuleUtil.appendCommaIfPassStringIsNotEmpty(orderByQuery).append(getFieldInfo().getFieldName(ShiftEventFieldInfo.SHIFTEVENT_LENGTH));						</span>
<span class="nc" id="L168">					break;</span>
				case START_TIME_TYPE:
<span class="nc" id="L170">					selectQuery.append(&quot;, A.&quot;).append(getFieldInfo().getFieldName(ShiftEventFieldInfo.SHIFTEVENT_ISANYTIME)).</span>
<span class="nc" id="L171">						append(&quot;, A.&quot;).append(getFieldInfo().getFieldName(ShiftEventFieldInfo.SHIFTEVENT_ISCAFETERIA));</span>
<span class="nc" id="L172">					break;</span>
				case START_WINDOW:
<span class="nc" id="L174">					selectQuery.append(&quot;, A.&quot;).append(getFieldInfo().getFieldName(ShiftEventFieldInfo.SHIFTEVENT_WINDOWSTARTTIME));</span>
<span class="nc" id="L175">					selectQuery.append(&quot;, A.&quot;).append(getFieldInfo().getFieldName(ShiftEventFieldInfo.SHIFTEVENT_ISANYTIME));</span>
<span class="nc" id="L176">					WorkRuleUtil.appendCommaIfPassStringIsNotEmpty(orderByQuery).append(&quot;A.&quot; + getFieldInfo().getFieldName(ShiftEventFieldInfo.SHIFTEVENT_WINDOWSTARTTIME));		</span>
<span class="nc" id="L177">					break;</span>
				case PAID:
<span class="nc" id="L179">					selectQuery.append(&quot;, A.&quot;).append(getFieldInfo().getFieldName(ShiftEventFieldInfo.SHIFTEVENT_PAID));</span>
<span class="nc" id="L180">					break;</span>
				case FLEXIBLE:
<span class="nc" id="L182">					selectQuery.append(&quot;, A.&quot;).append(getFieldInfo().getFieldName(ShiftEventFieldInfo.SHIFTEVENT_ISFLEXIBLE));</span>
<span class="nc" id="L183">					selectQuery.append(&quot;, A.&quot;).append(getFieldInfo().getFieldName(ShiftEventFieldInfo.SHIFTEVENT_PAID));</span>
<span class="nc" id="L184">					break;</span>
				case MIN_COUNT:
<span class="nc" id="L186">					selectQuery.append(&quot;, A.&quot;).append(getFieldInfo().getFieldName(ShiftEventFieldInfo.SHIFTEVENT_MINCOUNT));</span>
<span class="nc" id="L187">					selectQuery.append(&quot;, A.&quot;).append(getFieldInfo().getFieldName(ShiftEventFieldInfo.SHIFTEVENT_ISFLEXIBLE));</span>
<span class="nc" id="L188">					selectQuery.append(&quot;, A.&quot;).append(getFieldInfo().getFieldName(ShiftEventFieldInfo.SHIFTEVENT_PAID));</span>
<span class="nc" id="L189">					break;</span>
				case MAX_COUNT:
<span class="nc" id="L191">					selectQuery.append(&quot;, A.&quot;).append(getFieldInfo().getFieldName(ShiftEventFieldInfo.SHIFTEVENT_MAXCOUNT));</span>
<span class="nc" id="L192">					selectQuery.append(&quot;, A.&quot;).append(getFieldInfo().getFieldName(ShiftEventFieldInfo.SHIFTEVENT_ISFLEXIBLE));</span>
<span class="nc" id="L193">					selectQuery.append(&quot;, A.&quot;).append(getFieldInfo().getFieldName(ShiftEventFieldInfo.SHIFTEVENT_PAID));</span>
<span class="nc" id="L194">					break;</span>
				case ADDITIONAL_ACTIVITIES:
<span class="nc" id="L196">					selectQuery.append(&quot;, A.&quot; + getFieldInfo().getFieldName(ShiftEventFieldInfo.SHIFTEVENT_ID) + &quot;, min(C.&quot;).</span>
<span class="nc" id="L197">						append(afi.getFieldName(ActivityFieldInfo.ACTIVITY_NAME) + &quot;) as &quot; + shiftEventActivitySortFieldKey);</span>
<span class="nc" id="L198">					fromQuery.append(&quot; LEFT JOIN &quot; + seafi.getTableName() + &quot; SEA ON SEA.&quot; + </span>
<span class="nc" id="L199">							seafi.getFieldName(ShiftEventActivityFieldInfo.ShiftEventActivityColumn.ShiftEventID.getIndex()) +</span>
<span class="nc" id="L200">							&quot; = A.&quot; + getFieldInfo().getFieldName(ShiftEventFieldInfo.SHIFTEVENT_ID));</span>
<span class="nc" id="L201">					fromQuery.append(&quot; LEFT JOIN &quot; + afi.getTableName() + &quot; C ON SEA.&quot; + seafi.getFieldName(ShiftEventActivityFieldInfo.ShiftEventActivityColumn.ActivityID.getIndex()) +</span>
<span class="nc" id="L202">							&quot; = C.&quot; + afi.getFieldName(ActivityFieldInfo.ACTIVITY_ID));</span>
<span class="nc" id="L203">					WorkRuleUtil.appendCommaIfPassStringIsNotEmpty(orderByQuery).append(&quot; &quot; + shiftEventActivitySortFieldKey);</span>
<span class="nc" id="L204">					groupByQuery.append(&quot; GROUP BY A.&quot; + getFieldInfo().getFieldName(ShiftEventFieldInfo.SHIFTEVENT_ID) +</span>
<span class="nc" id="L205">							&quot;, A.&quot; + getFieldInfo().getIDFieldName());</span>
<span class="nc" id="L206">					break;</span>
				case ORGANIZATION:
<span class="nc" id="L208">					selectQuery.append(&quot;, (SELECT E.&quot;).append(ofi.getFieldName(OrganizationFieldInfo.ORGANIZATION_NAME)).append(</span>
<span class="nc" id="L209">						&quot; FROM &quot;).append(ofi.getTableName()).append(&quot; E WHERE E.&quot;).append(ofi.getIDFieldName()).append(</span>
<span class="nc" id="L210">						&quot; = A.&quot;).append(getFieldInfo().getFieldName(ShiftEventFieldInfo.SHIFTEVENT_ORGANIZATIONID)).append(</span>
<span class="nc" id="L211">						&quot;) AS &quot;).append(organizationSortFieldKey);</span>
<span class="nc" id="L212">					WorkRuleUtil.appendCommaIfPassStringIsNotEmpty(orderByQuery).append(organizationSortFieldKey);						</span>
<span class="nc" id="L213">					break;</span>
				case DESCRIPTION:
<span class="nc" id="L215">					selectQuery.append(&quot;, A.&quot;).append(getFieldInfo().getFieldName(ShiftEventFieldInfo.SHIFTEVENT_DESCRIPTION));</span>
<span class="nc" id="L216">					WorkRuleUtil.appendCommaIfPassStringIsNotEmpty(orderByQuery).append(getFieldInfo().getFieldName(ShiftEventFieldInfo.SHIFTEVENT_DESCRIPTION));						</span>
<span class="nc" id="L217">					break;</span>
				default: break;
			}
<span class="fc" id="L220">		}</span>
<span class="fc" id="L221">	}</span>

	protected Object getPaginationDataFieldValue(JdmoRowset rowData, DBSortField sortField) throws JdmoException {
<span class="nc" id="L224">		ShiftEventSortField sesf = (ShiftEventSortField)sortField;</span>
<span class="nc bnc" id="L225" title="All 13 branches missed.">		switch(sesf) {</span>
			case NAME:
<span class="nc" id="L227">				return rowData.getString(getFieldInfo().getFieldName(ShiftEventFieldInfo.SHIFTEVENT_NAME));</span>
			case ACTIVITY:
<span class="nc" id="L229">				return rowData.getString(activitySortFieldKey);</span>
			case LENGTH:
<span class="nc" id="L231">				return rowData.getString(getFieldInfo().getFieldName(ShiftEventFieldInfo.SHIFTEVENT_LENGTH));</span>
			case START_TIME_TYPE:
<span class="nc" id="L233">				boolean isAnyTime = rowData.getBoolean(getFieldInfo().getFieldName(ShiftEventFieldInfo.SHIFTEVENT_ISANYTIME));</span>
<span class="nc" id="L234">				boolean isCafeteria = rowData.getBoolean(getFieldInfo().getFieldName(ShiftEventFieldInfo.SHIFTEVENT_ISCAFETERIA));</span>
<span class="nc" id="L235">				return ShiftEventStartTimeType.getStartTimeType(isAnyTime, isCafeteria);</span>
			case START_WINDOW:
<span class="nc" id="L237">				boolean anyTime = rowData.getBoolean(getFieldInfo().getFieldName(ShiftEventFieldInfo.SHIFTEVENT_ISANYTIME));</span>
<span class="nc bnc" id="L238" title="All 2 branches missed.">				if (anyTime) return null;</span>
<span class="nc" id="L239">				return rowData.getInt(getFieldInfo().getFieldName(ShiftEventFieldInfo.SHIFTEVENT_WINDOWSTARTTIME));</span>
			case PAID:
<span class="nc" id="L241">				return rowData.getBoolean(getFieldInfo().getFieldName(ShiftEventFieldInfo.SHIFTEVENT_PAID));</span>
			case FLEXIBLE:
<span class="nc" id="L243">				boolean isPaid = rowData.getBoolean(getFieldInfo().getFieldName(ShiftEventFieldInfo.SHIFTEVENT_PAID));</span>
<span class="nc bnc" id="L244" title="All 2 branches missed.">				if (isPaid) return rowData.getBoolean(getFieldInfo().getFieldName(ShiftEventFieldInfo.SHIFTEVENT_ISFLEXIBLE));</span>
<span class="nc" id="L245">				return null;</span>
			case MIN_COUNT:
<span class="nc" id="L247">				boolean isPaidMinCount = rowData.getBoolean(getFieldInfo().getFieldName(ShiftEventFieldInfo.SHIFTEVENT_PAID));</span>
<span class="nc" id="L248">				boolean isFlexibleMinCount = rowData.getBoolean(getFieldInfo().getFieldName(ShiftEventFieldInfo.SHIFTEVENT_ISFLEXIBLE));</span>
<span class="nc bnc" id="L249" title="All 4 branches missed.">				if (isPaidMinCount &amp;&amp; isFlexibleMinCount)</span>
<span class="nc" id="L250">					return rowData.getInt(getFieldInfo().getFieldName(ShiftEventFieldInfo.SHIFTEVENT_MINCOUNT));</span>
<span class="nc" id="L251">				return null;		</span>
			case MAX_COUNT:
<span class="nc" id="L253">				boolean isPaidMaxCount = rowData.getBoolean(getFieldInfo().getFieldName(ShiftEventFieldInfo.SHIFTEVENT_PAID));</span>
<span class="nc" id="L254">				boolean isFlexibleMaxCount = rowData.getBoolean(getFieldInfo().getFieldName(ShiftEventFieldInfo.SHIFTEVENT_ISFLEXIBLE));</span>
<span class="nc bnc" id="L255" title="All 4 branches missed.">				if (isPaidMaxCount &amp;&amp; isFlexibleMaxCount)</span>
<span class="nc" id="L256">					return rowData.getInt(getFieldInfo().getFieldName(ShiftEventFieldInfo.SHIFTEVENT_MAXCOUNT));</span>
<span class="nc" id="L257">				return null;</span>
			case ADDITIONAL_ACTIVITIES:
<span class="nc" id="L259">				return rowData.getString(shiftEventActivitySortFieldKey);</span>
			case ORGANIZATION:
<span class="nc" id="L261">				return rowData.getString(organizationSortFieldKey);</span>
			case DESCRIPTION:
<span class="nc" id="L263">				return rowData.getString(getFieldInfo().getFieldName(ShiftEventFieldInfo.SHIFTEVENT_DESCRIPTION));</span>
<span class="nc" id="L264">			default: return null;				</span>
		}
	}
	
	@Override
	protected Map&lt;Integer, ? extends FieldInfo&gt; getForeignKeyFieldInfo() {
<span class="fc" id="L270">		Map&lt;Integer, FieldInfo&gt; retVal = new HashMap&lt;Integer, FieldInfo&gt;();</span>
<span class="fc" id="L271">		retVal.put(ShiftEventFieldInfo.SHIFTEVENT_CAMPAIGNID, new CampaignFieldInfo());</span>
<span class="fc" id="L272">		return retVal;</span>
	}
	
	//expose to workrulemanagerejb
	public StringBuffer getSelectStatement() {
<span class="fc" id="L277">		return super.getSelectStatement();</span>
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>