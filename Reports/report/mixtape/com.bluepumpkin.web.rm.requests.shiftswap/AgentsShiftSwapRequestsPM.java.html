<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>AgentsShiftSwapRequestsPM.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">QA Code Coverage</a> &gt; <a href="index.source.html" class="el_package">com.bluepumpkin.web.rm.requests.shiftswap</a> &gt; <span class="el_source">AgentsShiftSwapRequestsPM.java</span></div><h1>AgentsShiftSwapRequestsPM.java</h1><pre class="source lang-java linenums">package com.bluepumpkin.web.rm.requests.shiftswap;

import java.util.*;

import com.witness.web.uif.data.wrapper.DateWrapper;
import com.witness.web.uif.data.wrapper.NumberWrapper;
import com.witness.web.uif.l10n.*;
import com.witness.web.uif.pagemodel.*;
import com.witness.web.uif.system.RequestContext;
import com.witness.web.uif.listconfig.*;
import com.witness.web.uif.pagecomponent.*;
import com.witness.web.uif.pagecomponent.table.*;
import com.bluepumpkin.common.l10n.RegionalFormatBundleKey;
import com.bluepumpkin.ejb.bbm.workresource.model.Employee;
import com.bluepumpkin.ejb.rm.requests.common.model.*;
import com.bluepumpkin.ejb.rm.requests.swap.request.model.*;
import com.bluepumpkin.ejb.rm.requests.timeoff.model.TORequest;
import com.bluepumpkin.web.rm.l10n.*;
import com.bluepumpkin.web.rm.keys.*;
import com.bluepumpkin.web.rm.requests.*;

/**
 * Title:        AgentsShiftSwapRequestsPM
 * Description:  Handle Agents Shift Swap Requests
 * Copyright:    Copyright (c) 2002
 * Company:      Blue Pumpkin Software, inc
 * @author       David Su
 * @version      1.0
 */
public class AgentsShiftSwapRequestsPM extends AgentsRequestsPM {

	/**
	 * Constructor
	 */
	public AgentsShiftSwapRequestsPM(RequestContext context)	{
<span class="nc" id="L36">		super(context, Request.REQUESTTYPE_SHIFTSWAP);</span>
<span class="nc" id="L37">	}</span>

	/**
	 * Add Page Not Enabled Message
	 */
	protected void addPageNotEnabledMsg() {
<span class="nc" id="L43">		SwapUtil.addSSNotEnabledMsg(this);</span>
<span class="nc" id="L44">	}</span>

	/**
	 * Return an instance of AgentsRequestsPM ready to be rendered in JSP
	 */
	public static PageModel getInstance(RequestContext context) throws Exception {
<span class="nc" id="L50">		return getInstance(context, AgentsShiftSwapRequestsPM.class);</span>
	}

	/**
	 * To be overwritten to load Page specific data
	 */
	protected void loadSpecifyData() throws Exception {
		/*Silk issue# 94537; Sameet Jan 2007, Filter for viewing Shift Swap creates error
        Commenting this since the manager should always be ablse to see the Shiftswap requests
        that he is entitled to even if his own org doesnot have shift swap enabled.*/

        //if (m_orgSetting!=null) m_isPageEnabled = m_orgSetting.getEnableShiftSwap();
<span class="nc" id="L62">        m_isPageEnabled=true;</span>
<span class="nc" id="L63">	}</span>

	/**
	 * Initialize Request Collection
	 */
	protected void initRequestCollection() throws Exception {
<span class="nc bnc" id="L69" title="All 2 branches missed.">		if (isAuthToViewSSRqts()) {</span>
<span class="nc" id="L70">			super.initRequestCollection();</span>
		}
<span class="nc" id="L72">	}</span>

	/**
	 * Return Unique Employee IDs for the specified Requests
	 */
	protected Collection getUniqueEmpIDs(Collection requests) {
<span class="nc" id="L78">		return ShiftSwapRequestsMH.getUniqueEmpIDs(requests);</span>
	}

	/**
	 * Create Instanse of ListConfigSelectedPC
	 */
	protected ListConfigSelectorPC createListConfigSelectorPC() {
<span class="nc" id="L85">		return new ListConfigSelectorPC(m_context, AgentsShiftSwapRequestsListConfig.class);</span>
	}

	/**
	 * Convenient method to add Header Data for specified List Config
	 * Field Property
	 */
	protected void addHeaderData(ListConfigFP fp, TableHeaderPC header) {
<span class="nc bnc" id="L93" title="All 2 branches missed.">		if (fp.hasFieldName(RmWebBundleKey.SHIFT_DATE)) {</span>
<span class="nc" id="L94">			addHeaderData(header, m_bundle, RmWebBundleKey.SHIFT_DATE, false);</span>
<span class="nc" id="L95">			addHeaderData(header, m_common_bundle, UIFWebBundleKey.START, false);</span>
<span class="nc" id="L96">			addHeaderData(header, m_common_bundle, UIFWebBundleKey.END, false);</span>
		} else {
<span class="nc" id="L98">			header.addColumnHeaderData(fp);</span>
		}
<span class="nc" id="L100">	}</span>

	/**
	 * Add Cell Data for the specified List Config Field Property
	 */
	protected void addCellData(String rowID, RequestAggregate request, ListConfigFP fp,
			DefaultMultiColumnNodeData row_data) {
<span class="nc" id="L107">		ShiftSwapRequest ssRequest = (ShiftSwapRequest)request;</span>

<span class="nc bnc" id="L109" title="All 2 branches missed.">		if (fp.hasFieldName(RmWebBundleKey.SHIFT_DATE)) {</span>
<span class="nc" id="L110">			SwapUtil.addShiftDates(ssRequest, m_common_bundle, m_localizer, m_view_tz, row_data);</span>
<span class="nc bnc" id="L111" title="All 2 branches missed.">		} else if (fp.hasFieldName(RmWebBundleKey.POST_EXPIRES)) {	</span>
<span class="nc" id="L112">			SwapUtil.addPostExpirationDate(ssRequest, m_localizer, m_view_tz, row_data);</span>
<span class="nc bnc" id="L113" title="All 2 branches missed.">		} else if (fp.hasFieldName(UIFWebBundleKey.CONFIRM)) {</span>
<span class="nc" id="L114">			SwapUtil.addConfirmData(ssRequest, m_localizer, row_data);</span>
<span class="nc bnc" id="L115" title="All 2 branches missed.">		} else if (fp.hasFieldName(Request.SORT_SWAP_TYPE)) {</span>
<span class="nc" id="L116">			SwapUtil.addSwapTypeImage(ssRequest.getSwapType(), m_bundle, m_localizer, row_data);</span>
<span class="nc bnc" id="L117" title="All 2 branches missed.">		} else if (fp.hasFieldName(RmWebBundleKey.PARTIAL_SHIFT)) {</span>
<span class="nc" id="L118">			SwapUtil.addIsPartialData(ssRequest, m_localizer, row_data);</span>
<span class="nc bnc" id="L119" title="All 2 branches missed.">		} else if (fp.hasFieldName(Request.SORT_TO_SENIORITY)) {</span>
<span class="nc" id="L120">            SwapUtil.addSeniorityData(ssRequest, m_localizer, row_data, m_view_tz);</span>
<span class="nc bnc" id="L121" title="All 2 branches missed.">		} else if (fp.hasFieldName(Request.SORT_EMP_RANK)) { </span>
<span class="nc" id="L122">			SwapUtil.addRankData(ssRequest, m_localizer, row_data);</span>
        } else {
<span class="nc" id="L124">			super.addCellData(rowID, request, fp, row_data);</span>
		}
<span class="nc" id="L126">	}</span>

	/**
	 * Return Agent name for specified Request
	 */
	protected String createAgentName(RequestAggregate request) {
<span class="nc" id="L132">		ShiftSwapRequest ssRequest = (ShiftSwapRequest)request;		</span>
<span class="nc" id="L133">		return SwapUtil.createAgentNames(m_user, ssRequest, m_eNameMap, m_eOrgMap, m_localizer);</span>
	}

	/**
	 * Return Content Title Item Name
	 */
	protected String getContentTitleItemName() {
<span class="nc" id="L140">		return i18n(m_bundle, RmWebBundleKey.REQUEST_TYPE_SHIFT_SWAP);</span>
	}

	/**
	 * Add Create Request Button
	 */
	protected void addCreateRequestButton() {
		// Manager does not create Shift Swap Request
<span class="nc" id="L148">	}</span>

	/**
	 * Return URL for HTML Form Action
	 */
	public String getFormAction() {
<span class="nc bnc" id="L154" title="All 2 branches missed.">		if (isAuthToViewSSRqts()) {</span>
<span class="nc" id="L155">			return RmKeys.RH_AG_REQUEST_SHIFTSWAP_LIST;</span>
		} else {
<span class="nc" id="L157">			return RmKeys.RH_AG_REQUEST_ALL_LIST; </span>
		}
	}
	
	/**
	 * Get Selected Filter. To be overridden by subclasses.
	 * Subclasses should return m_rfilterBoxPC.getSelectedFilterName().
	 */
	public String getSelectedFilterName() {
<span class="nc" id="L166">		return m_rfilterBoxPC.getSelectedFilterName();</span>
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>