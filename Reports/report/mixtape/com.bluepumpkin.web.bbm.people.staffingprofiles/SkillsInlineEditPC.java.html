<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>SkillsInlineEditPC.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">QA Code Coverage</a> &gt; <a href="index.source.html" class="el_package">com.bluepumpkin.web.bbm.people.staffingprofiles</a> &gt; <span class="el_source">SkillsInlineEditPC.java</span></div><h1>SkillsInlineEditPC.java</h1><pre class="source lang-java linenums">package com.bluepumpkin.web.bbm.people.staffingprofiles;

import static com.bluepumpkin.web.bbm.people.staffingprofiles.SkillListPopupPM.POPUP_ARGS;
import static com.bluepumpkin.web.bbm.people.staffingprofiles.SkillListPopupPM.POPUP_ID;

import java.util.ArrayList;
import java.util.Collection;
import java.util.HashMap;
import java.util.HashSet;
import java.util.ResourceBundle;

import javax.servlet.http.HttpServletRequest;

import com.bluepumpkin.common.datatypes.ID;
import com.bluepumpkin.common.datatypes.StringsPair;
import com.bluepumpkin.common.localization.Localizer;
import com.bluepumpkin.common.util.StringUtil;
import com.bluepumpkin.ejb.bbm.skill.model.Skill;
import com.bluepumpkin.ejb.bbm.skill.model.SkillAssignment;
import com.bluepumpkin.web.bbm.l10n.BbmWebBundleKey;
import com.bluepumpkin.web.core.l10n.CoreWebBundleKey;
import com.verint.ejb.wfm.WfmManagerFactory;
import com.witness.web.uif.pagecomponent.DefaultMultiColumnNodeData;
import com.witness.web.uif.pagecomponent.MultiColumnNodeData;
import com.witness.web.uif.pagecomponent.form.FormInputPC;
import com.witness.web.uif.pagecomponent.list.InsertableMultiColListPC;
import com.witness.web.uif.pagecomponent.table.TableHeaderPC;
import com.witness.web.uif.pagecomponent.toolbar.ToolbarPC;
import com.witness.web.uif.pagecomponent.toolbar.ToolbarTextButton;
import com.witness.web.uif.pagemodel.PageModel;
import com.witness.web.uif.pagemodel.WorkpaneMultiColPM;
import com.witness.web.uif.system.RequestContext;
import com.witness.web.uif.util.HtmlUtil;
import com.witness.web.uif.util.js.JSUtil;
import com.witness.web.uif.util.js.JSValidatorUtil;
import com.witness.web.uif.validator.InRangeFieldValidator;

public class SkillsInlineEditPC extends InsertableMultiColListPC {
	private static final long serialVersionUID = 1L;
	private ResourceBundle m_bundle;
	
	public final static String SELECTION_CLASSIFICATION_FN = &quot;selectionClassification&quot;;

	private ToolbarTextButton addButton;
	private HashMap&lt;Skill, HashSet&lt;SkillAssignment&gt; &gt; m_skillAssignments;		
<span class="fc" id="L46">	private StringBuffer jsInitCode = new StringBuffer();</span>
	private PageModel parentPageModel;
	
	public SkillsInlineEditPC(RequestContext context, String name, HashMap&lt;Skill, HashSet&lt;SkillAssignment&gt; &gt; skillAssignments, boolean isByOrg, ID ownerID, PageModel parentPageModel) {
<span class="fc" id="L50">		super(context);</span>
<span class="fc" id="L51">		setName(name);</span>
<span class="fc" id="L52">		m_bundle = m_localizer.getBundle(BbmWebBundleKey.BUNDLE_NAME);</span>
<span class="fc" id="L53">		this.parentPageModel = parentPageModel;</span>

<span class="fc" id="L55">		addPopupArgs(POPUP_ID, SkillListPopupPM.FORM_ACTION, &quot;&quot;,</span>
				POPUP_ARGS, &quot;1000,600,ctr,ctr&quot;, true, 1);
		
<span class="fc bfc" id="L58" title="All 2 branches covered.">		if (ownerID != null) {</span>
<span class="fc" id="L59">			ToolbarPC toolbar = new ToolbarPC(m_context);</span>
<span class="fc" id="L60">			toolbar.setName(getToolbarName());</span>
<span class="fc" id="L61">			addButton = toolbar.createPopupWindowButton(POPUP_ID,</span>
<span class="fc" id="L62">					m_localizer.i18n(CoreWebBundleKey.BUNDLE_NAME, CoreWebBundleKey.TOOLBAR_ADD), true);</span>
<span class="fc" id="L63">			addButton.setAttribute(&quot;ownerID&quot;, ownerID.toString());</span>
<span class="fc" id="L64">			addButton.setAttribute(&quot;isByOrg&quot;, String.valueOf(true));</span>
<span class="fc" id="L65">			addButton.setAttribute(&quot;isSelectionPopup&quot;, String.valueOf(true));</span>
<span class="fc" id="L66">			addButton.setAttribute(&quot;onClick&quot;, </span>
					&quot;var idList=[]; &quot; +
<span class="fc" id="L68">					&quot;var allRowIDs=jQuery('#&quot; + getName() + &quot;_rowIDs').val().split(','); &quot; +</span>
					&quot;for (var i = 0; i &lt; allRowIDs.length; i++) { &quot; +
						&quot;jQuery('[uid=' + allRowIDs[i] +'][multiEditNotCommon!=true]').each(function() { &quot; + // multiEditNotCommon!=true will include ids for shift events that are common to all and also shift events that have been added without a postback
							&quot;idList[idList.length]=this.uid; }); &quot; +
					&quot;} &quot; + 
					&quot;this.selectedIDs=idList.join(','); &quot; +
<span class="fc" id="L74">					toolbar.getName() + &quot;.onSelect('&quot; + POPUP_ID + &quot;', this);&quot;);</span>

<span class="fc" id="L76">			toolbar.addToolbarElement(addButton);</span>
<span class="fc" id="L77">			ToolbarTextButton removeButton = new ToolbarTextButton(toolbar, &quot;removeSkill&quot;,</span>
<span class="fc" id="L78">					m_localizer.i18n(CoreWebBundleKey.BUNDLE_NAME, CoreWebBundleKey.TOOLBAR_REMOVE),</span>
					InsertableMultiColListPC.REMOVE_ROW_BUTTON_ACTION, ToolbarTextButton.BLUE_BUTTON, false);
<span class="fc" id="L80">			toolbar.addToolbarElement(removeButton);</span>
<span class="fc" id="L81">			setToolbar(toolbar);</span>
		}
<span class="fc" id="L83">		m_skillAssignments = skillAssignments;</span>
<span class="fc" id="L84">		setIsBorderEnabled(true);</span>
<span class="fc" id="L85">		extractParameters(m_context.getRequest());</span>
		
<span class="pc bpc" id="L87" title="1 of 4 branches missed.">		if (m_skillAssignments != null &amp;&amp; m_skillAssignments.size()&gt;0) {</span>
<span class="fc" id="L88">			ArrayList&lt;ID&gt; idList = new ArrayList&lt;ID&gt; ();</span>
<span class="fc bfc" id="L89" title="All 2 branches covered.">			for (Skill skill: m_skillAssignments.keySet()){</span>
<span class="fc" id="L90">				idList.add(skill.getID());</span>
<span class="fc" id="L91">			}</span>
<span class="fc" id="L92">			setRowIDs(StringUtil.createDelimitedString(</span>
					idList, StringUtil.DELIM));
		}
<span class="fc" id="L95">	}</span>
	
	@Override
	public String getJavaScriptInitCode() {
<span class="fc" id="L99">		StringBuffer js = new StringBuffer(super.getJavaScriptInitCode());</span>
<span class="pc bpc" id="L100" title="1 of 2 branches missed.">		if (getToolbar() != null) {</span>
<span class="fc" id="L101">			js.append(&quot;\n&quot;).append(getName()).append(&quot;.setToolbar(&quot;).append(getToolbar().getName()).append(&quot;);&quot;);</span>
<span class="fc" id="L102">			js.append(&quot;\n&quot;).append(getName()).append(&quot;.addButtonEnableAttribute('isDeleteable', 'removeSkill');\n&quot;);</span>
		}
<span class="fc" id="L104">		return js.toString();</span>
	}

	@Override
	public void setName(String name) {
<span class="fc" id="L109">		super.setName(name);</span>
<span class="fc" id="L110">		ToolbarPC toolbar = getToolbar();</span>
<span class="pc bpc" id="L111" title="1 of 2 branches missed.">		if (toolbar!= null) {</span>
<span class="nc" id="L112">			toolbar.setName(getToolbarName());</span>
<span class="nc" id="L113">			addButton.setAttribute(&quot;onClick&quot;,</span>
<span class="nc" id="L114">				toolbar.getName() + &quot;.onSelect('&quot; + POPUP_ID + &quot;', this);&quot;);</span>
		}
<span class="fc" id="L116">	}</span>

	private String getToolbarName() {
<span class="fc" id="L119">		return getName() + &quot;__toolbar&quot;; </span>
	}


<span class="fc" id="L123">	private boolean isHeaderInited = false;</span>
	private void initHeader() {
<span class="pc bpc" id="L125" title="1 of 2 branches missed.">		if (isHeaderInited) return;</span>
<span class="fc" id="L126">		isHeaderInited = true;</span>
		
<span class="fc" id="L128">		TableHeaderPC header = getHeader();</span>
<span class="fc" id="L129">		Localizer localizer = m_context.getLocalizer();</span>
		
<span class="fc" id="L131">		header.addColumnHeaderData(&quot;Name&quot;, i18n(m_bundle, BbmWebBundleKey.FS_STAFFING_PROFILES_SKILL_NAME));</span>
<span class="fc" id="L132">		header.addColumnHeaderData(&quot;Proficiency&quot;, i18n(m_bundle, BbmWebBundleKey.FS_STAFFING_PROFILES_SKILL_PROFICIENCY));</span>
<span class="fc" id="L133">		header.addColumnHeaderData(&quot;Priority&quot;, i18n(m_bundle, BbmWebBundleKey.FS_STAFFING_PROFILES_SKILL_PRIORITY));</span>
<span class="fc" id="L134">		header.addColumnHeaderData(&quot;Classification&quot;, i18n(m_bundle, BbmWebBundleKey.FS_STAFFING_PROFILES_SKILL_CLASSIFICATION));</span>
<span class="fc" id="L135">	}</span>

<span class="fc" id="L137">	private boolean isRowsInited = false;</span>
	private void initRows() {
<span class="pc bpc" id="L139" title="1 of 2 branches missed.">		if (isRowsInited) return;</span>
<span class="fc" id="L140">		isRowsInited = true;</span>
		
<span class="fc" id="L142">		Collection&lt;MultiColumnNodeData&gt; rows = super.getListModel();</span>

<span class="fc" id="L144">		ArrayList&lt;ID&gt; ids = new ArrayList&lt;ID&gt;();</span>
<span class="fc" id="L145">		int i = 0;</span>
<span class="fc bfc" id="L146" title="All 2 branches covered.">		for (Skill skill : m_skillAssignments.keySet() ){</span>
<span class="fc" id="L147">			DefaultMultiColumnNodeData nodeData = getNodeData(skill, m_skillAssignments.get(skill), i++, false);		</span>
<span class="fc" id="L148">			rows.add(nodeData);</span>
<span class="fc" id="L149">			ids.add(skill.getID());</span>
<span class="fc" id="L150">		}</span>
<span class="fc" id="L151">	}</span>
	
	protected void setRowAttributes(DefaultMultiColumnNodeData mcnd, SkillAssignment assignment, Skill skill) {
<span class="pc bpc" id="L154" title="1 of 2 branches missed.">		if (!assignment.isMultiEditCommon()) mcnd.setNodeAttribute(&quot;notMultiEditCommon&quot;, String.valueOf(true));</span>
<span class="fc" id="L155">		mcnd.setNodeAttribute(WorkpaneMultiColPM.IS_DELETEABLE, String.valueOf(true));</span>
		
<span class="fc" id="L157">		mcnd.setNodeAttribute(&quot;priorityFN&quot;, getName() + &quot;_&quot; + skill.getID().toString() + &quot;_priorityPC&quot;);</span>
<span class="fc" id="L158">		mcnd.setNodeAttribute(&quot;proficiencyFN&quot;, getName() + &quot;_&quot; + skill.getID().toString() +  &quot;_proficiencyPC&quot;);</span>
<span class="fc" id="L159">	}</span>
	
	/**
	 * To be called by the request handler that dynamically returns a html row via ajax.
	 * @param VTOEvent
	 * @return
	 */
	public String getRowHtml(SkillAssignment skillAssignment) {
<span class="fc" id="L167">		StringBuffer html = new StringBuffer();</span>
<span class="fc" id="L168">		super.appendHtmlRowData(html, getNodeData(skillAssignment), 0, 0);</span>
		
		//Create the javascript to instantiate the objects for the inline controls
<span class="fc" id="L171">		html.append(HtmlUtil.jsTag(jsInitCode.toString(), false));</span>
<span class="fc" id="L172">		jsInitCode.setLength(0);</span>
		
<span class="fc" id="L174">		return html.toString();</span>
	} 
	
	protected DefaultMultiColumnNodeData getNodeData(Skill skill, HashSet&lt;SkillAssignment&gt; skillAssignments, int rowCount, boolean isAjaxRequest) {
<span class="fc" id="L178">		DefaultMultiColumnNodeData nodeData = new DefaultMultiColumnNodeData(</span>
<span class="fc" id="L179">				skill.getID());</span>
		try  {
<span class="pc bpc" id="L181" title="1 of 2 branches missed.">			if (skill.isMultiEditCommon() == false) {</span>
<span class="nc" id="L182">				nodeData.add(this.MULTI_VALUE_DATA + skill.getName());</span>
			}
			else
<span class="fc" id="L185">				nodeData.add(skill.getName());	</span>
			
<span class="fc" id="L187">			SkillAssignment skillAssignment = skillAssignments.iterator().next();</span>
			//Proficiency
<span class="fc" id="L189">			String strProficiency = this.MULTI_VALUE_DATA;</span>
			
<span class="pc bpc" id="L191" title="1 of 2 branches missed.">			if (isProficiencyCommonValued(skillAssignments))</span>
			{
<span class="fc" id="L193">				double proficiency = skillAssignment.getProficiency();</span>
<span class="fc" id="L194">				strProficiency = m_localizer.formatNumber(proficiency, 1);</span>
			}	
			
<span class="fc" id="L197">			FormInputPC proficiencyPC = new FormInputPC(getRequestContext());</span>
<span class="fc" id="L198">			proficiencyPC.reset(getName() + &quot;_&quot; + skill.getID().toString() +  &quot;_proficiencyPC&quot;,</span>
					strProficiency, FormInputPC.TYPE_STRING, true);
<span class="fc" id="L200">			proficiencyPC.setSize(8);</span>
<span class="fc" id="L201">			proficiencyPC.setMaxLength(10);</span>
<span class="fc" id="L202">			proficiencyPC.setAutoExtractParamEnabled(true);</span>
<span class="fc" id="L203">			addChildComponent(proficiencyPC);</span>
<span class="fc" id="L204">			InRangeFieldValidator proficiencyValidator = new InRangeFieldValidator(this,</span>
<span class="fc" id="L205">					getName() + &quot;_&quot; + skill.getID().toString() +  &quot;_proficiencyPC&quot;,</span>
					BbmWebBundleKey.FS_STAFFING_PROFILES_PROFICIENCY, BbmWebBundleKey.BUNDLE_NAME, 0.1, 9.9);
<span class="fc" id="L207">			proficiencyValidator.setValidateClientSideOnly(true);</span>
<span class="pc bpc" id="L208" title="1 of 2 branches missed.">			if (isAjaxRequest) {</span>
<span class="nc" id="L209">				jsInitCode.append(JSValidatorUtil.getAddFieldValidatorJS(proficiencyValidator, m_localizer));</span>
<span class="pc bpc" id="L210" title="1 of 2 branches missed.">			} else if (parentPageModel != null) {</span>
<span class="fc" id="L211">				parentPageModel.addValidator(proficiencyValidator);</span>
			}
<span class="fc" id="L213">			nodeData.add(proficiencyPC);</span>
			
			//Priority
<span class="fc" id="L216">			String strPriority = this.MULTI_VALUE_DATA;</span>
			
<span class="pc bpc" id="L218" title="1 of 2 branches missed.">			if (isPriorityCommonValued(skillAssignments))</span>
			{
<span class="fc" id="L220">				int priority = skillAssignment.getPriority();</span>
<span class="fc" id="L221">				strPriority = Integer.toString(priority);</span>
			}
			
<span class="fc" id="L224">			FormInputPC priorityPC = new FormInputPC(getRequestContext());</span>
<span class="fc" id="L225">			priorityPC.reset(getName() + &quot;_&quot; + skill.getID().toString() + &quot;_priorityPC&quot;,</span>
					strPriority, FormInputPC.TYPE_STRING, true);
<span class="fc" id="L227">			priorityPC.setSize(5);</span>
<span class="fc" id="L228">			priorityPC.setMaxLength(8);</span>
<span class="fc" id="L229">			priorityPC.setAutoExtractParamEnabled(true);</span>
<span class="fc" id="L230">			addChildComponent(priorityPC);</span>
<span class="fc" id="L231">			InRangeFieldValidator priorityValidator = new InRangeFieldValidator(this,</span>
<span class="fc" id="L232">					getName() + &quot;_&quot; + skill.getID().toString() +  &quot;_priorityPC&quot;,</span>
					BbmWebBundleKey.FS_STAFFING_PROFILES_SKILL_PRIORITY, BbmWebBundleKey.BUNDLE_NAME, 1, 99);
<span class="fc" id="L234">			priorityValidator.setValidateClientSideOnly(true);</span>
<span class="pc bpc" id="L235" title="1 of 2 branches missed.">			if (isAjaxRequest) {</span>
<span class="nc" id="L236">				jsInitCode.append(JSValidatorUtil.getAddFieldValidatorJS(priorityValidator, m_localizer));</span>
<span class="pc bpc" id="L237" title="1 of 2 branches missed.">			} else if (parentPageModel != null) {</span>
<span class="fc" id="L238">				parentPageModel.addValidator(priorityValidator);</span>
			}
<span class="fc" id="L240">			nodeData.add(priorityPC);</span>
			
<span class="fc" id="L242">			String strClass = String.valueOf(3);</span>
<span class="fc" id="L243">			ArrayList classification = getClassifications();</span>
<span class="pc bpc" id="L244" title="1 of 2 branches missed.">			if (isClassCommonValued(skillAssignments))</span>
			{
<span class="fc" id="L246">				int iClass = skillAssignment.getClassification();</span>
<span class="fc" id="L247">				strClass = Integer.toString(iClass);</span>
<span class="fc" id="L248">			}</span>
			else 
<span class="nc" id="L250">				classification.add(new StringsPair(&quot;3&quot;, this.MULTI_VALUE_DATA));</span>
<span class="fc" id="L251">			String strClassID = Integer.toString(rowCount);</span>
<span class="fc" id="L252">			nodeData.add(HtmlUtil.makeSelectInput(SELECTION_CLASSIFICATION_FN + &quot;_&quot; + skill.getID().toString(),</span>
					strClass,
					JSUtil.ON_CHANGE,
					classification)); 
			
<span class="fc" id="L257">			setRowAttributes(nodeData, skillAssignment, skill);</span>
			
		}
<span class="nc" id="L260">		catch (Exception e) {</span>
			
<span class="fc" id="L262">		}</span>
		
<span class="fc" id="L264">		return nodeData;</span>
	}
	
	/**
	 * To be called by the request handler that dynamically returns a html row via ajax.
	 * @param VTOEvent
	 * @return
	 */
	protected DefaultMultiColumnNodeData getNodeData(SkillAssignment skillAssignment) {
<span class="fc" id="L273">		DefaultMultiColumnNodeData nodeData = new DefaultMultiColumnNodeData(</span>
<span class="fc" id="L274">				skillAssignment.getSkillID());</span>
	{
		try  {
<span class="fc" id="L277">			ID id = skillAssignment.getSkillID();</span>
<span class="fc" id="L278">			Skill skill = WfmManagerFactory.getSkillManager(m_context.isInWhatIfMode()).getSkillByID(id);</span>
<span class="fc" id="L279">			nodeData.add(skill.getName());</span>

			//Proficiency
<span class="fc" id="L282">			double proficienty = skillAssignment.getProficiency();</span>
<span class="fc" id="L283">			FormInputPC proficiencyPC = new FormInputPC(getRequestContext());</span>
<span class="fc" id="L284">			proficiencyPC.reset(getName() + &quot;_&quot; + id.toString() + &quot;_proficiencyPC&quot;,</span>
<span class="fc" id="L285">					Double.toString(proficienty), FormInputPC.TYPE_NUMERIC, true);</span>
<span class="fc" id="L286">			proficiencyPC.setLowerLimit(0.1, true);</span>
<span class="fc" id="L287">			proficiencyPC.setUpperLimit(9.9, true);</span>
<span class="fc" id="L288">			proficiencyPC.setAutoExtractParamEnabled(true);</span>
<span class="fc" id="L289">			addChildComponent(proficiencyPC);</span>
<span class="fc" id="L290">			nodeData.add(proficiencyPC);</span>
			
			//Priority
<span class="fc" id="L293">			int priority= skillAssignment.getPriority();</span>
<span class="fc" id="L294">			FormInputPC priorityPC = new FormInputPC(getRequestContext());</span>
<span class="fc" id="L295">			priorityPC.reset(getName() + &quot;_&quot; + id.toString() +  &quot;_priorityPC&quot;,</span>
<span class="fc" id="L296">					Integer.toString(priority), FormInputPC.TYPE_INTEGER, true);</span>
<span class="fc" id="L297">			priorityPC.setLowerLimit(1, true);</span>
<span class="fc" id="L298">			priorityPC.setUpperLimit(99, true);</span>
<span class="fc" id="L299">			priorityPC.setAutoExtractParamEnabled(true);</span>
<span class="fc" id="L300">			addChildComponent(priorityPC);</span>
<span class="fc" id="L301">			nodeData.add(priorityPC);</span>
			
	
<span class="fc" id="L304">			nodeData.add(HtmlUtil.makeSelectInput(SELECTION_CLASSIFICATION_FN + &quot;_&quot; + id.toString(), </span>
<span class="fc" id="L305">						m_localizer.formatNumber(skillAssignment.getClassification()), </span>
						null, 
<span class="fc" id="L307">						getClassifications())); </span>

<span class="fc" id="L309">			setRowAttributes(nodeData, skillAssignment, skill);</span>
		}
<span class="nc" id="L311">		catch (Exception e) {</span>
			
<span class="fc" id="L313">		}</span>

<span class="fc" id="L315">		return nodeData; </span>
		}
	}
	
	private ArrayList&lt;StringsPair&gt; getClassifications () {
<span class="fc" id="L320">		ArrayList&lt;StringsPair&gt; colls = null;</span>
<span class="fc" id="L321">		colls = new ArrayList&lt;StringsPair&gt; (3);</span>
<span class="fc" id="L322">		colls.add(new StringsPair(&quot;0&quot;, m_localizer.i18n(BbmWebBundleKey.BUNDLE_NAME, BbmWebBundleKey.FS_STAFFING_PROFILES_SKILL_CLASSIFICATION_PRIMARY)));</span>
<span class="fc" id="L323">		colls.add(new StringsPair(&quot;1&quot;, m_localizer.i18n(BbmWebBundleKey.BUNDLE_NAME, BbmWebBundleKey.FS_STAFFING_PROFILES_SKILL_CLASSIFICATION_RESERVE1)));</span>
<span class="fc" id="L324">		colls.add(new StringsPair(&quot;2&quot;, m_localizer.i18n(BbmWebBundleKey.BUNDLE_NAME, BbmWebBundleKey.FS_STAFFING_PROFILES_SKILL_CLASSIFICATION_RESERVE2)));</span>
<span class="fc" id="L325">		return colls;</span>
	}
	
	private boolean isProficiencyCommonValued(HashSet&lt;SkillAssignment&gt; skillAssignments){
<span class="fc" id="L329">		boolean ret = true;</span>
		
<span class="fc" id="L331">		SkillAssignment skillAssignment = skillAssignments.iterator().next();</span>
<span class="fc" id="L332">		double proficienty = skillAssignment.getProficiency();</span>
<span class="fc bfc" id="L333" title="All 2 branches covered.">		for (SkillAssignment sa : skillAssignments){</span>
<span class="pc bpc" id="L334" title="1 of 2 branches missed.">			if (sa.getProficiency() != proficienty)</span>
			{
<span class="nc" id="L336">				ret = false;</span>
<span class="nc" id="L337">				break;</span>
			}
<span class="fc" id="L339">		}</span>
		
<span class="fc" id="L341">		return ret;</span>
	}
	
	private boolean isPriorityCommonValued(HashSet&lt;SkillAssignment&gt; skillAssignments){
<span class="fc" id="L345">		boolean ret = true;</span>
		
<span class="fc" id="L347">		SkillAssignment skillAssignment = skillAssignments.iterator().next();</span>
<span class="fc" id="L348">		double priority = skillAssignment.getPriority();</span>
<span class="fc bfc" id="L349" title="All 2 branches covered.">		for (SkillAssignment sa : skillAssignments){</span>
<span class="pc bpc" id="L350" title="1 of 2 branches missed.">			if (sa.getPriority() != priority)</span>
			{
<span class="nc" id="L352">				ret = false;</span>
<span class="nc" id="L353">				break;</span>
			}
<span class="fc" id="L355">		}</span>
		
<span class="fc" id="L357">		return ret;</span>
	}
	
	private boolean isClassCommonValued(HashSet&lt;SkillAssignment&gt; skillAssignments){
<span class="fc" id="L361">		boolean ret = true;</span>
		
<span class="fc" id="L363">		SkillAssignment skillAssignment = skillAssignments.iterator().next();</span>
<span class="fc" id="L364">		int cla = skillAssignment.getClassification();</span>
<span class="fc bfc" id="L365" title="All 2 branches covered.">		for (SkillAssignment sa : skillAssignments){</span>
<span class="pc bpc" id="L366" title="1 of 2 branches missed.">			if (sa.getClassification() != cla)</span>
			{
<span class="nc" id="L368">				ret = false;</span>
<span class="nc" id="L369">				break;</span>
			}
<span class="fc" id="L371">		}</span>
		
<span class="fc" id="L373">		return ret;</span>
	}
	
<span class="fc" id="L376">	private boolean isExtracted = false;</span>
	@Override
	public boolean extractParameters(HttpServletRequest request) {
<span class="fc bfc" id="L379" title="All 2 branches covered.">		if (isExtracted) return true;</span>
<span class="fc" id="L380">		isExtracted = true;</span>
<span class="fc" id="L381">		boolean retVal = super.extractParameters(request);</span>

<span class="fc" id="L383">		initRows();</span>
<span class="fc" id="L384">		initHeader();</span>
		
<span class="fc" id="L386">		return retVal;</span>
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>