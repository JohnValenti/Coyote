<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>EditTimeRecordModel.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">QA Code Coverage</a> &gt; <a href="index.source.html" class="el_package">com.bluepumpkin.web.am.timerecords</a> &gt; <span class="el_source">EditTimeRecordModel.java</span></div><h1>EditTimeRecordModel.java</h1><pre class="source lang-java linenums">package com.bluepumpkin.web.am.timerecords;

import java.rmi.RemoteException;
import java.util.ArrayList;
import java.util.Calendar;
import java.util.Collection;
import java.util.Date;
import java.util.Iterator;
import java.util.ResourceBundle;
import java.util.StringTokenizer;
import java.util.TimeZone;

import javax.servlet.http.HttpServletRequest;

import com.bluepumpkin.common.datatypes.ID;
import com.bluepumpkin.common.datatypes.StringsPair;
import com.bluepumpkin.common.logging.Category;
import com.bluepumpkin.common.util.StringUtil;
import com.bluepumpkin.ejb.am.AmEJBCreateException;
import com.bluepumpkin.ejb.bbm.activity.model.Activity;
import com.bluepumpkin.ejb.bbm.activity.model.ActivityCategory;
import com.bluepumpkin.ejb.bbm.activity.model.ActivityGroup;
import com.bluepumpkin.ejb.bbm.timerecord.model.TimeRecord;
import com.bluepumpkin.ejb.bbm.timerecord.model.TimeRecordEntry;
import com.bluepumpkin.ejb.bbm.workresource.model.Organization;
import com.bluepumpkin.web.am.Log;
import com.bluepumpkin.web.am.l10n.AmWebBundleKey;
import com.bluepumpkin.web.am.l10n.AmWebLogBundleKey;
import com.bluepumpkin.web.am.util.JSPUtil;
import com.bluepumpkin.web.bbm.activity.ActivityModelHandler;
import com.witness.web.uif.base.UnableToLoadDataException;
import com.witness.web.uif.jsp.HtmlSelect;
import com.witness.web.uif.keys.JavaScriptFileID;
import com.witness.web.uif.keys.PageAction;
import com.witness.web.uif.l10n.UIFWebBundleKey;
import com.witness.web.uif.pagecomponent.picker.date.DatePickerPC;
import com.witness.web.uif.pagemodel.PopupWindowPM;
import com.witness.web.uif.system.RequestContext;
import com.witness.web.uif.util.HourMinInput;
import com.witness.web.uif.util.HtmlUtil;
import com.witness.web.uif.util.html.HtmlChoiceInput;
import com.witness.web.uif.util.html.CSSUtil;

/**
 * Title:        Blue Pumpkin Software Activity Management
 * Description:  Edit time record model
 * Copyright:    Copyright (c) 2001
 * Company:      Blue Pumpkin Software, Inc
 * @author       Swati Tewari
 * @version 1.0
 */

public class EditTimeRecordModel extends PopupWindowPM {

	public static final String MODEL_KEY = &quot;EditTimeRecordModel&quot;;
	public static final String EDITREMARK_ACTION = &quot;EDITREMARK_ACTION&quot;;
	public static final String OKEDITREMARK_ACTION = &quot;OKEDITREMARK_ACTION&quot;;
	public static final String INSERTTE_ACTION = &quot;INSERTTE_ACTION&quot;;
	public static final String DELETETE_ACTION = &quot;DELETETE_ACTION&quot;;
	public static final String REFRESHEDIT_ACTION = &quot;REFRESHEDIT_ACTION&quot;;
	public static final String EDITTE_ACTION = &quot;EDITTE_ACTION&quot;;
	public static final String CREATE_END_SHIFT = &quot;CREATE_END_SHIFT&quot;;
	public static final String REFRESHCREATE_END_SHIFT = &quot;REFRESHCREATE_END_SHIFT&quot;;
	public static final String REFRESHINSERT_ACTION = &quot;REFRESHINSERT_ACTION&quot;;
	public static final String OKENDSHIFT_ACTION = &quot;OKENDSHIFT_ACTION&quot;;
	public static final String OKDELETE_ACTION = &quot;OKDELETE_ACTION&quot;;
	public static final String OKEDIT_ACTION = &quot;OKEDIT_ACTION&quot;;
	public static final String OKINSERT_ACTION = &quot;OKINSERT_ACTION&quot;;
	public static final String DONE_ACTION = &quot;DONE_ACTION&quot;;

	// Page Actions
<span class="fc" id="L72">	private static Category cat = Log.initCategory(EditTimeRecordModel.class.getName());</span>
	private ResourceBundle m_bundle;
	private ID empId;
	private String tableContent;
	private String pageTitleText;
	private String popUpHeader;
<span class="nc" id="L78">	private ArrayList tableData = new ArrayList();</span>
<span class="nc" id="L79">	private TimeRecord timeRecord = null;</span>
<span class="nc" id="L80">	private Date date = new Date();</span>
	private String selectedID;
	private ID[] selectedIDs;
<span class="nc" id="L83">	private int curIndex = 0;</span>
	private ID orgId;
	private int durationHour;
	private int durationMinute;
	private boolean isPaid;
	private String comment;
<span class="nc" id="L89">	private int position = -1;</span>
	private ID recordID;
	private String timeZone;
	private long version;
<span class="nc" id="L93">	private ID entryID = new ID(-1);</span>
	private int rawTimeEntryId;
<span class="nc" id="L95">	private TimeRecordEntry anEntry = null;</span>
	private boolean rowToDelete;
<span class="nc" id="L97">	private Date curDate = null;</span>
<span class="nc" id="L98">	private String remarks = null;</span>
	private boolean isLastEntry;
	private boolean isFirstEntry;
	private long hiddenMillisecond;
	private int hiddenSecond;
	private boolean isOpenShift;

<span class="nc" id="L105">	ActivityGroup activityGroup = null;</span>
<span class="nc" id="L106">	private boolean m_isInitiated = false;</span>

	//activity related variables
<span class="nc" id="L109">	private ArrayList activityCategoryNameList = new ArrayList();</span>
<span class="nc" id="L110">	private ArrayList activityCategoryIDList = new ArrayList();</span>
<span class="nc" id="L111">	private ArrayList activityIDList = new ArrayList();</span>
<span class="nc" id="L112">	private ArrayList activityNameList = new ArrayList();</span>
	private ID activityList;
	private ID activityCategory;

	private DatePickerPC m_dateTimePickerPC;
<span class="nc" id="L117">    private Date m_date = new Date();</span>

	/**
	 * setHtmlDisplay
	 */
	public String getHtmlDisplay() {
		//return html for display
<span class="nc" id="L124">		StringBuffer htmlDisplay = new StringBuffer(5000);</span>

		//start another table
<span class="nc" id="L127">		htmlDisplay.append(&quot;&lt;table cellpadding=\&quot;0\&quot; cellspacing=\&quot;0\&quot; width=\&quot;100%\&quot; class=\&quot;popupTable\&quot;&gt;&quot;);</span>

		//get table header
<span class="nc" id="L130">		htmlDisplay.append(popUpHeader);</span>

		//get table content
<span class="nc" id="L133">		htmlDisplay.append(tableContent);</span>

		//end table
<span class="nc" id="L136">		htmlDisplay.append(&quot;&lt;/table&gt;&quot;);</span>

<span class="nc" id="L138">		return htmlDisplay.toString();</span>
	}

	/**
	 * Constructor
	 */
	public EditTimeRecordModel(RequestContext context) {
<span class="nc" id="L145">		super(context);</span>
<span class="nc" id="L146">		m_bundle = m_localizer.getBundle(AmWebBundleKey.BUNDLE_NAME);</span>

<span class="nc" id="L148">		addRequiredJavaScriptFile(JavaScriptFileID.DIALOG_PICKERS);</span>
		//--- add a DatePicker Dialog Box to the model
		// It is enclosed in a DialogBoxPageModel to provide DialogMediator support.
<span class="nc" id="L151">		m_dateTimePickerPC = new DatePickerPC(context, &quot;display&quot;);</span>
<span class="nc" id="L152">		m_dateTimePickerPC.setIsTimeEnabled(true);</span>
<span class="nc" id="L153">		addChildComponent(m_dateTimePickerPC);</span>
<span class="nc" id="L154">	}</span>

	protected void initToolbar() {
<span class="nc" id="L157">		m_toolbar.addValidateSubmitTextButton(</span>
				PageAction.SAVE,
<span class="nc" id="L159">				i18n(m_common_bundle, UIFWebBundleKey.TOOLBAR_SAVE),</span>
				true);
<span class="nc" id="L161">		m_toolbar.addCloseWindowTextButton(</span>
				PageAction.CANCEL,
<span class="nc" id="L163">				i18n(m_common_bundle, UIFWebBundleKey.TOOLBAR_CANCEL),</span>
				true);
<span class="nc" id="L165">	}</span>

	/**
	 * Return instance of Model which is ready to be rendered
	 */
	public static EditTimeRecordModel getInstance(RequestContext context) throws Exception {
<span class="nc" id="L171">		EditTimeRecordModel model = null;</span>
		try {
<span class="nc" id="L173">			model = (EditTimeRecordModel) context.getAttribute(RequestContext.REQUEST_SCOPE,</span>
					EditTimeRecordModel.MODEL_KEY);

<span class="nc bnc" id="L176" title="All 2 branches missed.">			if (model == null) {</span>
				//create a new model
<span class="nc" id="L178">				model = new EditTimeRecordModel(context);</span>
			}

<span class="nc" id="L181">			model.populateModel();</span>
<span class="nc" id="L182">		} catch (UnableToLoadDataException ex) {</span>
<span class="nc" id="L183">			cat.l7dError(AmWebLogBundleKey.UNABLE_TO_LOAD_DATA, ex);</span>
<span class="nc" id="L184">		}</span>
<span class="nc" id="L185">		return model;</span>
	}

	/**
	 * Return the resource bundle associated with the page model
	 */
	public ResourceBundle getBundle() {
<span class="nc" id="L192">		return m_bundle;</span>
	}

	/**
	 * Make sure that the model is populated
	 */
	private void populateModel() throws UnableToLoadDataException, Exception {

		//process activity group if action requires it
<span class="nc bnc" id="L201" title="All 2 branches missed.">		if (this.getPageAction().equals(EDITTE_ACTION) ||</span>
<span class="nc bnc" id="L202" title="All 2 branches missed.">				this.getPageAction().equals(DELETETE_ACTION) ||</span>
<span class="nc bnc" id="L203" title="All 2 branches missed.">				this.getPageAction().equals(REFRESHEDIT_ACTION) ||</span>
<span class="nc bnc" id="L204" title="All 2 branches missed.">				this.getPageAction().equals(REFRESHINSERT_ACTION) ||</span>
<span class="nc bnc" id="L205" title="All 2 branches missed.">				this.getPageAction().equals(INSERTTE_ACTION) ||</span>
<span class="nc bnc" id="L206" title="All 2 branches missed.">				this.getPageAction().equals(OKDELETE_ACTION) ||</span>
<span class="nc bnc" id="L207" title="All 2 branches missed.">				this.getPageAction().equals(OKEDIT_ACTION) ||</span>
<span class="nc bnc" id="L208" title="All 2 branches missed.">				this.getPageAction().equals(OKINSERT_ACTION)) {</span>
<span class="nc" id="L209">			this.processActivityGroup();</span>
		}

<span class="nc bnc" id="L212" title="All 2 branches missed.">		if (m_isInitiated) return;</span>
<span class="nc" id="L213">		initToolbar();</span>
<span class="nc" id="L214">		this.setTableContent();</span>
<span class="nc" id="L215">		this.getPopupHeader();</span>
<span class="nc" id="L216">		this.setPopupPageTitle();</span>
<span class="nc" id="L217">		m_isInitiated = true;</span>
<span class="nc" id="L218">	}</span>

	//override base class;  buttons: back, forward, refresh, print, preferences, help, logout, close
	protected void initUtilityPane() {
<span class="nc" id="L222">		this.getUtilityPane().setIsRefreshEnabled(false);</span>
<span class="nc" id="L223">		String pageAction = getPageAction();</span>
<span class="nc bnc" id="L224" title="All 2 branches missed.">		if (DELETETE_ACTION.equals(pageAction) ||</span>
<span class="nc bnc" id="L225" title="All 2 branches missed.">			EDITREMARK_ACTION.equals(pageAction) ||</span>
<span class="nc bnc" id="L226" title="All 2 branches missed.">			CREATE_END_SHIFT.equals(pageAction) ||</span>
<span class="nc bnc" id="L227" title="All 2 branches missed.">			REFRESHCREATE_END_SHIFT.equals(pageAction)){</span>
<span class="nc bnc" id="L228" title="All 2 branches missed.">		  if (getUtilityPane()!=null){</span>
<span class="nc" id="L229">			getUtilityPane().setIsPrintEnabled(false);</span>
<span class="nc" id="L230">			getUtilityPane().setIsHelpEnabled(false);</span>
		  }
		}
<span class="nc" id="L233">	}</span>

	/**
	 * set empId
	 */
	public void setEmpId(ID empId) {
<span class="nc" id="L239">		this.empId = empId;</span>
<span class="nc" id="L240">	}</span>

	/**
	 * get empId
	 */
	public ID getEmpId() {
<span class="nc" id="L246">		return this.empId;</span>
	}

	/**
	 * get pageTitleText
	 */
	public String getPageTitleText() {
<span class="nc" id="L253">		return this.pageTitleText;</span>
	}

	/**
	 * set pageTitleText
	 */
	public void setPageTitleText(String pageTitleText) {
<span class="nc" id="L260">		this.pageTitleText = pageTitleText;</span>
<span class="nc" id="L261">	}</span>

	/**
	 * get tableData
	 */
	public ArrayList getTableData() {
<span class="nc" id="L267">		return this.tableData;</span>
	}

	/**
	 * set tableData
	 */
	public void setTableData(ArrayList tableData) {
<span class="nc" id="L274">		this.tableData = tableData;</span>
<span class="nc" id="L275">	}</span>

	/**
	 * setPopupPageTitle()
	 */
	private void setPopupPageTitle() {
<span class="nc" id="L281">		String headerStr = &quot;&quot;;</span>
<span class="nc bnc" id="L282" title="All 2 branches missed.">		if (this.getPageAction().equals(DELETETE_ACTION)) {</span>
<span class="nc" id="L283">			headerStr = i18n(m_bundle, AmWebBundleKey.DELETE_TIME_ENTRY);</span>
<span class="nc bnc" id="L284" title="All 2 branches missed.">		} else if (getPageAction().equals(EDITTE_ACTION) ||</span>
<span class="nc bnc" id="L285" title="All 2 branches missed.">				getPageAction().equals(REFRESHEDIT_ACTION)) {</span>
<span class="nc" id="L286">			headerStr = i18n(m_bundle, AmWebBundleKey.EDIT_TIME_ENTRY);</span>
<span class="nc bnc" id="L287" title="All 2 branches missed.">		} else if (getPageAction().equals(INSERTTE_ACTION) ||</span>
<span class="nc bnc" id="L288" title="All 2 branches missed.">				getPageAction().equals(REFRESHINSERT_ACTION)) {</span>
<span class="nc" id="L289">			headerStr = i18n(m_bundle, AmWebBundleKey.INSERT_TIME_ENTRY);</span>
<span class="nc bnc" id="L290" title="All 2 branches missed.">		} else if (getPageAction().equals(EDITREMARK_ACTION)) {</span>
<span class="nc" id="L291">			headerStr = i18n(m_bundle, AmWebBundleKey.EDIT_COMMENTS);</span>
<span class="nc bnc" id="L292" title="All 2 branches missed.">		} else if (getPageAction().equals(CREATE_END_SHIFT) ||</span>
<span class="nc bnc" id="L293" title="All 2 branches missed.">				getPageAction().equals(REFRESHCREATE_END_SHIFT)) {</span>
<span class="nc" id="L294">			headerStr = i18n(m_bundle, AmWebBundleKey.CREATE_END_SHIFT);</span>
		}

<span class="nc" id="L297">		m_contentTitlePC.setPageTitle(headerStr);</span>

<span class="nc" id="L299">	}</span>

	/**
	 * getPopupHeader()
	 */
	private void getPopupHeader() {
<span class="nc" id="L305">		StringBuffer aSb = new StringBuffer(512);</span>
<span class="nc bnc" id="L306" title="All 2 branches missed.">		if (getPageAction().equals(EDITTE_ACTION) ||</span>
<span class="nc bnc" id="L307" title="All 2 branches missed.">				getPageAction().equals(INSERTTE_ACTION) ||</span>
<span class="nc bnc" id="L308" title="All 2 branches missed.">				getPageAction().equals(REFRESHEDIT_ACTION) ||</span>
<span class="nc bnc" id="L309" title="All 2 branches missed.">				getPageAction().equals(REFRESHEDIT_ACTION)) {</span>
<span class="nc" id="L310">			aSb.append(&quot;&lt;tr&gt;&lt;th scope=\&quot;col\&quot; class=\&quot;popupDialogTitlePane\&quot; style=\&quot;&quot; + CSSUtil.STYLE_NORMAL_LEFT_PAD10 + &quot;\&quot; nowrap&gt;\n&quot; +</span>
<span class="nc" id="L311">					i18n(m_bundle, AmWebBundleKey.TIME) +</span>
					&quot;&lt;/td&gt;&quot;);
<span class="nc bnc" id="L313" title="All 2 branches missed.">			if (getAnEntry() != null) {</span>
<span class="nc" id="L314">				aSb.append(&quot;&lt;th scope=\&quot;col\&quot; class=\&quot;popupDialogTitlePane\&quot; style=\&quot;&quot; + CSSUtil.STYLE_NORMAL_LEFT_PAD10 + &quot;\&quot; nowrap&gt;\n&quot; +</span>
<span class="nc" id="L315">						i18n(m_bundle, AmWebBundleKey.ACTIVITY_TYPE) +</span>
						&quot;&lt;/td&gt;&quot;);
<span class="nc bnc" id="L317" title="All 2 branches missed.">				if (!getAnEntry().getActivityID().equals(Activity.ACTIVITY_NONE)) {</span>
<span class="nc" id="L318">					aSb.append(&quot;&lt;th scope=\&quot;col\&quot; class=\&quot;popupDialogTitlePane\&quot; style=\&quot;&quot; + CSSUtil.STYLE_NORMAL_LEFT_PAD10 + &quot;\&quot; nowrap&gt;\n&quot; +</span>
<span class="nc" id="L319">							i18n(m_bundle, AmWebBundleKey.ACTIVITY) +</span>
							&quot;&lt;/td&gt;&lt;th scope=\&quot;col\&quot; class=\&quot;popupDialogTitlePane\&quot; style=\&quot;&quot; + CSSUtil.STYLE_NORMAL_LEFT_PAD10 + &quot;\&quot; nowrap&gt;\n&quot; +
<span class="nc" id="L321">							i18n(m_bundle, AmWebBundleKey.DURATION) +</span>
							&quot;&lt;/td&gt;&lt;th scope=\&quot;col\&quot; class=\&quot;popupDialogTitlePane\&quot; style=\&quot;&quot; + CSSUtil.STYLE_NORMAL_LEFT_PAD10 + &quot;\&quot; nowrap&gt;\n&quot; +
<span class="nc" id="L323">							i18n(m_bundle, AmWebBundleKey.PAYABLE));</span>
				}
			}
<span class="nc" id="L326">			aSb.append(&quot;&lt;/td&gt;&lt;th scope=\&quot;col\&quot; class=\&quot;popupDialogTitlePane\&quot; style=\&quot;&quot; + CSSUtil.STYLE_NORMAL_LEFT_PAD10 + &quot;\&quot; nowrap&gt;\n&quot; +</span>
<span class="nc" id="L327">					i18n(m_bundle, AmWebBundleKey.MY_NOTES) +</span>
					&quot;&lt;/tr&gt;&quot;);
		}
<span class="nc" id="L330">		popUpHeader = aSb.toString();</span>
<span class="nc" id="L331">	}</span>

	/**
	 * getTableContent()
	 */
	private String getTableContent() {
<span class="nc" id="L337">		return tableContent;</span>
	}

	/**
	 * setTableContent()
	 */
	public void setTableContent() throws Exception {
<span class="nc" id="L344">		StringBuffer aSb = new StringBuffer(512);</span>

<span class="nc" id="L346">		TimeRecordEntry trEntry = getAnEntry();</span>
<span class="nc bnc" id="L347" title="All 4 branches missed.">		boolean isEndShift = (trEntry != null &amp;&amp; trEntry.getActivityID().equals(Activity.ACTIVITY_NONE)) ? true : false;</span>

<span class="nc bnc" id="L349" title="All 2 branches missed.">		if (getTimeRecord() != null &amp;&amp;</span>
<span class="nc bnc" id="L350" title="All 2 branches missed.">				getPageAction().equals(EDITREMARK_ACTION)) {</span>
			//render table row
<span class="nc" id="L352">			aSb.append(&quot;&lt;tr&gt;&quot; +</span>
					&quot;&lt;td colspan=\&quot;2\&quot; class=\&quot;popupDialogPane\&quot; style=\&quot;padding-left:10px\&quot;&gt;&quot; +
<span class="nc" id="L354">					HtmlUtil.makeTextAreaInput(&quot;remarks&quot;, 52, 5, &quot;setPageDirty();&quot;, true,</span>
<span class="nc bnc" id="L355" title="All 2 branches missed.">							getTimeRecord().getDescription() != null ? getTimeRecord().getDescription() : &quot;&quot;) +</span>
					&quot;&lt;/td&gt;&quot; +
					&quot;&lt;/tr&gt;&quot;);
<span class="nc bnc" id="L358" title="All 2 branches missed.">		} else if (getPageAction().equals(DELETETE_ACTION)) {</span>
<span class="nc" id="L359">			aSb.append(&quot;&lt;tr&gt;&quot; +</span>
					&quot;&lt;td colspan=\&quot;2\&quot; class=\&quot;popupDialogTitlePane\&quot; style=\&quot;padding-left:10px\&quot; nowrap&gt;&quot; +
<span class="nc" id="L361">					m_localizer.i18n(m_bundle, AmWebBundleKey.DELETE_ENTRY_TEXT) +</span>
					&quot;&lt;/td&gt;&quot; +
					&quot;&lt;/tr&gt;&quot;);

<span class="nc bnc" id="L365" title="All 2 branches missed.">			if (!getIsFirstEntry()) {</span>
<span class="nc" id="L366">				aSb.append(&quot;&lt;tr&gt;&quot; +</span>
						&quot;&lt;td colspan=\&quot;2\&quot; class=\&quot;popupDialogPane\&quot; style=\&quot;padding-left:10px\&quot;&gt;&quot; +
						&quot;&lt;input type=\&quot;radio\&quot; name=\&quot;rowToDelete\&quot; value=\&quot;true\&quot; checked onChange=\&quot;setPageDirty();\&quot;&gt;&quot; +
						&quot;&lt;span class=\&quot;headerText2\&quot;&gt;&quot; +
<span class="nc" id="L370">						m_localizer.i18n(m_bundle, AmWebBundleKey.DELETE_ENTRY_EXTENDPREV) +</span>
						&quot;&lt;/span&gt;&quot; +
						&quot;&lt;/td&gt;&quot; +
						&quot;&lt;/tr&gt;&quot;);
			}
<span class="nc bnc" id="L375" title="All 4 branches missed.">			if (!getIsLastEntry() &amp;&amp; !isEndShift) {</span>
<span class="nc" id="L376">				aSb.append(&quot;&lt;tr&gt;&quot; +</span>
						&quot;&lt;td colspan=\&quot;2\&quot; class=\&quot;popupDialogPane\&quot; style=\&quot;padding-left:10px\&quot;&gt;&quot; +
						&quot;&lt;input type=\&quot;radio\&quot; name=\&quot;rowToDelete\&quot; value=\&quot;false\&quot; checked onChange=\&quot;setPageDirty();\&quot;&gt;&quot; +
						&quot;&lt;span class=\&quot;headerText2\&quot;&gt;&quot; +
<span class="nc" id="L380">						m_localizer.i18n(m_bundle, AmWebBundleKey.DELETE_ENTRY_EXTENDNEXT) +</span>
						&quot;&lt;/span&gt;&quot; +
						&quot;&lt;/td&gt;&quot; +
						&quot;&lt;/tr&gt;&quot;);
			}
<span class="nc bnc" id="L385" title="All 2 branches missed.">		} else if (getPageAction().equals(CREATE_END_SHIFT) ||</span>
<span class="nc bnc" id="L386" title="All 2 branches missed.">				getPageAction().equals(REFRESHCREATE_END_SHIFT)) {</span>
<span class="nc" id="L387">			Calendar aCal = Calendar.getInstance(TimeZone.getTimeZone(getTimeZone()));</span>
<span class="nc" id="L388">			aCal.setTime(trEntry.getStartTime());</span>

			//add a minute to prevent back end exception
<span class="nc bnc" id="L391" title="All 2 branches missed.">			if (getPageAction().equals(CREATE_END_SHIFT)) aCal.add(Calendar.MINUTE, 1);</span>
<span class="nc" id="L392">            getDateTimePicker().setDate(aCal.getTime());</span>
<span class="nc" id="L393">			getDateTimePicker().setOnChangeJS(&quot;setPageDirty();&quot;);</span>
<span class="nc" id="L394">			aSb.append(&quot;&lt;tr&gt;&quot; +</span>
					&quot;&lt;td colspan=\&quot;2\&quot; class=\&quot;popupDialogPane\&quot; style=\&quot;padding-left:10px\&quot;&gt;&quot; +
<span class="nc" id="L396">					(getDateTimePicker().getHtmlDisplay()) +</span>
					&quot;&lt;input type=\&quot;hidden\&quot; name=\&quot;activityList\&quot; value=\&quot;&quot; +
<span class="nc" id="L398">					Activity.ACTIVITY_NONE.toString() +</span>
					&quot;\&quot;&gt;&quot; +
					&quot;&lt;input type=\&quot;hidden\&quot; name=\&quot;comment\&quot; value=\&quot;\&quot;&gt;&quot; +
					&quot;&lt;input type=\&quot;hidden\&quot; name=\&quot;rawTimeEntryId\&quot; value=\&quot;&quot; +
<span class="nc" id="L402">					getRawTimeEntryId() +</span>
					&quot;\&quot;&gt;&quot; +
					&quot;&lt;input type=\&quot;hidden\&quot; name=\&quot;payType\&quot; value=\&quot;payType\&quot;&gt;&quot; +
					&quot;&lt;/td&gt;&quot; +
					&quot;&lt;/tr&gt;&quot;);
<span class="nc bnc" id="L407" title="All 2 branches missed.">		} else if (getAnEntry() != null) {//edit and insert entry</span>
<span class="nc bnc" id="L408" title="All 2 branches missed.">			String anAction = getPageAction().equals(EDITTE_ACTION)</span>
<span class="nc bnc" id="L409" title="All 2 branches missed.">					|| getPageAction().equals(REFRESHEDIT_ACTION)</span>
					? REFRESHEDIT_ACTION : REFRESHINSERT_ACTION;

<span class="nc" id="L412">			getDateTimePicker().setDate(trEntry.getStartTime());</span>
<span class="nc" id="L413">			getDateTimePicker().setOnChangeJS(&quot;setPageDirty();&quot;);</span>

<span class="nc" id="L415">			aSb.append(&quot;&lt;tr&gt;&quot; +</span>
					&quot;&lt;td class=\&quot;popupDialogPane\&quot; style=\&quot;padding-left:10px\&quot; nowrap&gt;&quot; +
<span class="nc" id="L417">					(getDateTimePicker().getHtmlDisplay()) +</span>
					&quot;&lt;/td&gt;&quot;);
<span class="nc bnc" id="L419" title="All 2 branches missed.">			if (!isEndShift) {</span>
<span class="nc" id="L420">				aSb.append(&quot;&lt;td class=\&quot;popupDialogPane\&quot; style=\&quot;padding-left:10px\&quot;&gt;&quot; +</span>
<span class="nc" id="L421">						getActivityCategorySelector() +</span>
						&quot;&lt;/td&gt;&quot; +
						&quot;&lt;td class=\&quot;popupDialogPane\&quot; style=\&quot;padding-left:10px\&quot; nowrap&gt;&quot; +
<span class="nc" id="L424">						getActivitySelector(trEntry.getActivityID()) +</span>
						&quot;&lt;/td&gt;&quot;);
<span class="nc" id="L426">				int[] aDuration = JSPUtil.getDisplayDuration(trEntry.getDuration() * 60);</span>
<span class="nc" id="L427">				aSb.append(&quot;&lt;td class=\&quot;popupDialogPane\&quot; style=\&quot;padding-left:10px\&quot; nowrap&gt;&quot; +</span>
<span class="nc" id="L428">						HourMinInput.getHourMinInput(&quot;duration&quot;, aDuration[0], aDuration[1], &quot;&quot;) +</span>
						&quot;&lt;/td&gt;&quot; +
						&quot;&lt;td class=\&quot;popupDialogPane\&quot; style=\&quot;padding-left:10px\&quot;&gt;&quot; +
<span class="nc" id="L431">						HtmlChoiceInput.makeChkBoxInput(&quot;payType&quot;, &quot;payType&quot;, &quot;&quot;, trEntry.getPaid(), isEndShift, &quot;setPageDirty();&quot;) +</span>
						&quot;&lt;/td&gt;&quot;);
<span class="nc" id="L433">			} else {</span>
<span class="nc" id="L434">				aSb.append(</span>
						&quot;&lt;td class=\&quot;popupDialogPane\&quot; style=\&quot;padding-left:10px\&quot;&gt;&quot; +
						&quot;&lt;font class=\&quot;headerText2\&quot;&gt;&quot; +
<span class="nc" id="L437">						HtmlUtil.escapeAttributeValue(m_localizer.i18n(m_bundle, AmWebBundleKey.END_SHIFT)) +</span>
						&quot;&lt;/font&gt;&quot; +
						&quot;&lt;/td&gt;&quot; +
						&quot;&lt;input type=\&quot;hidden\&quot; name=\&quot;activityCategory\&quot; value=\&quot;&quot; +
<span class="nc" id="L441">						HtmlUtil.escapeAttributeValue(getActivityCategory().toString()) +</span>
						&quot;\&quot;&gt;&quot; +
						&quot;&lt;input type=\&quot;hidden\&quot; name=\&quot;activityList\&quot; value=\&quot;&quot; +
<span class="nc" id="L444">						HtmlUtil.escapeAttributeValue(getActivityList().toString()) +</span>
						&quot;\&quot;&gt;&quot; +
						&quot;&lt;input type=\&quot;hidden\&quot; name=\&quot;minute\&quot; value=\&quot;0\&quot;&gt;&quot; +
						&quot;&lt;input type=\&quot;hidden\&quot; name=\&quot;hour\&quot; value=\&quot;0\&quot;&gt;&quot; +
						&quot;&lt;input type=\&quot;hidden\&quot; name=\&quot;payType\&quot; value=\&quot;payType\&quot;&gt;&quot;);
			}
<span class="nc" id="L450">			aSb.append(//text field for both</span>
					&quot;&lt;td class=\&quot;popupDialogPane\&quot; style=\&quot;padding-left:10px\&quot;&gt;&quot; +
<span class="nc" id="L452">					HtmlUtil.makeTextInput(&quot;comment&quot;, 10, 200,</span>
<span class="nc bnc" id="L453" title="All 2 branches missed.">							trEntry.getDescription() != null ? trEntry.getDescription() : &quot;&quot;, &quot;setPageDirty();&quot;) +</span>
					&quot;&lt;/td&gt;&quot; +
					&quot;&lt;/tr&gt;&quot; +
					&quot;&lt;input type=\&quot;hidden\&quot; name=\&quot;entryID\&quot; value=&quot; +
<span class="nc" id="L457">					HtmlUtil.escapeAttributeValue(getEntryID().toString()) +</span>
					&quot;&gt;&quot;);
		}

<span class="nc" id="L461">		tableContent = aSb.toString();</span>
<span class="nc" id="L462">	}</span>

	/**
	 * getActivityCategorySelector()
	 * return HtmlSelect
	 */
	private HtmlSelect getActivityCategorySelector() {
<span class="nc" id="L469">		HtmlSelect activityCategorySelect = new HtmlSelect(&quot;activityCategory&quot;);</span>
<span class="nc" id="L470">		activityCategorySelect.setStyleClass(&quot;dropDown&quot;);</span>
<span class="nc" id="L471">		activityCategorySelect.setAttribute(&quot;nameIndex&quot;);</span>
<span class="nc" id="L472">		activityCategorySelect.setOnChange(&quot;populateSecondaryListFromPreLoad(this, 0);&quot;);</span>
		try {
<span class="nc" id="L474">			activityCategorySelect.setOptions(getActivityCategoryNameList(),</span>
<span class="nc" id="L475">					getActivityCategoryIDList(), getActivityCategory().toString());</span>
<span class="nc" id="L476">		} catch (Exception ex) {</span>

<span class="nc" id="L478">		}</span>
<span class="nc" id="L479">		return activityCategorySelect;</span>
	}

	/**
	 * getActivitySelector()
	 * returnHtmlSelect
	 */
	private String getActivitySelector(ID activityID) {
<span class="nc" id="L487">		ArrayList list = new ArrayList();</span>
<span class="nc bnc" id="L488" title="All 2 branches missed.">		for (int i = 0; i &lt; activityIDList.size(); i++) {</span>
<span class="nc" id="L489">			list.add(new StringsPair((String) activityIDList.get(i), (String) activityNameList.get(i)));</span>
		}
<span class="nc" id="L491">		return HtmlUtil.makeSelectInput(&quot;activityList&quot;, &quot;&quot; + 0,</span>
<span class="nc" id="L492">				new String[]{activityID.toString()}, &quot;activityChanged();&quot;, list, &quot;150px&quot;);</span>
	}
    
	/**
	 * Return the JavaScript init code required by Page model.
	 *
	 * Default behavior is to retrieve sub-component JavaScript Init code
	 */
	public String getJavaScriptInitCode() {
		//generate string to close popup
<span class="nc" id="L502">		String template = &quot;&quot;;</span>
<span class="nc bnc" id="L503" title="All 4 branches missed.">		if (getPageAction() != null &amp;&amp; getPageAction().equals(DONE_ACTION)) {</span>
<span class="nc" id="L504">			setOpenerValueOnClose(&quot;selectedID&quot;, selectedID, true);</span>
<span class="nc" id="L505">			setOpenerValueOnClose(&quot;editIndex&quot;, String.valueOf(curIndex), false);</span>
<span class="nc" id="L506">			setOpenerValueOnClose(&quot;timeEntryID&quot;, String.valueOf(entryID), false);</span>
<span class="nc" id="L507">			setOpenerValueOnClose(&quot;position&quot;, String.valueOf(position), false);</span>
<span class="nc" id="L508">            setRefreshOpenerWithAction(&quot;&quot;);</span>
<span class="nc" id="L509">			setIsCloseAfterLoad(true);</span>
		}
<span class="nc bnc" id="L511" title="All 4 branches missed.">		if (getPageAction() != null &amp;&amp; getPageAction().equals(INSERTTE_ACTION))</span>
<span class="nc" id="L512">			template = &quot;setActivityPaid()&quot;;</span>
<span class="nc" id="L513">		StringBuffer jsInitCode = new StringBuffer(512);</span>

		// Add sub-component JavaScript code first
<span class="nc" id="L516">		jsInitCode.append(super.getJavaScriptInitCode()).append(&quot;\n&quot;);</span>

		// [now create the new mediator]
<span class="nc" id="L519">		jsInitCode.append(template);</span>

<span class="nc" id="L521">		return jsInitCode.toString();</span>
	}

	/**
	 * setActivityGroup()
	 */
	public void setActivityGroup() {
<span class="nc bnc" id="L528" title="All 2 branches missed.">		if (activityGroup == null) {</span>
			try {
<span class="nc" id="L530">				activityGroup =	ActivityModelHandler.getActivityGroup(m_context, getOrgId(), ActivityGroup.ALL_ACTIVITYCATEGORIES);</span>
<span class="nc" id="L531">			} catch (Exception ex) {</span>
<span class="nc" id="L532">				handleUnableToLoadDataError(log, ex);</span>
<span class="nc" id="L533">			}</span>
		}
<span class="nc" id="L535">	}</span>

	/**
	 * Return the custom JavaScript code for the Page model.
	 */
	public String getCustomJavaScript() {
<span class="nc" id="L541">		StringBuffer jsInitCode = new StringBuffer(512);</span>
		//need to get this only for update and insert
<span class="nc bnc" id="L543" title="All 2 branches missed.">		if ((this.pageAction.equals(EDITTE_ACTION) ||</span>
<span class="nc bnc" id="L544" title="All 2 branches missed.">				this.pageAction.equals(DELETETE_ACTION) ||</span>
<span class="nc bnc" id="L545" title="All 2 branches missed.">				this.pageAction.equals(REFRESHEDIT_ACTION) ||</span>
<span class="nc bnc" id="L546" title="All 2 branches missed.">				this.pageAction.equals(REFRESHINSERT_ACTION) ||</span>
<span class="nc bnc" id="L547" title="All 2 branches missed.">				this.pageAction.equals(INSERTTE_ACTION) ||</span>
<span class="nc bnc" id="L548" title="All 2 branches missed.">				this.pageAction.equals(OKEDIT_ACTION) ||</span>
<span class="nc bnc" id="L549" title="All 4 branches missed.">				this.pageAction.equals(OKINSERT_ACTION)) &amp;&amp;</span>
				this.activityGroup != null) {
			//create the arrays of activity category and activities to preload into the jsp
			// Create the Primary dropdown collection
<span class="nc" id="L553">			ArrayList primary = new ArrayList();</span>

<span class="nc bnc" id="L555" title="All 2 branches missed.">			ArrayList activityCategories = this.activityGroup.getActivityCategories().size() &gt; 0 ?</span>
<span class="nc" id="L556">					(ArrayList) this.activityGroup.getActivityCategories() : new ArrayList();</span>

<span class="nc" id="L558">			Collection activities = null;</span>
<span class="nc bnc" id="L559" title="All 2 branches missed.">			activities = this.activityGroup.getActivities().size() &gt; 0 ?</span>
<span class="nc" id="L560">					this.activityGroup.getActivities() : new ArrayList();</span>

<span class="nc" id="L562">			ArrayList[] secondaryLists = new ArrayList[activityCategories.size()];</span>
<span class="nc bnc" id="L563" title="All 2 branches missed.">			for (int i = 0; i &lt; activityCategories.size(); i++) {</span>
<span class="nc" id="L564">				ActivityCategory activityCategory = (ActivityCategory) activityCategories.get(i);</span>
<span class="nc" id="L565">				StringsPair sp = new StringsPair(activityCategory.getID().toString(),</span>
<span class="nc" id="L566">						activityCategory.getName());</span>
<span class="nc" id="L567">				primary.add(sp);</span>

<span class="nc" id="L569">				ArrayList actList = new ArrayList();</span>
<span class="nc bnc" id="L570" title="All 4 branches missed.">				if (activities != null &amp;&amp; activities.size() &gt; 0) {</span>
<span class="nc bnc" id="L571" title="All 2 branches missed.">					for (Iterator j = activities.iterator(); j.hasNext();) {</span>
<span class="nc" id="L572">						Activity activity = (Activity) j.next();</span>
<span class="nc bnc" id="L573" title="All 2 branches missed.">						if (!activityCategory.getOrganizationId().equals(new ID(Organization.ROOT_ORG_ID)) &amp;&amp;</span>
<span class="nc bnc" id="L574" title="All 2 branches missed.">								activity.getActivityCategoryId().equals(activityCategory.getID())) {</span>
<span class="nc" id="L575">							StringsPair actSp = new StringsPair(activity.getID().toString(), activity.getName());</span>
<span class="nc" id="L576">							actList.add(actSp);</span>
						}
<span class="nc" id="L578">					}</span>
				}
<span class="nc" id="L580">				secondaryLists[i] = actList;</span>
			}

<span class="nc" id="L583">			jsInitCode.append(&quot;var secondaryLists;\n&quot;)</span>
<span class="nc" id="L584">					.append(&quot;secondaryLists = new Array(&quot; + primary.size() + &quot;);\n&quot;);</span>

<span class="nc bnc" id="L586" title="All 2 branches missed.">			for (int i = 0; i &lt; primary.size(); i++) {</span>
<span class="nc" id="L587">				ArrayList list = secondaryLists[i];</span>
<span class="nc" id="L588">				jsInitCode.append(&quot;var secondaryList = new Array(2);\n&quot;)</span>
<span class="nc" id="L589">						.append(&quot;var secondaryValues = new Array(&quot; + list.size() + &quot;);\n&quot;)</span>
<span class="nc" id="L590">						.append(&quot;var secondaryText = new Array(&quot; + list.size() + &quot;);\n&quot;);</span>
<span class="nc bnc" id="L591" title="All 2 branches missed.">				if (list.size() &gt; 0) {</span>
<span class="nc bnc" id="L592" title="All 2 branches missed.">					for (int option = 0; option &lt; list.size(); option++) {</span>
<span class="nc" id="L593">						jsInitCode.append(&quot;secondaryValues[&quot; + option + &quot;] = \'&quot; + ((StringsPair) list.get(option)).getKey() + &quot;\';\n&quot;)</span>
<span class="nc" id="L594">								.append(&quot;secondaryText[&quot; + option + &quot;] = \'&quot; + JSPUtil.escapeString(((StringsPair) list.get(option)).getValue(), &quot;\'&quot;) + &quot;\';\n&quot;);</span>
					}
				} else {
<span class="nc" id="L597">					jsInitCode.append(&quot;secondaryValues[0] = \'-1\';\n&quot;)</span>
<span class="nc" id="L598">							.append(&quot;secondaryText[0] = \'\';\n&quot;);</span>
				}

<span class="nc" id="L601">				jsInitCode.append(&quot;secondaryList[0] = secondaryValues;\n&quot;)</span>
<span class="nc" id="L602">						.append(&quot;secondaryList[1] = secondaryText;\n&quot;)</span>
<span class="nc" id="L603">						.append(&quot;secondaryLists[&quot; + ((StringsPair) primary.get(i)).getKey() + &quot;] = secondaryList;\n&quot;);</span>
			}

			//add all activities and paid value to a new array
<span class="nc bnc" id="L607" title="All 4 branches missed.">			if (activities != null &amp;&amp; activities.size() &gt; 0) {</span>
<span class="nc" id="L608">				jsInitCode.append(&quot;var actvitiyIDArray;\n&quot;)</span>
<span class="nc" id="L609">						.append(&quot;actvitiyIDArray = new Array(&quot; + activities.size() + &quot;);\n&quot;);</span>
<span class="nc" id="L610">				jsInitCode.append(&quot;var actvitiyPaidArray;\n&quot;)</span>
<span class="nc" id="L611">						.append(&quot;actvitiyPaidArray = new Array(&quot; + activities.size() + &quot;);\n&quot;);</span>
<span class="nc" id="L612">				int count = 0;</span>
<span class="nc bnc" id="L613" title="All 2 branches missed.">				for (Iterator j = activities.iterator(); j.hasNext(); count++) {</span>
<span class="nc" id="L614">					Activity activity = (Activity) j.next();</span>
<span class="nc" id="L615">					jsInitCode.append(&quot;actvitiyIDArray[&quot; + count + &quot;] = \'&quot; + activity.getID().toString() + &quot;\';\n&quot;);</span>
<span class="nc" id="L616">					jsInitCode.append(&quot;actvitiyPaidArray[&quot; + count + &quot;] = \'&quot; + activity.isPaid() + &quot;\';\n&quot;);</span>
				}
			}
		}

<span class="nc" id="L621">		return jsInitCode.toString();</span>
	}

	/**
	 * processActivityGroup()
	 */
	public void processActivityGroup()
			throws AmEJBCreateException, RemoteException, Exception {
<span class="nc" id="L629">		setActivityGroup();</span>
<span class="nc" id="L630">		processActivityCategoryInfo();</span>
<span class="nc" id="L631">		processActivityInfo();</span>
<span class="nc" id="L632">	}</span>

	/**
	 * processActivityCategoryInfo
	 */
	public void processActivityCategoryInfo()
			throws Exception {
<span class="nc bnc" id="L639" title="All 2 branches missed.">		if (this.activityGroup != null) {</span>
<span class="nc" id="L640">			ArrayList activityCategories = (ArrayList) this.activityGroup.getActivityCategories();</span>
			//put items into ArrayLists and set the model
<span class="nc bnc" id="L642" title="All 2 branches missed.">			for (int i = 0; i &lt; activityCategories.size(); i++) {</span>
<span class="nc" id="L643">				ActivityCategory activityCategory = (ActivityCategory) activityCategories.get(i);</span>
<span class="nc bnc" id="L644" title="All 2 branches missed.">				if (!activityCategory.getOrganizationId().equals(new ID(Organization.ROOT_ORG_ID))) {</span>
<span class="nc" id="L645">					this.activityCategoryNameList.add(activityCategory.getName());</span>
<span class="nc" id="L646">					this.activityCategoryIDList.add(activityCategory.getID().toString());</span>
				}
			}
		}
<span class="nc" id="L650">	}</span>

	/**
	 * set the activity collection
	 */
	private void processActivityInfo()
			throws Exception {
		//get activities from activitygroup
<span class="nc" id="L658">		Collection activities = this.activityGroup.getActivities();</span>

<span class="nc" id="L660">		ID aCatID = null;</span>
<span class="nc bnc" id="L661" title="All 2 branches missed.">		if (this.getActivityCategory() != null) {</span>
<span class="nc bnc" id="L662" title="All 2 branches missed.">			if (this.getActivityCategory().equals(new ID(0))) {</span>
<span class="nc" id="L663">				aCatID = new ID(this.activityCategoryIDList.get(0));</span>
			} else {
<span class="nc" id="L665">				aCatID = this.getActivityCategory();</span>
			}
		}
<span class="nc bnc" id="L668" title="All 2 branches missed.">		if (aCatID != null) {</span>
<span class="nc bnc" id="L669" title="All 4 branches missed.">			if (activities != null &amp;&amp; activities.size() &gt; 0) {</span>
<span class="nc bnc" id="L670" title="All 2 branches missed.">				for (Iterator j = activities.iterator(); j.hasNext();) {</span>
<span class="nc" id="L671">					Activity activity = (Activity) j.next();</span>
<span class="nc bnc" id="L672" title="All 2 branches missed.">					if (activity.getActivityCategoryId().equals(aCatID)) {</span>
<span class="nc" id="L673">						this.activityIDList.add(activity.getID().toString());</span>
<span class="nc" id="L674">						this.activityNameList.add(activity.getName());</span>
					}
<span class="nc" id="L676">				}</span>
			}
		}

<span class="nc bnc" id="L680" title="All 2 branches missed.">		if (this.activityIDList.size() == 0) {</span>
<span class="nc" id="L681">			this.activityIDList.add(&quot;-1&quot;);</span>
<span class="nc" id="L682">			this.activityNameList.add(&quot;&quot;);</span>
		}
<span class="nc" id="L684">	}</span>

	/**
	 * set entryValues
	 * This method parses the parameter string from the request
	 * Parameters are: recordID, entryID, selectedID, curIndex, timeZone, orgID, position, curDate
	 */
	public void setEntryValues(String entryValues) {
<span class="nc" id="L692">		StringTokenizer temp = new StringTokenizer(entryValues, &quot;||&quot;);</span>
<span class="nc bnc" id="L693" title="All 2 branches missed.">		if (entryValues != null) {</span>
<span class="nc" id="L694">			ArrayList values = new ArrayList();</span>
<span class="nc bnc" id="L695" title="All 2 branches missed.">			while (temp.hasMoreElements()) {</span>
<span class="nc" id="L696">				values.add(temp.nextToken());</span>
			}
<span class="nc" id="L698">			this.setRecordID(new ID(values.get(0)));</span>
<span class="nc" id="L699">			this.setEntryID(new ID(values.get(1)));</span>
<span class="nc" id="L700">			this.setSelectedID((String) values.get(2));</span>
<span class="nc" id="L701">			this.setCurIndex(Integer.valueOf((String) values.get(3)).intValue());</span>
<span class="nc" id="L702">			this.setTimeZone((String) values.get(4));</span>
<span class="nc" id="L703">			this.setOrgId(new ID(values.get(5)));</span>
<span class="nc" id="L704">			this.setPosition(Integer.valueOf((String) values.get(6)).intValue());</span>
<span class="nc" id="L705">			this.setCurDate((String) values.get(7));</span>
<span class="nc" id="L706">			this.setIsFirstEntry(Boolean.valueOf((String) values.get(8)).booleanValue());</span>
<span class="nc" id="L707">			this.setIsLastEntry(Boolean.valueOf((String) values.get(9)).booleanValue());</span>
<span class="nc" id="L708">			this.setVersion((String) values.get(10));</span>
		}
<span class="nc" id="L710">	}</span>

	/**
	 * set orgId
	 */
	public void setOrgId(ID orgId) {
<span class="nc" id="L716">		this.orgId = orgId;</span>
<span class="nc" id="L717">	}</span>

	/**
	 * get orgId
	 */
	public ID getOrgId() {
<span class="nc" id="L723">		return this.orgId;</span>
	}

	/**
	 * Set activityCategoryNameList
	 */
	public void setActivityCategoryNameList(ArrayList activityCategoryNameList) {
<span class="nc" id="L730">		this.activityCategoryNameList = activityCategoryNameList;</span>
<span class="nc" id="L731">	}</span>

	/**
	 * Get activityCategoryNameList
	 */
	public ArrayList getActivityCategoryNameList() {
<span class="nc" id="L737">		return this.activityCategoryNameList;</span>
	}

	/**
	 * Set activityCategoryIDList
	 */
	public void setActivityCategoryIDList(ArrayList activityCategoryIDList) {
<span class="nc" id="L744">		this.activityCategoryIDList = activityCategoryIDList;</span>
<span class="nc" id="L745">	}</span>

	/**
	 * Get activityCategoryIDList
	 */
	public ArrayList getActivityCategoryIDList() {
<span class="nc" id="L751">		return this.activityCategoryIDList;</span>
	}


	/**
	 * Set activityNameList
	 */
	public void setActivityColl(ArrayList activityNameList) {
<span class="nc" id="L759">		this.activityNameList = activityNameList;</span>
<span class="nc" id="L760">	}</span>

	/**
	 * Get activityCategoryNameList
	 */
	public ArrayList getActivityNameList() {
<span class="nc" id="L766">		return this.activityNameList;</span>
	}

	/**
	 * Set activityIDList
	 */
	public void setActivityIDList(ArrayList activityIDList) {
<span class="nc" id="L773">		this.activityIDList = activityIDList;</span>
<span class="nc" id="L774">	}</span>

	/**
	 * Get activityIDList
	 */
	public ArrayList getActivityIDList() {
<span class="nc" id="L780">		return this.activityIDList;</span>
	}

	/**
	 * set activityList
	 */
	public void setActivityList(String actList) {
<span class="nc" id="L787">		this.activityList = new ID(actList);</span>
<span class="nc" id="L788">	}</span>

	/**
	 * get activityList
	 */
	public ID getActivityList() {
<span class="nc" id="L794">		return this.activityList;</span>
	}

	/**
	 * set activityCategory
	 */
	public void setActivityCategory(String actCat) {
<span class="nc" id="L801">		this.activityCategory = new ID(actCat);</span>
<span class="nc" id="L802">	}</span>

	/**
	 * get activityCategory
	 */
	public ID getActivityCategory() {
<span class="nc" id="L808">		return this.activityCategory;</span>
	}

	/**
	 * set timeRecord
	 */
	public void setTimeRecord(TimeRecord timeRecord) {
<span class="nc" id="L815">		this.timeRecord = timeRecord;</span>
<span class="nc" id="L816">	}</span>

	/**
	 * get timeRecord
	 */
	public TimeRecord getTimeRecord() {
<span class="nc" id="L822">		return this.timeRecord;</span>
	}

	/**
	 * set date
	 */
	public void setDate(String date) {
<span class="nc" id="L829">		this.date = new Date(Long.valueOf(date).longValue());</span>
<span class="nc" id="L830">	}</span>

	/**
	 * get date
	 */
	public Date getDate() {
<span class="nc" id="L836">		return this.date;</span>
	}

	/**
	 * Set Selected IDs
	 *
	 * @param ids Comma delimited IDs
	 */
	public void setSelectedIDs(String ids) {
<span class="nc" id="L845">		this.selectedIDs = StringUtil.parseIDString(ids);</span>
<span class="nc" id="L846">	}</span>

	/**
	 * Return Selected IDS in a Comman delimited IDs
	 */
	public ID[] getSelectedIDs() {
<span class="nc" id="L852">		return this.selectedIDs;</span>
	}

	/**
	 * Set Selected IDs
	 *
	 * @param selectedID Comma delimited IDs
	 */
	public void setSelectedID(String selectedID) {
<span class="nc" id="L861">		this.selectedID = selectedID;</span>
<span class="nc" id="L862">		this.setSelectedIDs(selectedID);</span>
<span class="nc" id="L863">	}</span>

	/**
	 * Return Selected IDS as a string
	 */
	public String getSelectedID() {
<span class="nc" id="L869">		return this.selectedID;</span>
	}

	/**
	 * Set curIndex
	 */
	public void setCurIndex(int curIndex) {
<span class="nc" id="L876">		this.curIndex = curIndex;</span>
<span class="nc" id="L877">	}</span>

	/**
	 * Get curIndex
	 */
	public int getCurIndex() {
<span class="nc" id="L883">		return this.curIndex;</span>
	}

	/**
	 * set durationHour
	 */
	public void setDurationHour(int editHour) {
<span class="nc" id="L890">		this.durationHour = editHour;</span>
<span class="nc" id="L891">	}</span>

	/**
	 * get durationHour
	 */
	public int getDurationHour() {
<span class="nc" id="L897">		return this.durationHour;</span>
	}

	/**
	 * set durationMinute
	 */
	public void setDurationMinute(int editMinute) {
<span class="nc" id="L904">		this.durationMinute = editMinute;</span>
<span class="nc" id="L905">	}</span>

	/**
	 * get editMinute
	 */
	public int getDurationMinute() {
<span class="nc" id="L911">		return this.durationMinute;</span>
	}

	/**
	 * set isPaid
	 */
	public void setIsPaid(boolean isPaid) {
<span class="nc" id="L918">		this.isPaid = isPaid;</span>
<span class="nc" id="L919">	}</span>

	/**
	 * get isPaid
	 */
	public boolean getIsPaid() {
<span class="nc" id="L925">		return this.isPaid;</span>
	}

	/**
	 * set comment
	 */
	public void setComment(String comment) {
<span class="nc" id="L932">		this.comment = comment;</span>
<span class="nc" id="L933">	}</span>

	/**
	 * get comment
	 */
	public String getComment() {
<span class="nc" id="L939">		return this.comment;</span>
	}

	/**
	 * set position
	 */
	public void setPosition(int position) {
<span class="nc" id="L946">		this.position = position;</span>
<span class="nc" id="L947">	}</span>

	/**
	 * get position
	 */
	public int getPosition() {
<span class="nc" id="L953">		return this.position;</span>
	}

	/**
	 * set recordID
	 */
	public void setRecordID(ID recordID) {
<span class="nc" id="L960">		this.recordID = new ID(recordID);</span>
<span class="nc" id="L961">	}</span>

	/**
	 * get recordID
	 */
	public ID getRecordID() {
<span class="nc" id="L967">		return this.recordID;</span>
	}

	/**
	 * Set timeZone
	 */
	public void setTimeZone(String timeZone) {
<span class="nc" id="L974">		this.timeZone = timeZone;</span>
<span class="nc" id="L975">	}</span>

	/**
	 * Get timeZone
	 */
	public String getTimeZone() {
<span class="nc" id="L981">		return this.timeZone;</span>
	}

	/**
	 * Set version
	 */
	public void setVersion(String version) {
<span class="nc" id="L988">		this.version = Long.valueOf(version).longValue();</span>
<span class="nc" id="L989">	}</span>

	/**
	 * Get version
	 */
	public long getVersion() {
<span class="nc" id="L995">		return this.version;</span>
	}

	/**
	 * set entryID
	 */
	public void setEntryID(ID entryID) {
<span class="nc" id="L1002">		this.entryID = entryID;</span>
<span class="nc" id="L1003">	}</span>

	/**
	 * get entryID
	 */
	public ID getEntryID() {
<span class="nc" id="L1009">		return this.entryID;</span>
	}

	/**
	 * set rawTimeEntryId
	 */
	public void setRawTimeEntryId(int rawTimeEntryId) {
<span class="nc" id="L1016">		this.rawTimeEntryId = rawTimeEntryId;</span>
<span class="nc" id="L1017">	}</span>

	/**
	 * get rawTimeEntryId
	 */
	public int getRawTimeEntryId() {
<span class="nc" id="L1023">		return this.rawTimeEntryId;</span>
	}

	/**
	 * setAnEntry
	 */
	public void setAnEntry(TimeRecordEntry anEntry) {
<span class="nc" id="L1030">		this.anEntry = anEntry;</span>
<span class="nc" id="L1031">	}</span>

	/**
	 * getAnEntry
	 */
	public TimeRecordEntry getAnEntry() {
<span class="nc" id="L1037">		return this.anEntry;</span>
	}

	/**
	 * set rowToDelete
	 */
	public void setRowToDelete(boolean rowToDelete) {
<span class="nc" id="L1044">		this.rowToDelete = rowToDelete;</span>
<span class="nc" id="L1045">	}</span>

	/**
	 * get rowToDelete
	 */
	public boolean getRowToDelete() {
<span class="nc" id="L1051">		return this.rowToDelete;</span>
	}

	/**
	 * Set curDate
	 */
	public void setCurDate(String curDate) {
<span class="nc" id="L1058">		this.curDate = new Date(Long.valueOf(curDate).longValue());</span>
<span class="nc" id="L1059">	}</span>

	/**
	 * Get curDate
	 */
	public Date getCurDate() {
<span class="nc" id="L1065">		return this.curDate;</span>
	}

	/**
	 * Set remarks
	 */
	public void setRemarks(String remarks) {
<span class="nc" id="L1072">		this.remarks = remarks;</span>
<span class="nc" id="L1073">	}</span>

	/**
	 * Get remarks
	 */
	public String getRemarks() {
<span class="nc" id="L1079">		return this.remarks;</span>
	}

	/**
	 * set isLastEntry
	 */
	public void setIsLastEntry(boolean isLastEntry) {
<span class="nc" id="L1086">		this.isLastEntry = isLastEntry;</span>
<span class="nc" id="L1087">	}</span>

	/**
	 * get isLastEntry
	 */
	public boolean getIsLastEntry() {
<span class="nc" id="L1093">		return this.isLastEntry;</span>
	}

	/**
	 * set isFirstEntry
	 */
	public void setIsFirstEntry(boolean isFirstEntry) {
<span class="nc" id="L1100">		this.isFirstEntry = isFirstEntry;</span>
<span class="nc" id="L1101">	}</span>

	/**
	 * get isFirstEntry
	 */
	public boolean getIsFirstEntry() {
<span class="nc" id="L1107">		return this.isFirstEntry;</span>
	}

	/**
	 * set hiddenMillisecond
	 */
	public void setHiddenMillisecond(long ms) {
<span class="nc" id="L1114">		this.hiddenMillisecond = ms;</span>
<span class="nc" id="L1115">	}</span>

	/**
	 * get hiddenMillisecond
	 */
	public long getHiddenMillisecond() {
<span class="nc" id="L1121">		return this.hiddenMillisecond;</span>
	}

	/**
	 * set hiddenSecond
	 */
	public void setHiddenSecond(int s) {
<span class="nc" id="L1128">		this.hiddenSecond = s;</span>
<span class="nc" id="L1129">	}</span>

	/**
	 * get hiddenMillisecond
	 */
	public int getHiddenSecond() {
<span class="nc" id="L1135">		return this.hiddenSecond;</span>
	}

	/**
	 * set isOpenShift
	 */
	public void setIsOpenShift(boolean isOpenShift) {
<span class="nc" id="L1142">		this.isOpenShift = isOpenShift;</span>
<span class="nc" id="L1143">	}</span>

	/**
	 * get isOpenShift
	 */
	public boolean getIsOpenShift() {
<span class="nc" id="L1149">		return this.isOpenShift;</span>
	}

	/**
	 * Returns the DatePicker page component.
	 */
	public DatePickerPC getDateTimePicker() {
<span class="nc" id="L1156">		return m_dateTimePickerPC;</span>
	}

	/**
	 * Sets the DatePicker page component.
	 */
	public void setDateTimePicker(DatePickerPC dateTimePickerPC) {
<span class="nc" id="L1163">		m_dateTimePickerPC = dateTimePickerPC;</span>
<span class="nc" id="L1164">	}</span>

	public Date getExtractedDate(){
<span class="nc" id="L1167">		return m_date;</span>
	}

	/**
	 * Override extract Parameters to handle date input
	 */
	public boolean extractParameters(HttpServletRequest request) {
<span class="nc" id="L1174">		boolean success = super.extractParameters(request);</span>

<span class="nc bnc" id="L1176" title="All 2 branches missed.">		if (this.timeZone!=null)</span>
<span class="nc" id="L1177">			m_dateTimePickerPC.setTimeZone(TimeZone.getTimeZone(this.timeZone));</span>
<span class="nc" id="L1178">		m_date = m_dateTimePickerPC.extractDate(&quot;display&quot;);</span>

<span class="nc" id="L1180">		return success;</span>
	}


	/**
	 * Return URL for HTML Form Action
	 */
	public String getFormAction() {
<span class="nc" id="L1188">		return &quot;edittimerecord&quot;;</span>
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>