<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>SchedulePrefManagerEJB.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">QA Code Coverage</a> &gt; <a href="index.source.html" class="el_package">com.bluepumpkin.ejb.bbm.schedulepref.ejb</a> &gt; <span class="el_source">SchedulePrefManagerEJB.java</span></div><h1>SchedulePrefManagerEJB.java</h1><pre class="source lang-java linenums">package com.bluepumpkin.ejb.bbm.schedulepref.ejb;

import java.util.Collection;
import java.util.Date;
import java.util.HashMap;
import java.util.Iterator;

import com.bluepumpkin.common.datatypes.ID;
import com.bluepumpkin.common.logging.Category;
import com.bluepumpkin.ejb.bbm.Log;
import com.bluepumpkin.ejb.bbm.base.BbmException;
import com.bluepumpkin.ejb.bbm.base.BbmCreateException;
import com.bluepumpkin.ejb.bbm.base.BbmFinderException;
import com.bluepumpkin.ejb.bbm.base.BbmObjectNotFoundException;
import com.bluepumpkin.ejb.bbm.base.BbmRemoveException;
import com.bluepumpkin.ejb.bbm.base.BbmUpdateException;
import com.bluepumpkin.ejb.bbm.schedulepref.model.AdvancedSchedulePreference;
import com.bluepumpkin.ejb.bbm.schedulepref.model.SimpleSchedulePreference;
import com.bluepumpkin.ejb.core.base.MultiUserException;
import com.bluepumpkin.ejb.core.base.SessionEJBBase;
import com.bluepumpkin.ejb.bbm.schedulepref.model.EmployeeOTVTOPref;
import javax.naming.Context;
import javax.naming.InitialContext;

<span class="nc" id="L25">public class SchedulePrefManagerEJB extends SessionEJBBase {</span>

	/**
	 * 
	 */
	private static final long serialVersionUID = 1L;
<span class="nc" id="L31">	private static Category m_cat = Log.initCategory( SchedulePrefManagerEJB.class.getName());</span>

<span class="nc" id="L33">	private boolean m_isWhatIf = false;</span>

	public void onEjbCreate() {
		try {
			// First query environment to get WIF setting from DD
<span class="nc" id="L38">			Context initialContext = new InitialContext();</span>
<span class="nc" id="L39">			Boolean WIF = (Boolean) initialContext.lookup(&quot;java:comp/env/WIF&quot;);</span>
<span class="nc bnc" id="L40" title="All 2 branches missed.">			if (WIF != null)</span>
<span class="nc" id="L41">				m_isWhatIf = WIF.booleanValue();</span>
<span class="nc" id="L42">		} catch (Exception e) {</span>
<span class="nc" id="L43">			handleException(&quot;onEjbCreate&quot;, e, false);</span>
<span class="nc" id="L44">		}</span>
<span class="nc" id="L45">	}</span>

	/** override the base class to provide the appropriate logging category */
	protected Category getCategory()
	{
<span class="nc" id="L50">		return m_cat;</span>
	}

	{
<span class="nc" id="L54">		 super.init(SchedulePrefManagerEJB.class.getName());</span>
<span class="nc" id="L55">	}</span>
        
    /**
     *   get a given employee's simple schedule preference assignments
     *   
     *   @idEmployee employee id
     *   @dtStart, @dtEnd: the time period, null date means a open period
     *   
     *   @return a collection of SimpleSchedulePreference objects which hold the assignment information
     */
    public Collection getSimpleSchedulePreferences(ID idEmployee, Date dtStart, Date dtEnd) 
         throws BbmFinderException
    {
<span class="nc" id="L68">		 methodStart(&quot;getSimpleSchedulePreferences&quot;, idEmployee, dtStart, dtEnd);</span>
<span class="nc" id="L69">		 SimpleSchedulePreferenceDAO dao = new SimpleSchedulePreferenceDAO();</span>
		 try {
<span class="nc" id="L71">            return dao.getSimpleSchedulePreferences(idEmployee, dtStart, dtEnd);</span>
		 }
<span class="nc" id="L73">         catch(BbmFinderException e)</span>
		 {
<span class="nc" id="L75">            handleException(e, false);</span>
<span class="nc" id="L76">			throw e;</span>
		 }
		 finally
		 {
<span class="nc" id="L80">			dao.cleanUp();</span>
<span class="nc" id="L81">			methodFinish();</span>
		 }
    }	
    
    /** get a SimpleSchedulePreference by ID */
    public SimpleSchedulePreference getSimpleSchedulePreferenceByID(ID idAssignment)
         throws BbmFinderException, BbmObjectNotFoundException
    {
<span class="nc" id="L89">		 methodStart(&quot;getSimpleSchedulePreferenceByID&quot;, idAssignment);</span>
<span class="nc" id="L90">		 SimpleSchedulePreferenceDAO dao = new SimpleSchedulePreferenceDAO();</span>
		 try {
<span class="nc" id="L92">            return dao.getSimpleSchedulePreferenceByID(idAssignment);</span>
		 }
<span class="nc" id="L94">         catch(BbmObjectNotFoundException e)</span>
		 {
<span class="nc" id="L96">            handleException(e, false);</span>
<span class="nc" id="L97">			throw e;</span>
		 }
<span class="nc" id="L99">         catch(BbmFinderException e)</span>
		 {
<span class="nc" id="L101">            handleException(e, false);</span>
<span class="nc" id="L102">			throw e;</span>
		 }
		 finally
		 {
<span class="nc" id="L106">			dao.cleanUp();</span>
<span class="nc" id="L107">			methodFinish();</span>
		 }
    }	
             
        /** create a simple schedule preference object */
    public ID createSimpleSchedulePreference(SimpleSchedulePreference objValue) 
         throws BbmCreateException
    {
<span class="nc" id="L115">         methodStart(&quot;createSimpleSchedulePreference&quot;, objValue);</span>
<span class="nc" id="L116">		 SimpleSchedulePreferenceDAO dao = new SimpleSchedulePreferenceDAO();</span>
		 try
		 {
<span class="nc" id="L119">			return dao.createSimpleSchedulePreference(objValue);</span>
		 }
<span class="nc" id="L121">         catch(BbmCreateException e)</span>
         {
<span class="nc" id="L123">			handleException(e); </span>
<span class="nc" id="L124">            throw e;</span>
         }
		 finally
		 {
<span class="nc" id="L128">            dao.cleanUp();</span>
<span class="nc" id="L129">			methodFinish();</span>
		 } 
    }    
   
    /** save a simple schedule preference object */
    public ID updateSimpleSchedulePreference(SimpleSchedulePreference objValue) 
        throws MultiUserException, BbmUpdateException
    {
<span class="nc" id="L137">         methodStart(&quot;updateSimpleSchedulePreference&quot;, objValue);</span>
<span class="nc" id="L138">		 SimpleSchedulePreferenceDAO dao = new SimpleSchedulePreferenceDAO();</span>
		 try
		 {
<span class="nc" id="L141">            return dao.updateSimpleSchedulePreference(objValue);</span>
		 }
<span class="nc" id="L143">         catch(MultiUserException e)</span>
         {
<span class="nc" id="L145">			handleException(e); </span>
<span class="nc" id="L146">            throw e;</span>
         }
<span class="nc" id="L148">         catch(BbmUpdateException e)</span>
         {
<span class="nc" id="L150">			handleException(e); </span>
<span class="nc" id="L151">            throw e;</span>
         }
		 finally
		 {
<span class="nc" id="L155">            dao.cleanUp();</span>
<span class="nc" id="L156">			methodFinish();</span>
		 } 
    }
    
	public void updateSimpleSchedulePreferenceMultiEmps(Collection colEmpIDs, SimpleSchedulePreference objValue, EmployeeOTVTOPref otvtopref)
			throws MultiUserException, BbmException {
<span class="nc" id="L162">		methodStart(&quot;updateSimpleSchedulePreferenceMultiEmps&quot;, objValue, colEmpIDs);</span>
<span class="nc bnc" id="L163" title="All 4 branches missed.">		if(colEmpIDs == null || colEmpIDs.isEmpty()){</span>
<span class="nc" id="L164">			throw new BbmUpdateException(&quot;No employee ID passed&quot;);</span>
		}
<span class="nc" id="L166">		SimpleSchedulePreferenceDAO dao = new SimpleSchedulePreferenceDAO();</span>
		try {
<span class="nc" id="L168">			dao.updateSimpleSchedulePreferenceMultiEmps(colEmpIDs, objValue);</span>
			
<span class="nc bnc" id="L170" title="All 2 branches missed.">			for (Iterator iterator = colEmpIDs.iterator(); iterator.hasNext();) {</span>
<span class="nc" id="L171">				ID idEmployee = (ID) iterator.next();</span>
<span class="nc" id="L172">				EmployeeOTVTOPref empOTVTOPref = null;</span>
				try {
<span class="nc" id="L174">					empOTVTOPref = getEmployeeOTVTOPref(idEmployee);</span>
<span class="nc" id="L175">				} catch (BbmFinderException e) {</span>
					//not the end of the world, create it for him
<span class="nc" id="L177">				}</span>
<span class="nc bnc" id="L178" title="All 2 branches missed.">				if(empOTVTOPref == null){</span>
<span class="nc" id="L179">					empOTVTOPref = new EmployeeOTVTOPref(); </span>
				}
<span class="nc" id="L181">				empOTVTOPref.setEmployeeId(idEmployee);</span>
<span class="nc" id="L182">				empOTVTOPref.setOtAfter(otvtopref.getOtAfter());</span>
<span class="nc" id="L183">				empOTVTOPref.setOtBefore(otvtopref.getOtBefore());</span>
<span class="nc" id="L184">				empOTVTOPref.setVtoAtBeginning(otvtopref.getVtoAtBeginning());</span>
<span class="nc" id="L185">				empOTVTOPref.setVtoAtEnd(otvtopref.getVtoAtEnd());</span>
				
<span class="nc" id="L187">				updateEmployeeOTVTOPref(empOTVTOPref);</span>
<span class="nc" id="L188">			}</span>
			
<span class="nc" id="L190">		} catch (MultiUserException e) {</span>
<span class="nc" id="L191">			handleException(e);</span>
<span class="nc" id="L192">			throw e;</span>
<span class="nc" id="L193">		} catch (BbmUpdateException e) {</span>
<span class="nc" id="L194">			handleException(e);</span>
<span class="nc" id="L195">			throw e;</span>
<span class="nc" id="L196">		} catch (BbmException e) {</span>
<span class="nc" id="L197">			handleException(e);</span>
<span class="nc" id="L198">			throw e;</span>
		} finally {
<span class="nc" id="L200">			dao.cleanUp();</span>
<span class="nc" id="L201">			methodFinish();</span>
<span class="nc" id="L202">		}</span>
<span class="nc" id="L203">	}</span>
   
    /** delete simple schedule preferences given their ids */
    public void deleteSimpleSchedulePreferences(Collection colIDs) 
        throws BbmRemoveException
    {
<span class="nc" id="L209">         methodStart(&quot;deleteSimpleSchedulePreference&quot;, colIDs);</span>
<span class="nc" id="L210">		 SimpleSchedulePreferenceDAO dao = new SimpleSchedulePreferenceDAO();</span>
		 try
		 {
<span class="nc" id="L213">			dao.deleteSimpleSchedulePreferences(colIDs);</span>
		 }
<span class="nc" id="L215">         catch(BbmRemoveException e)</span>
         {
<span class="nc" id="L217">			handleException(e); </span>
<span class="nc" id="L218">            throw e;</span>
         }
		 finally
		 {
<span class="nc" id="L222">            dao.cleanUp();</span>
<span class="nc" id="L223">			methodFinish();</span>
<span class="nc" id="L224">		 } </span>
<span class="nc" id="L225">    } </span>
    
    /**
     *  check whether there is simple schedule preference in the given time
     *  period
     */
    public boolean hasSimpleSchedulePreference(ID idEmployee, Date dtStart, Date dtEnd)
         throws BbmFinderException
    {
<span class="nc" id="L234">		 methodStart(&quot;hasSimpleSchedulePreference&quot;, idEmployee, dtStart, dtEnd);</span>
<span class="nc" id="L235">		 SimpleSchedulePreferenceDAO dao = new SimpleSchedulePreferenceDAO();</span>
		 try {
<span class="nc" id="L237">            return dao.hasSimpleSchedulePreference(idEmployee, dtStart, dtEnd);</span>
		 }
<span class="nc" id="L239">         catch(BbmFinderException e)</span>
		 {
<span class="nc" id="L241">            handleException(e, false);</span>
<span class="nc" id="L242">			throw e;</span>
		 }
		 finally
		 {
<span class="nc" id="L246">			dao.cleanUp();</span>
<span class="nc" id="L247">			methodFinish();</span>
		 }
    }	
         
    /*************************************************************************
     *  for advanced schedule preference
     *************************************************************************/    
    /**
     *   get a given employee's advanced schedule preference assignments
     *   
     *   @idEmployee employee id
     *   @dtStart, @dtEnd: the time period, null date means a open period
     *   
     *   @return a collection of AdvancedSchedulePreference objects which hold the assignment information
     */
    public Collection getAdvancedSchedulePreferences(ID idEmployee, Date dtStart, Date dtEnd) 
         throws BbmFinderException
    {
<span class="nc" id="L265">		 methodStart(&quot;getAdvancedSchedulePreferences&quot;, idEmployee, dtStart, dtEnd);</span>
<span class="nc" id="L266">		 AdvancedSchedulePreferenceDAO dao = new AdvancedSchedulePreferenceDAO();</span>
		 try {
<span class="nc" id="L268">            return dao.getAdvancedSchedulePreferences(idEmployee, dtStart, dtEnd);</span>
		 }
<span class="nc" id="L270">         catch(BbmFinderException e)</span>
		 {
<span class="nc" id="L272">            handleException(e, false);</span>
<span class="nc" id="L273">			throw e;</span>
		 }
		 finally
		 {
<span class="nc" id="L277">			dao.cleanUp();</span>
<span class="nc" id="L278">			methodFinish();</span>
		 }
    }
    
    /**
     *   get advanced schedule preference assignments for a list of employees
     *   
     *   @colEmployeeIDs a collection of employee ids
     *   @dtStart, @dtEnd: the time period, null date means a open period
     *   
     *   @return a HashMap of pair (idEmployee, a collection of AdvancedSchedulePreference objects)
     */
    public HashMap getAdvancedSchedulePreferences(Collection colEmployeeIDs, Date dtStart, Date dtEnd) 
         throws BbmFinderException	
    {
<span class="nc" id="L293">		 methodStart(&quot;getAdvancedSchedulePreferences&quot;, colEmployeeIDs, dtStart, dtEnd);</span>
<span class="nc" id="L294">		 AdvancedSchedulePreferenceDAO dao = new AdvancedSchedulePreferenceDAO();</span>
		 try {
<span class="nc" id="L296">            return dao.getAdvancedSchedulePreferences(colEmployeeIDs, dtStart, dtEnd);</span>
		 }
<span class="nc" id="L298">         catch(BbmFinderException e)</span>
		 {
<span class="nc" id="L300">            handleException(e, false);</span>
<span class="nc" id="L301">			throw e;</span>
		 }
		 finally
		 {
<span class="nc" id="L305">			dao.cleanUp();</span>
<span class="nc" id="L306">			methodFinish();</span>
		 }
    }
    
    /** get a AdvancedSchedulePreference by ID */
    public AdvancedSchedulePreference getAdvancedSchedulePreferenceByID(ID idAssignment)
         throws BbmFinderException, BbmObjectNotFoundException
    {
<span class="nc" id="L314">		 methodStart(&quot;getAdvancedSchedulePreferenceByID&quot;, idAssignment);</span>
<span class="nc" id="L315">		 AdvancedSchedulePreferenceDAO dao = new AdvancedSchedulePreferenceDAO();</span>
		 try {
<span class="nc" id="L317">            return dao.getAdvancedSchedulePreferenceByID(idAssignment);</span>
		 }
<span class="nc" id="L319">         catch(BbmObjectNotFoundException e)</span>
		 {
<span class="nc" id="L321">            handleException(e, false);</span>
<span class="nc" id="L322">			throw e;</span>
		 }
<span class="nc" id="L324">         catch(BbmFinderException e)</span>
		 {
<span class="nc" id="L326">            handleException(e, false);</span>
<span class="nc" id="L327">			throw e;</span>
		 }
		 finally
		 {
<span class="nc" id="L331">			dao.cleanUp();</span>
<span class="nc" id="L332">			methodFinish();</span>
		 }
    }	
         
    /** create an advanced schedule preference object */
    public ID createAdvancedSchedulePreference(AdvancedSchedulePreference objValue) 
         throws BbmCreateException
    {
<span class="nc" id="L340">         methodStart(&quot;createAdvancedSchedulePreference&quot;, objValue);</span>
<span class="nc" id="L341">		 AdvancedSchedulePreferenceDAO dao = new AdvancedSchedulePreferenceDAO();</span>
		 try
		 {
            // true: set simple prefer overriden
<span class="nc" id="L345">			return dao.createAdvancedSchedulePreference(objValue, true); </span>
		 }
<span class="nc" id="L347">         catch(BbmCreateException e)</span>
         {
<span class="nc" id="L349">			handleException(e); </span>
<span class="nc" id="L350">            throw e;</span>
         }
		 finally
		 {
<span class="nc" id="L354">            dao.cleanUp();</span>
<span class="nc" id="L355">			methodFinish();</span>
		 } 
    }    
   
    /** save an advanced schedule preference object */
    public void updateAdvancedSchedulePreference(AdvancedSchedulePreference objValue) 
        throws MultiUserException, BbmUpdateException
    {
<span class="nc" id="L363">         methodStart(&quot;updateAdvancedSchedulePreference&quot;, objValue);</span>
<span class="nc" id="L364">		 AdvancedSchedulePreferenceDAO dao = new AdvancedSchedulePreferenceDAO();</span>
		 try
		 {
<span class="nc" id="L367">			dao.updateAdvancedSchedulePreference(objValue);</span>
		 }
<span class="nc" id="L369">         catch(MultiUserException e)</span>
         {
<span class="nc" id="L371">			handleException(e); </span>
<span class="nc" id="L372">            throw e;</span>
         }
<span class="nc" id="L374">         catch(BbmUpdateException e)</span>
         {
<span class="nc" id="L376">			handleException(e); </span>
<span class="nc" id="L377">            throw e;</span>
         }
		 finally
		 {
<span class="nc" id="L381">            dao.cleanUp();</span>
<span class="nc" id="L382">			methodFinish();</span>
<span class="nc" id="L383">		 } </span>
<span class="nc" id="L384">    }         </span>
   
    /** delete advanced schedule preferences given their ids */
    public void deleteAdvancedSchedulePreferences(Collection colIDs) 
        throws BbmRemoveException
    {
<span class="nc" id="L390">         methodStart(&quot;deleteAdvancedSchedulePreferences&quot;, colIDs);</span>
<span class="nc" id="L391">		 AdvancedSchedulePreferenceDAO dao = new AdvancedSchedulePreferenceDAO();</span>
		 try
		 {
<span class="nc" id="L394">			dao.deleteAdvancedSchedulePreferences(colIDs);</span>
		 }
<span class="nc" id="L396">         catch(BbmRemoveException e)</span>
         {
<span class="nc" id="L398">			handleException(e); </span>
<span class="nc" id="L399">            throw e;</span>
         }
		 finally
		 {
<span class="nc" id="L403">            dao.cleanUp();</span>
<span class="nc" id="L404">			methodFinish();</span>
<span class="nc" id="L405">		 } </span>
<span class="nc" id="L406">    } </span>
    
    /**
     *  get the effectivity periods of a given employee's schedule preference
     *  @param idEmployee the employee id
     *  @param dtStart, dtEnd the start/end of a given time range, null means open period.
     *  @param bSimple: true : simple schedule preference, false: advanced ones
     *  
     *  @return a collection of SchedulePrefPeriod objects
     */
    public Collection getSchedulePrefPeriods(ID idEmployee, Date dtStart, Date dtEnd, boolean bSimple)
        throws BbmFinderException
    {
<span class="nc" id="L419">		 methodStart(&quot;getSimpleSchedulePreferenceByID&quot;, idEmployee, dtStart, dtEnd);</span>
<span class="nc" id="L420">		 SchedulePrefPeriodDAO dao = new SchedulePrefPeriodDAO();</span>
		 try {
<span class="nc" id="L422">            return dao.getSchedulePrefPeriods(idEmployee, dtStart, dtEnd, bSimple);</span>
		 }
<span class="nc" id="L424">         catch(BbmFinderException e)</span>
		 {
<span class="nc" id="L426">            handleException(e, false);</span>
<span class="nc" id="L427">			throw e;</span>
		 }
		 finally
		 {
<span class="nc" id="L431">			dao.cleanUp();</span>
<span class="nc" id="L432">			methodFinish();</span>
		 }
    }	

    /** get a Over-time/ Voluntary Time-off schedule preference object by employee ID*/
    public EmployeeOTVTOPref getEmployeeOTVTOPref(ID idEmployee)
    throws BbmFinderException
    {
<span class="nc" id="L440">    	methodStart(&quot;getOTVTOSchedulePref&quot;, idEmployee);</span>
<span class="nc" id="L441">    	EmployeeOTVTOPrefDAO dao = new EmployeeOTVTOPrefDAO();</span>
    	try {
<span class="nc" id="L443">    		return dao.getObjectByEmployeeId(&quot;EMPLOYEEID=&quot;+idEmployee);</span>

    	}
<span class="nc" id="L446">    	catch(BbmFinderException e)</span>
    	{
<span class="nc" id="L448">    		handleException(e, false);</span>
<span class="nc" id="L449">    		throw e;</span>
    	}
    	finally
    	{
<span class="nc" id="L453">    		dao.cleanUp();</span>
<span class="nc" id="L454">    		methodFinish();</span>
    	}
    }
    
    /** create a Over-time/ Voluntary Time-off schedule preference object */
    public ID createEmployeeOTVTOPrefObject(EmployeeOTVTOPref objValue)
    throws BbmCreateException
    {
<span class="nc" id="L462">    	methodStart(&quot;createEmployeeOTVTOPrefObject&quot;, objValue);</span>
<span class="nc" id="L463">    	EmployeeOTVTOPrefDAO dao = new EmployeeOTVTOPrefDAO();</span>
    	try {
<span class="nc" id="L465">    		return dao.createObject(objValue);</span>
    	}
<span class="nc" id="L467">    	catch(BbmCreateException e)</span>
    	{
<span class="nc" id="L469">    		handleException(e, false);</span>
<span class="nc" id="L470">    		throw e;</span>
    	}
    	finally
    	{
<span class="nc" id="L474">    		dao.cleanUp();</span>
<span class="nc" id="L475">    		methodFinish();</span>
    	}
    }
    
    /** save a Over-time/ Voluntary Time-off schedule preference object */
    public void updateEmployeeOTVTOPref(EmployeeOTVTOPref objValue) 
    throws MultiUserException, BbmException
    {
<span class="nc" id="L483">    	methodStart(&quot;updateEmployeeOTVTOPref&quot;, objValue);</span>
<span class="nc" id="L484">    	EmployeeOTVTOPrefDAO dao = new EmployeeOTVTOPrefDAO();</span>
    	try
    	{
<span class="nc bnc" id="L487" title="All 2 branches missed.">    		if (objValue != null)</span>
<span class="nc bnc" id="L488" title="All 2 branches missed.">    			if (objValue.getID() == null)</span>
<span class="nc" id="L489">    				createEmployeeOTVTOPrefObject(objValue);</span>
    			else
<span class="nc" id="L491">    				dao.updateObject(objValue);</span>
    	}
<span class="nc" id="L493">    	catch(BbmCreateException e)</span>
    	{
<span class="nc" id="L495">    		throw e;</span>
    	}
<span class="nc" id="L497">    	catch(MultiUserException e)</span>
    	{
<span class="nc" id="L499">    		handleException(e); </span>
<span class="nc" id="L500">    		throw e;</span>
    	}
<span class="nc" id="L502">    	catch(BbmUpdateException e)</span>
    	{
<span class="nc" id="L504">    		handleException(e); </span>
<span class="nc" id="L505">    		throw e;</span>
    	}
    	finally
    	{
<span class="nc" id="L509">    		dao.cleanUp();</span>
<span class="nc" id="L510">    		methodFinish();</span>
<span class="nc" id="L511">    	} </span>
<span class="nc" id="L512">    }         </span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>