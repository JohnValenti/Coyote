<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>ShiftSwapCalendarInfo.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">QA Code Coverage</a> &gt; <a href="index.source.html" class="el_package">com.bluepumpkin.ejb.bbm.rm</a> &gt; <span class="el_source">ShiftSwapCalendarInfo.java</span></div><h1>ShiftSwapCalendarInfo.java</h1><pre class="source lang-java linenums">package com.bluepumpkin.ejb.bbm.rm;

import java.io.Serializable;
import java.util.Date;
import java.util.TimeZone;

import com.bluepumpkin.common.datatypes.ID;
import com.bluepumpkin.common.l10n.RegionalFormatBundleKey;
import com.bluepumpkin.common.localization.Localizer;
import com.bluepumpkin.ejb.bbm.schedule.model.ShiftAssignment;
import com.bluepumpkin.ejb.bbm.shifts.model.ShiftsUtil;
import com.verint.ejb.wfm.l10n.WfmCommonBundleKey;

public class ShiftSwapCalendarInfo implements Serializable, Cloneable {

	/**
	 * 
	 */
	private static final long serialVersionUID = 3854933994874116316L;
	// For this employee, the swapped current &quot;shift&quot; or &quot;time-off&quot; item
	private ID employeeID;
	private Date startOfSwapItem;
	private Date endOfSwapItem;
	private String displayMessage;
	//two way or one way
	private String shiftSwapType;
	//shift or time-off
<span class="nc" id="L28">	private String shiftType = &quot;shift&quot;;</span>
	//If this user received a shift, this is the shift hash to help identify that shift
	private Integer shiftHash;

	// The person this employee swapped with, the original  &quot;shift&quot; or &quot;time-off&quot; item that was swapped away
	private ID originalEmployeeID;
	private Date startOriginalItem;
	private Date endOriginalSwapItem;
	//shift or time-off
	private String originalShiftType;
	//If this user gave away a shift, this is the shift hash of that original shift, to help identify that shift
	private Integer originalShiftHash;

<span class="nc" id="L41">	public ShiftSwapCalendarInfo() {</span>
		//default
<span class="nc" id="L43">	}</span>

	public ID getEmployeeID() {
<span class="nc" id="L46">		return employeeID;</span>
	}

	public void setEmployeeID(ID employeeID) {
<span class="nc" id="L50">		this.employeeID = employeeID;</span>
<span class="nc" id="L51">	}</span>

	public Date getStartOfSwapItem() {
<span class="nc" id="L54">		return startOfSwapItem;</span>
	}

	public void setStartOfSwapItem(Date startOfSwapItem) {
<span class="nc" id="L58">		this.startOfSwapItem = startOfSwapItem;</span>
<span class="nc" id="L59">	}</span>

	public Date getEndOfSwapItem() {
<span class="nc" id="L62">		return endOfSwapItem;</span>
	}

	public void setEndOfSwapItem(Date endOfSwapItem) {
<span class="nc" id="L66">		this.endOfSwapItem = endOfSwapItem;</span>
<span class="nc" id="L67">	}</span>

	public void setDisplayMessage(String displayMessage) {
<span class="nc" id="L70">		this.displayMessage = displayMessage;</span>
<span class="nc" id="L71">	}</span>

	public String getShiftSwapType() {
<span class="nc" id="L74">		return shiftSwapType;</span>
	}

	public void setShiftSwapType(String shiftSwapType) {
<span class="nc" id="L78">		this.shiftSwapType = shiftSwapType;</span>
<span class="nc" id="L79">	}</span>

	public ID getOriginalEmployeeID() {
<span class="nc" id="L82">		return originalEmployeeID;</span>
	}

	public void setOriginalEmployeeID(ID originalEmployeeID) {
<span class="nc" id="L86">		this.originalEmployeeID = originalEmployeeID;</span>
<span class="nc" id="L87">	}</span>

	public Date getStartOriginalItem() {
<span class="nc" id="L90">		return startOriginalItem;</span>
	}

	public void setStartOriginalItem(Date startOriginalItem) {
<span class="nc" id="L94">		this.startOriginalItem = startOriginalItem;</span>
<span class="nc" id="L95">	}</span>

	public Date getEndOriginalSwapItem() {
<span class="nc" id="L98">		return endOriginalSwapItem;</span>
	}

	public void setEndOriginalSwapItem(Date endOriginalSwapItem) {
<span class="nc" id="L102">		this.endOriginalSwapItem = endOriginalSwapItem;</span>
<span class="nc" id="L103">	}</span>

	public String getOriginalShiftType() {
<span class="nc" id="L106">		return originalShiftType;</span>
	}

	public void setOriginalShiftType(String originalShiftType) {
<span class="nc" id="L110">		this.originalShiftType = originalShiftType;</span>
<span class="nc" id="L111">	}</span>

	public String getShiftType() {
<span class="nc" id="L114">		return shiftType;</span>
	}

	public void setShiftType(String shifttype) {
<span class="nc" id="L118">		this.shiftType = shifttype;</span>
<span class="nc" id="L119">	}</span>

	public Integer getOriginalShiftHash() {
<span class="nc" id="L122">		return originalShiftHash;</span>
	}

	public void setOriginalShiftHash(Integer originalShiftHash) {
<span class="nc" id="L126">		this.originalShiftHash = originalShiftHash;</span>
<span class="nc" id="L127">	}</span>

	public Integer getShiftHash() {
<span class="nc" id="L130">		return shiftHash;</span>
	}

	public void setShiftHash(Integer shiftHash) {
<span class="nc" id="L134">		this.shiftHash = shiftHash;</span>
<span class="nc" id="L135">	}</span>
	
	public boolean isShiftModified(ShiftAssignment shiftAssignment){
<span class="nc" id="L138">		int hash = ShiftsUtil.getShiftAssignmentHashCodeExtendedInRange(shiftAssignment, this.getStartOfSwapItem(), this.getEndOfSwapItem());</span>
<span class="nc bnc" id="L139" title="All 2 branches missed.">		return hash != this.getShiftHash();</span>
	}
	
	@Override
	public String toString() {
<span class="nc" id="L144">		return &quot;ShiftSwapCalendarInfo: \n&quot; + &quot; EmployeeID: &quot; + this.getEmployeeID() + '\n' + &quot; Start:  &quot; + this.getStartOfSwapItem() + '\n'</span>
<span class="nc" id="L145">				+ &quot; End: &quot; + this.getEndOfSwapItem() + '\n' + &quot; ShiftSwapType: &quot; + this.getShiftSwapType() + '\n' + &quot; ShiftType: &quot;</span>
<span class="nc" id="L146">				+ this.getShiftType() + '\n' + &quot; ShiftHash: &quot; + this.getShiftHash() + '\n' +</span>

<span class="nc" id="L148">				&quot; OriginalEmployeeID: &quot; + this.getOriginalEmployeeID() + '\n' + &quot; OriginalStart:  &quot; + this.getStartOriginalItem() + '\n'</span>
<span class="nc" id="L149">				+ &quot; OriginalEnd: &quot; + this.getEndOriginalSwapItem() + '\n' + &quot; OriginalShiftType: &quot; + this.getOriginalShiftType() + '\n'</span>
<span class="nc" id="L150">				+ &quot; OriginalShiftHash: &quot; + this.getOriginalShiftHash() + '\n';</span>

	}

	public String getDisplayMessage(Localizer localizer, TimeZone tz) {
<span class="nc bnc" id="L155" title="All 4 branches missed.">		if (displayMessage == null || displayMessage.isEmpty()) {</span>

			// The original item is the one that was swapped away
<span class="nc" id="L158">			Object[] params = new Object[] {</span>
<span class="nc" id="L159">					localizer.formatDate(this.getStartOriginalItem(), tz, RegionalFormatBundleKey.MEDIUM_DATE_FORMAT,</span>
							RegionalFormatBundleKey.TIME_FORMAT),

<span class="nc" id="L162">					localizer.formatDate(this.getEndOriginalSwapItem(), tz, RegionalFormatBundleKey.MEDIUM_DATE_FORMAT,</span>
							RegionalFormatBundleKey.TIME_FORMAT),

			};

<span class="nc" id="L167">			String key = WfmCommonBundleKey.SHIFT_SWAP_CALENDAR_INFO;</span>

<span class="nc bnc" id="L169" title="All 2 branches missed.">			if (this.getOriginalShiftType().compareTo(&quot;time-off&quot;) == 0) {</span>
<span class="nc" id="L170">				key = WfmCommonBundleKey.SHIFT_SWAP_CALENDAR_INFO_TIMEOFF;</span>
			}

<span class="nc" id="L173">			displayMessage = localizer.i18n(WfmCommonBundleKey.BUNDLE_NAME, key, params);</span>
		}

<span class="nc" id="L176">		return displayMessage;</span>
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>