<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>TOHoursPerDay.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">QA Code Coverage</a> &gt; <a href="index.source.html" class="el_package">com.bluepumpkin.ejb.rm.requests.timeoff.hoursperday.model</a> &gt; <span class="el_source">TOHoursPerDay.java</span></div><h1>TOHoursPerDay.java</h1><pre class="source lang-java linenums">package com.bluepumpkin.ejb.rm.requests.timeoff.hoursperday.model;

import java.util.Date;
import java.util.HashMap;
import java.util.Map;
import java.util.StringTokenizer;

import com.bluepumpkin.common.datatypes.ID;
import com.bluepumpkin.ejb.bbm.vo.FieldInfo;
import com.bluepumpkin.ejb.bbm.vo.ValueObjectBase;
import com.bluepumpkin.ejb.rm.requests.common.model.RequestAuditTrail;

/**
 * User: sjoshi Date: Jun 24, 2007 Time: 2:46:39 PM
 */
public class TOHoursPerDay extends ValueObjectBase implements Comparable&lt;TOHoursPerDay&gt; {

	private static final long serialVersionUID = -8805567692053713293L;

<span class="fc" id="L20">	private static FieldInfo m_fieldInfo = new TOHoursPerDayFieldInfo();</span>
<span class="fc" id="L21">	private static String[] statusMap = { RequestAuditTrail.STATUS_PENDING, // 0</span>
			RequestAuditTrail.STATUS_APPROVED, // 1
			RequestAuditTrail.STATUS_DENIED, // 2
			RequestAuditTrail.STATUS_ESCALATED, // 3
			RequestAuditTrail.STATUS_NEGOTIATION, // 4
			RequestAuditTrail.STATUS_TENTATIVE, // 5
			RequestAuditTrail.STATUS_WITHDRAWN, // 6
			RequestAuditTrail.STATUS_INVALID, // 7
			RequestAuditTrail.STATUS_WAITLIST // 8
	};
<span class="fc" id="L31">	private static Map&lt;String, Integer&gt; statusHashMap = new HashMap&lt;String, Integer&gt;();</span>
<span class="fc" id="L32">	public static final Boolean ISDIRTY_VAL_BOOLEAN_CLEAN = new Boolean(false);</span>
<span class="fc" id="L33">	public static final Boolean ISDIRTY_VAL_BOOLEAN_DIRTY = new Boolean(true);</span>

	public boolean isRefreshOrignalMinutes() {
<span class="nc" id="L36">		return refreshOrignalMinutes;</span>
	}

	public void setRefreshOrignalMinutes(boolean refreshOrignalMinutes) {
<span class="fc" id="L40">		this.refreshOrignalMinutes = refreshOrignalMinutes;</span>
<span class="fc" id="L41">	}</span>

<span class="fc" id="L43">	public boolean refreshOrignalMinutes = false;</span>

	static {
<span class="fc bfc" id="L46" title="All 2 branches covered.">		for (int i = 0; i &lt; statusMap.length; i++) {</span>
<span class="fc" id="L47">			statusHashMap.put(statusMap[i], new Integer(i));</span>
		}
<span class="fc" id="L49">	}</span>

	// two objects with same to event /tochoice pair should equate to same
	// object irrespective of date.
	// only if they are not equal then we are interested in sorting by date for
	// Collections.sort usage
	@Override
	public int compareTo(TOHoursPerDay obj) {
<span class="fc" id="L57">		TOHoursPerDay item = obj;</span>
<span class="fc bfc" id="L58" title="All 2 branches covered.">		if (equals(item)) {</span>
<span class="fc" id="L59">			return 0;</span>
		}
<span class="fc" id="L61">		Date date1 = getStartTime();</span>
<span class="fc" id="L62">		Date date2 = item.getStartTime();</span>
<span class="pc bpc" id="L63" title="2 of 6 branches missed.">		if (date1 == null || date2 == null || date1.equals(date2)) {</span>
<span class="fc" id="L64">			int hash1 = hashCode();</span>
<span class="fc" id="L65">			int hash2 = item.hashCode();</span>
<span class="pc bpc" id="L66" title="1 of 2 branches missed.">			return (hash1 &gt; hash2) ? 1 : -1; // will return equal only if</span>
												// hashcodes are equal
		} else {
<span class="pc bpc" id="L69" title="1 of 2 branches missed.">			return (date1.before(date2)) ? -1 : 1;</span>
		}
	}

	@Override
	public int hashCode() {
<span class="fc" id="L75">		return 31 * 17 + getKey().hashCode();</span>
	}

	@Override
	public boolean equals(Object obj) {
<span class="fc" id="L80">		TOHoursPerDay item = (TOHoursPerDay) obj;</span>
<span class="pc bpc" id="L81" title="1 of 2 branches missed.">		if (item == null) {</span>
<span class="nc" id="L82">			return false;</span>
		}
<span class="fc" id="L84">		return getKey().equals(item.getKey());</span>
	}

	public String getKey() {
<span class="fc" id="L88">		ID event = getTOEventID();</span>
<span class="fc" id="L89">		ID choice = getTOChoiceID();</span>
<span class="fc bfc" id="L90" title="All 4 branches covered.">		return ((event == null) ? &quot;NA&quot; : event.toString()) + &quot;-&quot; + ((choice == null) ? &quot;NA&quot; : choice.toString());</span>
	}

	/**
	 * get field value in batch
	 */
	@Override
	protected FieldInfo getFieldInfo() {
<span class="fc" id="L98">		return m_fieldInfo;</span>
	}

	@Override
	public ID getID() {
<span class="fc" id="L103">		return getFieldValueID(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_I_ID);</span>
	}

	@Override
	public void setID(ID hoursperdayID) {
<span class="nc" id="L108">		setFieldValue(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_I_ID, hoursperdayID);</span>
<span class="nc" id="L109">	}</span>

	/**
	 * Get the employee ID
	 */
	public ID getEmployeeID() {
<span class="fc" id="L115">		return getFieldValueID(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_I_EMPLOYEEID);</span>
	}

	/**
	 * Set the employee ID
	 */
	public void setEmployeeID(ID empId) {
<span class="fc" id="L122">		setFieldValue(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_I_EMPLOYEEID, empId);</span>
<span class="fc" id="L123">	}</span>

	public ID getActivityID() {
<span class="fc" id="L126">		return getFieldValueID(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_I_ACTIVITYID);</span>
	}

	public void setActivityID(ID activityID) {
<span class="fc" id="L130">		setFieldValue(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_I_ACTIVITYID, activityID);</span>
<span class="fc" id="L131">	}</span>

	public ID getTOEventID() {
<span class="fc" id="L134">		return getFieldValueID(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_I_TIMEOFFEVENTID);</span>
	}

	public void setTOEventID(ID toEventID) {
<span class="fc" id="L138">		setFieldValue(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_I_TIMEOFFEVENTID, toEventID);</span>
<span class="fc" id="L139">	}</span>

	public ID getTOChoiceID() {
<span class="fc" id="L142">		return getFieldValueID(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_I_TIMEOFFCHOICEID);</span>
	}

	public void setTOChoiceID(ID toChoiceID) {
<span class="fc" id="L146">		setFieldValue(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_I_TIMEOFFCHOICEID, toChoiceID);</span>
<span class="fc" id="L147">	}</span>

	/**
	 * Returns the rank for the Time Off choice
	 */
	public int getTimeOffChoiceRank() {
<span class="fc" id="L153">		return getFieldValueInt(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_N_TIMEOFFCHOICERANK);</span>
	}

	/**
	 * Sets the rank for the Time Off choice
	 */
	public void setTimeOffChoiceRank(int rank) {
<span class="fc" id="L160">		setFieldValue(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_N_TIMEOFFCHOICERANK, rank);</span>
<span class="fc" id="L161">	}</span>

	/**
	 * Returns the number of minutes the event will count towards various rules,
	 * such as vacation allocation, min/max hours, etc.
	 */
	public int getTotalMinutes() {
<span class="fc" id="L168">		return getFieldValueInt(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_N_TOTALMINUTES);</span>
	}

	/**
	 * Sets the number of minutes the event will count towards various rules,
	 * such as vacation allocation, min/max hours, etc.
	 */
	public void setTotalMinutes(int mins) {
<span class="fc" id="L176">		setFieldValue(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_N_TOTALMINUTES, mins);</span>
<span class="fc" id="L177">	}</span>

	/**
	 * Returns the number of minutes the event will count towards various rules,
	 * such as vacation allocation, min/max hours, etc.
	 */
	public int getOriginalMinutes() {
<span class="fc" id="L184">		return getFieldValueInt(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_N_ORIGMINUTES);</span>
	}

	/**
	 * Sets the number of minutes the event will count towards various rules,
	 * such as vacation allocation, min/max hours, etc.
	 */
	public void setOriginalMinutes(int mins) {
<span class="fc" id="L192">		setFieldValue(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_N_ORIGMINUTES, mins);</span>
<span class="fc" id="L193">	}</span>

	public String getOriginalHoursPerDay() {
<span class="fc" id="L196">		return getFormattedFieldValue(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_S_ORIGHOURSPERDAY);</span>
	}

	public void setOriginalHoursPerDay(String hours) {
<span class="fc" id="L200">		setFieldValue(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_S_ORIGHOURSPERDAY, hours);</span>
<span class="fc" id="L201">	}</span>

	public void setStartTime(Date startDate) {
<span class="fc" id="L204">		setFieldValue(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_D_STARTTIME, startDate);</span>
<span class="fc" id="L205">	}</span>

	public Date getStartTime() {
<span class="fc" id="L208">		return getFieldValueDate(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_D_STARTTIME);</span>
	}

	public void setEndTime(Date endDate) {
<span class="fc" id="L212">		setFieldValue(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_D_ENDTIME, endDate);</span>
<span class="fc" id="L213">	}</span>

	public Date getEndTime() {
<span class="fc" id="L216">		return getFieldValueDate(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_D_ENDTIME);</span>
	}

	public void setIsDirty(boolean isDirty) {
<span class="fc" id="L220">		setFieldValue(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_B_ISDIRTY, isDirty);</span>
<span class="fc" id="L221">	}</span>

	public boolean getIsDirty() {
<span class="fc" id="L224">		return getFieldValueBoolean(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_B_ISDIRTY);</span>
	}

	/*
	 * public void setIsInPublishedPeriod(boolean IsInPublishedPeriod) {
	 * setFieldValue
	 * (TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_B_ISINPUBLISHPERIOD,
	 * IsInPublishedPeriod); }
	 * 
	 * public boolean getIsInPublishedPeriod() { return
	 * getFieldValueBoolean(TOHoursPerDayFieldInfo
	 * .TIMEOFFHOURSPERDAY_B_ISINPUBLISHPERIOD); }
	 */

	public void setDirtyTime(Date dirtyDate) {
<span class="fc" id="L239">		setFieldValue(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_D_DIRTYTIME, dirtyDate);</span>
<span class="fc" id="L240">	}</span>

	public Date getDirtyTime() {
<span class="nc" id="L243">		return getFieldValueDate(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_D_DIRTYTIME);</span>
	}

	public void setStatus(String status) {
<span class="fc" id="L247">		setFieldValue(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_N_STATUS, convertStatusToIntVal(status));</span>
<span class="fc" id="L248">	}</span>

	public String getStatus() {
<span class="fc" id="L251">		return convertStatusToString(getFieldValueInt(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_N_STATUS));</span>
	}

	public void setHoursPerDay(String hoursPerDay) {
<span class="fc" id="L255">		setFieldValue(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_S_HOURSPERDAY, hoursPerDay);</span>
<span class="fc" id="L256">	}</span>

	public String getHoursPerDay() {
<span class="fc" id="L259">		return getFormattedFieldValue(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_S_HOURSPERDAY);</span>
	}

	public TOHoursPerDay() {
<span class="fc" id="L263">		super();</span>
<span class="fc" id="L264">	}</span>

	/**
	 * this values indicates how to calculate the minutes indicates how event
	 * will count towards various rules Possible enumeration values are: use
	 * underlying shift or use the value specified by CountsMinutesTowardsRules
	 * property.
	 */
	public int getTimeOffRule() {
<span class="fc" id="L273">		return getFieldValueInt(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_N_TIMEOFFRULE);</span>
	}

	public void setTimeOffRule(int timeOffRule) {
<span class="fc" id="L277">		setFieldValue(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_N_TIMEOFFRULE, timeOffRule);</span>
<span class="fc" id="L278">	}</span>

	public static int convertStatusToIntVal(String reqStatus) {
<span class="fc" id="L281">		return statusHashMap.get(reqStatus).intValue();</span>
	}

	public static String convertStatusToString(int reqStatus) {
<span class="fc" id="L285">		return statusMap[reqStatus];</span>
	}

	public int getPeriodFlag() {
<span class="nc" id="L289">		String hrsPerDay = getHoursPerDay();</span>
<span class="nc" id="L290">		int retVal = -1;</span>
<span class="nc bnc" id="L291" title="All 2 branches missed.">		if (hrsPerDay != null) {</span>
<span class="nc" id="L292">			StringTokenizer st = new StringTokenizer(getHoursPerDay(), &quot;:&quot;);</span>
<span class="nc" id="L293">			retVal = ((new Integer(st.nextElement().toString())).intValue());</span>
		}
<span class="nc" id="L295">		return retVal;</span>
	}

	public boolean areOriginalMinutesAvailable() {
<span class="fc" id="L299">		Object obj = getFieldValue(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_N_ORIGMINUTES);</span>
<span class="pc bpc" id="L300" title="1 of 2 branches missed.">		return (obj != null);</span>
	}
	
	public boolean areOriginalHoursAvailable(){
<span class="fc" id="L304">		 Object obj = getFieldValue(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_S_ORIGHOURSPERDAY);</span>
<span class="fc bfc" id="L305" title="All 2 branches covered.">		 return (obj != null);</span>
	}
	 
	public void setExpiryDate(Date date) {
<span class="fc" id="L309">		setFieldValue(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_D_EXPIRYDATE, date);</span>
<span class="fc" id="L310">	}</span>

	public Date getExpiryDate() {
<span class="nc" id="L313">		return getFieldValueDate(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_D_EXPIRYDATE);</span>
	}

	public String getUniqueKey() {
<span class="nc bnc" id="L317" title="All 2 branches missed.">		return (getEmployeeID() != null ? getEmployeeID().toInt() : 0) + &quot;_&quot;</span>
<span class="nc bnc" id="L318" title="All 2 branches missed.">				+ (getTOEventID() != null ? getTOEventID().toInt() : 0) + &quot;_&quot;</span>
<span class="nc bnc" id="L319" title="All 2 branches missed.">				+ (getTOChoiceID() != null ? getTOChoiceID().toInt() : 0);</span>
	}

	/**
	 * Sets the total number of minutes derived from defaulted hours 
	 */
	public void setTotalMinutesFromDefault(int mins) {
<span class="fc" id="L326">		setFieldValue(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_S_TOTALMINUTESFROMDEFAULT, mins);</span>
<span class="fc" id="L327">	}</span>
	/**
	 * Gets the total number of minutes derived from defaulted hours 
	 */
	public int getTotalMinutesFromDefaulted() {
<span class="fc" id="L332">		return getFieldValueInt(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_S_TOTALMINUTESFROMDEFAULT);</span>
	}
	/**
	 * Sets the total number of minutes derived from scheduled hours 
	 */
	public void setTotalMinutesFromScheduled(int mins) {
<span class="fc" id="L338">		setFieldValue(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_S_TOTALMINUTESFROMSCHEDULE, mins);</span>
<span class="fc" id="L339">	}</span>
	/**
	 * Gets the total number of minutes derived from scheduled hours
	 */
	public int getTotalMinutesFromScheduled() {
<span class="fc" id="L344">		return getFieldValueInt(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_S_TOTALMINUTESFROMSCHEDULE);</span>
	}

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>