<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>PeopleSkillDetailPopupPM.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">QA Code Coverage</a> &gt; <a href="index.source.html" class="el_package">com.bluepumpkin.web.bbm.people.skill</a> &gt; <span class="el_source">PeopleSkillDetailPopupPM.java</span></div><h1>PeopleSkillDetailPopupPM.java</h1><pre class="source lang-java linenums">package com.bluepumpkin.web.bbm.people.skill;

import java.util.ArrayList;
import java.util.Collection;
import java.util.Collections;
import java.util.HashMap;
import java.util.HashSet;
import java.util.Iterator;
import java.util.List;
import java.util.Map;
import java.util.ResourceBundle;
import java.util.Date;
import com.bluepumpkin.common.datatypes.ID;
import com.bluepumpkin.common.util.StringUtil;
import com.bluepumpkin.ejb.bbm.skill.model.Skill;
import com.bluepumpkin.ejb.bbm.skill.model.SkillAssignment;
import com.bluepumpkin.ejb.bbm.workresource.model.EmployeeName;
import com.bluepumpkin.ejb.bbm.workresource.model.EmployeeTemplate;
import com.bluepumpkin.web.bbm.employee.EmployeeModelHandler;
import com.bluepumpkin.web.bbm.l10n.BbmWebBundleKey;
import com.bluepumpkin.web.bbm.organization.OrganizationModelHandler;
import com.bluepumpkin.web.bbm.skill.SkillModelHandler;
import com.witness.ejb.core.security.model.User;
import com.witness.web.uif.base.Message;
import com.witness.web.uif.l10n.UIFWebBundleKey;
import com.witness.web.uif.pagecomponent.DefaultMultiColumnNodeData;
import com.witness.web.uif.pagecomponent.list.MultiColListPC;
import com.witness.web.uif.pagecomponent.table.GenericHeaderData;
import com.witness.web.uif.pagecomponent.table.TableHeaderPC;
import com.witness.web.uif.pagemodel.PageModel;
import com.witness.web.uif.pagemodel.PopupWindowPM;
import com.witness.web.uif.system.RequestContext;
import com.witness.web.uif.util.HtmlUtil;
import com.witness.web.uif.util.html.CSSUtil;

/**
 * Title:        PeopleSkillDetailPopupPM
 * Description:  Popup to Display People Skill Detail
 * Copyright:    Copyright (c) 2002
 * Company:      Blue Pumpkin Software, Inc
 * @author       David Su, dsu
 * @version      1.0
 *
 * Created on November 4, 2002, 10:43 AM
 */
public class PeopleSkillDetailPopupPM extends PopupWindowPM {
	public static final String REQUEST_HANDLER = &quot;people_skills_detail&quot;;
	public static final String DATA_STYLE = &quot;text-align:right;&quot;;

	private ResourceBundle m_bundle;
	private User m_user;
<span class="nc" id="L52">	private String m_sEmpIDs = &quot;&quot;;</span>
<span class="nc" id="L53">	private String m_sEmpTplIDs = &quot;&quot;;</span>
	//QC-96672 changes
<span class="nc" id="L55">	private String m_sShiftDate1 = &quot;&quot;;</span>
<span class="nc" id="L56">	private String m_sShiftDate2 = &quot;&quot;;</span>


<span class="nc" id="L59">	private Collection m_empIDs = Collections.EMPTY_LIST;</span>
<span class="nc" id="L60">	private Collection m_empTplIDs = Collections.EMPTY_LIST;</span>
<span class="nc" id="L61">	private Collection m_skills = Collections.EMPTY_LIST;</span>

<span class="nc" id="L63">	private Map m_eSkillAssignMap = Collections.EMPTY_MAP;</span>
<span class="nc" id="L64">	private Map m_empNameMap = Collections.EMPTY_MAP;</span>
<span class="nc" id="L65">	private Map m_eOrgMap = Collections.EMPTY_MAP;</span>

<span class="nc" id="L67">	private Map m_eTplSkillAssignMap = Collections.EMPTY_MAP;</span>
<span class="nc" id="L68">	private Map m_eTplNameMap = Collections.EMPTY_MAP;</span>
<span class="nc" id="L69">	private Map m_eTplOrgMap = Collections.EMPTY_MAP;</span>

<span class="nc" id="L71">	private boolean m_isFilteredMsgAdded=false;</span>
	private MultiColListPC m_listPC;
	private String m_notAvailableMsg;

	/** Creates a new instance of SkillDetailPopupPM */
	public PeopleSkillDetailPopupPM(RequestContext context) {
<span class="nc" id="L77">		super(context);</span>

<span class="nc" id="L79">		m_user = context.getUser();</span>
<span class="nc" id="L80">		m_bundle = m_localizer.getBundle(BbmWebBundleKey.BUNDLE_NAME);</span>
<span class="nc" id="L81">		m_notAvailableMsg = i18n(m_common_bundle, UIFWebBundleKey.NA);</span>

<span class="nc" id="L83">		m_listPC = new MultiColListPC(context);</span>
<span class="nc" id="L84">		m_listPC.setIsZebra(true);</span>
<span class="nc" id="L85">		addChildComponent(m_listPC);</span>
<span class="nc" id="L86">	}</span>

	/**
	 * Return an instance of the model that is ready for rendering
	 */
	public static PageModel getInstance(RequestContext context) throws Exception {
<span class="nc" id="L92">		return getInstance(context, PeopleSkillDetailPopupPM.class);</span>
	}//getInstance

	/**
	 * Initialize Model with Data
	 */
	@Override
	protected void initializeModel() {
<span class="nc bnc" id="L100" title="All 2 branches missed.">		if (m_isInitialized) {</span>
<span class="nc" id="L101">			return;</span>
		} else {
<span class="nc" id="L103">			m_isInitialized = true;</span>
		}
		try {
<span class="nc" id="L106">			ArrayList skillIDs = new ArrayList(10);</span>

			// load Employee related info
<span class="nc bnc" id="L109" title="All 2 branches missed.">			if (!m_empIDs.isEmpty()) {</span>
<span class="nc" id="L110">				Collection tmpSkill_IDs = loadEmployeeInfo();</span>
<span class="nc" id="L111">				skillIDs.addAll(tmpSkill_IDs);</span>
			}

			// load Employee temaplate related info
<span class="nc bnc" id="L115" title="All 2 branches missed.">			if (!m_empTplIDs.isEmpty()) {</span>
<span class="nc" id="L116">				Collection tmpSkill_IDs = loadEmployeeTemplateInfo();</span>
<span class="nc" id="L117">				skillIDs.addAll(tmpSkill_IDs);</span>
			}

<span class="nc bnc" id="L120" title="All 2 branches missed.">			if (!skillIDs.isEmpty()) {</span>
<span class="nc" id="L121">				m_skills = SkillModelHandler.getSkillsByIDs(skillIDs);</span>
			}

<span class="nc bnc" id="L124" title="All 2 branches missed.">			if (m_skills.isEmpty()) {</span>
<span class="nc" id="L125">				addPageMessage(Message.INFO_TYPE,	BbmWebBundleKey.BBM_PEOPLE_SKILLS_NO_DATA,</span>
						BbmWebBundleKey.BUNDLE_NAME);
			}
<span class="nc" id="L128">		} catch (Exception ex) {</span>
<span class="nc" id="L129">			handleUnableToLoadDataError(log, ex);</span>
		} finally {
<span class="nc" id="L131">			initContentTitle();</span>
<span class="nc" id="L132">			initList();</span>
<span class="nc" id="L133">			initToolbar();</span>
<span class="nc" id="L134">		}</span>
<span class="nc" id="L135">	}</span>

	/**
	 * Load Employee Template Information and return associated Skill IDs
	 */
	private Collection loadEmployeeTemplateInfo() throws Exception {
<span class="nc" id="L141">		Collection empTemplates = EmployeeModelHandler.getEmployeeTemplatesByID(m_context, m_empTplIDs);</span>

<span class="nc" id="L143">		boolean hasEmpFiltered = false;</span>
<span class="nc" id="L144">		m_eTplNameMap = new HashMap();</span>
<span class="nc" id="L145">		m_eTplOrgMap = new HashMap();</span>
<span class="nc" id="L146">		m_eTplSkillAssignMap = new HashMap();</span>
<span class="nc" id="L147">		List filteredIDs = new ArrayList(m_empTplIDs.size());</span>
<span class="nc" id="L148">		HashSet skillIDset = new HashSet();</span>
<span class="nc bnc" id="L149" title="All 2 branches missed.">		for(Iterator it=empTemplates.iterator(); it.hasNext(); ) {</span>
<span class="nc" id="L150">			EmployeeTemplate et = (EmployeeTemplate)it.next();</span>
<span class="nc" id="L151">			ID etID = et.getID();</span>

<span class="nc" id="L153">			m_eTplNameMap.put(etID, et.getName());</span>
<span class="nc" id="L154">			m_eTplOrgMap.put(etID, et.getOrganizationID());</span>

			// filter ID
<span class="nc bnc" id="L157" title="All 2 branches missed.">			if (PeopleSkillUtil.isAuthToViewEmpTemplateSkillInfo(m_user, etID, m_eTplOrgMap)) {</span>
<span class="nc" id="L158">				filteredIDs.add(etID);</span>
			} else {
<span class="nc" id="L160">				hasEmpFiltered = true;</span>
<span class="nc" id="L161">				continue;</span>
			}

			// Process Skills and Skill Assignements
<span class="nc" id="L165">			Collection saList = et.getSkillAssignments();</span>
<span class="nc bnc" id="L166" title="All 4 branches missed.">			if (saList != null &amp;&amp; !saList.isEmpty()) {</span>
<span class="nc" id="L167">				Map s_saMap = createSkillsMap(saList);</span>
<span class="nc" id="L168">				m_eTplSkillAssignMap.put(etID, s_saMap);</span>
<span class="nc" id="L169">				skillIDset.addAll(s_saMap.keySet());</span>
			}
<span class="nc" id="L171">		}</span>

<span class="nc bnc" id="L173" title="All 4 branches missed.">		if (hasEmpFiltered &amp;&amp; !m_isFilteredMsgAdded) {</span>
<span class="nc" id="L174">			m_isFilteredMsgAdded = true;</span>
<span class="nc" id="L175">			addPageMessage(Message.WARNING_TYPE,</span>
					BbmWebBundleKey.SOME_INFO_WERE_FILTERED_DUE_TO_AUTH,
					BbmWebBundleKey.BUNDLE_NAME);
		}

<span class="nc" id="L180">		return skillIDset;</span>
	}

	/**
	 * Load Employee related information and return collection of associated skill
	 * IDs
	 */
	//QC(96672) changes : changed the implementation of the method to load the skills of the agents from there respective shifts .
	 private Collection loadEmployeeInfo() throws Exception {
<span class="nc" id="L189">			int counter = 0 ;</span>
<span class="nc" id="L190">			Map e_saMap = null ;</span>
<span class="nc" id="L191">			Date agent1shiftDate = null;</span>
<span class="nc" id="L192">			Date agent2shiftDate = null;</span>
<span class="nc" id="L193">			HashSet skillIDset = new HashSet();</span>
<span class="nc" id="L194">			m_eOrgMap = OrganizationModelHandler.getEmployeeOrgMap(m_context, m_empIDs, null);</span>
<span class="nc" id="L195">			m_empIDs = filterEmpIDs(m_empIDs, m_eOrgMap);</span>
<span class="nc" id="L196">			m_empNameMap = EmployeeModelHandler.getEmployeeNamesByIDs(m_context, m_empIDs);</span>
<span class="nc" id="L197">			Iterator it = m_empIDs.iterator();</span>
<span class="nc" id="L198">			m_eSkillAssignMap = new HashMap(m_empIDs.size());</span>
			
<span class="nc bnc" id="L200" title="All 2 branches missed.">			if (!StringUtil.isEmpty(m_sShiftDate1) ) {</span>
<span class="nc" id="L201">				agent1shiftDate = new Date(new Long(m_sShiftDate1).longValue());</span>
			}
<span class="nc bnc" id="L203" title="All 2 branches missed.">			if (!StringUtil.isEmpty(m_sShiftDate2) ) {</span>
<span class="nc" id="L204">				agent2shiftDate = new Date(new Long(m_sShiftDate2).longValue());</span>
			}
<span class="nc bnc" id="L206" title="All 2 branches missed.">	        while(it.hasNext()){</span>
<span class="nc" id="L207">	        	ID id = (ID) it.next();</span>
<span class="nc" id="L208">	        	List empIDs = new ArrayList();</span>
<span class="nc" id="L209">	        	empIDs.add(id);</span>
		    // passed shift date as start date and end date 
<span class="nc bnc" id="L211" title="All 2 branches missed.">			if(counter==0){</span>
<span class="nc" id="L212">				e_saMap = PeopleSkillModelHandler.getSkillAssignments(m_context,empIDs, agent1shiftDate, agent1shiftDate);</span>
			}
			else{
<span class="nc" id="L215">				e_saMap = PeopleSkillModelHandler.getSkillAssignments(m_context,empIDs, agent2shiftDate, agent2shiftDate);</span>
			}
<span class="nc bnc" id="L217" title="All 2 branches missed.">			for (Iterator it1 = m_empIDs.iterator(); it1.hasNext();) {</span>
<span class="nc" id="L218">				ID empID = (ID) it1.next();</span>
<span class="nc" id="L219">				Collection saList = (Collection) e_saMap.get(empID);</span>
<span class="nc bnc" id="L220" title="All 4 branches missed.">				if (saList != null &amp;&amp; !saList.isEmpty()) {</span>
<span class="nc" id="L221">					Map s_saMap = createSkillsMap(saList);</span>
<span class="nc" id="L222">					m_eSkillAssignMap.put(empID, s_saMap);</span>
<span class="nc" id="L223">					skillIDset.addAll(s_saMap.keySet());</span>
				}
<span class="nc" id="L225">			}</span>
<span class="nc" id="L226">			counter++;</span>
			
<span class="nc" id="L228">	        }</span>
<span class="nc" id="L229">	       return skillIDset;</span>
		}


	/**
	 * Filter Employees that user does not have privilege to view Skills
	 */
	private Collection filterEmpIDs(Collection empIDs, Map eOrgMap) {
<span class="nc bnc" id="L237" title="All 4 branches missed.">		if (empIDs == null || empIDs.isEmpty()) {</span>
<span class="nc" id="L238">			return Collections.EMPTY_LIST;</span>
		}

<span class="nc" id="L241">		boolean hasEmpFiltered = false;</span>
<span class="nc" id="L242">		List filteredIDs = new ArrayList(empIDs.size());</span>
<span class="nc bnc" id="L243" title="All 2 branches missed.">		for (Iterator it = empIDs.iterator(); it.hasNext();) {</span>
<span class="nc" id="L244">			ID empID = (ID) it.next();</span>
<span class="nc bnc" id="L245" title="All 2 branches missed.">			if (PeopleSkillUtil.isAuthToViewEmpSkillInfo(m_user, empID, eOrgMap)) {</span>
<span class="nc" id="L246">				filteredIDs.add(empID);</span>
			} else {
<span class="nc" id="L248">				hasEmpFiltered = true;</span>
			}
<span class="nc" id="L250">		}</span>

<span class="nc bnc" id="L252" title="All 4 branches missed.">		if (hasEmpFiltered &amp;&amp; !m_isFilteredMsgAdded) {</span>
<span class="nc" id="L253">			m_isFilteredMsgAdded = true;</span>
<span class="nc" id="L254">			addPageMessage(Message.WARNING_TYPE,</span>
					BbmWebBundleKey.SOME_INFO_WERE_FILTERED_DUE_TO_AUTH,
					BbmWebBundleKey.BUNDLE_NAME);
		}

<span class="nc" id="L259">		return filteredIDs;</span>
	}

	/**
	 * Skill Map of Skill ID and Skill Assignements
	 */
	private Map createSkillsMap(Collection saList) {
<span class="nc" id="L266">		HashMap resultMap = new HashMap(saList.size());</span>

<span class="nc bnc" id="L268" title="All 2 branches missed.">		for (Iterator it = saList.iterator(); it.hasNext();) {</span>
<span class="nc" id="L269">			SkillAssignment sa = (SkillAssignment) it.next();</span>
<span class="nc" id="L270">			ID skillID = sa.getSkillID();</span>
<span class="nc" id="L271">			resultMap.put(skillID, sa);</span>
<span class="nc" id="L272">		}</span>

<span class="nc" id="L274">		return resultMap;</span>
	}

	/**
	 * Prepare content title for rendering
	 */
	protected void initContentTitle() {
<span class="nc" id="L281">		String pageTitle = i18n(m_common_bundle, UIFWebBundleKey.VIEW_DETAILS);</span>
<span class="nc" id="L282">		String itemName = i18n(m_bundle, BbmWebBundleKey.BBM_PEOPLE_SKILLS);</span>
<span class="nc" id="L283">		m_contentTitlePC.setPageTitle(pageTitle);</span>
<span class="nc" id="L284">		m_contentTitlePC.setItemName(itemName);</span>
<span class="nc" id="L285">	}</span>

	/**
	 * Initialize List
	 */
	private void initList() {
<span class="nc" id="L291">		m_listPC.setEnabled(false);</span>
<span class="nc" id="L292">		initHeader();</span>

<span class="nc" id="L294">		List listModel = new ArrayList(5);</span>
<span class="nc" id="L295">		addEmpNameRow(listModel);</span>
<span class="nc" id="L296">		addSkillRows(listModel);</span>
<span class="nc" id="L297">		m_listPC.setListModel(listModel);</span>
<span class="nc" id="L298">	}</span>

	/**
	 * Initialize Header
	 */
	private void initHeader() {
<span class="nc" id="L304">		TableHeaderPC header = m_listPC.getHeader();</span>

<span class="nc" id="L306">		String skillLabel = i18n(m_bundle, BbmWebBundleKey.BBM_PEOPLE_SKILLS);</span>
<span class="nc" id="L307">		header.addColumnHeaderData(null, skillLabel);</span>

<span class="nc" id="L309">		int profColSize = m_empIDs.size() + m_empTplIDs.size();</span>
<span class="nc" id="L310">		String proficiencyLabel = i18n(m_bundle, BbmWebBundleKey.PEOPLE_SKILLS_PROFICIENCY);</span>
<span class="nc" id="L311">		GenericHeaderData hData = header.addColumnHeaderData(null, proficiencyLabel);</span>
<span class="nc" id="L312">		hData.setColSpan(profColSize);</span>
<span class="nc" id="L313">		hData.setHeaderClass(CSSUtil.CLASS_HEADER_CENTER);</span>
<span class="nc" id="L314">	}</span>

	/**
	 * Add Employee Name Row
	 */
	private void addEmpNameRow(List listModel) {
<span class="nc" id="L320">		DefaultMultiColumnNodeData row_data = new DefaultMultiColumnNodeData();</span>
<span class="nc" id="L321">		row_data.add(&quot;&quot;);</span>

		// handle Employees
<span class="nc bnc" id="L324" title="All 2 branches missed.">		for (Iterator it = m_empIDs.iterator(); it.hasNext();) {</span>
<span class="nc" id="L325">			ID empID = (ID) it.next();</span>
<span class="nc" id="L326">			EmployeeName eName = (EmployeeName) m_empNameMap.get(empID);</span>

<span class="nc" id="L328">			String name = &quot;&lt;nobr&gt;&lt;b&gt;&quot; + m_localizer.formatName(eName) + &quot;&lt;/b&gt;&lt;/nobr&gt;&quot;;</span>
<span class="nc" id="L329">			row_data.add(name, DATA_STYLE);</span>
<span class="nc" id="L330">		}</span>

		// handle Employee Templates
<span class="nc bnc" id="L333" title="All 2 branches missed.">		for (Iterator it = m_empTplIDs.iterator(); it.hasNext();) {</span>
<span class="nc" id="L334">			ID etID = (ID) it.next();</span>
<span class="nc" id="L335">			String eName = (String) m_eTplNameMap.get(etID);</span>

<span class="nc" id="L337">			String name = &quot;&lt;nobr&gt;&lt;b&gt;&quot; + eName + &quot;&lt;/b&gt;&lt;/nobr&gt;&quot;;</span>
<span class="nc" id="L338">			row_data.add(name, DATA_STYLE);</span>
<span class="nc" id="L339">		}</span>

<span class="nc" id="L341">		listModel.add(row_data);</span>
<span class="nc" id="L342">	}</span>

	/**
	 * Add Skill Rows
	 */
	private void addSkillRows(List listModel) {
<span class="nc bnc" id="L348" title="All 2 branches missed.">		if (m_skills.isEmpty()) {</span>
<span class="nc" id="L349">			return;</span>
		}
<span class="nc bnc" id="L351" title="All 2 branches missed.">		for (Iterator it = m_skills.iterator(); it.hasNext();) {</span>
<span class="nc" id="L352">			Skill skill = (Skill) it.next();</span>
<span class="nc" id="L353">			addSkillRow(listModel, skill);</span>
<span class="nc" id="L354">		}</span>
<span class="nc" id="L355">	}</span>

	/**
	 * Add Skill Row for a given Skill
	 */
	private void addSkillRow(List listModel, Skill skill) {
<span class="nc" id="L361">		DefaultMultiColumnNodeData row_data = new DefaultMultiColumnNodeData();</span>
<span class="nc" id="L362">		row_data.add(&quot;&lt;nobr&gt;&quot; + skill.getName() + &quot;&lt;/nobr&gt;&quot;);</span>

		// handle employees
<span class="nc bnc" id="L365" title="All 2 branches missed.">		for (Iterator it = m_empIDs.iterator(); it.hasNext();) {</span>
<span class="nc" id="L366">			ID empID = (ID) it.next();</span>

      // Determine whether User can view Employees' Proficiency
<span class="nc" id="L369">			boolean isProfViewable = PeopleSkillUtil.isAuthToViewEmpSnPInfo(m_user, empID, m_eOrgMap);</span>
<span class="nc bnc" id="L370" title="All 2 branches missed.">			if (!isProfViewable) {</span>
<span class="nc" id="L371">				row_data.add(m_notAvailableMsg, DATA_STYLE);</span>
<span class="nc" id="L372">				continue;</span>
			}

      // Create Proficiency Display
<span class="nc" id="L376">			SkillAssignment sa = null;</span>
<span class="nc" id="L377">			Map s_saMap = (Map) m_eSkillAssignMap.get(empID);</span>
<span class="nc bnc" id="L378" title="All 2 branches missed.">			if (s_saMap != null) {</span>
<span class="nc" id="L379">				sa = (SkillAssignment) s_saMap.get(skill.getID());</span>
			}

<span class="nc bnc" id="L382" title="All 2 branches missed.">			String proficiency = (sa != null) ? m_localizer.formatNumber(sa.getProficiency(), 1) : &quot;&quot;;</span>
<span class="nc" id="L383">			row_data.add(proficiency, DATA_STYLE);</span>
<span class="nc" id="L384">		}</span>

		// handle employee templates
<span class="nc bnc" id="L387" title="All 2 branches missed.">		for (Iterator it = m_empTplIDs.iterator(); it.hasNext();) {</span>
<span class="nc" id="L388">			ID etID = (ID) it.next();</span>

      // Determine whether User can view Employees' Proficiency
<span class="nc" id="L391">			boolean isProfViewable = PeopleSkillUtil.isAuthToViewEmpTemplateSnPInfo(m_user, etID, m_eTplOrgMap);</span>
<span class="nc bnc" id="L392" title="All 2 branches missed.">			if (!isProfViewable) {</span>
<span class="nc" id="L393">				row_data.add(m_notAvailableMsg, DATA_STYLE);</span>
<span class="nc" id="L394">				continue;</span>
			}

      // Create Proficiency Display
<span class="nc" id="L398">			SkillAssignment sa = null;</span>
<span class="nc" id="L399">			Map s_saMap = (Map) m_eTplSkillAssignMap.get(etID);</span>
<span class="nc bnc" id="L400" title="All 2 branches missed.">			if (s_saMap != null) {</span>
<span class="nc" id="L401">				sa = (SkillAssignment) s_saMap.get(skill.getID());</span>
			}

<span class="nc bnc" id="L404" title="All 2 branches missed.">			String proficiency = (sa != null) ? m_localizer.formatNumber(sa.getProficiency(), 1) : &quot;&quot;;</span>
<span class="nc" id="L405">			row_data.add(proficiency, DATA_STYLE);</span>
<span class="nc" id="L406">		}</span>

<span class="nc" id="L408">		listModel.add(row_data);</span>
<span class="nc" id="L409">	}</span>


	/**
	 * Return URL for HTML Form Action
	 */
	@Override
	public String getFormAction() {
<span class="nc" id="L417">		return REQUEST_HANDLER;</span>
	}

	/**
	 * Set Employee IDs separated by comma
	 */
	public void setEmployeeID(String sEmpIDs) {
<span class="nc" id="L424">		m_sEmpIDs = sEmpIDs;</span>
<span class="nc" id="L425">		m_empIDs = StringUtil.parseIDStringToCollection(sEmpIDs);</span>
<span class="nc" id="L426">	}</span>

	/**
	 * Set Employee Template IDs separated by comma
	 */
	public void setEmpTemplateID(String sEmpTemplateIDs) {
<span class="nc" id="L432">		m_sEmpTplIDs = sEmpTemplateIDs;</span>
<span class="nc" id="L433">		m_empTplIDs = StringUtil.parseIDStringToCollection(sEmpTemplateIDs);</span>
<span class="nc" id="L434">	}</span>

	/**
	 * Return HTML Display
	 */
	@Override
	public String getHtmlDisplay() {
<span class="nc" id="L441">		return m_listPC.getHtmlDisplay();</span>
	}

	@Override
	public String getRequiredHTML() {
<span class="nc" id="L446">		return super.getRequiredHTML() +</span>
<span class="nc" id="L447">				HtmlUtil.makeHiddenInput(&quot;employeeID&quot;, m_sEmpIDs) +</span>
<span class="nc" id="L448">				HtmlUtil.makeHiddenInput(&quot;empTemplateID&quot;, m_sEmpTplIDs);</span>
	}
	//QC-96672  changes
	public void setShiftDate1(String shiftDate1) {
<span class="nc" id="L452">		m_sShiftDate1 = shiftDate1;</span>
<span class="nc" id="L453">	}</span>

	

	public void setShiftDate2(String shiftDate2) {
<span class="nc" id="L458">		m_sShiftDate2 = shiftDate2;</span>
<span class="nc" id="L459">	}</span>

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>