<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>BiddableSchedule.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">QA Code Coverage</a> &gt; <a href="index.source.html" class="el_package">com.bluepumpkin.ejb.rm.requests.shiftbid.shiftbidrequest.model</a> &gt; <span class="el_source">BiddableSchedule.java</span></div><h1>BiddableSchedule.java</h1><pre class="source lang-java linenums">package com.bluepumpkin.ejb.rm.requests.shiftbid.shiftbidrequest.model;

/**
 * Title:        BiddableSchedule
 * Description:  This class represents an BiddableSchedule
 * Copyright:    Copyright (c) 2002
 * Company:      Blue Pumpkin Software, Inc.
 * @author       Jagdish Seelam
 * @version 1.0
 */

import java.util.ArrayList;
import java.util.Collection;
import java.util.Collections;
import java.util.HashMap;
import java.util.Iterator;
import java.util.List;
import java.util.Map;

import com.bluepumpkin.common.datatypes.ID;
import com.bluepumpkin.common.datatypes.Pair;
import com.bluepumpkin.ejb.bbm.vo.FieldInfo;
import com.bluepumpkin.ejb.bbm.vo.ValueObjectNode;
import com.bluepumpkin.ejb.bbm.workresource.model.Phantom;
import com.bluepumpkin.ejb.rm.requests.common.ejb.RequestUtil;
import com.bluepumpkin.ejb.rm.requests.common.model.RequestAuditTrail;
import com.bluepumpkin.ejb.rm.requests.common.model.RequestDetailLevel;



/**
 * Represents a biddable schedule.
 * 
 * see {@link com.bluepumpkin.ejb.rm.requests.shiftbid.shiftbidauction.ejb.ShiftBidAuctionManager ShiftBidAuctionManager}
 * for a description of the shift bidding process. 
 *    
 */
public class BiddableSchedule extends ValueObjectNode implements Cloneable  
{
    /**
     * ID, bounsPoints
     */
    public static final long DL_BASIC = RequestDetailLevel.DL_BASIC;
    
    /**
     * Shift Bid request(for preference and usingBonus) submitted by 
     * given user for this biddable schedule.
     */
    public static final long DL_SHIFT_BID_REQUEST_FOR_SHIFT_BIDDER = RequestDetailLevel.DL_SHIFT_BID_REQUEST_FOR_SHIFTBIDDER; 
    
    /**
     * Specify this detail level to compute the rank of the bid request submitted by the given user 
     * towards this biddable schedule. This detail level loads all the necessary information to compute 
     * the rank of this biddable schedule, from the context of a given bidderID. Specifically it loads: 
     * &lt;li&gt; all shift bid requests for this biddable schedule.
     * &lt;li&gt; the shift bidder associated with each biddable schedule.
     * &lt;li&gt; the auction associated with the shift bid request. 
     * 
     * &lt;p&gt; Since all shift  bid requests are loaded, it also allows the computation of # of shift bid
     * requests towards this biddable schedule.
     */ 
    public static final long DL_BIDRANK_FOR_SHIFTBIDREQUEST = RequestDetailLevel.DL_BIDRANK_FOR_SHIFTBIDREQUEST_BIDDABLESCHEDULE_ROOTED;
    
    /**
     * The Number of bids for this BiddableSchedule
     */
    public static final long DL_NUMBER_OF_SHIFTBIDREQUESTS = RequestDetailLevel.DL_NUMBER_OF_SHIFTBIDREQUESTS_FOR_BIDSCHED;
    
    /**
     * shifts Associated with this biddable schedule. 
     */
    public static final long DL_SHIFT_ASSIGNMENTS_COLL = RequestDetailLevel.DL_SHIFT_ASSIGNMENTS_COLL_ROOTED_BIDDABLESCHED;
    
    /**
     * Employee object (phantom employee associated with the biddable schedule)
     */
    public static final long DL_EMPLOYEE = RequestDetailLevel.DL_EMPLOYEE_BIDSCHEDINST_CHILD;

    /**
     * Load the BiddableSchedule instances associated with this BiddableSchedule.
     */
    public static final long DL_BIDDABLESCHEDULEINSTANCES = RequestDetailLevel.DL_BIDDABLESCHEDULEINSTANCES;

    /**
     * @see RequestDetailLevel#DL_INCLUDE_ZERO_NUM_OF_AVAIL_INSTANCES
     */
    public static final long DL_INCLUDE_ZERO_NUM_OF_AVAIL_INSTANCES = 
            RequestDetailLevel.DL_INCLUDE_ZERO_NUM_OF_AVAIL_INSTANCES;

    /**
     * 
     */
<span class="nc" id="L93">    private static final BiddableScheduleFieldInfo m_fieldInfo = new BiddableScheduleFieldInfo();</span>

    
    /**
     * unsorted.
     */
<span class="nc" id="L99">    public static int SORTBY_NONE = 1;</span>
    /**
     * Name of the phantom for the first avail bid sched.
     * &lt;p&gt;Note: does an in-memory sort
     */
    public static final int SORTBY_PHANTOMNAME  = 2;
    /**
     * Preference specified in the shift bid request submitted towards a bidSched (bidder context required) 
     * &lt;p&gt;Note: does an in-memory sort
     */
    public static final int SORTBY_PREFERENCE = 3;
    /**
     * Number of available bidSched instances.
     * &lt;p&gt;Note: does a SQL sort
     */
    public static final int SORTBY_NUMBER_AVAIALBLE = 4;
    /**
     * Number of bids submitted towards this bidSched
     * &lt;p&gt;Note: does an in-memory sort
     */
    public static final int SORTBY_NUMBER_SUBMITTED = 5;
    /**
     * Rank of the bidder's shiftBidRequest (bidder context required) submitted towards this 
     * bidSched relative to other shiftBidRequests. 
     * &lt;p&gt;Note: does an in-memory sort
     */
    public static final int SORTBY_BIDRANK = 6;
    /**
     * Bonus assigned to the bidSched
     * &lt;p&gt;Note: does a SQL sort
     */
    public static final int SORTBY_BONUSASSIGNED = 7;
    /**
     * Total # of hours for the bidSched.
     * &lt;p&gt;Note: does an in-memory sort
     */
    public static final int SORTBY_HOURS = 8;

    /**
     * Description assigned to the bidSched
     * &lt;p&gt;Note: does a SQL sort
     */
    public static final int SORTBY_DESCRIPTION = 9;

    /**
     * Sunday shift's start time.
     * &lt;p&gt;Note: does an in-memory sort
     */
    public static final int SORTBY_SUNDAY_STARTTIME = 10;
    
    /**
     * Sort by type constants. These are used in conjunction with a dayOfWeek offset
     * and a week offset in order to determine which day column to sort, and which
     * criteria to sort by (shift start time, shift end time, or shift length). 
     * Again, these constants are only used for sorting by one of the day columns.
     */
    public static final int SORTBY_STARTTIME = 0;
    public static final int SORTBY_ENDTIME = 1;
    public static final int SORTBY_LENGTH = 2;
    public static final int NUM_SORT_TYPES = 3;
    
    
    /**
     * The shiftBidder context for which this biddableSchedule was loaded.
     *   
     * For example calling {@link com.bluepumpkin.ejb.rm.requests.shiftbid.shiftbidauction.ejb.IShiftBidAuctionManager#getBiddableSchedulesForAuction(ID, ID, ID, long) getBiddableSchedulesForAuction}
     * with a shiftBidder ID sets this.  This ID is then used to process shiftBidder related information associated
     * with this biddableSchedule such as a shift bid request. 
     */
    protected ID m_shiftBidderID;
    
    /**
     * a pair of Integers to represent rank 'x/y'.
     */
<span class="nc" id="L173">    protected Pair m_bidRankForShiftBidderWithBonus = new Pair(new Integer(0), new Integer(0));</span>
    
    /**
     * a pair of Integers to represent rank 'x/y'.
     */
<span class="nc" id="L178">    protected Pair m_bidRankForShiftBidderWithoutBonus  = new Pair(new Integer(0), new Integer(0));</span>
    
    private transient BiddableScheduleOptMethods m_biddableSchedOptMethods;
    
    private transient BiddableScheduleSetters m_biddableSchedSetters;
    
<span class="nc" id="L184">    private long m_detailLevel = DL_BASIC;</span>

    //  cache will be invalidated if cached data is modified.    
    private transient BiddableScheduleInstance m_cachedFirstAvailBidSchedInst;
    //  cache will be invalidated if cached data is modified.
    private transient List m_cachedBidSchedInstances;

	/**
	 * All shiftBidRequests associated with this biddableSchedule.
	 */
    private transient List m_cachedSBReqsForBidSched;

	/**
	 * List of associated shiftBidReqs with one of the statuses in 
	 * {@link com.bluepumpkin.ejb.rm.requests.common.model.RequestAuditTrail#SOFT_VALIDATION_STATES SOFT_VALIDATION_STATES}
	 */
	private transient List m_cachedSBReqsForSVS; // SVS == soft validation states

	/**
	 * SBReq associated with this biddableSchedule in the context of m_shiftBidderID
	 */
	private ShiftBidRequest m_cachedSBReqForShiftBidder;

	//This is just used to sort the biddable schedules in the GUI and is not loaded in the usual cases
	private Integer unsubmittedPreferenceForEmployee;
                    
<span class="nc bnc" id="L210" title="All 2 branches missed.">    public class BiddableScheduleSetters  {</span>
        public void setBiddableScheduleChecksum(String md5Hash)  {
<span class="nc" id="L212">            setFieldValue(BiddableScheduleFieldInfo.BIDDABLESCHEDULE_S_BIDDABLESCHEDCHECKSUM, md5Hash);</span>
<span class="nc" id="L213">        }</span>
        
//        public void setShiftBidRequestForShiftBidder(ShiftBidRequest sbr)   {       
//            m_sbr = sbr;        
//        }
    
        /*public void setShiftAssignments(Collection shiftAssns)  {
            m_shiftAssignments = shiftAssns;
        }*/
    
        public void setShiftBidderID(ID shiftBidderID)  {
<span class="nc" id="L224">            m_shiftBidderID = shiftBidderID;</span>
<span class="nc" id="L225">        }</span>
    

        public void setShiftBidAuctionID(ID shiftBidAuctionID)  {
<span class="nc" id="L229">            setFieldValue(BiddableScheduleFieldInfo.BIDDABLESCHEDULE_I_SHIFTBIDAUCTIONID, shiftBidAuctionID);</span>
<span class="nc" id="L230">        }</span>
    
        public void setNumOfAvailInstances(int availInstances)  {
<span class="nc" id="L233">            setFieldValue(BiddableScheduleFieldInfo.BIDDABLESCHEDULE_N_NUMOFAVAILINSTANCES, availInstances);</span>
            
            // if numOfAvailInstances is being set to zero, clear the firstAvailBidSchedInstID field.
            //if (availInstances == 0) {
				//setFirstAvailBiddableSchedInstanceIDAsNull();
			//}

			// clear related caches            
<span class="nc" id="L241">			m_cachedBidSchedInstances = null;</span>
<span class="nc" id="L242">			m_cachedFirstAvailBidSchedInst = null;</span>
<span class="nc" id="L243">        }</span>
        
        public void setFirstAvailBiddableSchedInstanceID(ID firstBidSchedID)  {
<span class="nc" id="L246">            m_cachedFirstAvailBidSchedInst = null; //invalidate cache.</span>
<span class="nc" id="L247">            setFieldValue(BiddableScheduleFieldInfo.BIDDABLESCHEDULE_I_FIRSTAVAILBIDSCHEDINSTID, firstBidSchedID);</span>
<span class="nc" id="L248">        }</span>
        
		public void setFirstAvailBiddableSchedInstanceIDAsNull()  {
<span class="nc" id="L251">			m_cachedFirstAvailBidSchedInst = null; //invalidate cache.</span>
<span class="nc" id="L252">			setFieldNull(BiddableScheduleFieldInfo.BIDDABLESCHEDULE_I_FIRSTAVAILBIDSCHEDINSTID);</span>
<span class="nc" id="L253">		}</span>
        
        public void scanAndSetFirstAvailBiddableSchedInstaceID(ID idDeleted) {
<span class="nc" id="L256">        }   </span>
             
        /**
         * TODO:  this method must also increment the 'numOfAvailInstances' field and if necessary set
         * the 'firstAvailInst' field.  If this enhancement is done, ensure that
         * the above operations are not done by the callers as well.  
         * 
         * @param biddableSchedInst
         */
        public void addBiddableScheduleInstance(BiddableScheduleInstance biddableSchedInst)  {
<span class="nc" id="L266">            m_detailLevel |= DL_BIDDABLESCHEDULEINSTANCES;</span>
            
<span class="nc" id="L268">            m_cachedBidSchedInstances = null; //invalidate cache</span>
<span class="nc" id="L269">            createChildObject(BiddableScheduleFieldInfo.BIDDABLESCHEDULEINSTANCE_CHILD_TYPE, biddableSchedInst);</span>
            
<span class="nc" id="L271">            setNumOfAvailInstances(getNumOfAvailableInstances() + 1);</span>
            
            // Note: If this biddableSchedule had no biddableScheduleInstances before this addition,
            // the BiddableSchedule.firstAvailInstanceID field cannot be updated to 
            // this new biddableScheduleInstance being added since it does not have an ID yet 
            // (has not been inserted into the database yet).  This is a flaw in the schema design.               
<span class="nc" id="L277">        }</span>

        /**
         * &lt;li&gt; deletes the specified bidSchedInst
         * &lt;li&gt; decrements the NumOfAvailInstances field.
         * &lt;li&gt; sets the firstAvailBidSchedInst field to null (if no more bidScheds exist) or to the next 
         * available bidSchedInst.
         * 
         * @param BSInstIDToBeDel
         */
        public void deleteBiddableScheduleInstance(ID BSInstIDToBeDel)  {
			// invalidate biddable schedule instances cache
<span class="nc" id="L289">            m_cachedBidSchedInstances = null;</span>
             
            // decrease the num of avail instances count.
<span class="nc bnc" id="L292" title="All 2 branches missed.">            if (getNumOfAvailableInstances() &lt;= 0) {</span>
<span class="nc" id="L293">                throw new RuntimeException(Integer.toString(getNumOfAvailableInstances()));</span>
            }
            
            //delete only if available instances &gt;0
            //this is the case when the schedule has been deleted
<span class="nc bnc" id="L298" title="All 2 branches missed.">            if (getNumOfAvailableInstances()&gt;0)</span>
<span class="nc" id="L299">            	deleteChildObject(BiddableScheduleFieldInfo.BIDDABLESCHEDULEINSTANCE_CHILD_TYPE, BSInstIDToBeDel);</span>
            
<span class="nc" id="L301">			setNumOfAvailInstances(getNumOfAvailableInstances() - 1);</span>
            
            // if no more bidSchedInstances exist, then return.
<span class="nc bnc" id="L304" title="All 2 branches missed.">            if (getNumOfAvailableInstances() == 0) {</span>
				//setFirstAvailBiddableSchedInstanceIDAsNull();
<span class="nc" id="L306">				return;</span>
            }

            // At this point one or more other bidSchedInsts besides the one being deleted exist (inferred
            // from getNumOfAvailInstances()).
            //
            // If the BidSchedInst being deleted is not referred by BidSched.firstAvailBidSchedInstID
            
<span class="nc bnc" id="L314" title="All 2 branches missed.">            if ( getFirstAvailBiddableSchedInstanceID() != null &amp;&amp; </span>
<span class="nc bnc" id="L315" title="All 2 branches missed.">                    !getFirstAvailBiddableSchedInstanceID().equals(BSInstIDToBeDel))</span>
<span class="nc" id="L316">                return;</span>
                
            // bidSchedInst being deleted is referred by by BidSched.firstAvailBidSchedInstID.
            // So scan and find another bidSchedInst to replace this.
            //
            // get all bidSchedInstances associated with this bidSched.
<span class="nc" id="L322">            List bidSchedInstances = getOptMethods().getBiddableScheduleInstances();</span>
<span class="nc" id="L323">            m_cachedBidSchedInstances = null; //invalidate cache</span>
                    
            // scan and find another bidSchedInst other than the one being deleted.
<span class="nc bnc" id="L326" title="All 2 branches missed.">            for (Iterator BSIIter = bidSchedInstances.iterator(); BSIIter.hasNext();) {</span>
<span class="nc" id="L327">                BiddableScheduleInstance bsi = (BiddableScheduleInstance) BSIIter.next();</span>
                        
                // if bidSchedInst ID != 'ID' of bidSchedInst being deleted.
<span class="nc bnc" id="L330" title="All 2 branches missed.">                if ( !bsi.getID().equals(BSInstIDToBeDel) ) {</span>
<span class="nc" id="L331">                    setFirstAvailBiddableSchedInstanceID(bsi.getID());</span>
<span class="nc" id="L332">                    break;</span>
                }
<span class="nc" id="L334">            }</span>
                    
            // assert that another bidSchedInst was indeed found.  
<span class="nc bnc" id="L337" title="All 4 branches missed.">            assert !getFirstAvailBiddableSchedInstanceID().equals(BSInstIDToBeDel):</span>
                &quot;getFirstAvailBiddableSchedInstanceID() != idDeleted: &quot; +
<span class="nc" id="L339">                getFirstAvailBiddableSchedInstanceID() + ',' + BSInstIDToBeDel;</span>
<span class="nc" id="L340">        }</span>

        /**
         * @param orgID
         */
        public void setOrgID(ID orgID) {
<span class="nc" id="L346">            setFieldValue(BiddableScheduleFieldInfo.BIDDABLESCHEDULE_I_ORGANIZATIONID, orgID);</span>
<span class="nc" id="L347">        }</span>
        
        public void setIsFullPeriod(boolean isFullPeriod)  {
<span class="nc bnc" id="L350" title="All 2 branches missed.">            setFieldValue(BiddableScheduleFieldInfo.BIDDABLESCHEDULE_B_ISFORSINGLESHIFTS, !isFullPeriod);</span>
<span class="nc" id="L351">        }</span>
        
        public void clearCreatedBiddableScheduleInstances()  {
<span class="nc" id="L354">            clearCreatedChildObjectMap(BiddableScheduleFieldInfo.BIDDABLESCHEDULEINSTANCE_CHILD_TYPE);</span>
<span class="nc" id="L355">        }</span>

        /**
         * @param bidRankWithBonus a pair of Integers to represent rank 'x/y'.
         */
        public void setBidRankForShiftBidderWithBonus(Pair bidRankWithBonus) {
<span class="nc" id="L361">            m_bidRankForShiftBidderWithBonus = bidRankWithBonus;</span>
<span class="nc" id="L362">        }</span>
    
        public void setBidRankForShiftBidderWithoutBonus(Pair bidRankForShiftBidderWithoutBonus) {
<span class="nc" id="L365">            m_bidRankForShiftBidderWithoutBonus = bidRankForShiftBidderWithoutBonus;</span>
<span class="nc" id="L366">        }</span>

		/**
		 * fixNumOfAvailInstsAndFirstAvailBSIIDIfNecess == fix numberOfAvailInstances and 
		 * firstAvailBiddableSchedInstanceID.
		 * 
		 * @param numOfBidSchedInsts
		 * @return
		 */
		public boolean fixNumOfAvailInstsAndFirstAvailBSIIDIfNecess(int actualNumOfBidSchedInsts) {
			
<span class="nc bnc" id="L377" title="All 4 branches missed.">			assert (getDetailLevel() &amp; DL_BIDDABLESCHEDULEINSTANCES) != 0:</span>
<span class="nc" id="L378">				&quot;(getDetailLevel() &amp; DL_BIDDABLESCHEDULEINSTANCES) != 0: &quot; + getDetailLevel();</span>
			
<span class="nc" id="L380">			boolean bidSchedUpdated = false;</span>
<span class="nc" id="L381">			int bidSchedNumOfAvailInsts = getNumOfAvailableInstances();</span>
			
			// fix the # of availableBidSched instances if necessary.
<span class="nc bnc" id="L384" title="All 2 branches missed.">			if (bidSchedNumOfAvailInsts != actualNumOfBidSchedInsts) {</span>
<span class="nc" id="L385">				setNumOfAvailInstances(actualNumOfBidSchedInsts);</span>
                
<span class="nc" id="L387">				bidSchedUpdated = true;</span>
                
				// refresh the # of avail instances as the count was updated by fixNumOfAvailBidSchedInsts() method.
<span class="nc" id="L390">				bidSchedNumOfAvailInsts = getNumOfAvailableInstances();				    </span>
			}
			
			// fix the firstAvailBidSchedInstance if necessary.
<span class="nc bnc" id="L394" title="All 4 branches missed.">			assert bidSchedNumOfAvailInsts &gt;= 0:&quot;bidSchedNumOfAvailInsts &gt;= 0: &quot; + bidSchedNumOfAvailInsts;</span>
			// if no bidSchedInstsances associated with this bidSched
<span class="nc bnc" id="L396" title="All 2 branches missed.">			if (bidSchedNumOfAvailInsts != 0) { // if one or more bidScheds associated with this bidSched.				</span>
<span class="nc" id="L397">				List bidSchedInstIDs = getOptMethods().getBiddableScheduleInstanceIDs();</span>
<span class="nc bnc" id="L398" title="All 2 branches missed.">				if ( !bidSchedInstIDs.contains(getFirstAvailBiddableSchedInstanceID()) ) {</span>
<span class="nc" id="L399">					setFirstAvailBiddableSchedInstanceID((ID) bidSchedInstIDs.get(0) );</span>
<span class="nc" id="L400">					bidSchedUpdated = true;</span>
				}
			}
			
            // clear caches if this bidSched was updated
<span class="nc bnc" id="L405" title="All 2 branches missed.">            if (bidSchedUpdated) {</span>
<span class="nc" id="L406">                m_cachedBidSchedInstances = null;</span>
<span class="nc" id="L407">                m_cachedFirstAvailBidSchedInst = null;</span>
            }
            
<span class="nc" id="L410">			return bidSchedUpdated;</span>
		}
    }
    
<span class="nc bnc" id="L414" title="All 2 branches missed.">    public class BiddableScheduleOptMethods  {</span>
        /**
         * Scans all shiftBidRequests which use this biddableSchedule and returns the
         * shiftBidRequest created by specified shiftBidder (see m_shiftBidderID).  
         * Note: may return 'null' if no shiftBidRequest for the shiftBidder was found.
         * 
         * @return
         * REMOVED for QC62436  
         */
/*        public ShiftBidRequest getShiftBidRequestForShiftBidder() {
            assert m_shiftBidderID != null:&quot;m_shiftBidderID != null&quot;;
            
            if (m_cachedSBReqForShiftBidder != null) return m_cachedSBReqForShiftBidder;
             
            List sbReqs = getShiftBidRequestsForBiddableSched();
            
            // search shift bid requests for the shift bidder's shift bid request.
            for (Iterator sbReqsIter = sbReqs.iterator(); sbReqsIter.hasNext();) {
                ShiftBidRequest sbReq = (ShiftBidRequest) sbReqsIter.next();
                
                if (sbReq.getShiftBidderID().equals(m_shiftBidderID)) {
                    m_cachedSBReqForShiftBidder = sbReq;
                    break;
                }
            }
            
            return m_cachedSBReqForShiftBidder;        
        }
*/    
        /**
         * Scans all shiftBidRequests which use this biddableSchedule and returns all the
         * shiftBidRequests created by specified shiftBidder (see m_shiftBidderID).
         * added for QC62436 - if bidder withdraws first bid then bids again on same BiddableSchedule,
         * then the withdrawn request was returned.   
         */
        public Collection getShiftBidRequestsForShiftBidder() {
<span class="nc bnc" id="L450" title="All 4 branches missed.">            assert m_shiftBidderID != null:&quot;m_shiftBidderID != null&quot;;</span>

<span class="nc" id="L452">            List sbReqs = getShiftBidRequestsForBiddableSched();</span>
<span class="nc" id="L453">        	ArrayList rtnReqs = new ArrayList(sbReqs.size());</span>
        	
            // collect only shift bidder's shift bid requests
<span class="nc bnc" id="L456" title="All 2 branches missed.">            for (Iterator sbReqsIter = sbReqs.iterator(); sbReqsIter.hasNext();) {</span>
<span class="nc" id="L457">                ShiftBidRequest sbReq = (ShiftBidRequest) sbReqsIter.next();</span>
                
<span class="nc bnc" id="L459" title="All 2 branches missed.">                if (sbReq.getShiftBidderID().equals(m_shiftBidderID)) {</span>
<span class="nc" id="L460">                	rtnReqs.add(sbReq);</span>
                }
<span class="nc" id="L462">            }</span>
            
<span class="nc" id="L464">            return rtnReqs;</span>
        }
        
        /**
         * get ShiftBidRequest For ShiftBidder Excluding Withdrawn and Invalid requests
         * 
         * &lt;p&gt;&lt;b&gt;Note&lt;/b&gt;: This return may return 'null'.
         * 
         * @return
         */
        public ShiftBidRequest getShiftBidRequestForShiftBidder() {
        	//QC62436: method used to be getShiftBidRequestForShiftBidderWI()
<span class="nc bnc" id="L476" title="All 2 branches missed.">            if (m_cachedSBReqForShiftBidder != null) return m_cachedSBReqForShiftBidder;</span>

<span class="nc" id="L478">            ShiftBidRequest sbReq = null;</span>
<span class="nc" id="L479">        	Collection reqs = getShiftBidRequestsForShiftBidder();</span>
<span class="nc bnc" id="L480" title="All 2 branches missed.">        	for (Iterator it=reqs.iterator(); it.hasNext(); ) {</span>
<span class="nc" id="L481">        		sbReq = (ShiftBidRequest) it.next();</span>
<span class="nc" id="L482">                String reqStatus = sbReq.getRequestStatus();</span>
            
<span class="nc bnc" id="L484" title="All 2 branches missed.">                if(RequestAuditTrail.STATUS_WITHDRAWN.equals(reqStatus) || </span>
<span class="nc bnc" id="L485" title="All 2 branches missed.">                   RequestAuditTrail.STATUS_INVALID.equals(reqStatus)) </span>
<span class="nc" id="L486">                	continue;</span>
                else {
<span class="nc" id="L488">                    m_cachedSBReqForShiftBidder = sbReq;</span>
<span class="nc" id="L489">                	break;</span>
                }
            }
            
<span class="nc" id="L493">            return m_cachedSBReqForShiftBidder;  </span>
        }

    
        public List getShiftBidRequestsForBiddableSched() {
<span class="nc bnc" id="L498" title="All 2 branches missed.">            if (m_cachedSBReqsForBidSched != null) return m_cachedSBReqsForBidSched;</span>

			// ShiftBidRequest_BiddableSchedule_Collection
<span class="nc" id="L501">            Collection SBR_BS_Coll = getShiftBidRequestBiddableSchedules();</span>
            // if empty, we return an ArrayList() instead of Collections.EMPTY_LIST since 
            // ShiftBidAuctionUtil.getSortedSBReqsForBiddableSched() attempts to modify the returned list.
<span class="nc bnc" id="L504" title="All 2 branches missed.">            if (SBR_BS_Coll.isEmpty()) return (m_cachedSBReqsForBidSched = new ArrayList());</span>
            
            // iterate over the ShiftBidRequestBiddableSchedules associated with this biddable schedule.            
<span class="nc" id="L507">            m_cachedSBReqsForBidSched = new ArrayList(SBR_BS_Coll.size());</span>
<span class="nc bnc" id="L508" title="All 2 branches missed.">            for (Iterator SBR_BS_CollIter = SBR_BS_Coll.iterator(); SBR_BS_CollIter.hasNext();) {</span>
<span class="nc" id="L509">                ShiftBidRequestBiddableSchedule SBR_BS = (ShiftBidRequestBiddableSchedule) SBR_BS_CollIter.next();</span>

                // add the associated shift bid request.                
<span class="nc" id="L512">                m_cachedSBReqsForBidSched.add(SBR_BS.getShiftBidRequest());</span>
<span class="nc" id="L513">            }</span>
            
<span class="nc" id="L515">            return m_cachedSBReqsForBidSched;</span>
        }
        
        /**
         * See {@link BiddableSchedule#m_cachedSBReqsForSVS m_cachedSBReqsForSVS}
         * 
		 * @return
		 */
		public List getShiftBidRequestsForBSWithSoftValStates() {
<span class="nc bnc" id="L524" title="All 2 branches missed.">        	if (m_cachedSBReqsForSVS != null) return m_cachedSBReqsForSVS;</span>
        	
<span class="nc" id="L526">        	return (m_cachedSBReqsForSVS = </span>
<span class="nc" id="L527">        		getShiftBidRequestsForBiddableSched(RequestAuditTrail.SOFT_VALIDATION_STATES));</span>
        }
		/**
		 * @param excludeStatuses array of request statuses to include.
		 * @return
		 */
		protected List getShiftBidRequestsForBiddableSched(List includeStatuses) {
			// covert status array to map for faster lookup
<span class="nc" id="L535">			Map statusStrMap = new HashMap();</span>
<span class="nc bnc" id="L536" title="All 2 branches missed.">			for (Iterator includeStatusesIter = includeStatuses.iterator(); includeStatusesIter.hasNext();) {</span>
<span class="nc" id="L537">				Object statusStr = includeStatusesIter.next();</span>
<span class="nc" id="L538">				statusStrMap.put(statusStr, statusStr);</span>
<span class="nc" id="L539">			}</span>
			
			// get shift bid requests associated with this biddable scheudle.
<span class="nc" id="L542">			List allSBReqs = getShiftBidRequestsForBiddableSched();</span>
						
			// make a filtered copy of the above list.
<span class="nc" id="L545">			List filteredSBReqs = new ArrayList(allSBReqs.size());</span>
<span class="nc bnc" id="L546" title="All 2 branches missed.">			for (Iterator allSBReqsIter = allSBReqs.iterator(); allSBReqsIter.hasNext();) {</span>
<span class="nc" id="L547">				ShiftBidRequest sbr = (ShiftBidRequest) allSBReqsIter.next();</span>
				
				// if status is to be excluded, continue
<span class="nc bnc" id="L550" title="All 2 branches missed.">				if (!statusStrMap.containsKey(sbr.getRequestStatus())) continue;</span>
				
				// add to filtered list
<span class="nc" id="L553">				filteredSBReqs.add(sbr);</span>
<span class="nc" id="L554">			}</span>
			
<span class="nc" id="L556">			return filteredSBReqs;</span>
		}
        
        public Collection getShiftBidRequestBiddableSchedules() {
<span class="nc" id="L560">            return getChildObjects(BiddableScheduleFieldInfo.SHIFTBIDREQUESTBIDDABLESCHEDULE_CHILD_TYPE);</span>
        }

        /**
         * @return a pair of Integers to represent rank 'x/y'.
         */
        public Pair getBidRankForShiftBidderWithBonus() {
<span class="nc" id="L567">            return m_bidRankForShiftBidderWithBonus;</span>
        }
    
        public Pair getBidRankForShiftBidderWithoutBonus() {
<span class="nc" id="L571">            return m_bidRankForShiftBidderWithoutBonus;</span>
        }

        /**
         * This considers all bids irrespective of the state of the bids (ie states such as 
         * approved, invalid, withdrawn and similar are included).
         * 
         * @return
         */
        public int getNumberOfBids() {
<span class="nc" id="L581">            return getShiftBidRequestBiddableSchedules().size();</span>
        }
    
        /**
         * Returns 'null' if 
         * &lt;li&gt; detailLevel != DL_SHIFTASSIGNMENTS_COLL or 
         * &lt;li&gt; detailLevel == DL_SHIFTASSIGNMENTS_COLL but
         * the biddableScheduleInstance was deleted outside RM without updating bidSched.numOfAvailBidSchedInstances
         * field in the DB (can happen when a phantom is deleted in DE and the cascade delete 
         * it triggers removes the bidSchedInstance without updating the field BidSched.numOfBidSchedInstances
         * field in the DB). 
         * 
         * &lt;p&gt;Otherwise returns the
         * associated first biddable schedule instance.
         * 
         * @return
         */
        public BiddableScheduleInstance getFirstAvailBiddableSchedInst()  {
            // if found in cache, return.
<span class="nc bnc" id="L600" title="All 2 branches missed.">            if (m_cachedFirstAvailBidSchedInst != null)  </span>
<span class="nc" id="L601">                return m_cachedFirstAvailBidSchedInst;</span>

            // for any of the following detail level the 'first avail bid sched instance' child will be loaded.
<span class="nc" id="L604">            long detailLevelForSAColl = RequestDetailLevel.DL_SHIFT_ASSIGNMENTS_COLL_ROOTED_BIDDABLESCHED |</span>
                RequestDetailLevel.DL_SHIFT_ASSIGNMENTS_COLL_ROOTED_SHIFTBIDREQUEST;
            
            // verify that the biddableSchedule has the right detail level to retrieve the 
            // 'first avail bid sched instance'.
<span class="nc" id="L609">            long detailLevelToCheck = detailLevelForSAColl | DL_BIDDABLESCHEDULEINSTANCES;</span>
<span class="nc bnc" id="L610" title="All 4 branches missed.">            assert (getDetailLevel() &amp; detailLevelToCheck) != 0:</span>
                &quot;(getDetailLevel() &amp; DL_SHIFT_ASSIGNMENTS_COLL_ROOTED_BIDDABLESCHED | &quot; +
<span class="nc" id="L612">                &quot;DL_SHIFT_ASSIGNMENTS_COLL_ROOTED_SHIFTBIDREQUEST | DL_BIDDABLESCHEDULEINSTANCES) != 0: &quot; + getDetailLevel();            </span>

			// Note: must also accomodate the unusual case where the phantoms are deleted from the
			// campaign week.  Deleting a phantom also deletes the biddableScheduleInstances associated with the
			// phantom which leaves the biddableScheduleInstance with an incorrect value for the 'numOfAvailInstances'
			// field and possibly a non-existent ID in the 'firstAvailBidSchedInst' field. 			

            // if this biddable schedule has 'first avail bidSched instance' as child.
<span class="nc bnc" id="L620" title="All 2 branches missed.">            if ( (getDetailLevel() &amp; detailLevelForSAColl) != 0 ){</span>
                // get the 'first avail bidSched instance' child.
<span class="nc" id="L622">                Collection firstAvailInstances  = getChildObjects(</span>
                    BiddableScheduleFieldInfo.FIRST_AVAIL_BIDDABLESCHEDULEINSTANCE_CHILD_TYPE);
                //assert (firstAvailInstances.size() == 1):&quot;firstAvailInstances.size(): &quot; + firstAvailInstances.size();

                // cache it.  Handle the scenario that the bidSchedInst does not exist (for example if the phantom
                // was deleted from DE).
<span class="nc" id="L628">				m_cachedFirstAvailBidSchedInst = null;</span>
<span class="nc" id="L629">				Iterator iter = firstAvailInstances.iterator();</span>
<span class="nc bnc" id="L630" title="All 2 branches missed.">				if (iter.hasNext()) {                    </span>
<span class="nc" id="L631">                	m_cachedFirstAvailBidSchedInst = (BiddableScheduleInstance) iter.next();</span>
				}
<span class="nc" id="L633">            } else { </span>
                // must be DL_BIDDABLESCHEDULEINSTANCES, ie this bidSched has all bidSchedInstances loaded.
                //
                // search for the firstBidSchedInstID in the bidSchedInstances collection. 
<span class="nc" id="L637">				m_cachedFirstAvailBidSchedInst = null;</span>
                
<span class="nc" id="L639">                ID firstAvailBidSchedInstID = getFirstAvailBiddableSchedInstanceID();                </span>
				// firstAvailBidSchedInstID can be null if the bidSchedInstance was deleted without updating the field
				// BidSched.numOfAvailInstances in the DB (can happen if phantom is deleted in DE).
<span class="nc bnc" id="L642" title="All 2 branches missed.">				if (firstAvailBidSchedInstID != null) {                </span>
	                //scan the biddable scheduele instances for the 'first avail bidSched instance'.
<span class="nc" id="L644">	                BiddableScheduleInstance currBidSchedInst = null;</span>
<span class="nc" id="L645">	                List bidSchedInstances = getBiddableScheduleInstances();</span>

                    // find the firstAvailBidSchedInst in the bidSchedInstances collection.
                    int i;
<span class="nc bnc" id="L649" title="All 2 branches missed.">	                for (i = 0; i &lt; bidSchedInstances.size(); i++) {</span>
<span class="nc" id="L650">	                    currBidSchedInst = (BiddableScheduleInstance) bidSchedInstances.get(i);</span>
<span class="nc bnc" id="L651" title="All 2 branches missed.">	                    if (firstAvailBidSchedInstID.equals(currBidSchedInst.getID())) {</span>
<span class="nc" id="L652">	                        break;</span>
	                    }    
	                }
	                
					// firstAvailBidSchedInst may be not be found if the bidSchedInstance was 
                    // deleted without updating BidSched.numOfAvailInstances in the DB (can happen if phantom is deleted in DE).
<span class="nc bnc" id="L658" title="All 2 branches missed.">	                if (i &lt; bidSchedInstances.size()) {</span>
						// cache the found 'first avail bidSchedInst'
<span class="nc" id="L660">						m_cachedFirstAvailBidSchedInst = currBidSchedInst;</span>
	                }
				}                
            }
            
<span class="nc" id="L665">            return m_cachedFirstAvailBidSchedInst;</span>
        }

        /**
         * Returns the shift Assigngments associated with this biddbable schedule.
         * Internally, uses the FirstAvailBiddableScheduleInstanceID to retrieve the
         * shiftAssignment collection.
         * 
         * @see BiddableScheduleInstance.BiddableScheduleInstanceOptMethod#getShiftAssignments
         * @return
         */
        public List getShiftAssignments() {
<span class="nc" id="L677">            BiddableScheduleInstance firstAvailBidSchedInst = getFirstAvailBiddableSchedInst();</span>
<span class="nc bnc" id="L678" title="All 2 branches missed.">            return (firstAvailBidSchedInst == null)?Collections.EMPTY_LIST:</span>
<span class="nc" id="L679">                firstAvailBidSchedInst.getOptMethods().getShiftAssignments();</span>
        }

        /**
         * ShiftBidAuctionManager EJB can retrieve the biddableSchedules for 
         * a given user and auction (see 
         * {@link com.bluepumpkin.ejb.rm.requests.shiftbid.shiftbidauction.ejb.ShiftBidAuctionManager#getBiddableSchedulesForAuction(ID, ID, ID, int) getBiddableSchedulesForAuction})
         * This method returns the shift bidder ID on whose behalf this biddable schedule
         * was retrieved.
         * 
         * @return
         */    
        public ID getShiftBidderID() {
<span class="nc" id="L692">            return m_shiftBidderID;</span>
        }
    
        /**
         * can return null if this biddableSchedule does not have any biddableScheduleInstances 
         * associated with it.
         * 
         * @return
         */
        public Phantom getEmployee()  {
<span class="nc" id="L702">            BiddableScheduleInstance firstAvailBiddableSchedInst = getFirstAvailBiddableSchedInst();</span>
<span class="nc bnc" id="L703" title="All 2 branches missed.">            return (firstAvailBiddableSchedInst == null)?null:firstAvailBiddableSchedInst.getOptMethods().getEmployee();</span>
        }
        
        /**
         * This method may return an empty collection if the biddableSchedInst associated with this
         * bidSched was deleted during the cascade delete which happens when a phantom is deleted in
         * DE.  For more info see the javadoc for {@link #getFirstAvailBiddableSchedInst() getFirstAvailBiddableSchedInst()}
         * method.
         * 
		 * @return
		 */
		public List getBiddableScheduleInstances()  {
<span class="nc bnc" id="L715" title="All 4 branches missed.">            assert (getDetailLevel()  &amp; DL_BIDDABLESCHEDULEINSTANCES) != 0:</span>
<span class="nc" id="L716">                &quot;(getDetailLevel()  &amp; DL_BIDDABLESCHEDULEINSTANCES) != 0: &quot; + getDetailLevel();</span>
                
<span class="nc bnc" id="L718" title="All 2 branches missed.">            if (m_cachedBidSchedInstances != null) return m_cachedBidSchedInstances;</span>
            
<span class="nc" id="L720">            m_cachedBidSchedInstances = RequestUtil.getListFromCollection(</span>
<span class="nc" id="L721">                getChildObjects(BiddableScheduleFieldInfo.BIDDABLESCHEDULEINSTANCE_CHILD_TYPE));</span>
<span class="nc" id="L722">            return m_cachedBidSchedInstances;</span>
        }

		/**
		 * This method may return an empty collection if the biddableSchedInst associated with this
		 * bidSched was deleted during the cascade delete which happens when a phantom is deleted in
		 * DE.  For more info see the javadoc for {@link #getFirstAvailBiddableSchedInst() getFirstAvailBiddableSchedInst()}
		 * method.
		 * 
		 * @return
		 */
		public List getBiddableScheduleInstanceIDs()  {
<span class="nc" id="L734">			List bidSchedInsts = getBiddableScheduleInstances();</span>
<span class="nc" id="L735">			return RequestUtil.getListOfIDsFromVOBases(bidSchedInsts);</span>
		}

        /**
         * @return
         */
        public boolean getWereBiddableSchedInstancesDeleted() {
<span class="nc" id="L742">            Collection deletedChildObjects = getDeletedChildObjects(BiddableScheduleFieldInfo.BIDDABLESCHEDULEINSTANCE_CHILD_TYPE);</span>
<span class="nc bnc" id="L743" title="All 4 branches missed.">            return (deletedChildObjects == null || deletedChildObjects.size() == 0)?false:true;</span>
        }        
    }

    public BiddableSchedule(long detailLevel) {
<span class="nc" id="L748">        super();</span>
<span class="nc" id="L749">        m_detailLevel = detailLevel;</span>
<span class="nc" id="L750">    }</span>

	@Override
	protected FieldInfo getFieldInfo() {
<span class="nc" id="L754">		return m_fieldInfo;</span>
	}

	// getters
	public int getBonusPoints() {
<span class="nc" id="L759">		return getFieldValueInt(BiddableScheduleFieldInfo.BIDDABLESCHEDULE_N_BONUSPOINTS);</span>
	}

    public ID getShiftBidAuctionID()  {
<span class="nc" id="L763">        return getFieldValueID(BiddableScheduleFieldInfo.BIDDABLESCHEDULE_I_SHIFTBIDAUCTIONID);</span>
    }
    
    public String getBiddableScheduleCheckSum()  {
<span class="nc" id="L767">        return (String) getFieldValue(BiddableScheduleFieldInfo.BIDDABLESCHEDULE_S_BIDDABLESCHEDCHECKSUM);</span>
    }
    
    public int getNumOfAvailableInstances()  {
<span class="nc" id="L771">        return getFieldValueInt(BiddableScheduleFieldInfo.BIDDABLESCHEDULE_N_NUMOFAVAILINSTANCES);</span>
    }

    public ID getFirstAvailBiddableSchedInstanceID()  {
<span class="nc" id="L775">        return getFieldValueID(BiddableScheduleFieldInfo.BIDDABLESCHEDULE_I_FIRSTAVAILBIDSCHEDINSTID);</span>
    }

	public String getDescription() {
<span class="nc" id="L779">        return (String) getFieldValue(BiddableScheduleFieldInfo.BIDDABLESCHEDULE_S_DESCRIPTION);</span>
	}

	public long getDetailLevel()  {
<span class="nc" id="L783">        return m_detailLevel;        </span>
    }

    /**
     * @return
     */
    public ID getOrgID() {
<span class="nc" id="L790">        return getFieldValueID(BiddableScheduleFieldInfo.BIDDABLESCHEDULE_I_ORGANIZATIONID);</span>
    }    
    
    public boolean getIsFullPeriod()  {
<span class="nc bnc" id="L794" title="All 2 branches missed.">        return !getFieldValueBoolean(BiddableScheduleFieldInfo.BIDDABLESCHEDULE_B_ISFORSINGLESHIFTS);</span>
    }

    public BiddableScheduleOptMethods getOptMethods()  {
<span class="nc bnc" id="L798" title="All 2 branches missed.">        return (m_biddableSchedOptMethods = (m_biddableSchedOptMethods == null)?</span>
            new BiddableScheduleOptMethods():m_biddableSchedOptMethods);    
    }

    //Use only for testing
    public void setOptMethods(BiddableScheduleOptMethods m){
<span class="nc" id="L804">    	m_biddableSchedOptMethods=m;</span>
<span class="nc" id="L805">    }</span>

    public BiddableScheduleSetters getSetters()  {
<span class="nc bnc" id="L808" title="All 2 branches missed.">        return (m_biddableSchedSetters = (m_biddableSchedSetters == null)?</span>
            new BiddableScheduleSetters():m_biddableSchedSetters);    
    }    
    
    /**
     * Is the given sort criteria for a day column?
     * @param sortBy A sort by column.
     * @return True if the sortBy column is for a day column.
     */
    public static boolean isSortByCriteriaDay(int sortBy) {
<span class="nc bnc" id="L818" title="All 2 branches missed.">        return (sortBy &gt;= SORTBY_SUNDAY_STARTTIME);</span>
    }
    
    /**
     * Given week, day, and type offsets, compute the column number.
     * @param week The 0-based week offset. (Ex: 0=the first week in the SP)
     * @param dayOfWeek  The day of week.  (Ex: Calendar.SUNDAY would mean: The Sunday of the specified week in the SP)
     * @param type The type offset. (One of: SORTBY_STARTTIME, SORTBY_ENDTIME, SORTBY_LENGTH)
     * @return The appropriate day column index (see below).
     *  
     * The first week will use the following indexes:
     *     SORTBY_STARTTIME: 9  - 15 (Sun - Sat)
     *     SORTBY_ENDTIME:   16 - 22 (Sun - Sat)
     *     SORTBY_LENGTH:    23 - 29 (Sun - Sat)
     *     
     * The second week will use the following indexes:
     *     SORTBY_STARTTIME: 30 - 36 (Sun - Sat)
     *     SORTBY_ENDTIME:   37 - 43 (Sun - Sat)
     *     SORTBY_LENGTH:    44 - 50 (Sun - Sat)
     *     
     * And so on.
     */
    public static int getDayColumnIndex(int week, int dayOfWeek, int type)
    {
<span class="nc" id="L842">        int colIndex = SORTBY_SUNDAY_STARTTIME + (dayOfWeek-1) + (7 * type) + (7 * NUM_SORT_TYPES * week);</span>
<span class="nc" id="L843">        return colIndex;</span>
    }

    /**
     * Given a day column number, compute the day of week.
     * @param colIndex The day column number to extract the week from. 
     * @return The appropriate day of week (Ex: Calendar.SUNDAY, Calendar.MONDAY, etc.)
     */
    public static int getDayOfWeek(int colIndex)
    {
<span class="nc" id="L853">        int type = getType(colIndex);</span>
<span class="nc" id="L854">        int week = getWeek(colIndex);</span>
        
        //In order to figure out dayOfWeek, we solve for dayOfWeek in the colIndex 
        //equation from the getDayColumnIndex() method.
<span class="nc" id="L858">        int dayOfWeek = (-1) * ( SORTBY_SUNDAY_STARTTIME + (7 * type) + (7 * NUM_SORT_TYPES * week) - colIndex - 1 );</span>
        
<span class="nc" id="L860">        return dayOfWeek;</span>
    }
    
    /**
     * Given a day column number, compute the week offset.
     * @param colIndex The column number to extract the week from. 
     * @return The appropriate week (Ex: 0=the first week, 1=the second week, etc.)
     */
    public static int getWeek(int colIndex)
    {
<span class="nc" id="L870">        return (colIndex - SORTBY_SUNDAY_STARTTIME) / (7 * NUM_SORT_TYPES);</span>
    }
    
    /**
     * Given a day column number, compute the sort type.
     * @param colIndex The column number to extract the type from. 
     * @return The appropriate sort type (One of: SORTBY_STARTTIME, SORTBY_ENDTIME, SORTBY_LENGTH)
     */
    public static int getType(int colIndex)
    {
<span class="nc" id="L880">        return ((colIndex - SORTBY_SUNDAY_STARTTIME) / 7) % NUM_SORT_TYPES;</span>
    }
    
    
    public void setBonusPoints(int bonusPoints)  {
<span class="nc" id="L885">        setFieldValue(BiddableScheduleFieldInfo.BIDDABLESCHEDULE_N_BONUSPOINTS, bonusPoints);        </span>
<span class="nc" id="L886">    }</span>

	public void setDescription(String description) {
<span class="nc" id="L889">        setFieldValue(BiddableScheduleFieldInfo.BIDDABLESCHEDULE_S_DESCRIPTION, description);        </span>
<span class="nc" id="L890">	}</span>

	public Integer gettUnsubmittedSortPreferenceForEmployee() {
<span class="nc" id="L893">		return unsubmittedPreferenceForEmployee;</span>
	}

	public void setUnsubmittedSortPreferenceForEmployee(Integer pref) {
<span class="nc" id="L897">		this.unsubmittedPreferenceForEmployee = pref;</span>
<span class="nc" id="L898">	}</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>