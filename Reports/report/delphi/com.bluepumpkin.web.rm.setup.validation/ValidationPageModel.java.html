<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>ValidationPageModel.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">QA Code Coverage</a> &gt; <a href="index.source.html" class="el_package">com.bluepumpkin.web.rm.setup.validation</a> &gt; <span class="el_source">ValidationPageModel.java</span></div><h1>ValidationPageModel.java</h1><pre class="source lang-java linenums">package com.bluepumpkin.web.rm.setup.validation;

import java.rmi.RemoteException;
import java.util.ArrayList;
import java.util.Collection;
import java.util.Collections;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.ResourceBundle;

import com.bluepumpkin.common.datatypes.ID;
import com.bluepumpkin.common.logging.Category;
import com.bluepumpkin.ejb.bbm.activity.model.Activity;
import com.bluepumpkin.ejb.bbm.activity.model.ActivityProperties;
import com.bluepumpkin.ejb.bbm.base.BbmException;
import com.bluepumpkin.ejb.bbm.workresource.OrganizationScopeManagerProxy;
import com.bluepumpkin.ejb.rm.requests.common.model.Request;
import com.bluepumpkin.ejb.rm.requests.flextime.validation.FlexRequestMustOccurASAPValidationRule;
import com.bluepumpkin.ejb.rm.requests.flextime.validation.MaxNumberMakeupPerRequestValidationRule;
import com.bluepumpkin.ejb.rm.requests.flextime.validation.MaxNumberRequestsPerPeriodValidationRule;
import com.bluepumpkin.ejb.rm.requests.flextime.validation.MaxShiftDurationOfFlexRequestPerDayRule;
import com.bluepumpkin.ejb.rm.requests.flextime.validation.MaximumFlexRequestDurationValidationRule;
import com.bluepumpkin.ejb.rm.requests.flextime.validation.MinimumFlexRequestDurationValidationRule;
import com.bluepumpkin.ejb.rm.requests.swap.request.validation.MaxHoursAndMaxAlternateHoursPerDayValidationRule;
import com.bluepumpkin.ejb.rm.requests.swap.request.validation.MaxNumberApprovedPartialSwapsPerShiftValidationRule;
import com.bluepumpkin.ejb.rm.requests.swap.request.validation.MaxNumberApprovedSwapPerShiftValidationRule;
import com.bluepumpkin.ejb.rm.requests.swap.request.validation.MaxNumberOneWaySwapPerPersonPeriodValidationRule;
import com.bluepumpkin.ejb.rm.requests.swap.request.validation.PSSMaxAllowableOverlap;
import com.bluepumpkin.ejb.rm.requests.swap.request.validation.PSSMaxSwapDurationPerDay;
import com.bluepumpkin.ejb.rm.requests.swap.request.validation.PSSMinRemainingShiftDuration;
import com.bluepumpkin.ejb.rm.requests.swap.request.validation.PSSMinShiftSwapDuration;
import com.bluepumpkin.ejb.rm.requests.swap.request.validation.PSSShiftGapConditions;
import com.bluepumpkin.ejb.rm.requests.timeoff.validation.MaximumRequestDurationValidationRule;
import com.bluepumpkin.ejb.rm.requests.timeoff.validation.MinimumRequestDurationValidationRule;
import com.bluepumpkin.ejb.rm.setup.validation.model.ValidationSetting;
import com.bluepumpkin.ejb.rm.util.LicenseUtil;
import com.bluepumpkin.web.bbm.l10n.BbmWebBundleKey;
import com.bluepumpkin.web.bbm.organization.OrgWorkpaneFormPageModel;
import com.bluepumpkin.web.bbm.organization.OrganizationModelHandler;
import com.bluepumpkin.web.rm.Log;
import com.bluepumpkin.web.rm.l10n.RmWebBundleKey;
import com.bluepumpkin.web.rm.setup.settings.SettingsModelHandler;
import com.witness.ejb.core.security.PrivilegeKeys;
import com.witness.web.uif.base.Message;
import com.witness.web.uif.keys.JavaScriptFileID;
import com.witness.web.uif.keys.PageAction;
import com.witness.web.uif.l10n.CommonWebBundleKey;
import com.witness.web.uif.l10n.UIFWebBundleKey;
import com.witness.web.uif.pagecomponent.toolbar.ToolbarTextButton;
import com.witness.web.uif.pagecomponent.toolbar.ToolbarUtil;
import com.witness.web.uif.pagemodel.PageModel;
import com.witness.web.uif.pagemodel.WorkpanePageModel;
import com.witness.web.uif.system.RequestContext;
import com.witness.web.uif.validator.IsNonNegativeIntegerFieldValidator;
import com.witness.web.uif.validator.IsPosIntegerFieldValidator;
import com.witness.web.uif.validator.MatchesRegularExpressionFieldValidator;

/**
 * Title          ValidationPageModel
 * Description    Displays the Validation page
 * Copyright      Copyright (c) 2002
 * Company        Blue Pumpkin Software, Inc
 * @author        Shubhangi Chavan
 * @version       1.0
 */
public class ValidationPageModel extends OrgWorkpaneFormPageModel {
<span class="nc" id="L68">	private static final Category log = Log.initCategory(ValidationPageModel.class.getName());</span>

	private final ResourceBundle m_rmBundle;
	private Map m_validationRules;
	private final ValidationRulePC validationRulePC;

    private ValidationSetting settings; //the settings for the selected org (includes inheritted settings)
    private Map ancestors; //maps each inheritted key to the ancestor orgName from which it was inheritted
<span class="nc" id="L76">    private boolean hasChildren = false; //tells us whether the current org has any children.</span>
    private Collection&lt;ActivityProperties&gt; selectedActivityProperties;

    // All requestable activities for validation by time-off type
<span class="nc" id="L80">	List&lt;Activity&gt; timeoffRequestableActivities = Collections.emptyList();</span>
    // The selected activities for validation by time-off type
<span class="nc" id="L82">    private List&lt;ID&gt; selectedTimeoffTypeActivityIDs = Collections.emptyList();</span>

	private List&lt;ID&gt; allTimeoffTypeActivityIDs;

	//The user selected &quot;All&quot; for the validate by time off type
	private boolean allRequestableActivitesSelected;


	/**
	 * Constructor
	 */
	public ValidationPageModel(RequestContext context) {
<span class="nc" id="L94">		super(context);</span>
<span class="nc" id="L95">		extractParameters(context.getRequest(), WorkpanePageModel.SELECTED_ID_FN);</span>
<span class="nc" id="L96">		m_rmBundle = m_localizer.getBundle(RmWebBundleKey.BUNDLE_NAME);</span>

		// Component specific required JavaScript Files
<span class="nc" id="L99">		setJSMediator(JavaScriptFileID.MEDIATOR_WORKPANE_GENERIC);</span>
<span class="nc" id="L100">		validationRulePC = new ValidationRulePC(m_context,this);</span>
<span class="nc" id="L101">		addChildComponent(validationRulePC);</span>

<span class="nc" id="L103">	}</span>

	/**
	 * Return an instance of ValidationPageModel ready to be rendered in JSP
	 * @param   context RequestContext
	 * @return  ValidationPageModel  instance of ValidationPageModel
	 */
	public static PageModel getInstance(RequestContext context) throws Exception {
<span class="nc" id="L111">		return getInstance(context, ValidationPageModel.class);</span>
	}

	/**
	 * Create Form Model
	 */
	@Override
	protected void createFormModel() {
<span class="nc bnc" id="L119" title="All 4 branches missed.">		if (m_validationRules != null || !hasSelectedID() ||</span>
<span class="nc bnc" id="L120" title="All 2 branches missed.">				!OrganizationModelHandler.existsOrganization(m_context, getSelectedIDObject())) {</span>
<span class="nc" id="L121">			return;</span>
		}

<span class="nc bnc" id="L124" title="All 2 branches missed.">		if (!isAuthorizedToConfigure()) {</span>
			String key;
<span class="nc" id="L126">			key = BbmWebBundleKey.NOT_AUTHORIZED_TO_CONFIG_SELECTED_ORG;</span>
<span class="nc" id="L127">			String msg = i18n(m_bbmBundle, key);</span>
<span class="nc" id="L128">			addPageMessage(Message.RESPONSE_TYPE, msg);</span>
<span class="nc" id="L129">			return;</span>
		}

		try {


<span class="nc" id="L135">			ID selectedOrgID = getSelectedIDObject();</span>
<span class="nc bnc" id="L136" title="All 2 branches missed.">			if (selectedOrgID != null) {</span>
<span class="nc" id="L137">				setTimeOffRequestableActivities(selectedOrgID);</span>
<span class="nc" id="L138">				settings = ValidationModelHandler.getSettings(Request.REQUESTTYPE_ALL, selectedOrgID, false, getApplicableActivityIDs());</span>
<span class="nc" id="L139">				ancestors = settings.getAncestors();</span>
<span class="nc" id="L140">				hasChildren = SettingsModelHandler.getHasChildren(m_context, selectedOrgID);</span>
<span class="nc" id="L141">				setPageDirty(false);</span>
			}
			else {
<span class="nc" id="L144">				settings = new ValidationSetting(new HashMap());</span>
			}

<span class="nc bnc" id="L147" title="All 2 branches missed.">			if(this.selectedTimeoffTypeActivityIDs != null) {</span>
<span class="nc" id="L148">				selectedActivityProperties = ValidationModelHandler.findPropertiesForActivities(m_context, this.selectedTimeoffTypeActivityIDs);</span>
			}

<span class="nc" id="L151">			m_validationRules = settings.getValues();</span>
<span class="nc" id="L152">			validationRulePC.setRules(m_validationRules);</span>
<span class="nc" id="L153">			validationRulePC.setAncestors(ancestors);</span>
<span class="nc" id="L154">			validationRulePC.setOrgID(selectedOrgID);</span>
<span class="nc" id="L155">		} catch (Exception ex) {</span>
<span class="nc" id="L156">			handleUnableToLoadDataError(log, ex);</span>
<span class="nc" id="L157">		}</span>
<span class="nc" id="L158">	}</span>

	private void setTimeOffRequestableActivities(ID orgId) throws RemoteException, BbmException {
<span class="nc" id="L161">		timeoffRequestableActivities = ValidationModelHandler.getTimeOffRequestableActivities(m_context, orgId);</span>
<span class="nc" id="L162">	}</span>

	/**
	 * Initialize Form Display, sets the form elements
	 */
	@Override
	protected void initForm() {
<span class="nc" id="L169">        setForm(validationRulePC);</span>
		// Invoke the set methods on ValidationRulePC to pass the validation rules
<span class="nc bnc" id="L171" title="All 2 branches missed.">		if (validationRulePC != null) {</span>
<span class="nc" id="L172">			validationRulePC.setRules(m_validationRules);</span>
		}
<span class="nc" id="L174">	}</span>

	/**
	 * Initialize the Toolbar
	 * Adds the Delete Requests and Revert button
	 */
	@Override
	protected void initToolbar() {
<span class="nc" id="L182">		boolean isBtnEnabled = isAuthorizedToConfigure();</span>

        //Add &quot;Save&quot; button
<span class="nc" id="L185">        ToolbarUtil.addValidateSaveBtn(m_toolbar, isBtnEnabled); //CONFIRM_SUBMIT_TYPE</span>

        //Add &quot;Save and apply to sub-orgs&quot; button. When user clicks it, it will pop-up a JavaScript confirmation message.
<span class="nc" id="L188">        addJSVariable(&quot;CONFIRM_SAVE_AND_APPLY_MSG&quot;, m_rmBundle, RmWebBundleKey.ORG_RM_SETTINGS_CONFIRM_SAVE_AND_APPLY);</span>
<span class="nc" id="L189">        String lbl = i18n(m_rmBundle, CommonWebBundleKey.BUTTON_SAVE_APPLY_TO_SUB_ORGS);</span>
<span class="nc bnc" id="L190" title="All 4 branches missed.">        ToolbarTextButton saveAndApply = m_toolbar.addValidateSubmitTextButton(PageAction.SAVE_AS, lbl, isBtnEnabled&amp;&amp;hasChildOrgs());</span>
<span class="nc" id="L191">        String conditionJS=&quot;confirm( CONFIRM_SAVE_AND_APPLY_MSG )&quot;;</span>
<span class="nc" id="L192">        saveAndApply.setConditionJS(conditionJS);</span>

        //Add &quot;Revert&quot; button
<span class="nc" id="L195">        ToolbarUtil.addResetBtn(m_toolbar, isBtnEnabled);</span>
<span class="nc" id="L196">	}</span>

	/**
	 * Return the form title
	 * @return form title
	 */
	@Override
	public String getFormTitle() {
<span class="nc" id="L204">		return &quot;&quot;;</span>
	}

	/**
	 * Gets entity name. Used for title.
	 * @return String Identifies the title entity
	 */
	@Override
	protected String getTitleEntityType() {
<span class="nc" id="L213">		return getEntityName();</span>
	}

	/**
	 * Returns an entity name. Used for title.
	 * @return String Identifies the entity name
	 */
	@Override
	protected String getEntityName() {
<span class="nc" id="L222">		return i18n(m_rmBundle, RmWebBundleKey.ORG_RM_VALIDATION_LABEL);</span>
	}

	/**
	 * Return URL for HTML Form Action
	 */
	@Override
	public String getFormAction() {
<span class="nc" id="L230">		return &quot;request_processing_validation&quot;;</span>
	}

	/**
	 * Return a collection of Page Form Components associated with Page Model
	 */
	@Override
	public Collection getForms() {
<span class="nc bnc" id="L238" title="All 2 branches missed.">		return (validationRulePC != null)? validationRulePC.getContainers() : new ArrayList();</span>
	}

	/**
	 * Get the rules
	 */
	public Map getValidationRules() {
<span class="nc" id="L245">		return m_validationRules;</span>
	}

    /**
     * Get the ValidationSetting object which contains the BundleKey-&gt;ValidationRule map, as
     * well as ancestor organization information.
     * @return the ValidationSetting object.
     */
    public ValidationSetting getConfiguration()
    {
<span class="nc" id="L255">        return settings;</span>
    }

	@Override
	protected boolean isAuthorizedToView() {
<span class="nc" id="L260">		return isAuthorizedToConfigure();</span>
	}

	@Override
	protected boolean isAuthorizedToConfigure() {
<span class="nc bnc" id="L265" title="All 2 branches missed.">		return isAuthorizedToConfigureTOM() ||</span>
<span class="nc bnc" id="L266" title="All 2 branches missed.">			   isAuthorizedToConfigureSS() ||</span>
<span class="nc bnc" id="L267" title="All 2 branches missed.">			   isAuthorizedToConfigureSB() ||</span>
<span class="nc bnc" id="L268" title="All 2 branches missed.">			   isAuthorizedToConfigureCS() ;</span>
	}

	protected boolean isAuthorizedToConfigureTOM() {
<span class="nc bnc" id="L272" title="All 2 branches missed.">		return isValidSelectedOrg() &amp;&amp;</span>
<span class="nc bnc" id="L273" title="All 2 branches missed.">			m_context.getUser().isAuthorized(</span>
<span class="nc" id="L274">					   PrivilegeKeys.TOM_SETVALIDATIONRULES, OrganizationScopeManagerProxy.getScopeID(getSelectedIDObject()));</span>
	}

	protected boolean isAuthorizedToConfigureFLexValidationRule() {
<span class="nc bnc" id="L278" title="All 2 branches missed.">		return isValidSelectedOrg() &amp;&amp;</span>
<span class="nc bnc" id="L279" title="All 2 branches missed.">			m_context.getUser().isAuthorized(</span>
<span class="nc" id="L280">					   PrivilegeKeys.FT_SETVALIDATIONRULES , OrganizationScopeManagerProxy.getScopeID(getSelectedIDObject()));</span>
	}

	protected boolean isAuthorizedToConfigureSSApprovedWithdrawal() {
<span class="nc bnc" id="L284" title="All 4 branches missed.">		return isValidSelectedOrg() &amp;&amp;	LicenseUtil.isAdvancedRMLicense();</span>
	}

	protected boolean isAuthorizedToConfigureSS() {
<span class="nc bnc" id="L288" title="All 2 branches missed.">		return isValidSelectedOrg() &amp;&amp;</span>
<span class="nc bnc" id="L289" title="All 2 branches missed.">			m_context.getUser().isAuthorized(</span>
<span class="nc" id="L290">					   PrivilegeKeys.SS_SETVALIDATIONRULES, OrganizationScopeManagerProxy.getScopeID(getSelectedIDObject()));</span>
	}

	protected boolean isAuthorizedToConfigureSB() {
<span class="nc bnc" id="L294" title="All 2 branches missed.">		return isValidSelectedOrg() &amp;&amp;</span>
<span class="nc bnc" id="L295" title="All 2 branches missed.">			m_context.getUser().isAuthorized(</span>
<span class="nc" id="L296">					   PrivilegeKeys.SB_SETVALIDATIONRULES, OrganizationScopeManagerProxy.getScopeID(getSelectedIDObject()));</span>
	}

	protected boolean isAuthorizedToConfigureCS() {
<span class="nc bnc" id="L300" title="All 2 branches missed.">		return isValidSelectedOrg() &amp;&amp;</span>
<span class="nc bnc" id="L301" title="All 2 branches missed.">			m_context.getUser().isAuthorized(</span>
<span class="nc" id="L302">					   PrivilegeKeys.CS_SETVALIDATIONRULES, OrganizationScopeManagerProxy.getScopeID(getSelectedIDObject()));</span>
	}

	@Override
	protected void initFieldValidators() {
		//NEED TO PARSE selected_ID (the orgID) HERE SO THE IT CAN GET THE ORG SCOPE FOR VALIDATION PRIVILEGE
<span class="nc" id="L308">		extractParameters(m_context.getRequest(), WorkpanePageModel.SELECTED_ID_FN);</span>

<span class="nc" id="L310">		addValidator(new IsPosIntegerFieldValidator(this,</span>
				PSSMinShiftSwapDuration.MIN_DURATION_VALUE,
				RmWebBundleKey.VALIDATION_PSS_MIN_SHIFT_SWAP_DURATION_JS_MSG,
				RmWebBundleKey.BUNDLE_NAME));
<span class="nc" id="L314">		addValidator(new IsPosIntegerFieldValidator(this,</span>
				PSSMinRemainingShiftDuration.MIN_SHIFT_DURATION_VALUE,
				RmWebBundleKey.VALIDATION_PSS_MIN_REMAINING_SHIFT_DURATION_JS_MSG,
				RmWebBundleKey.BUNDLE_NAME));
<span class="nc" id="L318">		addValidator(new IsPosIntegerFieldValidator(this,</span>
				PSSMaxSwapDurationPerDay.MAX_SHIFT_DURATION_VALUE,
				RmWebBundleKey.VALIDATION_PSS_MAX_SWAP_DURATION_PER_DAY_JS_MSG,
				RmWebBundleKey.BUNDLE_NAME));
<span class="nc" id="L322">		addValidator(new IsNonNegativeIntegerFieldValidator(this,</span>
				PSSShiftGapConditions.RANGE_MIN_DURATION_VALUE,
				RmWebBundleKey.VALIDATION_PSS_SHIFT_GAP_CONDITIONS_JS_MSG,
				RmWebBundleKey.BUNDLE_NAME));
<span class="nc" id="L326">		addValidator(new IsPosIntegerFieldValidator(this,</span>
				PSSShiftGapConditions.RANGE_MAX_DURATION_VALUE,
				RmWebBundleKey.VALIDATION_PSS_SHIFT_GAP_CONDITIONS_JS_MSG,
				RmWebBundleKey.BUNDLE_NAME));
<span class="nc" id="L330">		addValidator(new IsPosIntegerFieldValidator(this,</span>
				PSSShiftGapConditions.MIN_GAP_DURATION_VALUE,
				RmWebBundleKey.VALIDATION_PSS_SHIFT_GAP_CONDITIONS_JS_MSG,
				RmWebBundleKey.BUNDLE_NAME));
<span class="nc" id="L334">		addValidator(new IsPosIntegerFieldValidator(this,</span>
				PSSMaxAllowableOverlap.MAX_OVERLAP_VALUE,
				RmWebBundleKey.VALIDATION_PSS_MAX_ALLOWABLE_OVERLAP_JS_MSG,
				RmWebBundleKey.BUNDLE_NAME));
<span class="nc" id="L338">		addPositiveMultiValueFieldValidator(MinimumRequestDurationValidationRule.MIN_REQUEST_DURATION_VALUE,</span>
				RmWebBundleKey.VALIDATION_REQ_MIN_DURATION_JS_MSG, RmWebBundleKey.BUNDLE_NAME);

<span class="nc" id="L341">		addPositiveMultiValueFieldValidator(MaximumRequestDurationValidationRule.MAX_REQUEST_DURATION_VALUE,</span>
				RmWebBundleKey.VALIDATION_REQ_MAX_DURATION_JS_MSG, RmWebBundleKey.BUNDLE_NAME);

<span class="nc bnc" id="L344" title="All 2 branches missed.">		if (LicenseUtil.isAdvancedRMLicense()) {</span>
<span class="nc" id="L345">			addValidator(new IsPosIntegerFieldValidator(this,</span>
					MaxNumberApprovedPartialSwapsPerShiftValidationRule.MAX_APPROVED_PARTIAL_SWAPS_PER_SHIFT,
					RmWebBundleKey.VALIDATION_PSS_MAX_APPROVED_PARTIAL_SWAPS_PER_SHIFT_JS_MSG,
					RmWebBundleKey.BUNDLE_NAME));
<span class="nc" id="L349">			addValidator(new IsPosIntegerFieldValidator(this,</span>
					MaxHoursAndMaxAlternateHoursPerDayValidationRule.MAX_HOURS_PER_DAY,
					RmWebBundleKey.VALIDATION_SS_MAX_HOURS_AND_ALTERNATE_HOURS_PER_DAY_JS_MSG,
					RmWebBundleKey.BUNDLE_NAME));
<span class="nc" id="L353">			addValidator(new IsPosIntegerFieldValidator(this,</span>
					MaxHoursAndMaxAlternateHoursPerDayValidationRule.MAX_ALTERNATIVE_HOURS_PER_DAY,
					RmWebBundleKey.VALIDATION_SS_MAX_HOURS_AND_ALTERNATE_HOURS_PER_DAY_JS_MSG,
					RmWebBundleKey.BUNDLE_NAME));
<span class="nc" id="L357">			addValidator(new IsPosIntegerFieldValidator(this,</span>
					MaxNumberOneWaySwapPerPersonPeriodValidationRule.MAX_ONE_WAY_SWAP_PER_PERSON_PERIOD,
					RmWebBundleKey.VALIDATION_SS_MAX_ONE_WAY_SWAP_PER_PERSON_PERIOD_JS_MSG,
					RmWebBundleKey.BUNDLE_NAME));
<span class="nc" id="L361">			addValidator(new IsPosIntegerFieldValidator(this,</span>
					MaxNumberApprovedSwapPerShiftValidationRule.MAX_APPROVED_SWAP_PER_SHIFT,
					RmWebBundleKey.VALIDATION_SS_MAX_APPROVED_SWAP_PER_SHIFT_JS_MSG,
					RmWebBundleKey.BUNDLE_NAME));
		}

<span class="nc" id="L367">		addValidator(new IsPosIntegerFieldValidator(this,</span>
				&quot;CS_MAX_SHIFT_DURATION_VALUE&quot;,
				RmWebBundleKey.VALIDATION_CS_MAX_SHIFT_DURATION_PER_DAY_JS_MSG,
				RmWebBundleKey.BUNDLE_NAME));
<span class="nc" id="L371">		addValidator(new IsPosIntegerFieldValidator(this,</span>
				&quot;CS_MIN_SHIFT_DURATION_VALUE&quot;,
				RmWebBundleKey.VALIDATION_CS_MIN_SHIFT_DURATION_PER_DAY_JS_MSG,
				RmWebBundleKey.BUNDLE_NAME));


<span class="nc" id="L377">		addValidator(new IsPosIntegerFieldValidator(this,</span>
				&quot;CS_MIN_SHORTAGE_DURATION_VALUE&quot;,
				RmWebBundleKey.VALIDATION_CS_FULFILLS_NET_STAFFING_SHORTAGE_JS_MSG,
				RmWebBundleKey.BUNDLE_NAME));

<span class="nc" id="L382">		addPositiveMultiValueFieldValidator(&quot;VTO_MIN_SURPLUS_DURATION_VALUE&quot;,</span>
				RmWebBundleKey.VALIDATION_VTO_REDUCE_NET_STAFFING_SURPLUS_JS_MSG, RmWebBundleKey.BUNDLE_NAME);

		//FLEX RULES
<span class="nc bnc" id="L386" title="All 2 branches missed.">		if(isAuthorizedToConfigureFLexValidationRule()) {</span>
<span class="nc" id="L387">			addValidator(new IsPosIntegerFieldValidator(this,</span>
					MaximumFlexRequestDurationValidationRule.MAX_FLEX_REQUEST_DURATION_VALUE,
					RmWebBundleKey.VALIDATION_FT_MAX_DURATION_JS_MSG,
					RmWebBundleKey.BUNDLE_NAME));
<span class="nc" id="L391">			addValidator(new IsPosIntegerFieldValidator(this,</span>
					MinimumFlexRequestDurationValidationRule.MIN_FLEX_REQUEST_DURATION_VALUE,
					RmWebBundleKey.VALIDATION_FT_MIN_DURATION_JS_MSG,
					RmWebBundleKey.BUNDLE_NAME));
<span class="nc" id="L395">			addValidator(new IsPosIntegerFieldValidator(this,</span>
					MaxNumberMakeupPerRequestValidationRule.MAX_FLEX_MAKEUP_PER_REQUEST,
					RmWebBundleKey.VALIDATION_FT_MAX_NUMBER_MAKEUP_PER_REQUEST_JS_MSG,
					RmWebBundleKey.BUNDLE_NAME));
<span class="nc" id="L399">			addValidator(new IsPosIntegerFieldValidator(this,</span>
					MaxNumberRequestsPerPeriodValidationRule.MAX_FLEX_MAKEUP_PER_PERIOD,
					RmWebBundleKey.VALIDATION_FT_MAX_NUMBER_MAKEUP_PER_PERIOD_JS_MSG,
					RmWebBundleKey.BUNDLE_NAME));
<span class="nc" id="L403">			addValidator(new IsPosIntegerFieldValidator(this,</span>
					FlexRequestMustOccurASAPValidationRule.MUST_OCCUR_ASAP_MAX_DAYS,
					RmWebBundleKey.VALIDATION_FT_MUST_OCCUR_ASAP_JS_MSG,
					RmWebBundleKey.BUNDLE_NAME));
<span class="nc" id="L407">			addValidator(new IsPosIntegerFieldValidator(this,</span>
					MaxShiftDurationOfFlexRequestPerDayRule.FT_MAX_SHIFT_DURATION_VALUE,
					RmWebBundleKey.VALIDATION_FT_MAX_SHIFT_DURATION_JS_MSG,
					RmWebBundleKey.BUNDLE_NAME));
		}
<span class="nc" id="L412">	}</span>

	private void addPositiveMultiValueFieldValidator(String fieldName, String fieldDescriptionKey, String bundleName) {

<span class="nc" id="L416">		addValidator(new MatchesRegularExpressionFieldValidator(this,</span>
				fieldName,
				fieldDescriptionKey,
				bundleName,
				//a positive number or a single '*' or a blank
				&quot;^[1-9]\\d*$|^\\*$|^\\s*$&quot;,
				UIFWebBundleKey.FV_NOT_POSITIVE_MF,
				UIFWebBundleKey.BUNDLE_NAME,
				true));

<span class="nc" id="L426">	}</span>

	/**
	 * Return the JavaScript init code required by Page model.
	 */
	@Override
	public String getCustomJavaScript()
	{
<span class="nc" id="L434">		StringBuffer jsInitCode = new StringBuffer(512);</span>

		// [now create the new mediator]
<span class="nc" id="L437">		jsInitCode.append(&quot;function customValidateForm(){\n&quot;);</span>
		//get custom validations for the fields
<span class="nc" id="L439">		jsInitCode.append(&quot;\tif(document.oFormMain.VALIDATION_PSS_MIN_SHIFT_SWAP_DURATION.checked &quot; +</span>
				&quot;&amp;&amp; (document.oFormMain.MIN_DURATION_VALUE.value == '')){\n&quot;);
<span class="nc" id="L441">		jsInitCode.append(&quot;\t\talert(\&quot;&quot; + i18n(m_rmBundle, RmWebBundleKey.VALIDATION_PSS_ENTER_VALUE_JS_MSG)</span>
<span class="nc" id="L442">				+ i18n(m_rmBundle, RmWebBundleKey.VALIDATION_PSS_MIN_SHIFT_SWAP_DURATION_JS_MSG) +&quot;\&quot;);\n&quot;);</span>
<span class="nc" id="L443">		jsInitCode.append(&quot;\treturn false;\n&quot;);</span>
<span class="nc" id="L444">		jsInitCode.append(&quot;\t}\n&quot;);</span>

<span class="nc" id="L446">        jsInitCode.append(&quot;\tif(document.oFormMain.VALIDATION_PSS_MIN_REMAINING_SHIFT_DURATION.checked &quot; +</span>
		&quot;&amp;&amp; (document.oFormMain.MIN_SHIFT_DURATION_VALUE.value == '')){\n&quot;);
<span class="nc" id="L448">		jsInitCode.append(&quot;\t\talert(\&quot;&quot; + i18n(m_rmBundle, RmWebBundleKey.VALIDATION_PSS_ENTER_VALUE_JS_MSG)</span>
<span class="nc" id="L449">				+ i18n(m_rmBundle, RmWebBundleKey.VALIDATION_PSS_MIN_REMAINING_SHIFT_DURATION_JS_MSG) +&quot;\&quot;);\n&quot;);</span>
<span class="nc" id="L450">		jsInitCode.append(&quot;\treturn false;\n&quot;);</span>
<span class="nc" id="L451">		jsInitCode.append(&quot;\t}\n&quot;);</span>

<span class="nc" id="L453">		jsInitCode.append(&quot;\tif(document.oFormMain.VALIDATION_PSS_MAX_SWAP_DURATION_PER_DAY.checked &quot; +</span>
		&quot;&amp;&amp; (document.oFormMain.MAX_SHIFT_DURATION_VALUE.value == '')){\n&quot;);
<span class="nc" id="L455">		jsInitCode.append(&quot;\t\talert(\&quot;&quot; + i18n(m_rmBundle, RmWebBundleKey.VALIDATION_PSS_ENTER_VALUE_JS_MSG)</span>
<span class="nc" id="L456">				+ i18n(m_rmBundle, RmWebBundleKey.VALIDATION_PSS_MAX_SWAP_DURATION_PER_DAY_JS_MSG) +&quot;\&quot;);\n&quot;);</span>
<span class="nc" id="L457">		jsInitCode.append(&quot;\treturn false;\n&quot;);</span>
<span class="nc" id="L458">		jsInitCode.append(&quot;\t}\n&quot;);</span>

<span class="nc" id="L460">		jsInitCode.append(&quot;\tif(document.oFormMain.VALIDATION_PSS_NON_SWAPPABLE_ACTIVITIES.checked &quot; +</span>
		&quot;&amp;&amp; (document.oFormMain.ACTIVITY.value == '-1')){\n&quot;);
<span class="nc" id="L462">		jsInitCode.append(&quot;\t\talert(\&quot;&quot; + i18n(m_rmBundle, RmWebBundleKey.VALIDATION_PSS_ENTER_VALUE_JS_MSG)</span>
<span class="nc" id="L463">				+ i18n(m_rmBundle, RmWebBundleKey.VALIDATION_PSS_NON_SWAPPABLE_ACTIVITIES_JS_MSG) +&quot;\&quot;);\n&quot;);</span>
<span class="nc" id="L464">		jsInitCode.append(&quot;\treturn false;\n&quot;);</span>
<span class="nc" id="L465">		jsInitCode.append(&quot;\t}\n&quot;);</span>

<span class="nc bnc" id="L467" title="All 2 branches missed.">		if (LicenseUtil.isAdvancedRMLicense()) {</span>
<span class="nc" id="L468">			jsInitCode.append(&quot;\tif(document.oFormMain.VALIDATION_PSS_MAX_APPROVED_PARTIAL_SWAPS_PER_SHIFT.checked &quot; +</span>
			&quot;&amp;&amp; (document.oFormMain.MAX_APPROVED_PARTIAL_SWAPS_PER_SHIFT.value == '')){\n&quot;);
<span class="nc" id="L470">			jsInitCode.append(&quot;\t\talert(\&quot;&quot; + i18n(m_rmBundle, RmWebBundleKey.VALIDATION_PSS_ENTER_VALUE_JS_MSG)</span>
<span class="nc" id="L471">					+ i18n(m_rmBundle, RmWebBundleKey.VALIDATION_PSS_MAX_APPROVED_PARTIAL_SWAPS_PER_SHIFT_JS_MSG) +&quot;\&quot;);\n&quot;);</span>
<span class="nc" id="L472">			jsInitCode.append(&quot;\treturn false;\n&quot;);</span>
<span class="nc" id="L473">			jsInitCode.append(&quot;\t}\n&quot;);</span>

<span class="nc" id="L475">			jsInitCode.append(&quot;\tif(document.oFormMain.VALIDATION_SS_MAX_HOURS_ALTERNATE_MAX_HOURS_PER_DAY.checked &quot; +</span>
					&quot;&amp;&amp; (document.oFormMain.MAX_HOURS_PER_DAY.value == ''|| document.oFormMain.MAX_ALTERNATIVE_HOURS_PER_DAY.value == '')){\n&quot;);
<span class="nc" id="L477">					jsInitCode.append(&quot;\t\talert(\&quot;&quot; + i18n(m_rmBundle, RmWebBundleKey.VALIDATION_PSS_ENTER_VALUE_JS_MSG)</span>
<span class="nc" id="L478">							+ i18n(m_rmBundle, RmWebBundleKey.VALIDATION_SS_MAX_HOURS_AND_ALTERNATE_HOURS_PER_DAY_JS_MSG) +&quot;\&quot;);\n&quot;);</span>
<span class="nc" id="L479">					jsInitCode.append(&quot;\treturn false;\n&quot;);</span>
<span class="nc" id="L480">					jsInitCode.append(&quot;\t}\n&quot;);</span>
		}

<span class="nc" id="L483">		jsInitCode.append(&quot;\tif(document.oFormMain.VALIDATION_REQ_MIN_DURATION.checked &quot; +</span>
		&quot;&amp;&amp; (document.oFormMain.MIN_REQUEST_DURATION_VALUE.value == '')){\n&quot;);
<span class="nc" id="L485">		jsInitCode.append(&quot;\t\talert(\&quot;&quot; + i18n(m_rmBundle, RmWebBundleKey.VALIDATION_PSS_ENTER_VALUE_JS_MSG)</span>
<span class="nc" id="L486">				+ i18n(m_rmBundle, RmWebBundleKey.VALIDATION_REQ_MIN_DURATION_JS_MSG) +&quot;\&quot;);\n&quot;);</span>
<span class="nc" id="L487">		jsInitCode.append(&quot;\treturn false;\n&quot;);//</span>
<span class="nc" id="L488">		jsInitCode.append(&quot;\t}\n&quot;);</span>

<span class="nc" id="L490">		jsInitCode.append(&quot;\tif(document.oFormMain.VALIDATION_REQ_MAX_DURATION.checked &quot; +</span>
		&quot;&amp;&amp; (document.oFormMain.MAX_REQUEST_DURATION_VALUE.value == '')){\n&quot;);
<span class="nc" id="L492">		jsInitCode.append(&quot;\t\talert(\&quot;&quot; + i18n(m_rmBundle, RmWebBundleKey.VALIDATION_PSS_ENTER_VALUE_JS_MSG)</span>
<span class="nc" id="L493">				+ i18n(m_rmBundle, RmWebBundleKey.VALIDATION_REQ_MAX_DURATION_JS_MSG) +&quot;\&quot;);\n&quot;);</span>
<span class="nc" id="L494">		jsInitCode.append(&quot;\treturn false;\n&quot;);</span>
<span class="nc" id="L495">		jsInitCode.append(&quot;\t}\n&quot;);</span>

<span class="nc" id="L497">		jsInitCode.append(&quot;\tif(document.oFormMain.VALIDATION_PSS_SHIFT_GAP_CONDITIONS.checked &quot; +</span>
				&quot; &amp;&amp; (((document.oFormMain.RANGE_MIN_DURATION_VALUE.value == '')&quot; +
				&quot; &amp;&amp; (document.oFormMain.RANGE_MAX_DURATION_VALUE.value == '')&quot; +
				&quot; &amp;&amp; (document.oFormMain.MIN_GAP_DURATION_VALUE.value == ''))&quot; +
				&quot; ||&quot; +
				&quot;((document.oFormMain.RANGE_MIN_DURATION_VALUE.value == '')&quot; +
				&quot; &amp;&amp; (document.oFormMain.RANGE_MAX_DURATION_VALUE.value != ''))&quot; +
				&quot; ||&quot; +
				&quot;((document.oFormMain.RANGE_MIN_DURATION_VALUE.value != '')&quot; +
				&quot; &amp;&amp; (document.oFormMain.RANGE_MAX_DURATION_VALUE.value == ''))) ){\n&quot;);
<span class="nc" id="L507">		jsInitCode.append(&quot;\t\talert(\&quot;&quot; + i18n(m_rmBundle, RmWebBundleKey.VALIDATION_PSS_ENTER_VALUE_JS_MSG)</span>
<span class="nc" id="L508">				+ i18n(m_rmBundle, RmWebBundleKey.VALIDATION_PSS_SHIFT_GAP_CONDITIONS_JS_MSG) +&quot;\&quot;);\n&quot;);</span>
<span class="nc" id="L509">		jsInitCode.append(&quot;\treturn false;\n&quot;);</span>
<span class="nc" id="L510">		jsInitCode.append(&quot;\t}\n&quot;);</span>

<span class="nc" id="L512">		jsInitCode.append(&quot;\tif(document.oFormMain.VALIDATION_PSS_MAX_ALLOWABLE_OVERLAP.checked &quot; +</span>
		&quot;&amp;&amp; (document.oFormMain.MAX_OVERLAP_VALUE.value == '')){\n&quot;);
<span class="nc" id="L514">		jsInitCode.append(&quot;\t\talert(\&quot;&quot; + i18n(m_rmBundle, RmWebBundleKey.VALIDATION_PSS_ENTER_VALUE_JS_MSG)</span>
<span class="nc" id="L515">				+ i18n(m_rmBundle, RmWebBundleKey.VALIDATION_PSS_MAX_ALLOWABLE_OVERLAP_JS_MSG) +&quot;\&quot;);\n&quot;);</span>
<span class="nc" id="L516">		jsInitCode.append(&quot;\treturn false;\n&quot;);</span>
<span class="nc" id="L517">		jsInitCode.append(&quot;\t}\n&quot;);</span>


<span class="nc" id="L520">		jsInitCode.append(&quot;\tif(document.oFormMain.VALIDATION_CS_MAX_SHIFT_DURATION_PER_DAY.checked &quot; +</span>
		&quot;&amp;&amp; (document.oFormMain.CS_MAX_SHIFT_DURATION_VALUE.value == '')){\n&quot;);
<span class="nc" id="L522">		jsInitCode.append(&quot;\t\talert(\&quot;&quot; + i18n(m_rmBundle, RmWebBundleKey.VALIDATION_PSS_ENTER_VALUE_JS_MSG)</span>
<span class="nc" id="L523">				+ i18n(m_rmBundle, RmWebBundleKey.VALIDATION_CS_MAX_SHIFT_DURATION_PER_DAY_JS_MSG) +&quot;\&quot;);\n&quot;);</span>
<span class="nc" id="L524">		jsInitCode.append(&quot;\treturn false;\n&quot;);</span>
<span class="nc" id="L525">		jsInitCode.append(&quot;\t}\n&quot;);</span>

<span class="nc" id="L527">		jsInitCode.append(&quot;\tif(document.oFormMain.VALIDATION_CS_MIN_SHIFT_DURATION_PER_DAY.checked &quot; +</span>
		&quot;&amp;&amp; (document.oFormMain.CS_MIN_SHIFT_DURATION_VALUE.value == '')){\n&quot;);
<span class="nc" id="L529">		jsInitCode.append(&quot;\t\talert(\&quot;&quot; + i18n(m_rmBundle, RmWebBundleKey.VALIDATION_PSS_ENTER_VALUE_JS_MSG)</span>
<span class="nc" id="L530">				+ i18n(m_rmBundle, RmWebBundleKey.VALIDATION_CS_MIN_SHIFT_DURATION_PER_DAY_JS_MSG) +&quot;\&quot;);\n&quot;);</span>
<span class="nc" id="L531">		jsInitCode.append(&quot;\treturn false;\n&quot;);</span>
<span class="nc" id="L532">		jsInitCode.append(&quot;\t}\n&quot;);</span>


<span class="nc" id="L535">		jsInitCode.append(&quot;\tif(document.oFormMain.VALIDATION_CS_FULFILLS_NET_STAFFING_SHORTAGE.checked &quot; +</span>
		&quot;&amp;&amp; (document.oFormMain.CS_MIN_SHORTAGE_DURATION_VALUE.value == '')){\n&quot;);
<span class="nc" id="L537">		jsInitCode.append(&quot;\t\talert(\&quot;&quot; + i18n(m_rmBundle, RmWebBundleKey.VALIDATION_PSS_ENTER_VALUE_JS_MSG)</span>
<span class="nc" id="L538">				+ i18n(m_rmBundle, RmWebBundleKey.VALIDATION_CS_FULFILLS_NET_STAFFING_SHORTAGE_JS_MSG) +&quot;\&quot;);\n&quot;);</span>
<span class="nc" id="L539">		jsInitCode.append(&quot;\treturn false;\n&quot;);</span>
<span class="nc" id="L540">		jsInitCode.append(&quot;\t}\n&quot;);</span>

<span class="nc" id="L542">		jsInitCode.append(&quot;\tif(document.oFormMain.VALIDATION_VTO_REDUCE_NET_STAFFING_SURPLUS.checked &quot; +</span>
		&quot;&amp;&amp; (document.oFormMain.VTO_MIN_SURPLUS_DURATION_VALUE.value == '')){\n&quot;);
<span class="nc" id="L544">		jsInitCode.append(&quot;\t\talert(\&quot;&quot; + i18n(m_rmBundle, RmWebBundleKey.VALIDATION_PSS_ENTER_VALUE_JS_MSG)</span>
<span class="nc" id="L545">				+ i18n(m_rmBundle, RmWebBundleKey.VALIDATION_VTO_REDUCE_NET_STAFFING_SURPLUS_JS_MSG) +&quot;\&quot;);\n&quot;);</span>
<span class="nc" id="L546">		jsInitCode.append(&quot;\treturn false;\n&quot;);</span>
<span class="nc" id="L547">		jsInitCode.append(&quot;\t}\n&quot;);</span>

		//FLEX RULES
<span class="nc bnc" id="L550" title="All 2 branches missed.">		if(isAuthorizedToConfigureFLexValidationRule()) {</span>
<span class="nc" id="L551">			jsInitCode.append(&quot;\tif(document.oFormMain.VALIDATION_FT_MAX_DURATION.checked &quot; +</span>
			&quot;&amp;&amp; (document.oFormMain.MAX_FLEX_REQUEST_DURATION_VALUE.value == '')){\n&quot;);
<span class="nc" id="L553">			jsInitCode.append(&quot;\t\talert(\&quot;&quot; + i18n(m_rmBundle, RmWebBundleKey.VALIDATION_PSS_ENTER_VALUE_JS_MSG)</span>
<span class="nc" id="L554">					+ i18n(m_rmBundle, RmWebBundleKey.VALIDATION_FT_MAX_DURATION_JS_MSG) +&quot;\&quot;);\n&quot;);</span>
<span class="nc" id="L555">			jsInitCode.append(&quot;\t\treturn false;\n&quot;);</span>
<span class="nc" id="L556">			jsInitCode.append(&quot;\t}\n&quot;);</span>

<span class="nc" id="L558">			jsInitCode.append(&quot;\tif(document.oFormMain.VALIDATION_FT_MIN_DURATION.checked &quot; +</span>
			&quot;&amp;&amp; (document.oFormMain.MIN_FLEX_REQUEST_DURATION_VALUE.value == '')){\n&quot;);
<span class="nc" id="L560">			jsInitCode.append(&quot;\t\talert(\&quot;&quot; + i18n(m_rmBundle, RmWebBundleKey.VALIDATION_PSS_ENTER_VALUE_JS_MSG)</span>
<span class="nc" id="L561">					+ i18n(m_rmBundle, RmWebBundleKey.VALIDATION_FT_MIN_DURATION_JS_MSG) +&quot;\&quot;);\n&quot;);</span>
<span class="nc" id="L562">			jsInitCode.append(&quot;\t\treturn false;\n&quot;);</span>
<span class="nc" id="L563">			jsInitCode.append(&quot;\t}\n&quot;);</span>

<span class="nc" id="L565">			jsInitCode.append(&quot;\tif(document.oFormMain.VALIDATION_FT_MAX_NUMBER_MAKEUP_PER_REQUEST.checked &quot; +</span>
			&quot;&amp;&amp; (document.oFormMain.MAX_FLEX_MAKEUP_PER_REQUEST.value == '')){\n&quot;);
<span class="nc" id="L567">			jsInitCode.append(&quot;\t\talert(\&quot;&quot; + i18n(m_rmBundle, RmWebBundleKey.VALIDATION_PSS_ENTER_VALUE_JS_MSG)</span>
<span class="nc" id="L568">					+ i18n(m_rmBundle, RmWebBundleKey.VALIDATION_FT_MAX_NUMBER_MAKEUP_PER_REQUEST_JS_MSG) +&quot;\&quot;);\n&quot;);</span>
<span class="nc" id="L569">			jsInitCode.append(&quot;\t\treturn false;\n&quot;);</span>
<span class="nc" id="L570">			jsInitCode.append(&quot;\t}\n&quot;);</span>

<span class="nc" id="L572">			jsInitCode.append(&quot;\tif(document.oFormMain.VALIDATION_FT_MAX_NUMBER_FLEX_REQ_PER_PERIOD.checked &quot; +</span>
			&quot;&amp;&amp; (document.oFormMain.MAX_FLEX_MAKEUP_PER_PERIOD.value == '')){\n&quot;);
<span class="nc" id="L574">			jsInitCode.append(&quot;\t\talert(\&quot;&quot; + i18n(m_rmBundle, RmWebBundleKey.VALIDATION_PSS_ENTER_VALUE_JS_MSG)</span>
<span class="nc" id="L575">					+ i18n(m_rmBundle, RmWebBundleKey.VALIDATION_FT_MAX_NUMBER_MAKEUP_PER_PERIOD_JS_MSG) +&quot;\&quot;);\n&quot;);</span>
<span class="nc" id="L576">			jsInitCode.append(&quot;\t\treturn false;\n&quot;);</span>
<span class="nc" id="L577">			jsInitCode.append(&quot;\t}\n&quot;);</span>

<span class="nc" id="L579">			jsInitCode.append(&quot;\tif(document.oFormMain.VALIDATION_FT_MAX_SHIFT_DURATION.checked &quot; +</span>
			&quot;&amp;&amp; (document.oFormMain.FT_MAX_SHIFT_DURATION_VALUE.value == '')){\n&quot;);
<span class="nc" id="L581">			jsInitCode.append(&quot;\t\talert(\&quot;&quot; + i18n(m_rmBundle, RmWebBundleKey.VALIDATION_FT_MAX_SHIFT_DURATION_JS_MSG)</span>
<span class="nc" id="L582">					+ i18n(m_rmBundle, RmWebBundleKey.VALIDATION_FT_MAX_SHIFT_DURATION_JS_MSG) +&quot;\&quot;);\n&quot;);</span>
<span class="nc" id="L583">			jsInitCode.append(&quot;\t\treturn false;\n&quot;);</span>
<span class="nc" id="L584">			jsInitCode.append(&quot;\t}\n&quot;);</span>

<span class="nc" id="L586">			jsInitCode.append(&quot;\tif(document.oFormMain.VALIDATION_FT_MUST_OCCUR_ASAP.checked) {\n&quot;);</span>

<span class="nc" id="L588">			jsInitCode.append(&quot;\t\tif(document.oFormMain.MUST_OCCUR_ASAP_MAX_DAYS.value == ''){\n&quot;);</span>
<span class="nc" id="L589">			jsInitCode.append(&quot;\t\t\talert(\&quot;&quot; + i18n(m_rmBundle, RmWebBundleKey.VALIDATION_PSS_ENTER_VALUE_JS_MSG)</span>
<span class="nc" id="L590">					+ i18n(m_rmBundle, RmWebBundleKey.VALIDATION_FT_MUST_OCCUR_ASAP_JS_MSG) +&quot;\&quot;);\n&quot;);</span>
<span class="nc" id="L591">			jsInitCode.append(&quot;\t\t\treturn false;\n&quot;);</span>
<span class="nc" id="L592">			jsInitCode.append(&quot;\t\t}\n&quot;);</span>
<span class="nc" id="L593">			jsInitCode.append(&quot;\t\tvar maxLaterThan = parseInt(document.oFormMain.MUST_OCCUR_ASAP_MAX_DAYS.value);\n&quot;);</span>
<span class="nc" id="L594">			jsInitCode.append(&quot;\t\tif(maxLaterThan &gt; 90) {\n&quot;);</span>
<span class="nc" id="L595">			jsInitCode.append(&quot;\t\t\talert(\&quot;&quot; + i18n(m_rmBundle, RmWebBundleKey.VALIDATION_FT_MUST_OCCUR_ASAP_JS_MSG_OVER_90_DAYS) +&quot;\&quot;);\n&quot;);</span>
<span class="nc" id="L596">			jsInitCode.append(&quot;\t\t\treturn false;\n&quot;);</span>
<span class="nc" id="L597">			jsInitCode.append(&quot;\t\t}\n&quot;);</span>

<span class="nc" id="L599">			jsInitCode.append(&quot;\t}\n&quot;);</span>
		}

<span class="nc" id="L602">		jsInitCode.append(&quot;\treturn true;\n&quot;);</span>
<span class="nc" id="L603">		jsInitCode.append(&quot;}&quot;);</span>

<span class="nc" id="L605">		return jsInitCode.toString();</span>
	}

    /**
     * Determines whether the current org has any children.
     * @return True if the current org has any children, false otherwise.
     */
	private boolean hasChildOrgs() {
<span class="nc" id="L613">        return hasChildren;</span>
    }


	public List&lt;ID&gt; getSelectedTimeoffTypeActivityIDs() {
<span class="nc" id="L618">		return selectedTimeoffTypeActivityIDs;</span>
	}

	public List&lt;ID&gt; getApplicableActivityIDs() {
<span class="nc bnc" id="L622" title="All 2 branches missed.">		if (!selectedTimeoffTypeActivityIDs.isEmpty()) {</span>
<span class="nc" id="L623">			return selectedTimeoffTypeActivityIDs;</span>
		}
<span class="nc bnc" id="L625" title="All 2 branches missed.">		if (allTimeoffTypeActivityIDs != null) {</span>
<span class="nc" id="L626">			return allTimeoffTypeActivityIDs;</span>
		}

<span class="nc" id="L629">		allTimeoffTypeActivityIDs = new ArrayList&lt;ID&gt;(timeoffRequestableActivities.size());</span>
<span class="nc bnc" id="L630" title="All 2 branches missed.">		for (Activity activity : timeoffRequestableActivities) {</span>
<span class="nc" id="L631">			allTimeoffTypeActivityIDs.add(activity.getID());</span>
<span class="nc" id="L632">		}</span>

<span class="nc" id="L634">		return allTimeoffTypeActivityIDs;</span>
	}

	public void setSelectedTimeoffTypeActivityIDs(List&lt;ID&gt; selectedTimeoffTypeActivityIDs) {
<span class="nc" id="L638">		this.selectedTimeoffTypeActivityIDs = selectedTimeoffTypeActivityIDs;</span>
<span class="nc" id="L639">	}</span>

	public void setAllRequestableActivitesSelected(boolean allSelected) {
<span class="nc" id="L642">		allRequestableActivitesSelected = allSelected;</span>
<span class="nc" id="L643">	}</span>

	public boolean isAllRequestableActivitesSelected() {
<span class="nc" id="L646">		return allRequestableActivitesSelected;</span>
	}

	public Collection&lt;ActivityProperties&gt; getSelectedActivities() {
<span class="nc" id="L650">		return selectedActivityProperties;</span>
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>