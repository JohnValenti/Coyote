<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>AutoProcessingRulePC.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">QA Code Coverage</a> &gt; <a href="index.source.html" class="el_package">com.bluepumpkin.web.rm.setup.autoprocessing</a> &gt; <span class="el_source">AutoProcessingRulePC.java</span></div><h1>AutoProcessingRulePC.java</h1><pre class="source lang-java linenums">package com.bluepumpkin.web.rm.setup.autoprocessing;

import java.util.ArrayList;
import java.util.Calendar;
import java.util.Collection;
import java.util.Collections;
import java.util.Date;
import java.util.HashMap;
import java.util.Iterator;
import java.util.List;
import java.util.Map;
import java.util.ResourceBundle;
import java.util.TimeZone;

import javax.servlet.http.HttpServletRequest;

import com.bluepumpkin.common.datatypes.ID;
import com.bluepumpkin.common.datatypes.LocalDate;
import com.bluepumpkin.common.util.StringUtil;
import com.bluepumpkin.ejb.rm.l10n.RmEjbBundleKey;
import com.bluepumpkin.ejb.rm.requests.common.model.Request;
import com.bluepumpkin.ejb.rm.setup.autoprocessing.model.AutoProcessingRule;
import com.bluepumpkin.ejb.rm.setup.autoprocessing.model.AutoProcessingValidation;
import com.bluepumpkin.ejb.rm.setup.filingrules.model.RequestFilingRule;
import com.bluepumpkin.ejb.rm.setup.validation.model.ValidationRule;
import com.bluepumpkin.ejb.rm.util.LicenseUtil;
import com.bluepumpkin.ejb.rm.util.TORequestUtil;
import com.bluepumpkin.web.rm.keys.RmJavaScriptFileID;
import com.bluepumpkin.web.rm.l10n.RmWebBundleKey;
import com.bluepumpkin.web.rm.setup.RmSetupUtil;
import com.bluepumpkin.web.rm.setup.validation.ValidationModelHandler;
import com.bluepumpkin.web.rm.validation.ValidationResources;
import com.bluepumpkin.web.rm.validation.ValidationRulesMap;
import com.google.gson.Gson;
import com.witness.web.uif.base.Message;
import com.witness.web.uif.keys.JavaScriptFileID;
import com.witness.web.uif.pagecomponent.DefaultMultiColumnNodeData;
import com.witness.web.uif.pagecomponent.container.ContainerPC;
import com.witness.web.uif.pagecomponent.container.ListContainerPC;
import com.witness.web.uif.pagecomponent.picker.date.DateRangePickerPC;
import com.witness.web.uif.system.RequestContext;
import com.witness.web.uif.util.HtmlUtil;
import com.witness.web.uif.util.html.HtmlChoiceInput;
import com.witness.web.uif.util.js.JSUtil;

/**
 * Title          AutoProcessingRuleEditPageModel
 * Description    Used to display the Create/Edit autoProcessing Rule page
 *
 * WARNING: the names of the fields created by this page component are used
 * in the javascript code that validates the page. If you change
 * a field name here you also have to change it in the file 
 *     webroot/rm/setup/autoprocess/autoprocessrule.jsp
 *
 * Look for the javascript method customValidateForm().
 *
 * Copyright      Copyright (c) 2002
 * Company        Blue Pumpkin Software, Inc
 * @author        Howard Mullings
 * @version       1.0
 */
public class AutoProcessingRulePC extends ContainerPC {
	private static final String FORMPC_WIDTH = &quot;99%&quot;;
	private static final String FWRAPPER = &quot;fWrapper&quot;;
	private static final String HEADERCSS = &quot;tbl2ndHdrLeft&quot;;

	/**
	 * set the form element names
	 *
	 * NOTE: Form field names, for use by field validators; 
	 * must begin with lowercase letter
	 */
	private static final String TIME_OFF_ACTIVITY_ID_FN = &quot;timeOffActivityId&quot;;
	private static final String REQUEST_TYPE_FN = &quot;requestType&quot;;
	private static final String DATE_RANGE_FN = &quot;dateRange&quot;;
	private static final String DAY_RANGE_FN = &quot;dayRange&quot;;
	private static final String DAY_TYPES_FN = &quot;dayType&quot;;
	private static final String APPLIED_FN = &quot;applied&quot;;
	private static final String ORG_SCOPE_FN = &quot;orgScope&quot;;

	private static final String APPROVED_FLAG_FN = &quot;approvedFlag&quot;;
	private static final String DENIED_FLAG_FN = &quot;deniedFlag&quot;;
	private static final String WAITLIST_FLAG_FN = &quot;waitlistFlag&quot;;

	private static final String APPROVE_CHOICE_FN = &quot;approveChoice&quot;;
	private static final String DENY_CHOICE_FN = &quot;denyChoice&quot;;
	private static final String WAITLIST_CHOICE_FN = &quot;waitlistChoice&quot;;

	public static final String APPROVAL_DENIAL_TYPE_NO = AutoProcessingRule.APPROVAL_DENIAL_TYPE_NO;
	public static final String APPROVAL_DENIAL_TYPE_YES = AutoProcessingRule.APPROVAL_DENIAL_TYPE_YES;
	public static final String APPROVAL_DENIAL_TYPE_VIOLATION = AutoProcessingRule.APPROVAL_DENIAL_TYPE_VIOLATION;

	public static final String DAYRANGE_ALL_DAYS = AutoProcessingRule.DAYRANGE_ALL_DAYS;
	public static final String DAYRANGE_DAY_TYPE = AutoProcessingRule.DAYRANGE_DAY_TYPE;
	public static final String DAYRANGE_DATES = AutoProcessingRule.DAYRANGE_DATES;

	public static final String RADIO_SCOPE_THIS_ORG_ONLY = RequestFilingRule.SCOPE_THIS_ORG_ONLY;
	public static final String RADIO_SCOPE_SUB_ORGS_NO_OVERRIDE = RequestFilingRule.SCOPE_SUB_ORGS_NO_OVERRIDE;
	public static final String RADIO_SCOPE_SUB_ORGS_ALLOW_OVERRIDE = RequestFilingRule.SCOPE_SUB_ORGS_ALLOW_OVERRIDE;

	private final ResourceBundle m_rmBundle;
	private final ValidationRulesMap m_vrMap;
	private final ResourceBundle rmEjbBundle;

<span class="nc" id="L105">	private String m_pageType = RENDER_TIME_OFF_PAGE;</span>
	public DateRangePickerPC m_dateRangePC;
	private final ListContainerPC m_requestListPC;
	private ListContainerPC m_criteriaPC;
	private final ListContainerPC m_orgScopePC;
	private AutoProcessingRule m_autoProcessingRule;
	private String m_autoProcessingRuleTitle;
	private final TimeZone m_orgTimeZone;

	private ID organizationID;

<span class="nc" id="L116">	private Collection m_timeOffTypeList = new ArrayList();</span>
<span class="nc" id="L117">	private Collection m_dayTypeList = new ArrayList();</span>
<span class="nc" id="L118">	private Map m_validationRules = new HashMap();</span>

	private static final String RENDER_TIME_OFF_PAGE = Request.REQUESTTYPE_TIMEOFF; //&quot;time-off&quot;;
	private static final String RENDER_TIME_OFF_WITHDRAW_PAGE = Request.REQUESTTYPE_TIMEOFF_WITHDRAW; //&quot;time-off-withdraw&quot;;
	private static final String RENDER_SHIFT_SWAP_PAGE = Request.REQUESTTYPE_SHIFTSWAP; //&quot;shift-swap&quot;;
	private static final String RENDER_SHIFT_BID_PAGE = Request.REQUESTTYPE_SHIFTBID; //&quot;shift-bid&quot;;
	private static final String RENDER_CUSTOM_SHIFT_PAGE = Request.REQUESTTYPE_CUSTSHIFT; //&quot;cust-shift&quot;;
	private static final String RENDER_FLEX_TIME_PAGE = Request.REQUESTTYPE_FLEXTIME;
	private static final String RENDER_SHIFT_SWAP_WITHDRAW_PAGE = Request.REQUESTTYPE_SHIFTSWAP_WITHDRAW;

	/**
	 * Constructs the Profile General page component.
	 */
	public AutoProcessingRulePC(RequestContext context) {
<span class="nc" id="L132">		this(context, null, null, context.getViewingTimeZone());</span>
<span class="nc" id="L133">	}</span>

	public AutoProcessingRulePC(RequestContext context, AutoProcessingRule autoProcessingRule, Map validationRules, TimeZone orgTimeZone) {
<span class="nc" id="L136">		super(context);</span>
<span class="nc" id="L137">		m_rmBundle = m_localizer.getBundle(RmWebBundleKey.BUNDLE_NAME);</span>
<span class="nc" id="L138">		rmEjbBundle = m_localizer.getBundle(RmEjbBundleKey.BUNDLE_NAME);</span>
<span class="nc" id="L139">		m_vrMap = ValidationRulesMap.getInstance();</span>
<span class="nc bnc" id="L140" title="All 2 branches missed.">		if (autoProcessingRule != null) {</span>
<span class="nc" id="L141">			m_autoProcessingRule = autoProcessingRule;</span>
		}
<span class="nc bnc" id="L143" title="All 2 branches missed.">		if (validationRules != null) {</span>
<span class="nc" id="L144">			m_validationRules = validationRules;</span>
		}

<span class="nc" id="L147">		m_orgTimeZone = orgTimeZone;</span>
<span class="nc" id="L148">		m_dateRangePC = new DateRangePickerPC(context, DATE_RANGE_FN, m_orgTimeZone);</span>
<span class="nc" id="L149">		m_dateRangePC.getEndDatePickerPC().setIsTimeEnabled(true);</span>
<span class="nc" id="L150">		m_dateRangePC.getStartDatePickerPC().setIsTimeEnabled(true);</span>

<span class="nc" id="L152">		m_requestListPC = new ListContainerPC(context);</span>
<span class="nc" id="L153">		setPageType(m_autoProcessingRule.getRequestType());</span>
<span class="nc" id="L154">		setName(&quot;autoProcessingRulePC&quot;);</span>

<span class="nc" id="L156">		m_orgScopePC = new ListContainerPC(context);</span>

		// save validation error messages into the html
		String key;
<span class="nc" id="L160">		key = RmWebBundleKey.MUST_SPECIFY_ONE_APPROVE_OR_DENY_RULE;</span>
<span class="nc" id="L161">		addJSVariableAsString(key, i18n(m_rmBundle, key));</span>

<span class="nc" id="L163">		key = RmWebBundleKey.MUST_SPECIFY_ONE_APPROVE_OR_DENY_OR_WL_RULE;</span>
<span class="nc" id="L164">		addJSVariableAsString(key, i18n(m_rmBundle, key));</span>

<span class="nc" id="L166">		key = RmWebBundleKey.CANT_DENY_1_AND_APPROVE_OTHERS;</span>
<span class="nc" id="L167">		addJSVariableAsString(key, i18n(m_rmBundle, key));</span>

<span class="nc" id="L169">		key = RmWebBundleKey.CANT_DENY_AND_APPROVE_THE_SAME;</span>
<span class="nc" id="L170">		addJSVariableAsString(key, i18n(m_rmBundle, key));</span>

<span class="nc" id="L172">		key = RmWebBundleKey.MUST_SELECT_ONE_DENY_RULE;</span>
<span class="nc" id="L173">		addJSVariableAsString(key, i18n(m_rmBundle, key));</span>

<span class="nc" id="L175">		key = RmWebBundleKey.MUST_SELECT_ONE_APPROVE_RULE;</span>
<span class="nc" id="L176">		addJSVariableAsString(key, i18n(m_rmBundle, key));</span>

<span class="nc" id="L178">		key = RmWebBundleKey.MUST_SELECT_ONE_WAITLIST_RULE;</span>
<span class="nc" id="L179">		addJSVariableAsString(key, i18n(m_rmBundle, key));</span>

<span class="nc" id="L181">		key = RmWebBundleKey.ORG_RM_FILING_RULE_SUBTYPE_VALIDATION;</span>
<span class="nc" id="L182">		addJSVariableAsString(key, i18n(m_rmBundle, key));</span>

<span class="nc" id="L184">		addRequiredJavaScriptFile(JavaScriptFileID.JQUERY);</span>
<span class="nc" id="L185">		setJSMediator(RmJavaScriptFileID.TIME_OFF_AUTO_PROCESSING);</span>
<span class="nc" id="L186">	}</span>

	public void setOrganizationID(ID organizationID) {
<span class="nc" id="L189">		this.organizationID = organizationID;</span>
<span class="nc" id="L190">	}</span>

	@Override
	public String getJavaScriptInitCode() {
<span class="nc bnc" id="L194" title="All 2 branches missed.">		if (!needsValidationByTimeOffType()) {</span>
<span class="nc" id="L195">			return super.getJavaScriptInitCode();</span>
		}

<span class="nc" id="L198">		StringBuilder js = new StringBuilder(super.getJavaScriptInitCode());</span>
<span class="nc" id="L199">		String json = String.format(&quot;%s.setEnabledRulesByType('%s');&quot;, getName(), getEnabledTimeOffRuleKeysJson());</span>
<span class="nc" id="L200">		js.append(json);</span>
<span class="nc" id="L201">		js.append(&quot;\n\n&quot;);</span>
<span class="nc" id="L202">		return js.toString();</span>
	}

	private String getEnabledTimeOffRuleKeysJson() {
<span class="nc" id="L206">		Gson gson = new Gson();</span>
<span class="nc" id="L207">		return gson.toJson(getEnabledTimeOffRuleKeys());</span>
	}

	private Map&lt;Integer, List&lt;String&gt;&gt; getEnabledTimeOffRuleKeys() {
		try {
<span class="nc" id="L212">			return ValidationModelHandler.getEnabledTimeOffRuleKeys(organizationID);</span>
<span class="nc" id="L213">		} catch (Exception e) {</span>
<span class="nc" id="L214">			handleUnableToLoadDataError(log, e);</span>
		}
<span class="nc" id="L216">		return Collections.emptyMap();</span>
	}

	public void setPageType(String pageType) {
<span class="nc" id="L220">		m_pageType = pageType;</span>
<span class="nc" id="L221">	}</span>

	public void setAutoProcessingRule(AutoProcessingRule autoProcessingRule) {
<span class="nc bnc" id="L224" title="All 4 branches missed.">		int columnNum = &quot;time-off&quot;.equals(autoProcessingRule.getRequestType()) &amp;&amp; TORequestUtil.isTOWaitlistFeatureEnabled() ? 3 : 2;</span>
<span class="nc" id="L225">		m_criteriaPC = new ListContainerPC(m_context, columnNum);</span>
<span class="nc" id="L226">		m_criteriaPC.setName(&quot;autoprocessingcriteria&quot;);</span>
<span class="nc" id="L227">		m_autoProcessingRule = autoProcessingRule;</span>
<span class="nc" id="L228">	}</span>

	private boolean isTimeOffType() {
<span class="nc bnc" id="L231" title="All 4 branches missed.">		return m_autoProcessingRule != null &amp;&amp; Request.REQUESTTYPE_TIMEOFF.equals(m_autoProcessingRule.getRequestType());</span>
	}

	private boolean isFlexTimeType() {
<span class="nc bnc" id="L235" title="All 4 branches missed.">		return m_autoProcessingRule != null &amp;&amp; Request.REQUESTTYPE_FLEXTIME.equals(m_autoProcessingRule.getRequestType());</span>
	}

	private boolean needsValidationByTimeOffType() {
<span class="nc bnc" id="L239" title="All 6 branches missed.">		return LicenseUtil.isAdvancedRMLicense() &amp;&amp; (isTimeOffType() || isFlexTimeType());</span>
	}

	private boolean needsValidationByTimeOffType(String vrsKey) {
<span class="nc bnc" id="L243" title="All 6 branches missed.">		return LicenseUtil.isAdvancedRMLicense() &amp;&amp; (isTimeOffType() || isTimeOffTypeForFlexPage(vrsKey));</span>
	}

	private boolean isTimeOffTypeForFlexPage(String vrsKey) {
<span class="nc bnc" id="L247" title="All 4 branches missed.">		return isFlexTimeType() &amp;&amp; isTimeOffKeyForFlexTimeAutoProcessing(vrsKey);</span>
	}

	private boolean isTimeOffKeyForFlexTimeAutoProcessing(String vrsKey) {
<span class="nc" id="L251">		String[] keys = RmSetupUtil.getTimeOffKeysForFlexTimeAutoProcessing();</span>
<span class="nc bnc" id="L252" title="All 2 branches missed.">		for (int i = 0; i &lt; keys.length; i++) {</span>
<span class="nc bnc" id="L253" title="All 2 branches missed.">			if (keys[i].equals(vrsKey)) {</span>
<span class="nc" id="L254">				return true;</span>
			}
		}
<span class="nc" id="L257">		return false;</span>
	}

	public void setTimeOffTypeList(Collection timeOffTypeList) {
<span class="nc" id="L261">		m_timeOffTypeList = timeOffTypeList;</span>
<span class="nc" id="L262">	}</span>

	public void setDayTypeList(Collection dayTypeList) {
<span class="nc" id="L265">		m_dayTypeList = dayTypeList;</span>
<span class="nc" id="L266">	}</span>

	/**
	 * Get string of the HTML representing this component.
	 */
	@Override
	public String getHtmlDisplay() {

<span class="nc" id="L274">		setTemplate(&quot;&lt;table width=\&quot;99%\&quot; border=\&quot;0\&quot; cellspacing=\&quot;5\&quot; cellpadding=\&quot;0\&quot;&gt;&quot;+</span>
				&quot;&lt;tr&gt;&lt;td&gt;{0}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;{1}&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;{2}&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&quot;);

<span class="nc bnc" id="L277" title="All 2 branches missed.">		if (m_pageType.equals(RENDER_SHIFT_SWAP_PAGE)) {</span>
<span class="nc" id="L278">			m_autoProcessingRuleTitle = RmWebBundleKey.ORG_RM_FILING_RULE_SS_REQUEST_TITLE;</span>
<span class="nc bnc" id="L279" title="All 2 branches missed.">		} else if (m_pageType.equals(RENDER_SHIFT_BID_PAGE)) {</span>
<span class="nc" id="L280">			m_autoProcessingRuleTitle = RmWebBundleKey.ORG_RM_FILING_RULE_SB_REQUEST_TITLE;</span>
<span class="nc bnc" id="L281" title="All 2 branches missed.">		} else if (m_pageType.equals(RENDER_TIME_OFF_WITHDRAW_PAGE)) {</span>
<span class="nc" id="L282">			m_autoProcessingRuleTitle = RmWebBundleKey.ORG_RM_FILING_RULE_APPROVED_TO_WITHDRAW_REQUEST_TITLE;</span>
<span class="nc bnc" id="L283" title="All 2 branches missed.">		} else if (m_pageType.equals(RENDER_CUSTOM_SHIFT_PAGE)) {</span>
<span class="nc" id="L284">			m_autoProcessingRuleTitle = RmWebBundleKey.ORG_RM_FILING_RULE_CS_REQUEST_TITLE;</span>
<span class="nc bnc" id="L285" title="All 2 branches missed.">		} else if (m_pageType.equals(RENDER_FLEX_TIME_PAGE)) {</span>
<span class="nc" id="L286">			m_autoProcessingRuleTitle = RmWebBundleKey.ORG_RM_FILING_RULE_FT_REQUEST_TITLE;</span>
<span class="nc bnc" id="L287" title="All 2 branches missed.">		} else if (m_pageType.equals(RENDER_SHIFT_SWAP_WITHDRAW_PAGE)) {</span>
<span class="nc" id="L288">			m_autoProcessingRuleTitle = RmWebBundleKey.ORG_RM_FILING_RULE_APPROVED_SS_WITHDRAW_REQUEST_TITLE;</span>
		} else {
<span class="nc" id="L290">			m_autoProcessingRuleTitle = RmWebBundleKey.ORG_RM_FILING_RULE_TO_REQUEST_TITLE;</span>
		}

<span class="nc" id="L293">		m_requestListPC.setTitle(i18n(m_rmBundle, m_autoProcessingRuleTitle));</span>
<span class="nc" id="L294">		addComponent(getOrgScopeContainer());</span>
<span class="nc" id="L295">		addComponent(getAffectedRequestsContainer());</span>
<span class="nc" id="L296">		addComponent(getCriteriaContainer());</span>

<span class="nc" id="L298">		return super.getHtmlDisplay();</span>

	}//getHtmlDisplay

	/**
	 *
	 */
	private ListContainerPC getAffectedRequestsContainer() {

<span class="nc" id="L307">		m_requestListPC.setWidth(FORMPC_WIDTH);</span>
<span class="nc" id="L308">		m_requestListPC.setWrapperCSSClass(FWRAPPER);</span>
<span class="nc" id="L309">		m_requestListPC.setLastRowType(ListContainerPC.LAST_ROW_NONE);</span>
<span class="nc" id="L310">		m_requestListPC.setHeaderCSSSClass(HEADERCSS);</span>

<span class="nc" id="L312">		String dayRangeChoice = m_autoProcessingRule.getDayRange();</span>
<span class="nc bnc" id="L313" title="All 2 branches missed.">		if (StringUtil.isEmpty(dayRangeChoice)) {</span>
<span class="nc" id="L314">			dayRangeChoice = DAYRANGE_ALL_DAYS;</span>
		}

<span class="nc bnc" id="L317" title="All 2 branches missed.">		if (m_pageType.equals(RENDER_SHIFT_BID_PAGE)) {</span>

<span class="nc" id="L319">			String hiddenInput = HtmlUtil.makeHiddenInput(REQUEST_TYPE_FN, Request.REQUESTTYPE_SHIFTBID);</span>
<span class="nc" id="L320">			m_requestListPC.addRowData(hiddenInput + getAllOptionRow(dayRangeChoice, &quot;SB&quot;));</span>

<span class="nc bnc" id="L322" title="All 4 branches missed.">		} else if (m_pageType.equals(RENDER_TIME_OFF_PAGE) || m_pageType.equals(RENDER_FLEX_TIME_PAGE)) {</span>

<span class="nc bnc" id="L324" title="All 2 branches missed.">			if (m_timeOffTypeList.isEmpty()) {</span>
<span class="nc" id="L325">				addPageMessage(Message.ERROR_TYPE, RmWebBundleKey.WARNING_NO_TO_ACTIVITIES, RmWebBundleKey.BUNDLE_NAME);</span>
			}

<span class="nc" id="L328">			String hiddenInput = HtmlUtil.makeHiddenInput(REQUEST_TYPE_FN, m_pageType);</span>
<span class="nc" id="L329">			m_requestListPC.addRowData(hiddenInput + getActivitySelectionRow());</span>
<span class="nc" id="L330">			m_requestListPC.addRowData(getAllOptionRow(dayRangeChoice, &quot;TO&quot;));</span>
<span class="nc" id="L331">			m_requestListPC.addRowData(getDayTypeSelectionRow(dayRangeChoice));</span>

<span class="nc bnc" id="L333" title="All 2 branches missed.">		} else if (m_pageType.equals(RENDER_TIME_OFF_WITHDRAW_PAGE)) {</span>

<span class="nc" id="L335">			String hiddenInput = HtmlUtil.makeHiddenInput(REQUEST_TYPE_FN, Request.REQUESTTYPE_TIMEOFF_WITHDRAW);</span>
<span class="nc" id="L336">			m_requestListPC.addRowData(hiddenInput + getAllOptionRow(dayRangeChoice, &quot;TO_WITHDRAW&quot;));</span>
<span class="nc" id="L337">			m_requestListPC.addRowData(getDayTypeSelectionRow(dayRangeChoice));</span>

<span class="nc bnc" id="L339" title="All 2 branches missed.">		} else if (m_pageType.equals(RENDER_SHIFT_SWAP_PAGE)) {</span>

<span class="nc" id="L341">			String hiddenInput = HtmlUtil.makeHiddenInput(REQUEST_TYPE_FN, Request.REQUESTTYPE_SHIFTSWAP);</span>
<span class="nc" id="L342">			m_requestListPC.addRowData(hiddenInput + getAllOptionRow(dayRangeChoice, &quot;SS&quot;));</span>

<span class="nc bnc" id="L344" title="All 2 branches missed.">		} else if (m_pageType.equals(RENDER_SHIFT_SWAP_WITHDRAW_PAGE)) {</span>
<span class="nc" id="L345">			String hiddenInput = HtmlUtil.makeHiddenInput(REQUEST_TYPE_FN, Request.REQUESTTYPE_SHIFTSWAP_WITHDRAW);</span>
<span class="nc" id="L346">			m_requestListPC.addRowData(hiddenInput + getAllOptionRow(dayRangeChoice, &quot;SS&quot;));</span>
<span class="nc bnc" id="L347" title="All 2 branches missed.">		} else if (m_pageType.equals(RENDER_CUSTOM_SHIFT_PAGE)) {</span>

<span class="nc" id="L349">			String hiddenInput = HtmlUtil.makeHiddenInput(REQUEST_TYPE_FN, Request.REQUESTTYPE_CUSTSHIFT);</span>
<span class="nc" id="L350">			m_requestListPC.addRowData(hiddenInput + RmSetupUtil.geCustomShiftCheckboxesRow(m_rmBundle, m_localizer, m_autoProcessingRule.getRequestSubTypeRegNewShift(), m_autoProcessingRule.getRequestSubTypeRegShiftChange(), m_autoProcessingRule.getRequestSubTypeOTNewShift(), m_autoProcessingRule.getRequestSubTypeOTShiftChange()));</span>
<span class="nc" id="L351">			m_requestListPC.addRowData(&quot;&lt;b&gt;&quot; + i18n(m_rmBundle, RmWebBundleKey.ORG_RM_FILING_RULE_REQUESTED_DATES) + &quot;&lt;/b&gt;&quot;);</span>
<span class="nc" id="L352">			m_requestListPC.addRowData(getAllOptionRow(dayRangeChoice, &quot;CS&quot;));</span>
		}

		// add the selection row that contains the Date range option
<span class="nc" id="L356">		String hiddenApplInput = HtmlUtil.makeHiddenInput(APPLIED_FN, getApplied());</span>
<span class="nc" id="L357">		m_requestListPC.addRowData(hiddenApplInput + getDayRangeRow(dayRangeChoice));</span>

<span class="nc" id="L359">		return m_requestListPC;</span>
	}

	/**
	 *
	 */
	private ListContainerPC getCriteriaContainer() {
<span class="nc" id="L366">		boolean isTimeOff = Request.REQUESTTYPE_TIMEOFF.equals(m_autoProcessingRule.getRequestType());</span>
<span class="nc" id="L367">		boolean isFlexTime = Request.REQUESTTYPE_FLEXTIME.equals(m_autoProcessingRule.getRequestType());</span>
<span class="nc" id="L368">		boolean isShiftSwapWithdraw = Request.REQUESTTYPE_SHIFTSWAP_WITHDRAW.equals(m_autoProcessingRule.getRequestType());</span>
<span class="nc" id="L369">		boolean isWaitlistEnabled = TORequestUtil.isTOWaitlistFeatureEnabled();</span>

<span class="nc" id="L371">		m_criteriaPC.setTitle(i18n(m_rmBundle, RmWebBundleKey.ORG_RM_AUTO_PROCESSING_CRITERIA_TITLE));</span>
<span class="nc" id="L372">		m_criteriaPC.setWidth(FORMPC_WIDTH);</span>
<span class="nc" id="L373">		m_criteriaPC.setWrapperCSSClass(FWRAPPER);</span>
<span class="nc" id="L374">		m_criteriaPC.setLastRowType(ListContainerPC.LAST_ROW_NONE);</span>
<span class="nc" id="L375">		m_criteriaPC.setHeaderCSSSClass(HEADERCSS);</span>

<span class="nc" id="L377">		final String offset1 = HtmlUtil.NBSP + HtmlUtil.NBSP + HtmlUtil.NBSP + HtmlUtil.NBSP;</span>
		//final String offset2 = offset1+offset1;

<span class="nc" id="L380">		String keys[] = getValidationKeys();</span>

		//====== first level
<span class="nc" id="L383">		DefaultMultiColumnNodeData mcnData = new DefaultMultiColumnNodeData(&quot;1&quot;);</span>
<span class="nc" id="L384">		m_criteriaPC.addRowData(mcnData);</span>

<span class="nc" id="L386">		boolean approvedFlag = getApprovedFlag().equals(&quot;true&quot;);</span>
<span class="nc" id="L387">		boolean deniedFlag = getDeniedFlag().equals(&quot;true&quot;);</span>
<span class="nc" id="L388">		boolean waitlistFlag = getWaitlistFlag().equals(&quot;true&quot;);</span>

<span class="nc" id="L390">		mcnData.add(HtmlChoiceInput.makeChkBoxInput(APPROVED_FLAG_FN,</span>
				&quot;true&quot;, //value
<span class="nc" id="L392">				getApprovedFlagLabel(), //label </span>
				approvedFlag, //checked
<span class="nc" id="L394">				getDisabled(), getOnChangeSectionFld(APPROVE_CHOICE_FN, &quot;approve&quot;, keys)) //onClickJS </span>
		);

<span class="nc bnc" id="L397" title="All 4 branches missed.">		if (isTimeOff &amp;&amp; isWaitlistEnabled) {</span>
<span class="nc" id="L398">			mcnData.add(HtmlChoiceInput.makeChkBoxInput(WAITLIST_FLAG_FN,</span>
					&quot;true&quot;, //value
<span class="nc" id="L400">					getWaitlistFlagLabel(), //label </span>
					waitlistFlag, //checked
<span class="nc" id="L402">					getDisabled(), getOnChangeSectionFld(WAITLIST_CHOICE_FN, &quot;waitlist&quot;, TO_WAITLIST_VALIDATION_KEYS)) //onClickJS </span>
			);
		}

<span class="nc" id="L406">		mcnData.add(HtmlChoiceInput.makeChkBoxInput(DENIED_FLAG_FN,</span>
				&quot;true&quot;, //value
<span class="nc" id="L408">				getDeniedFlagLabel(), //label </span>
				deniedFlag, //checked
<span class="nc" id="L410">				getDisabled(), getOnChangeSectionFld(DENY_CHOICE_FN, &quot;deny&quot;, keys)) //onClickJS </span>
		);

		// ===== second level 
<span class="nc" id="L414">		mcnData = new DefaultMultiColumnNodeData(&quot;2&quot;);</span>
<span class="nc" id="L415">		m_criteriaPC.addRowData(mcnData);</span>

<span class="nc" id="L417">		mcnData.add(offset1 + HtmlChoiceInput.makeRadioInput(APPROVE_CHOICE_FN,</span>
				APPROVAL_DENIAL_TYPE_NO, //value
				&quot; &quot;, //label
<span class="nc bnc" id="L420" title="All 2 branches missed.">				getApproveChoice().equals(APPROVAL_DENIAL_TYPE_NO), //isChecked</span>
<span class="nc bnc" id="L421" title="All 2 branches missed.">				!approvedFlag || getDisabled(), //isDisabled</span>
<span class="nc" id="L422">				getOnChangeChoiceFld(&quot;approve&quot;, keys, false)) //onClickJS</span>
<span class="nc" id="L423">				+ getApproveChoiceNoLabel());</span>

<span class="nc bnc" id="L425" title="All 4 branches missed.">		if (isTimeOff &amp;&amp; isWaitlistEnabled) {</span>
<span class="nc" id="L426">			mcnData.add(offset1 + HtmlChoiceInput.makeRadioInput(WAITLIST_CHOICE_FN,</span>
					APPROVAL_DENIAL_TYPE_NO, //value
					&quot; &quot;, //label
<span class="nc bnc" id="L429" title="All 2 branches missed.">					getWaitlistChoice().equals(APPROVAL_DENIAL_TYPE_NO), //isChecked</span>
<span class="nc bnc" id="L430" title="All 2 branches missed.">					!waitlistFlag || getDisabled(), //isDisabled</span>
<span class="nc" id="L431">					getOnChangeChoiceFld(&quot;waitlist&quot;, TO_WAITLIST_VALIDATION_KEYS, false)) //onClickJS</span>
<span class="nc" id="L432">					+ getWaitlistChoiceNoLabel());</span>
		}

<span class="nc" id="L435">		mcnData.add(offset1 + HtmlChoiceInput.makeRadioInput(DENY_CHOICE_FN,</span>
				APPROVAL_DENIAL_TYPE_NO, //value
				&quot;&quot;, //label
<span class="nc bnc" id="L438" title="All 2 branches missed.">				getDenyChoice().equals(APPROVAL_DENIAL_TYPE_NO), //isChecked</span>
<span class="nc bnc" id="L439" title="All 2 branches missed.">				!deniedFlag || getDisabled(), //isDisabled</span>
<span class="nc" id="L440">				getOnChangeChoiceFld(&quot;deny&quot;, keys, false)) //onClickJS</span>
<span class="nc" id="L441">				+ getDenyChoiceNoLabel());</span>

<span class="nc" id="L443">		mcnData = new DefaultMultiColumnNodeData(&quot;3&quot;);</span>
<span class="nc" id="L444">		m_criteriaPC.addRowData(mcnData);</span>

<span class="nc" id="L446">		mcnData.add(offset1 + HtmlChoiceInput.makeRadioInput(APPROVE_CHOICE_FN,</span>
				APPROVAL_DENIAL_TYPE_YES, //value
				&quot; &quot;, //label
<span class="nc bnc" id="L449" title="All 2 branches missed.">				getApproveChoice().equals(APPROVAL_DENIAL_TYPE_YES), //isChecked</span>
<span class="nc bnc" id="L450" title="All 2 branches missed.">				!approvedFlag || getDisabled(), //isDisabled</span>
<span class="nc" id="L451">				getOnChangeChoiceFld(&quot;approve&quot;, keys, false)) //onClickJS</span>
<span class="nc" id="L452">				+ getApproveChoiceYesLabel());</span>

<span class="nc bnc" id="L454" title="All 4 branches missed.">		if (isTimeOff &amp;&amp; isWaitlistEnabled) {</span>
<span class="nc" id="L455">			mcnData.add(offset1 + HtmlChoiceInput.makeRadioInput(WAITLIST_CHOICE_FN,</span>
					APPROVAL_DENIAL_TYPE_YES, //value
					&quot; &quot;, //label
<span class="nc bnc" id="L458" title="All 2 branches missed.">					getWaitlistChoice().equals(APPROVAL_DENIAL_TYPE_YES), //isChecked</span>
<span class="nc bnc" id="L459" title="All 2 branches missed.">					!waitlistFlag || getDisabled(), //isDisabled</span>
<span class="nc" id="L460">					getOnChangeChoiceFld(&quot;waitlist&quot;, TO_WAITLIST_VALIDATION_KEYS, false)) //onClickJS</span>
<span class="nc" id="L461">					+ getWaitlistChoiceYesLabel());</span>
		}

<span class="nc" id="L464">		mcnData.add(offset1 + HtmlChoiceInput.makeRadioInput(DENY_CHOICE_FN,</span>
				APPROVAL_DENIAL_TYPE_YES, //value
				&quot; &quot;, //label
<span class="nc bnc" id="L467" title="All 2 branches missed.">				getDenyChoice().equals(APPROVAL_DENIAL_TYPE_YES), //isChecked</span>
<span class="nc bnc" id="L468" title="All 2 branches missed.">				!deniedFlag || getDisabled(), //isDisabled</span>
<span class="nc" id="L469">				getOnChangeChoiceFld(&quot;deny&quot;, keys, false)) //onClickJS</span>
<span class="nc" id="L470">				+ getDenyChoiceYesLabel());</span>

<span class="nc" id="L472">		boolean approvalValidation = getApproveChoice().equals(APPROVAL_DENIAL_TYPE_VIOLATION);</span>
<span class="nc" id="L473">		boolean denialValidation = getDenyChoice().equals(APPROVAL_DENIAL_TYPE_VIOLATION);</span>
<span class="nc" id="L474">		boolean waitlistValidation = getWaitlistChoice().equals(APPROVAL_DENIAL_TYPE_VIOLATION);</span>
<span class="nc" id="L475">		mcnData = new DefaultMultiColumnNodeData(&quot;4&quot;);</span>
<span class="nc" id="L476">		m_criteriaPC.addRowData(mcnData);</span>

<span class="nc bnc" id="L478" title="All 2 branches missed.">		mcnData.add(offset1 + HtmlChoiceInput.makeRadioInput(APPROVE_CHOICE_FN,</span>
				APPROVAL_DENIAL_TYPE_VIOLATION, //value
				&quot; &quot;, //label
				approvalValidation, //isChecked
<span class="nc bnc" id="L482" title="All 2 branches missed.">				!approvedFlag || getDisabled(), //isDisabled</span>
<span class="nc" id="L483">				getOnChangeChoiceFld(&quot;approve&quot;, keys, true)) //onClickJS</span>
<span class="nc" id="L484">				+ getApproveChoiceViolationLabel());</span>

<span class="nc bnc" id="L486" title="All 4 branches missed.">		if (isTimeOff &amp;&amp; isWaitlistEnabled) {</span>
<span class="nc bnc" id="L487" title="All 2 branches missed.">			mcnData.add(offset1 + HtmlChoiceInput.makeRadioInput(WAITLIST_CHOICE_FN,</span>
					APPROVAL_DENIAL_TYPE_VIOLATION, //value
					&quot; &quot;, //label
					waitlistValidation, //isChecked
<span class="nc bnc" id="L491" title="All 2 branches missed.">					!waitlistFlag || getDisabled(), //isDisabled</span>
<span class="nc" id="L492">					getOnChangeChoiceFld(&quot;waitlist&quot;, TO_WAITLIST_VALIDATION_KEYS, true)) //onClickJS</span>
<span class="nc" id="L493">					+ getWaitlistChoiceViolationLabel());</span>
		}

<span class="nc bnc" id="L496" title="All 2 branches missed.">		mcnData.add(offset1 + HtmlChoiceInput.makeRadioInput(DENY_CHOICE_FN,</span>
				APPROVAL_DENIAL_TYPE_VIOLATION, //value
				&quot; &quot;, //label
				denialValidation, //isChecked
<span class="nc bnc" id="L500" title="All 2 branches missed.">				!deniedFlag || getDisabled(), //isDisabled</span>
<span class="nc" id="L501">				getOnChangeChoiceFld(&quot;deny&quot;, keys, true)) //onClickJS</span>
<span class="nc" id="L502">				+ getDenyChoiceViolationLabel());</span>

		//===== third level

<span class="nc" id="L506">		int l = keys.length;</span>
<span class="nc bnc" id="L507" title="All 2 branches missed.">		for (int i = 0; i &lt; l; i++) {</span>
<span class="nc" id="L508">			String key = keys[i];</span>
<span class="nc" id="L509">			addSpecialHeaderRowsIfNeeded(isFlexTime, isShiftSwapWithdraw, offset1, key);</span>

<span class="nc" id="L511">			mcnData = new DefaultMultiColumnNodeData(Integer.toString(5 + i));</span>
<span class="nc" id="L512">			m_criteriaPC.addRowData(mcnData);</span>
<span class="nc bnc" id="L513" title="All 4 branches missed.">			mcnData.add(getCheckBoxHtml(&quot;approve&quot;, key, !approvedFlag || !approvalValidation, offset1));</span>

<span class="nc bnc" id="L515" title="All 4 branches missed.">			if (isTimeOff &amp;&amp; isWaitlistEnabled) {</span>
<span class="nc bnc" id="L516" title="All 2 branches missed.">				if (key.equals(ValidationRulesMap.VALIDATION_AVAILABLE_TO_HRS) ||</span>
<span class="nc bnc" id="L517" title="All 2 branches missed.">						key.equals(ValidationRulesMap.VALIDATION_AVOID_BLACKOUT) /*||</span>
						key.equals(ValidationRulesMap.VALIDATION_ENOUGH_TO_HRS)*/){


<span class="nc bnc" id="L521" title="All 4 branches missed.">					mcnData.add(getCheckBoxHtml(&quot;waitlist&quot;, key, !waitlistFlag || !waitlistValidation, offset1));</span>

				} else {
<span class="nc" id="L524">					mcnData.add(&quot;&lt;table&gt;&lt;tr&gt;&lt;td&gt;&quot; + offset1 +&quot;&lt;/td&gt;&lt;td class=\&quot;formRowLightNoBorderBottom\&quot;&gt;&quot; +  </span>
							HtmlUtil.NBSP
							+ &quot;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&quot;
					);
				}
			}

<span class="nc bnc" id="L531" title="All 4 branches missed.">			mcnData.add(getCheckBoxHtml(&quot;deny&quot;, key, !deniedFlag || !denialValidation, offset1));</span>
		}

<span class="nc" id="L534">		return m_criteriaPC;</span>
	}

	/**
	 * Flex Time auto processing rules include Flex Time and Time Off validations.
	 * Shift Swap Withdraw auto processing rules include Shift Swap Withdraw and Shift Swap validations. 
	 * So this function will add headers to distinguish the two sets of validation rules.
	 * @param isFlexTime - is this a Flex Time auto processing rule?
	 * @param isShiftSwapWithdraw - is this a Shift Swap Withdraw auto processing rule?
	 * @param offset - An HTML spacer string to indent the header text.
	 * @param key - the validation key of the current row in the Auto-Processing Criteria section of the page.
	 */
	private void addSpecialHeaderRowsIfNeeded(boolean isFlexTime, boolean isShiftSwapWithdraw, final String offset, String key) {
<span class="nc bnc" id="L547" title="All 2 branches missed.">		if (isFlexTime) {</span>
<span class="nc bnc" id="L548" title="All 2 branches missed.">			if (key.equals(ValidationRulesMap.VALIDATION_FT_MAX_DURATION)) {</span>
<span class="nc" id="L549">				String headerText = i18n(m_rmBundle, RmWebBundleKey.ORG_RM_AUTO_PROCESSING_HEADER_FLEX_TIME_VALS);</span>
<span class="nc" id="L550">				addValidationHeaderRow(headerText, offset, 999, false);</span>
<span class="nc bnc" id="L551" title="All 2 branches missed.">			} else if (key.equals(ValidationRulesMap.VALIDATION_AVAILABLE_TO_HRS)) {</span>
<span class="nc" id="L552">				String headerText = i18n(m_rmBundle, RmWebBundleKey.ORG_RM_AUTO_PROCESSING_HEADER_TIME_OFF_VALS);</span>
<span class="nc" id="L553">				addValidationHeaderRow(headerText, offset, 1001, true);</span>
<span class="nc" id="L554">			}</span>
<span class="nc bnc" id="L555" title="All 2 branches missed.">		} else if (isShiftSwapWithdraw) {</span>
<span class="nc bnc" id="L556" title="All 2 branches missed.">			if (key.equals(ValidationRulesMap.VALIDATION_APPROVED_SS_WITHDRAW_COMPLY_FILINGRULE)) {</span>
<span class="nc" id="L557">				String headerText = i18n(m_rmBundle, RmWebBundleKey.ORG_RM_AUTO_PROCESSING_HEADER_SSW_VALS);</span>
<span class="nc" id="L558">				addValidationHeaderRow(headerText, offset, 999, false);</span>
<span class="nc bnc" id="L559" title="All 2 branches missed.">			} else if (key.equals(ValidationRulesMap.VALIDATION_SS_SAME_CALL_CENTER)) {</span>
<span class="nc" id="L560">				String headerText = i18n(m_rmBundle, RmWebBundleKey.ORG_RM_AUTO_PROCESSING_HEADER_SS_VALS);</span>
<span class="nc" id="L561">				addValidationHeaderRow(headerText, offset, 1001, true);</span>
			}
		}
<span class="nc" id="L564">	}</span>

	private void addValidationHeaderRow(String headerText, String offset, int id, boolean addSpacerRow) {
<span class="nc bnc" id="L567" title="All 2 branches missed.">		if (addSpacerRow) {</span>
<span class="nc" id="L568">			DefaultMultiColumnNodeData mcnData = new DefaultMultiColumnNodeData(Integer.toString(id++));</span>
<span class="nc" id="L569">			m_criteriaPC.addRowData(mcnData);</span>
<span class="nc" id="L570">			mcnData.add(HtmlUtil.NBSP);</span>
<span class="nc" id="L571">			mcnData.add(HtmlUtil.NBSP);</span>
		}

<span class="nc" id="L574">		DefaultMultiColumnNodeData mcnData = new DefaultMultiColumnNodeData(Integer.toString(id));</span>
<span class="nc" id="L575">		m_criteriaPC.addRowData(mcnData);</span>
<span class="nc" id="L576">		String formattedHeader = formatHeaderText(headerText, offset);</span>
<span class="nc" id="L577">		mcnData.add(formattedHeader);</span>
<span class="nc" id="L578">		mcnData.add(formattedHeader);</span>
<span class="nc" id="L579">	}</span>

	private String formatHeaderText(String headerText, String offset) {
<span class="nc" id="L582">		return &quot;&lt;table&gt;&lt;tr&gt;&lt;td&gt;&quot; + offset + &quot;&lt;/td&gt;&lt;td class=\&quot;formRowLightNoBorderBottom\&quot;&gt;&quot; </span>
				+ headerText + &quot;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&quot;;
	}

	private String getCheckBoxHtml(String prefix, String key, boolean isDisabled, String offset) {
<span class="nc" id="L587">		String checkBoxHtml = HtmlChoiceInput.makeChkBoxInput(getValidationName(prefix, key),</span>
				&quot;true&quot;, //value
<span class="nc" id="L589">				getValidationLabel(key),	//label </span>
<span class="nc bnc" id="L590" title="All 2 branches missed.">				getValidationValue(prefix, key), //checked</span>
<span class="nc bnc" id="L591" title="All 2 branches missed.">				isDisabled || getDisabled(),</span>
				JSUtil.ON_CHANGE);

<span class="nc" id="L594">		return &quot;&lt;table&gt;&lt;tr&gt;&lt;td&gt;&quot; + offset + &quot;&lt;/td&gt;&lt;td class=\&quot;formRowLightNoBorderBottom\&quot;&gt;&quot; + checkBoxHtml + &quot;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&quot;;</span>
	}

	/**
	 * Return the organization scope for this auto processing rule.
	 * @return one of: SCOPE_THIS_ORG_ONLY, SCOPE_SUB_ORGS_NO_OVERRIDE, SCOPE_SUB_ORGS_ALLOW_OVERRIDE.
	 */
	public String getOrgScope() {
<span class="nc" id="L602">		String scope = m_autoProcessingRule.getOrgScope();</span>
<span class="nc bnc" id="L603" title="All 4 branches missed.">		if (scope == null || scope.length() == 0) {</span>
<span class="nc" id="L604">			return AutoProcessingRule.SCOPE_SUB_ORGS_ALLOW_OVERRIDE; //default</span>
		}

<span class="nc" id="L607">		return scope;</span>
	}

	/**
	 * Set the organization scope for this  auto processing rule.
	 * @param orgScope - Must be one of: SCOPE_THIS_ORG_ONLY, SCOPE_SUB_ORGS_NO_OVERRIDE, SCOPE_SUB_ORGS_ALLOW_OVERRIDE.
	 */
	public void setOrgScope(String orgScope) {
<span class="nc" id="L615">		m_autoProcessingRule.setOrgScope(orgScope);</span>
<span class="nc" id="L616">	}</span>

	/**
	 * Display the container containing radio buttons for choosing whether to apply this
	 * rule to this org only, to children with no override, and to children with
	 * override. This is for the org-scoping consistency project in V11.
	 */
	private ListContainerPC getOrgScopeContainer() {
<span class="nc" id="L624">		m_orgScopePC.setTitle(i18n(m_rmBundle, RmWebBundleKey.LABEL_APPLY_SUB_ORG));</span>
<span class="nc" id="L625">		m_orgScopePC.setWidth(FORMPC_WIDTH);</span>
<span class="nc" id="L626">		m_orgScopePC.setWrapperCSSClass(FWRAPPER);</span>
<span class="nc" id="L627">		m_orgScopePC.setLastRowType(ListContainerPC.LAST_ROW_NONE);</span>
<span class="nc" id="L628">		m_orgScopePC.setHeaderCSSSClass(HEADERCSS);</span>

<span class="nc" id="L630">		String selectedChoice = getOrgScope();</span>

<span class="nc" id="L632">		m_orgScopePC.addRowData(getApplyToThisOrgOnlyRow(selectedChoice));</span>
<span class="nc" id="L633">		m_orgScopePC.addRowData(getApplyToSubOrgsNoOverrideRow(selectedChoice));</span>
<span class="nc" id="L634">		m_orgScopePC.addRowData(getApplyToSubOrgsAllowOverrideRow(selectedChoice));</span>

<span class="nc" id="L636">		return m_orgScopePC;</span>
	}

	/**
	 * Return the radio button and label for the &quot;Apply to this org only&quot; option.
	 * @param selectedChoice - selected radio button value
	 * @return String - radio button html for the row
	 */
	private String getApplyToThisOrgOnlyRow(String selectedChoice) {
<span class="nc" id="L645">		String rowLabel = m_localizer.i18n(m_rmBundle, RmWebBundleKey.LABEL_APPLY_THIS_ORG);</span>

<span class="nc" id="L647">		return  HtmlChoiceInput.makeRadioInput(ORG_SCOPE_FN,</span>
                    RADIO_SCOPE_THIS_ORG_ONLY,
                    &quot;&quot;, //label
<span class="nc" id="L650">                    selectedChoice.equals(RADIO_SCOPE_THIS_ORG_ONLY), //isSelected</span>
                    false,  //isDisabled,
                    JSUtil.ON_CHANGE) //onClickJS
                + rowLabel;
	}

	/**
	 * Return the radio button and label for the &quot;Apply to sub-orgs (no override)&quot; option.
	 * @param selectedChoice - selected radio button value
	 * @return String - radio button html for the row
	 */
	private String getApplyToSubOrgsNoOverrideRow(String selectedChoice) {
<span class="nc" id="L662">		String rowLabel = m_localizer.i18n(m_rmBundle, RmWebBundleKey.LABEL_APPLY_SUB_ORG_NO_OVERRIDE);</span>

<span class="nc" id="L664">		return  HtmlChoiceInput.makeRadioInput(ORG_SCOPE_FN,</span>
                    RADIO_SCOPE_SUB_ORGS_NO_OVERRIDE,
                    &quot;&quot;, //label
<span class="nc" id="L667">                    selectedChoice.equals(RADIO_SCOPE_SUB_ORGS_NO_OVERRIDE), //isSelected</span>
                    false,  //isDisabled,
                    JSUtil.ON_CHANGE) //onClickJS
                + rowLabel;
	}

	/**
	 * Return the radio button and label for the &quot;Apply to sub-orgs (no override)&quot; option.
	 * @param selectedChoice - selected radio button value
	 * @return String - radio button html for the row
	 */
	private String getApplyToSubOrgsAllowOverrideRow(String selectedChoice) {
<span class="nc" id="L679">        String rowLabel = m_localizer.i18n(m_rmBundle, RmWebBundleKey.LABEL_APPLY_SUB_ORG_OVERRIDE);</span>
        
<span class="nc" id="L681">        return  HtmlChoiceInput.makeRadioInput(ORG_SCOPE_FN,</span>
                    RADIO_SCOPE_SUB_ORGS_ALLOW_OVERRIDE,
                    &quot;&quot;, //label
<span class="nc" id="L684">                    selectedChoice.equals(RADIO_SCOPE_SUB_ORGS_ALLOW_OVERRIDE), //isSelected</span>
                    false,  //isDisabled,
                    JSUtil.ON_CHANGE) //onClickJS
                + rowLabel;
    }

	private String[] getValidationKeys() {
<span class="nc bnc" id="L691" title="All 2 branches missed.">		if (m_pageType.equals(RENDER_SHIFT_BID_PAGE)) {</span>
<span class="nc" id="L692">			return SB_VALIDATION_KEYS;</span>
<span class="nc bnc" id="L693" title="All 2 branches missed.">		} else if (m_pageType.equals(RENDER_TIME_OFF_PAGE)) {</span>
<span class="nc" id="L694">			return TO_VALIDATION_KEYS;</span>
<span class="nc bnc" id="L695" title="All 2 branches missed.">		} else if (m_pageType.equals(RENDER_TIME_OFF_WITHDRAW_PAGE)) {</span>
<span class="nc" id="L696">			return TO_WITHDRAW_VALIDATION_KEYS;</span>
<span class="nc bnc" id="L697" title="All 2 branches missed.">		} else if (m_pageType.equals(RENDER_CUSTOM_SHIFT_PAGE)) {</span>
<span class="nc" id="L698">			return CS_VALIDATION_KEYS;</span>
<span class="nc bnc" id="L699" title="All 2 branches missed.">		} else if (m_pageType.equals(RENDER_FLEX_TIME_PAGE)) {</span>
<span class="nc" id="L700">			return FT_VALIDATION_KEYS;</span>
<span class="nc bnc" id="L701" title="All 2 branches missed.">		} else if (m_pageType.equals(RENDER_SHIFT_SWAP_WITHDRAW_PAGE)) {</span>
<span class="nc" id="L702">			return SSW_VALIDATION_KEYS;</span>
		} else {
<span class="nc" id="L704">			return SS_VALIDATION_KEYS;</span>
		}
	}

	/**
	 * @param dayRangeChoice - selected radio button value
	 * @param rCode - request type code &quot;TO&quot;/&quot;SS&quot;/SB&quot;
	 * @return String - radio button html for All Requests option
	 */
	private String getAllOptionRow(String dayRangeChoice, String rCode) {

<span class="nc bnc" id="L715" title="All 2 branches missed.">		String key = (rCode.equals(&quot;SS&quot;)) ? </span>
<span class="nc" id="L716">				i18n(m_rmBundle, RmWebBundleKey.ORG_RM_FILING_RULE_SS_ALL_LABEL) :</span>
<span class="nc" id="L717">				i18n(rmEjbBundle, RmEjbBundleKey.ORG_RM_FILING_RULE_LIST_ALL_REQUESTS_LABEL);</span>
<span class="nc" id="L718">		return HtmlChoiceInput.makeRadioInput(DAY_RANGE_FN,	//name</span>
				DAYRANGE_ALL_DAYS,	//value sent to server if selected
				&quot; &quot;, //label
<span class="nc" id="L721">				dayRangeChoice.equals(DAYRANGE_ALL_DAYS),	//isSelected</span>
<span class="nc" id="L722">				getDisabled(), 	//isDisabled,</span>
				JSUtil.ON_CHANGE)	//onClickJS
				+ key;
	}

	/**
	 * @return String - TO activities selector code and its label
	 */
	private String getActivitySelectionRow() {

<span class="nc bnc" id="L732" title="All 2 branches missed.">		ID id = (m_autoProcessingRule != null) ? m_autoProcessingRule.getActivityId() : null;</span>
<span class="nc bnc" id="L733" title="All 2 branches missed.">		String activityIdString = (id != null) ? id.toString() : &quot;&quot;;</span>
<span class="nc" id="L734">		String selectInput = HtmlUtil.makeSelectInput(TIME_OFF_ACTIVITY_ID_FN,</span>
				activityIdString, JSUtil.ON_CHANGE, m_timeOffTypeList);

<span class="nc" id="L737">		Object args[] = new Object[] { selectInput };</span>
<span class="nc" id="L738">		return m_localizer.i18n(m_rmBundle, RmWebBundleKey.ORG_RM_FILING_RULE_LIST_TO_TYPE_LABEL, args);</span>
	}

	/**
	 * @param dayRangeChoice - selected radio button value
	 * @return String - radio button html for day type selector option
	 */
	private String getDayTypeSelectionRow(String dayRangeChoice) {

<span class="nc bnc" id="L747" title="All 2 branches missed.">		String dayType = (m_autoProcessingRule.getDayType() == null) ? &quot;&quot; : m_autoProcessingRule.getDayType();</span>
<span class="nc" id="L748">		String selectInput = HtmlUtil.makeSelectInput(DAY_TYPES_FN, dayType, JSUtil.ON_CHANGE, m_dayTypeList);</span>

<span class="nc" id="L750">		Object args[] = new Object[] { selectInput };</span>
<span class="nc" id="L751">		String dayTypeLabel = m_localizer.i18n(rmEjbBundle, RmEjbBundleKey.ORG_RM_FILING_RULE_LIST_FOR_DAYS_LABEL, args);</span>

<span class="nc" id="L753">		return	HtmlChoiceInput.makeRadioInput(DAY_RANGE_FN,</span>
					DAYRANGE_DAY_TYPE,
					&quot; &quot;,	//label
<span class="nc" id="L756">					dayRangeChoice.equals(DAYRANGE_DAY_TYPE),	//isSelected</span>
<span class="nc" id="L757">					getDisabled(), 	//isDisabled,</span>
					JSUtil.ON_CHANGE)	//onClickJS
				+ dayTypeLabel;
	}

	/**
	 * @param dayRangeChoice - selected radio button value
	 * @return String - radio button html for day range picker option
	 */
	private String getDayRangeRow(String dayRangeChoice){

<span class="nc" id="L768">		Object args[] = new Object[]{ getDateRangeUI() };</span>
<span class="nc" id="L769">		String rangeLabel = m_localizer.i18n(rmEjbBundle,</span>
				RmEjbBundleKey.ORG_RM_FILING_RULE_LIST_FROM_DATE_LABEL, args);
		
<span class="nc" id="L772">		return	HtmlChoiceInput.makeRadioInput(DAY_RANGE_FN,</span>
					DAYRANGE_DATES,
					&quot; &quot;,	//label
<span class="nc" id="L775">					dayRangeChoice.equals(DAYRANGE_DATES),	//isSelected</span>
<span class="nc" id="L776">					getDisabled(),</span>
					JSUtil.ON_CHANGE)
				+ rangeLabel;
	}

	/**
	 * @return String - html code for date range picker for the rule
	 */
	private String getDateRangeUI() {
<span class="nc" id="L785">		Calendar aStartCal = Calendar.getInstance(m_orgTimeZone, m_locale);</span>
<span class="nc bnc" id="L786" title="All 2 branches missed.">		Date startDate = (m_autoProcessingRule != null) ? m_autoProcessingRule.getStartDate() : null;</span>
<span class="nc bnc" id="L787" title="All 2 branches missed.">		if (startDate != null) {</span>
<span class="nc" id="L788">			aStartCal.setTime(startDate);</span>
		}
<span class="nc" id="L790">		LocalDate startLdt = new LocalDate(aStartCal);</span>
<span class="nc" id="L791">		m_dateRangePC.getStartDatePickerPC().setDate(startLdt);</span>

<span class="nc" id="L793">		Calendar aEndCal = Calendar.getInstance(m_orgTimeZone, m_locale);</span>
<span class="nc bnc" id="L794" title="All 2 branches missed.">		Date endDate = (m_autoProcessingRule != null) ? m_autoProcessingRule.getEndDate() : null;</span>
<span class="nc bnc" id="L795" title="All 2 branches missed.">		if (endDate != null) {</span>
<span class="nc" id="L796">			aEndCal.setTime(endDate);</span>
		} else {
<span class="nc" id="L798">			aEndCal.add(Calendar.DATE, 1);</span>
		}
<span class="nc" id="L800">		LocalDate endLdt = new LocalDate(aEndCal);</span>
<span class="nc" id="L801">		m_dateRangePC.getEndDatePickerPC().setDate(endLdt);</span>

<span class="nc" id="L803">		m_dateRangePC.initForDisplay();</span>
<span class="nc" id="L804">		return m_dateRangePC.toString();</span>
	}

	//================
	/**
	 * The class must extract the parameters for the validation rules.
	 */
	@Override
	public boolean extractParameters(HttpServletRequest request) {
		// Default booleans for extraction of parameter
<span class="nc" id="L814">		m_autoProcessingRule.setApproval(false);</span>
<span class="nc" id="L815">		m_autoProcessingRule.setDenial(false);</span>
<span class="nc" id="L816">		m_autoProcessingRule.setWaitlist(false);</span>

<span class="nc" id="L818">		boolean results = super.extractParameters(request);</span>
<span class="nc" id="L819">		ArrayList validations = new ArrayList(10);</span>
<span class="nc bnc" id="L820" title="All 2 branches missed.">		for (int j = 0; j &lt; 7; j++) {</span>

			String keys[];
<span class="nc bnc" id="L823" title="All 7 branches missed.">			switch (j) {</span>
			case 0:
<span class="nc" id="L825">				keys = SS_VALIDATION_KEYS;</span>
<span class="nc" id="L826">				break;</span>
			case 1:
<span class="nc" id="L828">				keys = TO_VALIDATION_KEYS;</span>
<span class="nc" id="L829">				break;</span>
			case 2:
<span class="nc" id="L831">				keys = SB_VALIDATION_KEYS;</span>
<span class="nc" id="L832">				break;</span>
			case 3:
<span class="nc" id="L834">				keys = TO_WITHDRAW_VALIDATION_KEYS;</span>
<span class="nc" id="L835">				break;</span>
			case 4:
<span class="nc" id="L837">				keys = FT_VALIDATION_KEYS_WITHOUT_TIME_OFF;</span>
<span class="nc" id="L838">				break;</span>
			case 5:
<span class="nc" id="L840">				keys = SSW_VALIDATION_KEYS_WITHOUT_SHIFT_SWAP;</span>
<span class="nc" id="L841">				break;</span>
			default:
<span class="nc" id="L843">				keys = CS_VALIDATION_KEYS;</span>
				break;
			}

<span class="nc" id="L847">			int l = keys.length;</span>
<span class="nc bnc" id="L848" title="All 2 branches missed.">			for (int i = 0; i &lt; l; i++) {</span>
<span class="nc" id="L849">				String key = keys[i];</span>
				String param;
<span class="nc" id="L851">				param = getValidationName(&quot;approve&quot;, key);</span>
<span class="nc bnc" id="L852" title="All 2 branches missed.">				if (request.getParameter(param) != null) {</span>
<span class="nc" id="L853">					AutoProcessingValidation apv = new AutoProcessingValidation();</span>
<span class="nc" id="L854">					apv.setApprovalFlag(AutoProcessingValidation.APPROVALSTATUS_APPROVE);</span>
<span class="nc" id="L855">					apv.setBundleKey(key);</span>
<span class="nc" id="L856">					validations.add(apv);</span>
				}
<span class="nc" id="L858">				param = getValidationName(&quot;deny&quot;, key);</span>
<span class="nc bnc" id="L859" title="All 2 branches missed.">				if (request.getParameter(param) != null) {</span>
<span class="nc" id="L860">					AutoProcessingValidation apv = new AutoProcessingValidation();</span>
<span class="nc" id="L861">					apv.setApprovalFlag(AutoProcessingValidation.APPROVALSTATUS_DENY);</span>
<span class="nc" id="L862">					apv.setBundleKey(key);</span>
<span class="nc" id="L863">					validations.add(apv);</span>
				}
<span class="nc" id="L865">				param = getValidationName(&quot;waitlist&quot;, key);</span>
<span class="nc bnc" id="L866" title="All 2 branches missed.">				if (request.getParameter(param) != null) {</span>
<span class="nc" id="L867">					AutoProcessingValidation apv = new AutoProcessingValidation();</span>
<span class="nc" id="L868">					apv.setApprovalFlag(AutoProcessingValidation.APPROVALSTATUS_WAITLIST);</span>
<span class="nc" id="L869">					apv.setBundleKey(key);</span>
<span class="nc" id="L870">					validations.add(apv);</span>
				}
			}
		}
<span class="nc bnc" id="L874" title="All 2 branches missed.">		if (!validations.isEmpty()) {</span>
<span class="nc" id="L875">			m_autoProcessingRule.setAutoProcessingValidations(validations);</span>
		}
<span class="nc" id="L877">		return results;</span>
	}

	private String getValidationLabel(String vrsKey) {
<span class="nc" id="L881">		ValidationResources vrs = m_vrMap.getValResource(vrsKey);</span>
<span class="nc bnc" id="L882" title="All 2 branches missed.">		if (vrs == null) {</span>
<span class="nc" id="L883">			return vrsKey;</span>
		}

<span class="nc" id="L886">		String label = getLabel(vrs, vrsKey);</span>

<span class="nc" id="L888">		String img = HtmlUtil.imageTag(vrs.getIconPath(m_localizer));</span>

<span class="nc bnc" id="L890" title="All 2 branches missed.">		if (needsValidationByTimeOffType(vrsKey)) {</span>
			//The label is set to bold if the rule is enabled for the selected time off type using javascript. 
			//See TimeOffAutoProcessing.js
<span class="nc" id="L893">			return String.format(&quot;%s &lt;span name='%s', class='validationrule-name' &gt;%s&lt;/span&gt;&quot;, img, vrsKey, label);</span>
		}

<span class="nc bnc" id="L896" title="All 2 branches missed.">		if (isRuleEnabled(vrsKey)) {</span>
<span class="nc" id="L897">			return String.format(&quot;&lt;b&gt;%s %s&lt;/b&gt;&quot;, img, label);</span>
		}

<span class="nc" id="L900">		return img + &quot; &quot; + label;</span>

	}

	private boolean isRuleEnabled(String vrsKey) {
<span class="nc bnc" id="L905" title="All 2 branches missed.">		if (m_validationRules != null) {</span>
<span class="nc" id="L906">			ValidationRule val = (ValidationRule) m_validationRules.get(vrsKey);</span>
<span class="nc bnc" id="L907" title="All 4 branches missed.">			return (val != null &amp;&amp; val.isEnabled());</span>
		}
<span class="nc" id="L909">		return false;</span>
	}

	private String getLabel(ValidationResources vrs, String vrsKey) {
<span class="nc" id="L913">		String label = getRuleString(vrsKey);</span>
<span class="nc bnc" id="L914" title="All 2 branches missed.">		if (label != null) {</span>
<span class="nc" id="L915">			return label;</span>
		}
<span class="nc" id="L917">		return vrs.getMessage(m_localizer);</span>
	}

	/**
	 * For those rules that take parameters, we must show rule strings without parameters because
	 * we don't need to show the parameters on the auto processing page. If the rule has no
	 * parameters, we return null.
	 */
	private String getRuleString(String key) {
<span class="nc" id="L926">		String ruleStr = null;</span>
<span class="nc bnc" id="L927" title="All 2 branches missed.">		if (key.equals(ValidationRule.VALIDATION_PSS_MIN_SHIFT_SWAP_DURATION)) {</span>
<span class="nc" id="L928">			ruleStr = i18n(m_rmBundle, RmWebBundleKey.VALIDATION_PSS_MIN_SHIFT_SWAP_DURATION_JS_MSG);</span>
<span class="nc bnc" id="L929" title="All 2 branches missed.">		} else if (key.equals(ValidationRule.VALIDATION_PSS_MIN_REMAINING_SHIFT_DURATION)) {</span>
<span class="nc" id="L930">			ruleStr = i18n(m_rmBundle, RmWebBundleKey.VALIDATION_PSS_MIN_REMAINING_SHIFT_DURATION_JS_MSG);</span>
<span class="nc bnc" id="L931" title="All 2 branches missed.">		} else if (key.equals(ValidationRule.VALIDATION_PSS_MAX_SWAP_DURATION_PER_DAY)) {</span>
<span class="nc" id="L932">			ruleStr = i18n(m_rmBundle, RmWebBundleKey.VALIDATION_PSS_MAX_SWAP_DURATION_PER_DAY_JS_MSG);</span>
<span class="nc bnc" id="L933" title="All 2 branches missed.">		} else if (key.equals(ValidationRule.VALIDATION_PSS_NON_SWAPPABLE_ACTIVITIES)) {</span>
<span class="nc" id="L934">			ruleStr = i18n(m_rmBundle, RmWebBundleKey.VALIDATION_PSS_NON_SWAPPABLE_ACTIVITIES_JS_MSG);</span>
<span class="nc bnc" id="L935" title="All 2 branches missed.">		} else if (key.equals(ValidationRule.VALIDATION_PSS_SHIFT_GAP_CONDITIONS)) {</span>
<span class="nc" id="L936">			ruleStr = i18n(m_rmBundle, RmWebBundleKey.VALIDATION_PSS_SHIFT_GAP_CONDITIONS_JS_MSG);</span>
<span class="nc bnc" id="L937" title="All 2 branches missed.">		} else if (key.equals(ValidationRule.VALIDATION_PSS_MAX_ALLOWABLE_OVERLAP)) {</span>
<span class="nc" id="L938">			ruleStr = i18n(m_rmBundle, RmWebBundleKey.VALIDATION_PSS_MAX_ALLOWABLE_OVERLAP_JS_MSG);</span>
<span class="nc bnc" id="L939" title="All 2 branches missed.">		} else if (key.equals(ValidationRule.VALIDATION_PSS_MAX_APPROVED_PARTIAL_SWAPS_PER_SHIFT)) {</span>
<span class="nc" id="L940">			ruleStr = i18n(m_rmBundle, RmWebBundleKey.VALIDATION_PSS_MAX_APPROVED_PARTIAL_SWAPS_PER_SHIFT_JS_MSG);</span>
<span class="nc bnc" id="L941" title="All 2 branches missed.">		} else if (key.equals(ValidationRule.VALIDATION_SS_MAX_HOURS_ALTERNATE_MAX_HOURS_PER_DAY)) {</span>
			//&quot;Maximum hours per day {0} with an alternate maximum hours of {1} the day after the swap when the maximum 
			//hours were reached the previous day&quot;
<span class="nc" id="L944">			ruleStr = i18n(m_rmBundle, RmWebBundleKey.VALIDATION_SS_MAX_HOURS_AND_ALTERNATE_HOURS_PER_DAY_JS_MSG);</span>
<span class="nc bnc" id="L945" title="All 2 branches missed.">		} else if (key.equals(ValidationRule.VALIDATION_REQ_MIN_DURATION)) {</span>
			//&quot;Minimum duration of the request: {0} {1}.&quot;
<span class="nc" id="L947">			ruleStr = i18n(m_rmBundle, RmWebBundleKey.VALIDATION_REQ_MIN_DURATION_JS_MSG);</span>
<span class="nc bnc" id="L948" title="All 2 branches missed.">		} else if (key.equals(ValidationRule.VALIDATION_REQ_MAX_DURATION)) {</span>
<span class="nc" id="L949">			ruleStr = i18n(m_rmBundle, RmWebBundleKey.VALIDATION_REQ_MAX_DURATION_JS_MSG);</span>
<span class="nc bnc" id="L950" title="All 2 branches missed.">		} else if (key.equals(ValidationRule.VALIDATION_AVOID_CAL_EVENTS)) {</span>
<span class="nc" id="L951">			ruleStr = i18n(m_rmBundle, RmWebBundleKey.VALIDATION_AVOID_CAL_EVENTS_JS_MSG);</span>
<span class="nc bnc" id="L952" title="All 2 branches missed.">		} else if (key.equals(ValidationRule.VALIDATION_CS_MAX_SHIFT_DURATION_PER_DAY)) {</span>
<span class="nc" id="L953">			ruleStr = i18n(m_rmBundle, RmWebBundleKey.VALIDATION_CS_MAX_SHIFT_DURATION_PER_DAY_JS_MSG);</span>
<span class="nc bnc" id="L954" title="All 2 branches missed.">		} else if (key.equals(ValidationRule.VALIDATION_CS_MIN_SHIFT_DURATION_PER_DAY)) {</span>
<span class="nc" id="L955">			ruleStr = i18n(m_rmBundle, RmWebBundleKey.VALIDATION_CS_MIN_SHIFT_DURATION_PER_DAY_JS_MSG);</span>
<span class="nc bnc" id="L956" title="All 2 branches missed.">		} else if (key.equals(ValidationRule.VALIDATION_VTO_REDUCE_NET_STAFFING_SURPLUS)) {</span>
<span class="nc" id="L957">			ruleStr = i18n(m_rmBundle, RmWebBundleKey.VALIDATION_VTO_REDUCE_NET_STAFFING_SURPLUS_JS_MSG);</span>
<span class="nc bnc" id="L958" title="All 2 branches missed.">		} else if (key.equals(ValidationRule.VALIDATION_CS_FULFILLS_NET_STAFFING_SHORTAGE)) {</span>
<span class="nc" id="L959">			ruleStr = i18n(m_rmBundle, RmWebBundleKey.VALIDATION_CS_FULFILLS_NET_STAFFING_SHORTAGE_JS_MSG);</span>
<span class="nc bnc" id="L960" title="All 2 branches missed.">		} else if (key.equals(ValidationRule.VALIDATION_FT_MAX_DURATION)) {</span>
<span class="nc" id="L961">			ruleStr = i18n(m_rmBundle, RmWebBundleKey.VALIDATION_FT_MAX_DURATION_JS_MSG);</span>
<span class="nc bnc" id="L962" title="All 2 branches missed.">		} else if (key.equals(ValidationRule.VALIDATION_FT_MIN_DURATION)) {</span>
<span class="nc" id="L963">			ruleStr = i18n(m_rmBundle, RmWebBundleKey.VALIDATION_FT_MIN_DURATION_JS_MSG);</span>
<span class="nc bnc" id="L964" title="All 2 branches missed.">		} else if (key.equals(ValidationRule.VALIDATION_FT_MAX_NUMBER_MAKEUP_PER_REQUEST)) {</span>
<span class="nc" id="L965">			ruleStr = i18n(m_rmBundle, RmWebBundleKey.VALIDATION_FT_MAX_NUMBER_MAKEUP_PER_REQUEST_JS_MSG);</span>
<span class="nc bnc" id="L966" title="All 2 branches missed.">		} else if (key.equals(ValidationRule.VALIDATION_FT_MAX_NUMBER_FLEX_REQ_PER_PERIOD)) {</span>
<span class="nc" id="L967">			ruleStr = i18n(m_rmBundle, RmWebBundleKey.VALIDATION_FT_MAX_NUMBER_MAKEUP_PER_PERIOD_JS_MSG);</span>
<span class="nc bnc" id="L968" title="All 2 branches missed.">		} else if (key.equals(ValidationRule.VALIDATION_FT_MUST_OCCUR_ASAP)) {</span>
<span class="nc" id="L969">			ruleStr = i18n(m_rmBundle, RmWebBundleKey.VALIDATION_FT_MUST_OCCUR_ASAP_ERR);</span>
<span class="nc bnc" id="L970" title="All 2 branches missed.">		} else if (key.equals(ValidationRule.VALIDATION_FT_AVOID_SCHEDULED_CALENDAR_EVENTS)) {</span>
<span class="nc" id="L971">			ruleStr = i18n(m_rmBundle, RmWebBundleKey.VALIDATION_FT_AVOID_SCHEDULED_CALENDAR_EVENTS_JS_MSG);</span>
<span class="nc bnc" id="L972" title="All 2 branches missed.">		} else if (key.equals(ValidationRule.VALIDATION_FT_MAX_SHIFT_DURATION)) {</span>
<span class="nc" id="L973">			ruleStr = i18n(m_rmBundle, RmWebBundleKey.VALIDATION_FT_MAX_SHIFT_DURATION_JS_MSG);</span>
<span class="nc bnc" id="L974" title="All 2 branches missed.">		} else if (key.equals(ValidationRule.VALIDATION_SS_MAX_ONE_WAY_SWAP_PER_PERSON_PERIOD)) {</span>
<span class="nc" id="L975">			ruleStr = i18n(m_rmBundle, RmWebBundleKey.VALIDATION_SS_MAX_ONE_WAY_SWAP_PER_PERSON_PERIOD_JS_MSG);</span>
<span class="nc bnc" id="L976" title="All 2 branches missed.">		} else if (key.equals(ValidationRule.VALIDATION_SS_MAX_APPROVED_SWAP_PER_SHIFT)) {</span>
<span class="nc" id="L977">			ruleStr = i18n(m_rmBundle, RmWebBundleKey.VALIDATION_SS_MAX_APPROVED_SWAP_PER_SHIFT_JS_MSG);</span>
		}
<span class="nc" id="L979">		return ruleStr;</span>
	}

	/**
	 * Convert prefix and validation rule key to a html field name.
	 * Convert the upper case and underscore separated key name
	 * to a valid mixed case no underscore field name. For example:
	 * ABC_EFG_HIJ becomes abcEfgHij.
	 */
	private String getValidationName(String prefix, String vrsKey) {
<span class="nc" id="L989">		StringBuffer sb = new StringBuffer(32);</span>
		// This underscore is important. It is used by the custom
		// validation logic to find the validation rule checkboxes.
		// Don't remove this without changing the javascript.
<span class="nc" id="L993">		sb.append(&quot;_&quot;);</span>
<span class="nc" id="L994">		sb.append(prefix);</span>
<span class="nc" id="L995">		int l = vrsKey.length();</span>
<span class="nc" id="L996">		boolean upperCase = true;</span>
<span class="nc bnc" id="L997" title="All 2 branches missed.">		for (int i = 0; i &lt; l; i++) {</span>
<span class="nc" id="L998">			char c = vrsKey.charAt(i);</span>
<span class="nc bnc" id="L999" title="All 2 branches missed.">			if (c == '_') {</span>
<span class="nc" id="L1000">				upperCase = true;</span>
<span class="nc bnc" id="L1001" title="All 2 branches missed.">			} else if (upperCase) {</span>
<span class="nc" id="L1002">				sb.append(Character.toUpperCase(c));</span>
<span class="nc" id="L1003">				upperCase = false;</span>
			} else {
<span class="nc" id="L1005">				sb.append(Character.toLowerCase(c));</span>
			}
		}
<span class="nc" id="L1008">		return sb.toString();</span>
	}

	private boolean getValidationValue(String prefix, String vrsKey) {
<span class="nc" id="L1012">		Collection validations = m_autoProcessingRule.getAutoProcessingValidations();</span>
<span class="nc bnc" id="L1013" title="All 4 branches missed.">		if (validations == null || validations.isEmpty()) {</span>
<span class="nc" id="L1014">			return false;</span>
		}
		// a hashmap would be a little faster
<span class="nc" id="L1017">		Iterator itr = validations.iterator();</span>
<span class="nc bnc" id="L1018" title="All 2 branches missed.">		if (prefix.equals(&quot;approve&quot;)) {</span>
<span class="nc bnc" id="L1019" title="All 2 branches missed.">			while (itr.hasNext()) {</span>
				AutoProcessingValidation apv;
<span class="nc" id="L1021">				apv = (AutoProcessingValidation) itr.next();</span>
<span class="nc bnc" id="L1022" title="All 2 branches missed.">				if (apv.isApprove()) {</span>
<span class="nc bnc" id="L1023" title="All 2 branches missed.">					if (apv.getBundleKey().equals(vrsKey)) {</span>
<span class="nc" id="L1024">						return true;</span>
					}
				}
<span class="nc" id="L1027">			}</span>
<span class="nc bnc" id="L1028" title="All 2 branches missed.">		} else if (prefix.equals(&quot;deny&quot;)) {</span>
<span class="nc bnc" id="L1029" title="All 2 branches missed.">			while (itr.hasNext()) {</span>
				AutoProcessingValidation apv;
<span class="nc" id="L1031">				apv = (AutoProcessingValidation) itr.next();</span>
<span class="nc bnc" id="L1032" title="All 2 branches missed.">				if (apv.isDeny()) {</span>
<span class="nc bnc" id="L1033" title="All 2 branches missed.">					if (apv.getBundleKey().equals(vrsKey)) {</span>
<span class="nc" id="L1034">						return true;</span>
					}
				}
<span class="nc" id="L1037">			}</span>
<span class="nc bnc" id="L1038" title="All 2 branches missed.">		} else if (prefix.equals(&quot;waitlist&quot;)) {</span>
<span class="nc bnc" id="L1039" title="All 2 branches missed.">			while (itr.hasNext()) {</span>
				AutoProcessingValidation apv;
<span class="nc" id="L1041">				apv = (AutoProcessingValidation) itr.next();</span>
<span class="nc bnc" id="L1042" title="All 2 branches missed.">				if (apv.isWailist()) {</span>
<span class="nc bnc" id="L1043" title="All 2 branches missed.">					if (apv.getBundleKey().equals(vrsKey)) {</span>
<span class="nc" id="L1044">						return true;</span>
					}
				}
<span class="nc" id="L1047">			}</span>
		}
<span class="nc" id="L1049">		return false;</span>
	}

	private String getDeniedFlagLabel() {
<span class="nc" id="L1053">		return i18n(m_rmBundle, RmWebBundleKey.ORG_RM_AUTO_PROCESSING_DENY_TYPE_LABEL);</span>
	}

	private String getApprovedFlagLabel() {
<span class="nc" id="L1057">		return i18n(m_rmBundle, RmWebBundleKey.ORG_RM_AUTO_PROCESSING_APPROVE_TYPE_LABEL);</span>
	}

	private String getWaitlistFlagLabel() {
<span class="nc" id="L1061">		return i18n(m_rmBundle, RmWebBundleKey.ORG_RM_AUTO_PROCESSING_WAITLIST_TYPE_LABEL);</span>
	}

	private String getSubTypeLabel() {
<span class="nc" id="L1065">		return i18n(m_rmBundle, RmWebBundleKey.ORG_RM_FILING_RULE_LIST_TO_TYPE_LABEL);</span>
	}

	private String getAllDaysLabel() {
<span class="nc" id="L1069">		return i18n(rmEjbBundle, RmEjbBundleKey.ORG_RM_FILING_RULE_LIST_ALL_REQUESTS_LABEL);</span>
	}

	private String getDayTypeLabel() {
<span class="nc" id="L1073">		return i18n(rmEjbBundle, RmEjbBundleKey.ORG_RM_FILING_RULE_LIST_FOR_DAYS_LABEL);</span>
	}

	private String getFromDateLabel() {
<span class="nc" id="L1077">		return i18n(rmEjbBundle, RmEjbBundleKey.ORG_RM_FILING_RULE_LIST_FROM_DATE_LABEL);</span>
	}

	private String getDenyChoiceNoLabel() {
<span class="nc" id="L1081">		return i18n(m_rmBundle, RmWebBundleKey.ORG_RM_AUTO_PROCESSING_DENY_CHOICE_NO_LABEL);</span>
	}

	private String getApproveChoiceNoLabel() {
<span class="nc" id="L1085">		return i18n(m_rmBundle, RmWebBundleKey.ORG_RM_AUTO_PROCESSING_APPROVE_CHOICE_NO_LABEL);</span>
	}

	private String getWaitlistChoiceNoLabel() {
<span class="nc" id="L1089">		return i18n(m_rmBundle, RmWebBundleKey.ORG_RM_AUTO_PROCESSING_WAITLIST_CHOICE_NO_LABEL);</span>
	}

	private String getDenyChoiceYesLabel() {
<span class="nc" id="L1093">		return i18n(m_rmBundle, RmWebBundleKey.ORG_RM_AUTO_PROCESSING_DENY_CHOICE_YES_LABEL);</span>
	}

	private String getApproveChoiceYesLabel() {
<span class="nc" id="L1097">		return i18n(m_rmBundle, RmWebBundleKey.ORG_RM_AUTO_PROCESSING_APPROVE_CHOICE_YES_LABEL);</span>
	}

	private String getWaitlistChoiceYesLabel() {
<span class="nc" id="L1101">		return i18n(m_rmBundle, RmWebBundleKey.ORG_RM_AUTO_PROCESSING_WAITLIST_CHOICE_YES_LABEL);</span>
	}

	private String getDenyChoiceViolationLabel() {
<span class="nc" id="L1105">		return i18n(m_rmBundle, RmWebBundleKey.ORG_RM_AUTO_PROCESSING_DENY_CHOICE_VIOLATION_LABEL);</span>
	}

	private String getApproveChoiceViolationLabel() {
<span class="nc" id="L1109">		return i18n(m_rmBundle, RmWebBundleKey.ORG_RM_AUTO_PROCESSING_APPROVE_CHOICE_VIOLATION_LABEL);</span>
	}

	private String getWaitlistChoiceViolationLabel() {
<span class="nc" id="L1113">		return i18n(m_rmBundle, RmWebBundleKey.ORG_RM_AUTO_PROCESSING_WAITLIST_CHOICE_VIOLATION_LABEL);</span>
	}

	/**
	 * Returns the Start Date
	 * @return  String Identifies the start date
	 */
	private String getStartDateUI() {
<span class="nc" id="L1121">		LocalDate ldt = null;</span>

<span class="nc" id="L1123">		Calendar aCal = Calendar.getInstance(m_orgTimeZone, m_locale);</span>
<span class="nc" id="L1124">		Date startDate = m_autoProcessingRule.getStartDate();</span>
<span class="nc bnc" id="L1125" title="All 2 branches missed.">		if (startDate != null) {</span>
<span class="nc" id="L1126">			aCal.setTime(startDate);</span>
		}
<span class="nc" id="L1128">		ldt = new LocalDate(aCal);</span>

<span class="nc" id="L1130">		m_dateRangePC.getStartDatePickerPC().setDate(ldt);</span>
<span class="nc" id="L1131">		return &quot;&quot;;</span>
	}

	/**
	 * Returns the End Date
	 * @return  String Identifies the end date
	 */
	private String getEndDateUI() {
<span class="nc" id="L1139">		LocalDate ldt = null;</span>
<span class="nc" id="L1140">		Calendar aCal = Calendar.getInstance(m_orgTimeZone, m_locale);</span>
<span class="nc" id="L1141">		Date endDate = m_autoProcessingRule.getEndDate();</span>
<span class="nc bnc" id="L1142" title="All 2 branches missed.">		if (endDate != null) {</span>
<span class="nc" id="L1143">			aCal.setTime(endDate);</span>
		} else {
<span class="nc" id="L1145">			aCal.add(Calendar.DATE, 1);</span>
		}
<span class="nc" id="L1147">		ldt = new LocalDate(aCal);</span>

<span class="nc" id="L1149">		m_dateRangePC.getEndDatePickerPC().setDate(ldt);</span>
<span class="nc" id="L1150">		m_dateRangePC.initForDisplay();</span>
<span class="nc" id="L1151">		return m_dateRangePC.toString();</span>
	}

	public void setTimeOffActivityId(String id) {
<span class="nc" id="L1155">		m_autoProcessingRule.setActivityId(new ID(id));</span>
<span class="nc" id="L1156">	}</span>

	public String getTimeOffActivityId() {
<span class="nc" id="L1159">		ID id = m_autoProcessingRule.getActivityId();</span>
<span class="nc bnc" id="L1160" title="All 2 branches missed.">		if (id == null) {</span>
<span class="nc" id="L1161">			return &quot;&quot;;</span>
		}
<span class="nc" id="L1163">		return id.toString();</span>
	}

	public void setRequestType(String requestType) {
<span class="nc" id="L1167">		m_autoProcessingRule.setRequestType(requestType);</span>
<span class="nc" id="L1168">	}</span>

	public String getRequestType() {
<span class="nc" id="L1171">		return m_autoProcessingRule.getRequestType();</span>
	}

	public void setDayRange(String dayRange) {
<span class="nc" id="L1175">		m_autoProcessingRule.setDayRange(dayRange);</span>
<span class="nc" id="L1176">	}</span>

	public String getDayRange() {
<span class="nc" id="L1179">		return m_autoProcessingRule.getDayRange();</span>
	}

	public void setDayType(String dayType) {
<span class="nc" id="L1183">		m_autoProcessingRule.setDayType(dayType);</span>
<span class="nc" id="L1184">	}</span>

	public Date[] getDateRange() {
<span class="nc" id="L1187">		return new Date[] { m_autoProcessingRule.getStartDate(), m_autoProcessingRule.getEndDate() };</span>
	}

	public void setDateRange(Date dateRange[]) {
<span class="nc" id="L1191">		m_autoProcessingRule.setStartDate(dateRange[0]);</span>
<span class="nc" id="L1192">		m_autoProcessingRule.setEndDate(dateRange[0]);</span>
<span class="nc" id="L1193">	}</span>

	public void setDateRange(Date startDate, Date endDate) {
<span class="nc" id="L1196">		m_autoProcessingRule.setStartDate(startDate);</span>
<span class="nc" id="L1197">		m_autoProcessingRule.setEndDate(endDate);</span>
<span class="nc" id="L1198">	}</span>

	public void setDateRangeStart(Date startDate) {
<span class="nc" id="L1201">		m_autoProcessingRule.setStartDate(startDate);</span>
<span class="nc" id="L1202">	}</span>

	public void setDateRangeEnd(Date endDate) {
<span class="nc" id="L1205">		m_autoProcessingRule.setEndDate(endDate);</span>
<span class="nc" id="L1206">	}</span>

	public String getDayType() {
<span class="nc" id="L1209">		return m_autoProcessingRule.getDayType();</span>
	}

	public void setStartDate(Date startDate) {
<span class="nc" id="L1213">		m_autoProcessingRule.setStartDate(startDate);</span>
<span class="nc" id="L1214">	}</span>

	public Date getStartDate() {
<span class="nc" id="L1217">		return m_autoProcessingRule.getStartDate();</span>
	}

	public void setEndDate(Date endDate) {
<span class="nc" id="L1221">		m_autoProcessingRule.setEndDate(endDate);</span>
<span class="nc" id="L1222">	}</span>

	public Date getEndDate() {
<span class="nc" id="L1225">		return m_autoProcessingRule.getEndDate();</span>
	}

	public void setApprovedFlag(boolean approvedFlag) {
<span class="nc" id="L1229">		m_autoProcessingRule.setApproval(approvedFlag);</span>
<span class="nc" id="L1230">	}</span>

	public String getApprovedFlag() {
<span class="nc bnc" id="L1233" title="All 2 branches missed.">		return m_autoProcessingRule.isApproval() ? &quot;true&quot; : &quot;false&quot;;</span>
	}

	public void setWaitlistFlag(boolean waitlistFlag) {
<span class="nc" id="L1237">		m_autoProcessingRule.setWaitlist(waitlistFlag);</span>
<span class="nc" id="L1238">	}</span>

	public String getWaitlistFlag() {
<span class="nc bnc" id="L1241" title="All 2 branches missed.">		return m_autoProcessingRule.isWaitlist() ? &quot;true&quot; : &quot;false&quot;;</span>
	}

	public void setDeniedFlag(boolean deniedFlag) {
<span class="nc" id="L1245">		m_autoProcessingRule.setDenial(deniedFlag);</span>
<span class="nc" id="L1246">	}</span>

	public String getDeniedFlag() {
<span class="nc bnc" id="L1249" title="All 2 branches missed.">		return m_autoProcessingRule.isDenial() ? &quot;true&quot; : &quot;false&quot;;</span>
	}

	public void setApproveChoice(String approveChoice) {
<span class="nc" id="L1253">		m_autoProcessingRule.setApprovalType(approveChoice);</span>
<span class="nc" id="L1254">	}</span>

	public String getApproveChoice() {
<span class="nc" id="L1257">		String type = m_autoProcessingRule.getApprovalType();</span>
<span class="nc bnc" id="L1258" title="All 2 branches missed.">		if (StringUtil.isEmpty(type)) {</span>
<span class="nc" id="L1259">			return APPROVAL_DENIAL_TYPE_NO;</span>
		}
<span class="nc" id="L1261">		return type;</span>
	}

	public void setDenyChoice(String denyChoice) {
<span class="nc" id="L1265">		m_autoProcessingRule.setDenialType(denyChoice);</span>
<span class="nc" id="L1266">	}</span>

	public String getDenyChoice() {
<span class="nc" id="L1269">		String type = m_autoProcessingRule.getDenialType();</span>
<span class="nc bnc" id="L1270" title="All 2 branches missed.">		if (StringUtil.isEmpty(type)) {</span>
<span class="nc" id="L1271">			return APPROVAL_DENIAL_TYPE_NO;</span>
		}
<span class="nc" id="L1273">		return type;</span>
	}

	public void setWaitlistChoice(String waitlistChoice) {
<span class="nc" id="L1277">		m_autoProcessingRule.setWaitlistType(waitlistChoice);</span>
<span class="nc" id="L1278">	}</span>

	public String getWaitlistChoice() {
<span class="nc" id="L1281">		String type = m_autoProcessingRule.getWaitlistType();</span>
<span class="nc bnc" id="L1282" title="All 2 branches missed.">		if (StringUtil.isEmpty(type)) {</span>
<span class="nc" id="L1283">			return APPROVAL_DENIAL_TYPE_NO;</span>
		}
<span class="nc" id="L1285">		return type;</span>
	}

<span class="nc" id="L1288">	private final String TO_VALIDATION_KEYS[] = RmSetupUtil.getTimeOffKeys(LicenseUtil.isAdvancedRMLicense());</span>
	
<span class="nc" id="L1290">	private static String TO_WAITLIST_VALIDATION_KEYS[] = {</span>
		ValidationRulesMap.VALIDATION_AVAILABLE_TO_HRS,
		ValidationRulesMap.VALIDATION_AVOID_BLACKOUT,
		//ValidationRulesMap.VALIDATION_ENOUGH_TO_HRS,
	};

<span class="nc" id="L1296">	private static String SS_VALIDATION_KEYS[] = RmSetupUtil.getShiftSwapAutoProcessingKeys(LicenseUtil.isAdvancedRMLicense()); </span>

<span class="nc" id="L1298">	private static String SB_VALIDATION_KEYS[] = {</span>
		ValidationRulesMap.VALIDATION_SB_COMPLY_RULES,
		ValidationRulesMap.VALIDATION_SB_COMPLY_HRS,
		ValidationRulesMap.VALIDATION_SB_COMPLY_SKILLS,
		ValidationRulesMap.VALIDATION_SB_COMPLY_AT_LEAST_SKILLS,
		ValidationRulesMap.VALIDATION_SB_COMPLY_HOO,
	};
<span class="nc" id="L1305">	private static String TO_WITHDRAW_VALIDATION_KEYS[] = {</span>
		ValidationRulesMap.VALIDATION_APPROVED_TO_WITHDRAW_COMPLY_FILINGRULE
	};
	
<span class="nc" id="L1309">	private static String CS_VALIDATION_KEYS[] = {</span>
		ValidationRulesMap.VALIDATION_CS_FULFILLS_NET_STAFFING_SHORTAGE,
		ValidationRulesMap.VALIDATION_CS_MAX_SHIFT_DURATION_PER_DAY,
		ValidationRulesMap.VALIDATION_CS_MIN_SHIFT_DURATION_PER_DAY,
		ValidationRulesMap.VALIDATION_CS_MAX_CONSECUTIVE_WORKING_DAYS,
		ValidationRulesMap.VALIDATION_CS_MIN_TIME_BETWEEN_SHIFT_ASSIGNMENTS,
		ValidationRulesMap.VALIDATION_CS_COMPLY_RULES,
		ValidationRulesMap.VALIDATION_CS_COMPLY_HRS,
		ValidationRulesMap.VALIDATION_CS_COMPLY_HOO,		
		ValidationRulesMap.VALIDATION_CS_TIMEOFF_OVERLAP,
		ValidationRulesMap.VALIDATION_CS_UNAVAILABILITY_OVERLAP,
		ValidationRulesMap.VALIDATION_CS_PUBLISHED_PERIOD
	};


<span class="nc" id="L1324">	private final String FT_VALIDATION_KEYS[] = RmSetupUtil.getFlexTimeAutoProcessingKeys();</span>
<span class="nc" id="L1325">	private final String FT_VALIDATION_KEYS_WITHOUT_TIME_OFF[] = RmSetupUtil.getFlexTimeKeys();</span>

<span class="nc" id="L1327">	private final String SSW_VALIDATION_KEYS[] = RmSetupUtil.getShiftSwapWithdrawlAutoProcessingKeys();</span>
<span class="nc" id="L1328">	private final String SSW_VALIDATION_KEYS_WITHOUT_SHIFT_SWAP[] = RmSetupUtil.getShiftSwapWithdrawlKeys();</span>

	private boolean getDisabled() {
<span class="nc bnc" id="L1331" title="All 2 branches missed.">		if (m_pageType.equals(RENDER_TIME_OFF_PAGE)) {</span>
<span class="nc bnc" id="L1332" title="All 2 branches missed.">			if (m_timeOffTypeList.isEmpty()) {</span>
<span class="nc" id="L1333">				return true;</span>
			}
		}
<span class="nc" id="L1336">		return false;</span>
	}

	public String getOnChangeSectionFld(String radioGroup, String prefix, String keys[]) {
<span class="nc" id="L1340">		StringBuilder sb = new StringBuilder();</span>
<span class="nc" id="L1341">		sb.append(&quot;onChangeAPSection(this, '&quot;).append(radioGroup).append(&quot;', [&quot;);</span>
<span class="nc" id="L1342">		int l = keys.length;</span>
<span class="nc bnc" id="L1343" title="All 2 branches missed.">		for (int i = 0; i &lt; l; i++) {</span>
<span class="nc bnc" id="L1344" title="All 2 branches missed.">			if (i != 0) {</span>
<span class="nc" id="L1345">				sb.append(&quot;,&quot;);</span>
			}
<span class="nc" id="L1347">			sb.append(&quot;'&quot;);</span>
<span class="nc" id="L1348">			sb.append(getValidationName(prefix, keys[i]));</span>
<span class="nc" id="L1349">			sb.append(&quot;'&quot;);</span>
		}
<span class="nc" id="L1351">		sb.append(&quot;]); &quot;).append(JSUtil.ON_CHANGE);</span>
<span class="nc" id="L1352">		return sb.toString();</span>
	}

	public String getOnChangeChoiceFld(String prefix, String keys[], boolean disableOnFalse) {
<span class="nc" id="L1356">		StringBuilder sb = new StringBuilder();</span>
<span class="nc" id="L1357">		sb.append(&quot;onChangeAPChoice(this, &quot;);</span>
<span class="nc bnc" id="L1358" title="All 2 branches missed.">		if (disableOnFalse) {</span>
<span class="nc" id="L1359">			sb.append(&quot;false&quot;);</span>
		} else {
<span class="nc" id="L1361">			sb.append(&quot;true&quot;);</span>
		}
<span class="nc" id="L1363">		sb.append(&quot;, [&quot;);</span>
<span class="nc" id="L1364">		int l = keys.length;</span>
<span class="nc bnc" id="L1365" title="All 2 branches missed.">		for (int i = 0; i &lt; l; i++) {</span>
<span class="nc bnc" id="L1366" title="All 2 branches missed.">			if (i != 0) {</span>
<span class="nc" id="L1367">				sb.append(&quot;,&quot;);</span>
			}
<span class="nc" id="L1369">			sb.append(&quot;'&quot;);</span>
<span class="nc" id="L1370">			sb.append(getValidationName(prefix, keys[i]));</span>
<span class="nc" id="L1371">			sb.append(&quot;'&quot;);</span>
		}
<span class="nc" id="L1373">		sb.append(&quot;]); &quot;).append(JSUtil.ON_CHANGE);</span>
<span class="nc" id="L1374">		return sb.toString();</span>
	}

	public void setApplied(boolean isApplied) {
<span class="nc" id="L1378">		m_autoProcessingRule.setApplied(isApplied);</span>
<span class="nc" id="L1379">	}</span>

	public String getApplied() {
<span class="nc bnc" id="L1382" title="All 2 branches missed.">		return m_autoProcessingRule.getApplied() ? &quot;true&quot; : &quot;false&quot;;</span>
	}

	/**
	 * Get the request sub type. Currently, it is only used by the Custom Shift request type.
	 * @return the request sub type. This is an integer whose bits give information which may
	 * vary by request type.
	 */
	public int getRequestSubType() {
<span class="nc" id="L1391">		return m_autoProcessingRule.getRequestSubType();</span>
	}

	/**
	 * Set the request sub type. Currently, it is only used by the Custom Shift request type.
	 * @param requestSubType - the request sub type. This is an integer whose bits give information which may
	 * vary by request type.
	 */
	public void setRequestSubType(int type) {
<span class="nc" id="L1400">		m_autoProcessingRule.setRequestSubType(type);</span>
<span class="nc" id="L1401">	}</span>

	/**
	 * Sets whether this filing rule includes the &quot;Regular New Shift&quot; Custom Shift request sub-type. 
	 */
	public void setRequestSubTypeRegNewShift(boolean isSet) {
<span class="nc" id="L1407">		m_autoProcessingRule.setRequestSubTypeRegNewShift(isSet);</span>
<span class="nc" id="L1408">	}</span>

	/**
	 * Sets whether this filing rule includes the &quot;Regular Shift Change&quot; Custom Shift request sub-type. 
	 */
	public void setRequestSubTypeRegShiftChange(boolean isSet) {
<span class="nc" id="L1414">		m_autoProcessingRule.setRequestSubTypeRegShiftChange(isSet);</span>
<span class="nc" id="L1415">	}</span>

	/**
	 * Sets whether this filing rule includes the &quot;OT New Shift&quot; Custom Shift request sub-type. 
	 */
	public void setRequestSubTypeOTNewShift(boolean isSet) {
<span class="nc" id="L1421">		m_autoProcessingRule.setRequestSubTypeOTNewShift(isSet);</span>
<span class="nc" id="L1422">	}</span>

	/**
	 * Sets whether this filing rule includes the &quot;OT Shift Change&quot; Custom Shift request sub-type. 
	 */
	public void setRequestSubTypeOTShiftChange(boolean isSet) {
<span class="nc" id="L1428">		m_autoProcessingRule.setRequestSubTypeOTShiftChange(isSet);</span>
<span class="nc" id="L1429">	}</span>

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>