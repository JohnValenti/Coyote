<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>ActivityFSUsage.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">QA Code Coverage</a> &gt; <a href="index.source.html" class="el_package">com.bluepumpkin.web.bbm.activity</a> &gt; <span class="el_source">ActivityFSUsage.java</span></div><h1>ActivityFSUsage.java</h1><pre class="source lang-java linenums">package com.bluepumpkin.web.bbm.activity;

import com.bluepumpkin.common.datatypes.ID;
import com.bluepumpkin.common.util.StringUtil;
import com.bluepumpkin.ejb.bbm.activity.model.Activity;
import com.bluepumpkin.ejb.bbm.activity.model.ActivityProperties;
import com.bluepumpkin.ejb.core.CoreEJBCreateException;
import com.bluepumpkin.ejb.core.CoreManagerFactory;
import com.bluepumpkin.web.bbm.l10n.BbmWebBundleKey;
import com.witness.ejb.core.licensing.LicenseKeys;
import com.witness.web.uif.system.RequestContext;
import com.witness.web.uif.util.HtmlUtil;
import com.witness.web.uif.util.html.HtmlChoiceInput;
import com.witness.web.uif.util.js.JSUtil;
import com.witness.web.uif.validator.IsNonNegativeIntegerFieldValidator;

import javax.servlet.http.HttpServletRequest;

import java.rmi.RemoteException;
import java.util.ResourceBundle;

/**
 * Title:        ActivityFSUsage
 * Description:  A collapsable container for the Activity's FS usage attributes
 * Copyright:    Copyright (c) 2002
 * Company:      Blue Pumpkin Software, Inc
 * @author       Shimon Kakon
 * @version 1.0
 */

public class ActivityFSUsage extends ActivityUsage {

	public ActivityFSUsage(RequestContext context, ResourceBundle bundle, Activity activity, ActivityProperties activityProperties) {
<span class="fc" id="L34">		super(context, bundle, activity, activityProperties);</span>
<span class="fc" id="L35">	}</span>

	public boolean extractParameters(HttpServletRequest request) {
		// Work
<span class="fc" id="L39">		String boolValue = request.getParameter(ActivityFields.USED_IN_SHIFT_FN);</span>
<span class="fc bfc" id="L40" title="All 2 branches covered.">		m_activity.setUsedInShift((!StringUtil.isEmpty(boolValue))? true: false);</span>
		
		// Break
		// use hidden value, because if checkbox is disabled, value is not set in getParameter
<span class="fc" id="L44">		boolValue = request.getParameter(ActivityFields.USED_IN_SHIFT_EVENT_H_FN); //(&quot;usedInShiftEventH&quot;);</span>
<span class="fc bfc" id="L45" title="All 4 branches covered.">		m_activity.setUsedInShiftEvent((boolValue != null &amp;&amp; boolValue.equals(&quot;true&quot;))? true: false);</span>
		
		// Calendar
		//boolValue = request.getParameter(ActivityFields.USED_IN_CALENDAR_EVENT_FN);
		//m_activity.setUsedInCalendarEvent((!StringUtil.isEmpty(boolValue))? true: false);

<span class="fc" id="L51">		boolValue = request.getParameter(ActivityFields.USED_IN_CALENDAR_EVENT_H_FN);</span>
<span class="fc bfc" id="L52" title="All 4 branches covered.">		m_activity.setUsedInCalendarEvent((boolValue != null &amp;&amp; boolValue.equals(&quot;true&quot;))? true: false);</span>

		
		
		// Unavailability
<span class="fc" id="L57">		boolValue = request.getParameter(ActivityFields.UNAVAILABILITY_FN);</span>
<span class="pc bpc" id="L58" title="1 of 2 branches missed.">		m_activity.setUnavailability((!StringUtil.isEmpty(boolValue))? true: false);</span>
		
		
		//set resourceconstraint
<span class="fc" id="L62">		String strValue = request.getParameter(ActivityFields.RESOURCE_CONSTRAINT_FN);</span>
<span class="fc bfc" id="L63" title="All 2 branches covered.">		int val = StringUtil.isEmpty(strValue)</span>
<span class="fc" id="L64">				? 0 : Integer.parseInt(strValue);</span>
<span class="fc" id="L65">		m_activity.setResourceConstraint(val);</span>
		
		
		//set cell group size
<span class="fc" id="L69">		strValue = request.getParameter(ActivityFields.CELL_GROUP_SIZE_FN);</span>
<span class="fc bfc" id="L70" title="All 2 branches covered.">		val = StringUtil.isEmpty(strValue)</span>
<span class="fc" id="L71">				? 0 : Integer.parseInt(strValue);</span>
<span class="fc" id="L72">		m_activity.setCellGroupSize(val);</span>
		
<span class="fc" id="L74">		return true;</span>
	}

	public void initForDisplay() {
<span class="pc bpc" id="L78" title="1 of 2 branches missed.">		if (m_isInitializedForDisplay) return;</span>
		else {
<span class="fc" id="L80">			super.initForDisplay();</span>
<span class="pc bpc" id="L81" title="1 of 2 branches missed.">			if(m_visible) {</span>
<span class="fc" id="L82">				setTitle(i18n(m_bundle, BbmWebBundleKey.ACTIVITY_TITLE_FS_USAGE));</span>
<span class="fc" id="L83">				setName(&quot;fsUsage&quot;);</span>
			}
		}
<span class="fc" id="L86">	}</span>


	protected void initFields() {
<span class="pc bpc" id="L90" title="1 of 2 branches missed.">		if(m_visible) {</span>
<span class="fc" id="L91">			m_fields = new StringBuffer(512);</span>
<span class="fc" id="L92">			int i = 0;</span>
			// Work
<span class="pc bpc" id="L94" title="3 of 4 branches missed.">			switch (m_displayMap[ActivityFields.USED_IN_SHIFT]) {</span>
				case ActivityFields.EDITABLE:
<span class="fc" id="L96">					m_fields.append(addToTemplate(BbmWebBundleKey.ACTIVITY_LABEL_FORM_USED_IN_SHIFT, i++));</span>
<span class="fc" id="L97">					addComponent(HtmlChoiceInput.makeChkBoxInput(ActivityFields.USED_IN_SHIFT_FN, &quot;true&quot;,</span>
<span class="fc" id="L98">						&quot;&quot;, m_activity.isUsedInShift(), isFieldDisabled(ActivityFields.USED_IN_SHIFT), ACTIVITY_FIELD_ON_CHANGE));</span>
<span class="fc" id="L99">					break;</span>
				case ActivityFields.DISPLAYABLE:
<span class="nc" id="L101">					m_fields.append(addToTemplate(BbmWebBundleKey.ACTIVITY_LABEL_FORM_USED_IN_SHIFT, i++));</span>
<span class="nc" id="L102">					addComponent(m_localizer.formatYesNo(m_activity.isUsedInShift()));</span>
				case ActivityFields.NON_DISPLAYABLE:
<span class="nc" id="L104">					addHiddenField(ActivityFields.USED_IN_SHIFT);</span>
<span class="nc" id="L105">					break;</span>
			default:
<span class="nc" id="L107">				throw new IllegalStateException();</span>
			}

			// Break
<span class="pc bpc" id="L111" title="3 of 4 branches missed.">			switch (m_displayMap[ActivityFields.USED_IN_SHIFT_EVENT]) {</span>
				case ActivityFields.EDITABLE:
<span class="fc" id="L113">					m_fields.append(addToTemplate(BbmWebBundleKey.ACTIVITY_LABEL_FORM_USED_IN_SHIFT_EVENT, i++));</span>
<span class="fc" id="L114">					addComponent(HtmlChoiceInput.makeChkBoxInput(ActivityFields.USED_IN_SHIFT_EVENT_FN, &quot;true&quot;,</span>
<span class="fc" id="L115">						&quot;&quot;, m_activity.isUsedInShiftEvent(), isFieldDisabled(ActivityFields.USED_IN_SHIFT_EVENT), ACTIVITY_FIELD_ON_CHANGE));</span>
					// use hidden field, because if checkbox is disabled, the value for usedInShiftEvent is not set in parameters
<span class="fc" id="L117">					addHiddenField(ActivityFields.USED_IN_SHIFT_EVENT_H);</span>
<span class="fc" id="L118">					break;</span>
				case ActivityFields.DISPLAYABLE:
<span class="nc" id="L120">					m_fields.append(addToTemplate(BbmWebBundleKey.ACTIVITY_LABEL_FORM_USED_IN_SHIFT_EVENT, i++));</span>
<span class="nc" id="L121">					addComponent(m_localizer.formatYesNo(m_activity.isUsedInShiftEvent()));</span>
<span class="nc bnc" id="L122" title="All 2 branches missed.">					m_hiddenFields.append(HtmlUtil.makeHiddenInput(ActivityFields.USED_IN_SHIFT_EVENT_H_FN, (m_activity.isUsedInShiftEvent()? &quot;true&quot; : &quot;&quot;) ));</span>
				case ActivityFields.NON_DISPLAYABLE:
<span class="nc" id="L124">					addHiddenField(ActivityFields.USED_IN_SHIFT_EVENT);</span>
<span class="nc" id="L125">					break;</span>
			default:
<span class="nc" id="L127">				throw new IllegalStateException();</span>
			}

			// Calendar
<span class="pc bpc" id="L131" title="3 of 4 branches missed.">			switch (m_displayMap[ActivityFields.USED_IN_CALENDAR_EVENT]) {</span>
				case ActivityFields.EDITABLE:
<span class="fc" id="L133">					m_fields.append(addToTemplate(BbmWebBundleKey.ACTIVITY_LABEL_FORM_USED_IN_CALENDAR_EVENT, i++));					</span>
<span class="fc" id="L134">					HtmlChoiceInput checkbox = HtmlChoiceInput.createChkBoxInput(ActivityFields.USED_IN_CALENDAR_EVENT_FN, &quot;true&quot;,</span>
<span class="fc" id="L135">							&quot;&quot;, m_activity.isUsedInCalendarEvent(), isFieldDisabled(ActivityFields.USED_IN_CALENDAR_EVENT), ACTIVITY_FIELD_ON_CHANGE);</span>
					//checkbox.setIsValueSubmittedWhenDisabled(true); 
<span class="fc" id="L137">					addComponent(checkbox.getHtmlDisplay());</span>
					
					// use hidden field, because if checkbox is disabled, the value for usedIncalendarEvent is not set in parameters
<span class="fc" id="L140">					addHiddenField(ActivityFields.USED_IN_CALENDAR_EVENT_H);</span>
					
<span class="fc" id="L142">					break;</span>
				case ActivityFields.DISPLAYABLE:
<span class="nc" id="L144">					m_fields.append(addToTemplate(BbmWebBundleKey.ACTIVITY_LABEL_FORM_USED_IN_CALENDAR_EVENT, i++));</span>
<span class="nc" id="L145">					addComponent(m_localizer.formatYesNo(m_activity.isUsedInCalendarEvent()));</span>
<span class="nc bnc" id="L146" title="All 2 branches missed.">					m_hiddenFields.append(HtmlUtil.makeHiddenInput(ActivityFields.USED_IN_CALENDAR_EVENT_H_FN, (m_activity.isUsedInCalendarEvent()? &quot;true&quot; : &quot;&quot;) ));</span>
				case ActivityFields.NON_DISPLAYABLE:
<span class="nc" id="L148">					addHiddenField(ActivityFields.USED_IN_CALENDAR_EVENT);</span>
<span class="nc" id="L149">					break;</span>
			default:
<span class="nc" id="L151">				throw new IllegalStateException();</span>
			}

			// Unavailability
<span class="pc bpc" id="L155" title="3 of 4 branches missed.">			switch (m_displayMap[ActivityFields.UNAVAILABILITY]) {</span>
				case ActivityFields.EDITABLE:
<span class="fc" id="L157">					m_fields.append(addToTemplate(BbmWebBundleKey.ACTIVITY_LABEL_UNAVAILABILITY, i++));</span>
<span class="fc" id="L158">					addComponent(HtmlChoiceInput.makeChkBoxInput(ActivityFields.UNAVAILABILITY_FN, &quot;true&quot;,</span>
<span class="fc" id="L159">						&quot;&quot;, m_activity.isUnavailability(), isFieldDisabled(ActivityFields.UNAVAILABILITY), ACTIVITY_FIELD_ON_CHANGE));</span>
<span class="fc" id="L160">					break;</span>
				case ActivityFields.DISPLAYABLE:
<span class="nc" id="L162">					m_fields.append(addToTemplate(BbmWebBundleKey.ACTIVITY_LABEL_UNAVAILABILITY, i++));</span>
<span class="nc" id="L163">					addComponent(m_localizer.formatYesNo(m_activity.isUnavailability()));</span>
				case ActivityFields.NON_DISPLAYABLE:
<span class="nc" id="L165">					addHiddenField(ActivityFields.UNAVAILABILITY);</span>
<span class="nc" id="L166">					break;</span>
			default:
<span class="nc" id="L168">				throw new IllegalStateException();</span>
			}
			
			// Roesource
<span class="pc bpc" id="L172" title="3 of 4 branches missed.">			switch (m_displayMap[ActivityFields.RESOURCE_CONSTRAINT]) {</span>
				case ActivityFields.EDITABLE:
<span class="fc" id="L174">					m_fields.append(addToTemplate(BbmWebBundleKey.RESOURCE_CONSTRAINT, i++));</span>
<span class="fc" id="L175">					addComponent(HtmlUtil.makeTextInput(ActivityFields.RESOURCE_CONSTRAINT_FN, 5, 5, getResourceConstraintString(), JSUtil.ON_CHANGE));</span>
<span class="fc" id="L176">					addValidator(new IsNonNegativeIntegerFieldValidator(this, ActivityFields.RESOURCE_CONSTRAINT_FN,</span>
						BbmWebBundleKey.RESOURCE_CONSTRAINT, BbmWebBundleKey.BUNDLE_NAME));
<span class="fc" id="L178">					break;</span>
				case ActivityFields.DISPLAYABLE:
<span class="nc" id="L180">					m_fields.append(addToTemplate(BbmWebBundleKey.RESOURCE_CONSTRAINT, i++));</span>
<span class="nc" id="L181">					addComponent(getResourceConstraintString());</span>
				case ActivityFields.NON_DISPLAYABLE:
<span class="nc" id="L183">					addHiddenField(ActivityFields.RESOURCE_CONSTRAINT);</span>
<span class="nc" id="L184">					break;</span>
			default:
<span class="nc" id="L186">				throw new IllegalStateException();</span>
			}
			
			
			// Cellgroupsize
<span class="pc bpc" id="L191" title="3 of 4 branches missed.">			switch (m_displayMap[ActivityFields.CELL_GROUP_SIZE]) {</span>
				case ActivityFields.EDITABLE:
<span class="fc" id="L193">					m_fields.append(addToTemplate(BbmWebBundleKey.CELL_GROUP_SIZE, i++));</span>
<span class="fc" id="L194">					addComponent(HtmlUtil.makeTextInput(ActivityFields.CELL_GROUP_SIZE_FN, 5, 5, getCellGroupSizeString(), JSUtil.ON_CHANGE));</span>
<span class="fc" id="L195">					addValidator(new IsNonNegativeIntegerFieldValidator(this, ActivityFields.CELL_GROUP_SIZE_FN,</span>
						BbmWebBundleKey.CELL_GROUP_SIZE, BbmWebBundleKey.BUNDLE_NAME));
<span class="fc" id="L197">					break;</span>
				case ActivityFields.DISPLAYABLE:
<span class="nc" id="L199">					m_fields.append(addToTemplate(BbmWebBundleKey.CELL_GROUP_SIZE, i++));</span>
<span class="nc" id="L200">					addComponent(getCellGroupSizeString());</span>
				case ActivityFields.NON_DISPLAYABLE:
<span class="nc" id="L202">					addHiddenField(ActivityFields.CELL_GROUP_SIZE);</span>
<span class="nc" id="L203">					break;</span>
			default:
<span class="nc" id="L205">				throw new IllegalStateException();</span>
			}
			
			//Can be worked Remotely
<span class="pc bpc" id="L209" title="1 of 2 branches missed.">			if (hasPoolingLicense()) {</span>
<span class="pc bpc" id="L210" title="3 of 4 branches missed.">				switch (m_displayMap[ActivityFields.ALLOW_REMOTE]) {</span>
				case ActivityFields.EDITABLE:
<span class="fc" id="L212">					m_fields.append(addToTemplate(BbmWebBundleKey.ACTIVITY_LABEL_CAN_REMOTE, i++));</span>
<span class="fc" id="L213">					addComponent(HtmlChoiceInput.makeChkBoxInput(ActivityFields.CAN_WORK_REMOTELY_FN, &quot;true&quot;,</span>
<span class="fc" id="L214">						&quot;&quot;, m_activity.isAllowRemote(), isFieldDisabled(ActivityFields.ALLOW_REMOTE), ACTIVITY_FIELD_ON_CHANGE));</span>
<span class="fc" id="L215">					break;</span>
				case ActivityFields.DISPLAYABLE:
<span class="nc" id="L217">					m_fields.append(addToTemplate(BbmWebBundleKey.ACTIVITY_LABEL_CAN_REMOTE, i++));</span>
<span class="nc" id="L218">					addComponent(m_localizer.formatYesNo(m_activity.isAllowRemote()));</span>
				case ActivityFields.NON_DISPLAYABLE:
<span class="nc" id="L220">					addHiddenField(ActivityFields.ALLOW_REMOTE);</span>
<span class="nc" id="L221">					break;</span>
                default:
<span class="nc" id="L223">                    throw new IllegalStateException();</span>
				}
			}
	
<span class="fc" id="L227">		}</span>
		else { // container is invisible
<span class="nc" id="L229">			addHiddenField(ActivityFields.USED_IN_SHIFT);</span>
<span class="nc" id="L230">			addHiddenField(ActivityFields.USED_IN_SHIFT_EVENT);</span>
<span class="nc" id="L231">			addHiddenField(ActivityFields.USED_IN_CALENDAR_EVENT);</span>
<span class="nc" id="L232">			addHiddenField(ActivityFields.UNAVAILABILITY);</span>
<span class="nc" id="L233">			addHiddenField(ActivityFields.RESOURCE_CONSTRAINT);</span>
<span class="nc" id="L234">			addHiddenField(ActivityFields.CELL_GROUP_SIZE);</span>
<span class="nc" id="L235">			addHiddenField(ActivityFields.ALLOW_REMOTE);</span>
		}
<span class="fc" id="L237">	}</span>

	private boolean hasPoolingLicense() {
        try {
<span class="fc" id="L241">            return CoreManagerFactory.getLicenseManager().isLicensed(LicenseKeys.APP_CAMP_POOLING);</span>
<span class="nc" id="L242">        } catch (CoreEJBCreateException e) {</span>
<span class="nc" id="L243">        } catch (RemoteException e) {</span>
<span class="nc" id="L244">        }</span>
<span class="nc" id="L245">        return false;</span>
	}
	
	public boolean getUsedInShift() {
<span class="nc" id="L249">		return m_activity.isUsedInShift();</span>
	}

	public void setUsedInShift(boolean usedInShift) {
<span class="nc" id="L253">		m_activity.setUsedInShift(usedInShift);</span>
<span class="nc" id="L254">	}</span>

	public boolean getUsedInShiftEvent() {
<span class="nc" id="L257">		return m_activity.isUsedInShiftEvent();</span>
	}

	public void setUsedInShiftEvent(boolean usedInShiftEvent) {
<span class="nc" id="L261">		m_activity.setUsedInShiftEvent(usedInShiftEvent);</span>
<span class="nc" id="L262">	}</span>

	public boolean getUsedIncalendarEvent() {
<span class="nc" id="L265">		return m_activity.isUsedInCalendarEvent();</span>
	}

	public void setUsedIncalendarEvent(boolean useInCalendarEvent) {
<span class="nc" id="L269">		 m_activity.setUsedInCalendarEvent(useInCalendarEvent);</span>
<span class="nc" id="L270">	}</span>
	public boolean getUnavailability() {
<span class="nc" id="L272">		return m_activity.isUnavailability();</span>
	}

	public void setUnavailability(boolean unavailability) {
<span class="nc" id="L276">		m_activity.setUnavailability(unavailability);</span>
<span class="nc" id="L277">	}</span>

<span class="fc" id="L279">	public void setDefaultValues() {};</span>

	private void addHiddenField(short field) {
<span class="pc bpc" id="L282" title="8 of 10 branches missed.">		switch(field) {</span>
			case ActivityFields.USED_IN_SHIFT:
<span class="nc bnc" id="L284" title="All 2 branches missed.">				m_hiddenFields.append(HtmlUtil.makeHiddenInput(ActivityFields.USED_IN_SHIFT_FN, (m_activity.isUsedInShift()? &quot;true&quot; : &quot;&quot;) ));</span>
<span class="nc" id="L285">				break;</span>
			case ActivityFields.USED_IN_SHIFT_EVENT:
<span class="nc bnc" id="L287" title="All 2 branches missed.">				m_hiddenFields.append(HtmlUtil.makeHiddenInput(ActivityFields.USED_IN_SHIFT_EVENT_FN, (m_activity.isUsedInShiftEvent()? &quot;true&quot; : &quot;&quot;) ));</span>
<span class="nc" id="L288">				break;</span>
			case ActivityFields.USED_IN_SHIFT_EVENT_H:
<span class="pc bpc" id="L290" title="1 of 2 branches missed.">				m_hiddenFields.append(HtmlUtil.makeHiddenInput(ActivityFields.USED_IN_SHIFT_EVENT_H_FN, (m_activity.isUsedInShiftEvent()? &quot;true&quot; : &quot;&quot;) ));</span>
<span class="fc" id="L291">				break;</span>
			case ActivityFields.USED_IN_CALENDAR_EVENT:
<span class="nc bnc" id="L293" title="All 2 branches missed.">				m_hiddenFields.append(HtmlUtil.makeHiddenInput(ActivityFields.USED_IN_CALENDAR_EVENT_FN, (m_activity.isUsedInCalendarEvent()? &quot;true&quot; : &quot;&quot;) ));</span>
<span class="nc" id="L294">				break;</span>
			case ActivityFields.USED_IN_CALENDAR_EVENT_H:
<span class="pc bpc" id="L296" title="1 of 2 branches missed.">				m_hiddenFields.append(HtmlUtil.makeHiddenInput(ActivityFields.USED_IN_CALENDAR_EVENT_H_FN, (m_activity.isUsedInCalendarEvent()? &quot;true&quot; : &quot;&quot;) ));</span>
<span class="fc" id="L297">				break;</span>
			case ActivityFields.UNAVAILABILITY:
<span class="nc bnc" id="L299" title="All 2 branches missed.">				m_hiddenFields.append(HtmlUtil.makeHiddenInput(ActivityFields.UNAVAILABILITY_FN, (m_activity.isUnavailability()? &quot;true&quot; : &quot;&quot;) ));</span>
<span class="nc" id="L300">				break;</span>
			case ActivityFields.RESOURCE_CONSTRAINT:
<span class="nc" id="L302">				m_hiddenFields.append(HtmlUtil.makeHiddenInput(ActivityFields.RESOURCE_CONSTRAINT_FN, getResourceConstraintString()));</span>
<span class="nc" id="L303">				break;</span>
			case ActivityFields.CELL_GROUP_SIZE:
<span class="nc" id="L305">				m_hiddenFields.append(HtmlUtil.makeHiddenInput(ActivityFields.CELL_GROUP_SIZE_FN, getCellGroupSizeString()));</span>
<span class="nc" id="L306">				break;</span>
			case ActivityFields.ALLOW_REMOTE:
<span class="nc" id="L308">				m_hiddenFields.append(HtmlUtil.makeHiddenInput(ActivityFields.CAN_WORK_REMOTELY_FN, getCellGroupSizeString()));</span>
				break;
		}
<span class="fc" id="L311">		m_hiddenFields.append(&quot;\n&quot;);</span>
<span class="fc" id="L312">	}</span>
	
	private boolean isFieldDisabled(short field) {
<span class="fc bfc" id="L315" title="All 5 branches covered.">		switch(field) {</span>
			case ActivityFields.USED_IN_SHIFT_EVENT:
<span class="fc" id="L317">				return (m_activity.isUsedInShift());</span>
			case ActivityFields.USED_IN_CALENDAR_EVENT:
				
<span class="pc bpc" id="L320" title="3 of 4 branches missed.">				if (m_hasMedia &amp;&amp; m_hasProjectMedia)</span>
<span class="nc" id="L321">					return true;				</span>
<span class="pc bpc" id="L322" title="1 of 2 branches missed.">				if(m_activity.isUsedInCalendarEvent()) </span>
<span class="nc" id="L323">					return false;				</span>
<span class="fc" id="L324">				return m_hasMedia;</span>
			case ActivityFields.UNAVAILABILITY:
<span class="pc bpc" id="L326" title="1 of 2 branches missed.">				if(m_activity.isUnavailability()) return false;</span>
<span class="fc" id="L327">				return m_hasMedia;</span>
			case ActivityFields.ALLOW_REMOTE:
<span class="fc" id="L329">				ID id = m_activity.getActivityCategoryId();</span>
<span class="pc bpc" id="L330" title="1 of 4 branches missed.">				return (id!=null &amp;&amp; id.equals(new ID(-5003)));</span>
		}
<span class="fc" id="L332">		return false;</span>
	}
	
	private String getResourceConstraintString() {
<span class="fc" id="L336">		return Integer.toString(m_activity.getResourceConstraint());</span>
	}
	
	private String getCellGroupSizeString() {
<span class="fc" id="L340">		return Integer.toString(m_activity.getCellGroupSize());</span>
	}

	/**
	 * Create a HTML checkbox input object
	 *
	 * @param name - name of the input
	 * @param value - value sent to the server when selected
	 * @param label - associated label, needed for code 508 compliance
	 * @param isChecked - mark checked
	 * @param isDisabled - mark Disabled
	 * @param onClickJS - javascript code to handle onClick event, default is JSUtil.ON_CHANGE
	 * @return HtmlChoiceInput object
	 */
	public MyHtmlChoiceInput createChkBoxInput(String name, String value, String label,
			boolean isChecked, boolean isDisabled, String onClickJS) 
	{
<span class="nc" id="L357">		MyHtmlChoiceInput input = new MyHtmlChoiceInput();</span>
<span class="nc" id="L358">		input.setIsMultiSelect(true);</span>
<span class="nc" id="L359">		input.setInputName(name);</span>
<span class="nc" id="L360">		input.setValue(value);</span>
<span class="nc" id="L361">		input.setLabel(label);</span>
<span class="nc" id="L362">		input.setIsChecked(isChecked);</span>
<span class="nc" id="L363">		input.setIsDisabled(isDisabled);</span>
<span class="nc" id="L364">		input.setOnClickJS(onClickJS);</span>
<span class="nc" id="L365">		return input;</span>
	}
	
	
<span class="nc" id="L369">	protected class MyHtmlChoiceInput extends HtmlChoiceInput</span>
	{
		/**
		 * Append Input Html. We override the parent class because we need
		 * the hidden field to always be there so the names of the checkbox and the hidden 
		 * field are always consistent, making them accessible from JavaScript for dynamic
		 * toggling.
		 */
		protected void appendInput(StringBuffer sb) 
		{
<span class="nc" id="L379">			boolean isAddHiddenFN = isValueSubmittedWhenDisabled(); //m_isDisabled &amp;&amp;</span>
<span class="nc" id="L380">			appendInput(sb, isMultiSelect(), isAddHiddenFN);</span>
<span class="nc" id="L381">		}</span>
	}

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>