<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>FlexRequestMakeup.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">QA Code Coverage</a> &gt; <a href="index.source.html" class="el_package">com.bluepumpkin.ejb.rm.requests.timeoff.model</a> &gt; <span class="el_source">FlexRequestMakeup.java</span></div><h1>FlexRequestMakeup.java</h1><pre class="source lang-java linenums">package com.bluepumpkin.ejb.rm.requests.timeoff.model;

import java.util.ArrayList;
import java.util.Calendar;
import java.util.Collection;
import java.util.Collections;
import java.util.Date;

import com.bluepumpkin.common.datatypes.ID;
import com.bluepumpkin.common.datatypes.TimeRange;
import com.bluepumpkin.ejb.bbm.vo.FieldInfo;
import com.bluepumpkin.ejb.bbm.vo.ValueObjectBase;
import com.bluepumpkin.ejb.rm.requests.common.validation.Validatable;
import com.bluepumpkin.ejb.rm.requests.common.validation.ValidationCache;
import com.bluepumpkin.ejb.rm.requests.common.validation.ValidationResult;

public class FlexRequestMakeup extends ValueObjectBase implements Comparable&lt;FlexRequestMakeup&gt;, Validatable {

	private static final long serialVersionUID = 1L;
<span class="nc" id="L20">	private static FieldInfo m_fieldInfo = new FlexRequestMakeupFieldInfo();</span>
<span class="nc" id="L21">	private Collection&lt;ValidationResult&gt; m_validationResults = null;</span>

	public FlexRequestMakeup() {
<span class="nc" id="L24">		super();</span>
<span class="nc" id="L25">	}</span>

	@Override
	protected FieldInfo getFieldInfo() {
<span class="nc" id="L29">		return m_fieldInfo;</span>
	}

	// Getters &amp; Setters

	@Override
	public ID getID() {
<span class="nc" id="L36">		return getFieldValueID(FlexRequestMakeupFieldInfo.FLEXREQUESTMAKEUP_I_ID);</span>
	}

	@Override
	public void setID(ID id) {
<span class="nc" id="L41">		setFieldValue(FlexRequestMakeupFieldInfo.FLEXREQUESTMAKEUP_I_ID, id);</span>
<span class="nc" id="L42">	}</span>

	public ID getTORequestID() {
<span class="nc" id="L45">		return getFieldValueID(FlexRequestMakeupFieldInfo.FLEXREQUESTMAKEUP_I_TIMEOFFREQUESTID);</span>
	}

	public void setTORequestID(ID toRequestID) {
<span class="nc" id="L49">		setFieldValue(FlexRequestMakeupFieldInfo.FLEXREQUESTMAKEUP_I_TIMEOFFREQUESTID, toRequestID);</span>
<span class="nc" id="L50">	}</span>

	public ID getSPID() {
<span class="nc" id="L53">		return getFieldValueID(FlexRequestMakeupFieldInfo.FLEXREQUESTMAKEUP_I_SPID);</span>
	}

	public void setSPID(ID val) {
<span class="nc" id="L57">		setFieldValue(FlexRequestMakeupFieldInfo.FLEXREQUESTMAKEUP_I_SPID, val);</span>
<span class="nc" id="L58">	}</span>

	public Date getStartTime() {
<span class="nc" id="L61">		return getFieldValueDate(FlexRequestMakeupFieldInfo.FLEXREQUESTMAKEUP_D_STARTTIME);</span>
	}

	public void setStartTime(Date val) {
<span class="nc" id="L65">		setFieldValue(FlexRequestMakeupFieldInfo.FLEXREQUESTMAKEUP_D_STARTTIME, val);</span>
<span class="nc" id="L66">	}</span>

	public Date getEndTime() {
<span class="nc" id="L69">		return getFieldValueDate(FlexRequestMakeupFieldInfo.FLEXREQUESTMAKEUP_D_ENDTIME);</span>
	}

	public void setEndTime(Date val) {
<span class="nc" id="L73">		setFieldValue(FlexRequestMakeupFieldInfo.FLEXREQUESTMAKEUP_D_ENDTIME, val);</span>
<span class="nc" id="L74">	}</span>

	public ID getExtBeforeActivityID() {
<span class="nc" id="L77">		return getFieldValueID(FlexRequestMakeupFieldInfo.FLEXREQUESTMAKEUP_I_EXTBEFOREACTIVITYID);</span>
	}

	public void setExtBeforeActivityID(ID val) {
<span class="nc" id="L81">		setFieldValue(FlexRequestMakeupFieldInfo.FLEXREQUESTMAKEUP_I_EXTBEFOREACTIVITYID, val);</span>
<span class="nc" id="L82">	}</span>

	public int getExtBeforeGap() {
<span class="nc" id="L85">		return getFieldValueInt(FlexRequestMakeupFieldInfo.FLEXREQUESTMAKEUP_N_EXTBEFOREGAP);</span>
	}

	public void setExtBeforeGap(int val) {
<span class="nc" id="L89">		setFieldValue(FlexRequestMakeupFieldInfo.FLEXREQUESTMAKEUP_N_EXTBEFOREGAP, val);</span>
<span class="nc" id="L90">	}</span>

	public int getExtBeforeDuration() {
<span class="nc" id="L93">		return getFieldValueInt(FlexRequestMakeupFieldInfo.FLEXREQUESTMAKEUP_N_EXTBEFOREDURATION);</span>
	}

	public void setExtBeforeDuration(int val) {
<span class="nc" id="L97">		setFieldValue(FlexRequestMakeupFieldInfo.FLEXREQUESTMAKEUP_N_EXTBEFOREDURATION, val);</span>
<span class="nc" id="L98">	}</span>

	public ID getExtAfterActivityID() {
<span class="nc" id="L101">		return getFieldValueID(FlexRequestMakeupFieldInfo.FLEXREQUESTMAKEUP_I_EXTAFTERACTIVITYID);</span>
	}

	public void setExtAfterActivityID(ID val) {
<span class="nc" id="L105">		setFieldValue(FlexRequestMakeupFieldInfo.FLEXREQUESTMAKEUP_I_EXTAFTERACTIVITYID, val);</span>
<span class="nc" id="L106">	}</span>

	public void setExtAfterGap(int val) {
<span class="nc" id="L109">		setFieldValue(FlexRequestMakeupFieldInfo.FLEXREQUESTMAKEUP_N_EXTAFTERGAP, val);</span>
<span class="nc" id="L110">	}</span>

	public int getExtAfterGap() {
<span class="nc" id="L113">		return getFieldValueInt(FlexRequestMakeupFieldInfo.FLEXREQUESTMAKEUP_N_EXTAFTERGAP);</span>
	}

	public void setExtAfterDuration(int val) {
<span class="nc" id="L117">		setFieldValue(FlexRequestMakeupFieldInfo.FLEXREQUESTMAKEUP_N_EXTAFTERDURATION, val);</span>
<span class="nc" id="L118">	}</span>

	public int getExtAfterDuration() {
<span class="nc" id="L121">		return getFieldValueInt(FlexRequestMakeupFieldInfo.FLEXREQUESTMAKEUP_N_EXTAFTERDURATION);</span>
	}

	/**
	 * Main shift start time (i.e. excluded extensions)
	 * @return
	 */
	public Date getShiftStartTime() {
<span class="nc" id="L129">		return getFieldValueDate(FlexRequestMakeupFieldInfo.FLEXREQUESTMAKEUP_D_SHIFTSTARTTIME);</span>
	}

	public void setShiftStartTime(Date val) {
<span class="nc" id="L133">		setFieldValue(FlexRequestMakeupFieldInfo.FLEXREQUESTMAKEUP_D_SHIFTSTARTTIME, val);</span>
<span class="nc" id="L134">	}</span>

	/**
	 * Main shift end time (i.e. excluded extensions)
	 * @return
	 */
	public Date getShiftEndTime() {
<span class="nc" id="L141">		return getFieldValueDate(FlexRequestMakeupFieldInfo.FLEXREQUESTMAKEUP_D_SHIFTENDTIME);</span>
	}

	public void setShiftEndTime(Date val) {
<span class="nc" id="L145">		setFieldValue(FlexRequestMakeupFieldInfo.FLEXREQUESTMAKEUP_D_SHIFTENDTIME, val);</span>
<span class="nc" id="L146">	}</span>

	public ID getShiftAssignmentID() {
<span class="nc" id="L149">		return getFieldValueID(FlexRequestMakeupFieldInfo.FLEXREQUESTMAKEUP_I_SHIFTASSIGNMENTID);</span>
	}

	public void setShiftAssignmentID(ID val) {
<span class="nc" id="L153">		setFieldValue(FlexRequestMakeupFieldInfo.FLEXREQUESTMAKEUP_I_SHIFTASSIGNMENTID, val);</span>
<span class="nc" id="L154">	}</span>

	// Validatable implementation

	/**
	 * @see com.bluepumpkin.ejb.rm.requests.common.validation.Validatable#getValidationResults()
	 */
	@Override
	public Collection&lt;ValidationResult&gt; getValidationResults(boolean entireBranch) {
<span class="nc bnc" id="L163" title="All 2 branches missed.">		if (m_validationResults == null) {</span>
<span class="nc" id="L164">			m_validationResults = new ArrayList&lt;ValidationResult&gt;();</span>
		}
<span class="nc" id="L166">		return m_validationResults;</span>
	}

	/**
	 * @see com.bluepumpkin.ejb.rm.requests.common.validation.Validatable#addValidationResult()
	 */
	@Override
	public void addValidationResult(ValidationResult pValidationResult) {
<span class="nc" id="L174">		getValidationResults(true).add(pValidationResult);</span>
<span class="nc" id="L175">	}</span>

	/**
	 * @see com.bluepumpkin.ejb.rm.requests.common.validation.Validatable#clearValidationResults()
	 */
	@Override
	public void clearValidationResults(boolean entireBranch) {
<span class="nc bnc" id="L182" title="All 2 branches missed.">		if (m_validationResults != null)</span>
<span class="nc" id="L183">			m_validationResults.clear();</span>
<span class="nc" id="L184">	}</span>

	/**
	 * @see com.bluepumpkin.ejb.rm.requests.common.validation.Validatable#getValidationCache()
	 */
	@Override
	public ValidationCache getValidationCache() {
<span class="nc" id="L191">		throw new UnsupportedOperationException();</span>
	}

	/**
	 * @see com.bluepumpkin.ejb.rm.requests.common.validation.Validatable#getValidationTimeRanges()
	 */
	@Override
	public Collection&lt;TimeRange&gt; getValidationTimeRanges() {
<span class="nc" id="L199">		return Collections.singleton(new TimeRange(getStartTime(), getEndTime()));</span>
	}

	public TimeRange getExtBeforeTimeRange() {
<span class="nc bnc" id="L203" title="All 2 branches missed.">		if (this.getExtBeforeActivityID() != null) {</span>
<span class="nc" id="L204">			Calendar cal = Calendar.getInstance();</span>
<span class="nc" id="L205">			cal.setTime(this.getShiftStartTime());</span>
<span class="nc" id="L206">			cal.add(Calendar.MINUTE, -(this.getExtBeforeGap()));</span>
<span class="nc" id="L207">			Date extBeforeEnd = cal.getTime();</span>
<span class="nc" id="L208">			cal.add(Calendar.MINUTE, -(this.getExtBeforeDuration()));</span>
<span class="nc" id="L209">			Date extBeforeStart = cal.getTime();</span>

<span class="nc" id="L211">			return new TimeRange(extBeforeStart, extBeforeEnd);</span>
		}

<span class="nc" id="L214">		return null;</span>
	}

	public TimeRange getExtAfterTimeRange() {
<span class="nc bnc" id="L218" title="All 2 branches missed.">		if (this.getExtAfterActivityID() != null) {</span>
<span class="nc" id="L219">			Calendar cal = Calendar.getInstance();</span>
<span class="nc" id="L220">			cal.setTime(this.getShiftEndTime());</span>
<span class="nc" id="L221">			cal.add(Calendar.MINUTE, this.getExtAfterGap());</span>
<span class="nc" id="L222">			Date extAfterStart = cal.getTime();</span>
<span class="nc" id="L223">			cal.add(Calendar.MINUTE, this.getExtAfterDuration());</span>
<span class="nc" id="L224">			Date extAfterEnd = cal.getTime();</span>

<span class="nc" id="L226">			return new TimeRange(extAfterStart, extAfterEnd);</span>
		}

<span class="nc" id="L229">		return null;</span>
	}

	/**
	 * Compare only the start dates of the two makeups.
	 */
	@Override
	public int compareTo(FlexRequestMakeup obj) {
<span class="nc" id="L237">		FlexRequestMakeup flexRequestMakeup = (FlexRequestMakeup) obj;</span>

<span class="nc bnc" id="L239" title="All 4 branches missed.">		if (flexRequestMakeup == null || flexRequestMakeup.getStartTime() == null) {</span>
<span class="nc bnc" id="L240" title="All 2 branches missed.">			if (getStartTime() == null) {</span>
<span class="nc" id="L241">				return 0;</span>
			} else {
<span class="nc" id="L243">				return 1;</span>
			}
		}

<span class="nc bnc" id="L247" title="All 2 branches missed.">		if (getStartTime() == null) {</span>
<span class="nc bnc" id="L248" title="All 4 branches missed.">			if (flexRequestMakeup == null || flexRequestMakeup.getStartTime() == null) {</span>
<span class="nc" id="L249">				return 0;</span>
			} else {
<span class="nc" id="L251">				return -1;</span>
			}
		}

<span class="nc" id="L255">		long diff = (getStartTime().getTime() - flexRequestMakeup.getStartTime().getTime());</span>
<span class="nc bnc" id="L256" title="All 2 branches missed.">		if (diff == 0) {</span>
<span class="nc" id="L257">			return 0;</span>
<span class="nc bnc" id="L258" title="All 2 branches missed.">		} else if (diff &lt; 0) {</span>
<span class="nc" id="L259">			return -1;</span>
		} else {
<span class="nc" id="L261">			return 1;</span>
		}
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>