<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>ValidationResult.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">QA Code Coverage</a> &gt; <a href="index.source.html" class="el_package">com.bluepumpkin.ejb.rm.requests.common.validation</a> &gt; <span class="el_source">ValidationResult.java</span></div><h1>ValidationResult.java</h1><pre class="source lang-java linenums">/*
 * ValidationResult.java
 *
 * Copyright (c) 2002, Blue Pumpkin Software, Inc.
 * All rights reserved.
 */
package com.bluepumpkin.ejb.rm.requests.common.validation;

import java.io.Serializable;
import java.util.Arrays;
import java.util.TimeZone;

import com.bluepumpkin.common.localization.Localizer;
import com.bluepumpkin.common.logging.Category;
import com.bluepumpkin.ejb.rm.Log;
import com.bluepumpkin.ejb.rm.requests.common.ejb.RequestUtil;


/**
 * Holds the result of executing a validation rule.  Generally, these are
 * only created for validation failures.
 */
public class ValidationResult implements Serializable {
<span class="nc" id="L24">    private static Category m_cat = Log.initCategory(ValidationResult.class.getName());</span>
    private static final long serialVersionUID = -7827970037964597200L;

    /**
      * the rule name
      */
    private String m_validatorName;

    /**
     * soft validation flag
     */
<span class="nc" id="L35">    private boolean m_isSoft = false;</span>

    /**
     * approve flag
     */
<span class="nc" id="L40">    private boolean m_approve = false;</span>

    /**
     * message bundle name
     */
<span class="nc" id="L45">    private String m_bundle = null;</span>

    /**
     * message resource name
     */
<span class="nc" id="L50">    private String m_resource = null;</span>

    /**
     * message parms
     */
<span class="nc" id="L55">    private Serializable[] m_parms = null;</span>




    /**
    * Construct a ValidationResult.
    * @param validatorName the uniquely identifying name of the validation rule
    * that produced this result.  Typically, this will be the fully qualified
    * classname of the validator.
    * @param isSoft true if this is a soft validation, false otherwise
    */
    public ValidationResult(String validatorName, boolean isSoft) {
<span class="nc" id="L68">        super();</span>
<span class="nc" id="L69">        this.m_validatorName = validatorName;</span>
<span class="nc" id="L70">        this.m_isSoft = isSoft;</span>
<span class="nc" id="L71">    }</span>





    /**
     * Tests whether or not this is the result of a soft validation rule.
     * @return true if the result of a soft validation rule.
     */
    public boolean isSoft() {
<span class="nc" id="L82">        return m_isSoft;</span>
    }

    /**
     * Get the name of the validator used to create this validation result.  Typically,
     * this is the fully specified classname of the validator.
     * @return the name of the rule that created this result
     */
	public String getValidatorName() {
<span class="nc" id="L91">	    return m_validatorName;</span>
    }

	public void setValidatorName(String m_validatorName) {
<span class="nc" id="L95">		this.m_validatorName = m_validatorName;</span>
<span class="nc" id="L96">	}</span>

	/**
	 * Set the message for this validation result.
	 * @param bundle the base name of the resource bundle that contains the
	 * translatable text for this message.
	 * @param resource the resource name of the translatable text in the bundle.
	 * @param parms an array of Serializable objects used to fill in parameters
	 * in the message.
	 */
	public void setMessage(String bundle, String resource, Serializable[] parms) {
<span class="nc" id="L107">		this.m_bundle = bundle;</span>
<span class="nc" id="L108">		this.m_resource = resource;</span>
<span class="nc" id="L109">		this.m_parms = parms;</span>
<span class="nc" id="L110">	}</span>


    /**
     * Get the localized version of the message.  Return null if the message
     * has not been set. In the odd case when the setMessage(String) method
     * has been used to set the message, m_useBundle will evaluate to true, and
     * the message will be retrieved from the field m_message.
     * @param loc the locale in which to localize the message
     * @return the localized string message or null if message has not been set
     */
	public String getLocalizedMessage(Localizer localizer, TimeZone tzView) {
<span class="nc bnc" id="L122" title="All 4 branches missed.">        if ((m_bundle == null) || (m_resource == null)) {</span>
<span class="nc" id="L123">            return null;</span>
        }
        // make a copy of m_parms to avoid side effect (of updating m_parms using localizer from the first call)
<span class="nc bnc" id="L126" title="All 4 branches missed.">        Serializable[] copyOfparms = (m_parms != null &amp;&amp; m_parms.length &gt; 0) ? Arrays.copyOf(m_parms, m_parms.length) : m_parms;</span>
<span class="nc" id="L127">        return RequestUtil.getLocalizedMessage(m_bundle, m_resource, copyOfparms, localizer, tzView);</span>
    }



    /**
     * Get the bundle set with any message, null if not set
     * @return message bundle or null if not set
     */
	public String getMessageBundle() {
<span class="nc" id="L137">        return m_bundle;</span>
    }

    /**
     * Set the approve flag if the request should get approved
     * as a result of this validation: added to support tentative timeoff request
     * to be approved if it fails the hard validation for published shift
     * @return
     */
    public void setApprove(boolean approve){
<span class="nc" id="L147">    	m_approve = approve;</span>
<span class="nc" id="L148">    }</span>

    public boolean getApprove(){
<span class="nc" id="L151">    	return m_approve;</span>
    }

    /**
     * Get the resource set with any message, null if not set
     * @return message resource name or null if not set
     */
	public String getMessageResource() {
<span class="nc" id="L159">        return m_resource;</span>
    }

    /**
     * Get the message parms, null if not set
     * @return parameters as object array or null if not set
     */
	public Object[] getMessageParms() {
<span class="nc" id="L167">        return m_parms;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>