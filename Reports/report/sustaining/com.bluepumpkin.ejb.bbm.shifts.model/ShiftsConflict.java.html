<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>ShiftsConflict.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">QA Code Coverage</a> &gt; <a href="index.source.html" class="el_package">com.bluepumpkin.ejb.bbm.shifts.model</a> &gt; <span class="el_source">ShiftsConflict.java</span></div><h1>ShiftsConflict.java</h1><pre class="source lang-java linenums">package com.bluepumpkin.ejb.bbm.shifts.model;

/**
 * Title:        Blue Pumpkin Software Basic Business Model
 * Description:
 * Copyright:    Copyright (c) 2001
 * Company:      Blue Pumpkin Software, inc
 * @author
 * @version 1.0
 */

import java.text.MessageFormat;
import java.util.*;

import com.bluepumpkin.common.datatypes.ID;
import com.bluepumpkin.common.l10n.RegionalFormatBundleKey;
import com.bluepumpkin.common.localization.Localizer;
import com.bluepumpkin.ejb.bbm.activity.model.Event;
import com.bluepumpkin.ejb.bbm.l10n.BbmEjbBundleKey;

public class ShiftsConflict implements java.lang.Comparable, java.io.Serializable,
		com.bluepumpkin.ejb.bbm.workrules.model.Alert {

	/**
	 * 
	 */
	private static final long serialVersionUID = 1L;
	public static final int SHIFT_STARTTIME = 100;
	public static final int SHIFT_DURATION = 101;
	public static final int SHIFTEVENT_SPACING = 102;
	public static final int SHIFTEVENT_STARTTIME = 103;
	public static final int SHIFTEVENT_DURATION = 104;
	public static final int SHIFTEVENT_INVALID = 105;
	public static final int WORKPATTERN_CONSISTENTSTART = 106;
	public static final int WORKPATTERN_OCCURANCE = 107;
	public static final int MIN_HOURS = 108;
	public static final int CAMPAIGN_HOO = 109;
	public static final int ORG_HOO = 110;
	public static final int SHIFT_CROSSORGDAY = 112;

	public static final int ORG_CONSECUTIVEDAY = 111;
	public static final int ORG_MINSPACING = 113;

	public static final int MEETING_ATTENDANCE = 115;
	public static final int MAX_HOURS = 116;
	public static final int WORKPATTERN_CONSISTENTSHIFTEVENT = 117;
	public static final int MEETING_ATTENDANCE_TIMEOFF = 118;
	public static final int SHIFTEVENT_MINSPACING = 119;
	public static final int SHIFTEVENT_MAXSPACING = 120;

	public static final int SHIFT_OT_DAILY = 121;
	public static final int SHIFT_OT_WEEKLY = 122;
	public static final int SHIFT_VTO_DAILY = 123;
	public static final int SHIFT_VTO_WEEKLY = 124;

	public static final int UNASSIGNED_CLASS = 125;
	public static final int ORG_MAXCONSECUTIVEDAY = 126;
	public static final int ORG_MINCONSECUTIVEDAY = 127;

	public static final int CLASS_MAX_ATTENDEE = 128;
	public static final int CLASS_MIN_ATTENDEE = 129;
	public static final int MONTHLY_MIN_HOURS = 130;
	public static final int MONTHLY_MAX_HOURS = 131;

	int confictType;
	ID workResourceId;
	String name;
	Date m_dtStart;
	Date m_dtEnd;
<span class="nc" id="L70">	String m_sWorkResouceName = &quot;&quot;;</span>
<span class="nc" id="L71">	String m_sTarget = &quot;&quot;;</span>
<span class="nc" id="L72">	double m_dAmount = 0.0;</span>
<span class="nc" id="L73">	double m_dTarget = 0.0;</span>
<span class="nc" id="L74">	int durationInMinutes = 0;</span>
<span class="nc" id="L75">	ID activityId = null;</span>
<span class="nc" id="L76">	int overlapMin = 0;</span>
<span class="nc" id="L77">	Event m_event = null;</span>
<span class="nc" id="L78">	String activityName = &quot;&quot;;</span>
<span class="nc" id="L79">	int actCount = 0;</span>
<span class="nc" id="L80">	int desiredCount = 0;</span>

	public int getActCount() {
<span class="nc" id="L83">		return actCount;</span>
	}

	public void setActCount(int actCount) {
<span class="nc" id="L87">		this.actCount = actCount;</span>
<span class="nc" id="L88">	}</span>

	public int getDesiredCount() {
<span class="nc" id="L91">		return desiredCount;</span>
	}

	public void setDesiredCount(int desiredCount) {
<span class="nc" id="L95">		this.desiredCount = desiredCount;</span>
<span class="nc" id="L96">	}</span>

<span class="nc" id="L98">	public ShiftsConflict(int eType, String sName) {</span>
<span class="nc" id="L99">		confictType = eType;</span>
<span class="nc" id="L100">		name = sName;</span>
<span class="nc" id="L101">		m_dtStart = new Date();</span>
<span class="nc" id="L102">	}</span>

<span class="nc" id="L104">	public ShiftsConflict(int eType, String sName, Date dtStart) {</span>
<span class="nc" id="L105">		confictType = eType;</span>
<span class="nc" id="L106">		name = sName;</span>
<span class="nc" id="L107">		m_dtStart = dtStart;</span>
<span class="nc" id="L108">	}</span>

<span class="nc" id="L110">	public ShiftsConflict(int eType, double dAmount, Date dtStart) {</span>
<span class="nc" id="L111">		confictType = eType;</span>
<span class="nc" id="L112">		m_dAmount = dAmount;</span>
<span class="nc" id="L113">		m_dtStart = dtStart;</span>
<span class="nc" id="L114">	}</span>

<span class="nc" id="L116">	public ShiftsConflict(int eType, String sName, Date dtStart, int durationInMin, ID activityID) {</span>
<span class="nc" id="L117">		confictType = eType;</span>
<span class="nc" id="L118">		name = sName;</span>
<span class="nc" id="L119">		m_dtStart = dtStart;</span>
<span class="nc" id="L120">		durationInMinutes = durationInMin;</span>
<span class="nc" id="L121">		activityId = activityID;</span>
<span class="nc" id="L122">	}</span>

<span class="nc" id="L124">	public ShiftsConflict(int eType, String sName, int overlapMinutes, Date dtStart, Date dtEnd, int durationInMin) {</span>
<span class="nc" id="L125">		confictType = eType;</span>
<span class="nc" id="L126">		name = sName;</span>
<span class="nc" id="L127">		overlapMin = overlapMinutes;</span>
<span class="nc" id="L128">		m_dtStart = dtStart;</span>
<span class="nc" id="L129">		m_dtEnd = dtEnd;</span>
<span class="nc" id="L130">		durationInMinutes = durationInMin;</span>
<span class="nc" id="L131">	}</span>

	public void setDoubleTarget(double dTarget) {
<span class="nc" id="L134">		m_dTarget = dTarget;</span>
<span class="nc" id="L135">	}</span>

	public void setTarget(String sTarget) {
<span class="nc" id="L138">		m_sTarget = sTarget;</span>
<span class="nc" id="L139">	}</span>

	public void setWorkResourceName(String sName) {
<span class="nc" id="L142">		m_sWorkResouceName = sName;</span>
<span class="nc" id="L143">	}</span>

	public void setWorkResourceID(ID idWorkResource) {
<span class="nc" id="L146">		workResourceId = idWorkResource;</span>
<span class="nc" id="L147">	}</span>

	public Event getEvent() {
<span class="nc" id="L150">		return m_event;</span>
	}

	public void setEvent(Event event) {
<span class="nc" id="L154">		m_event = event;</span>
<span class="nc" id="L155">	}</span>

	public void setActivityName(String name) {
<span class="nc" id="L158">		activityName = name;</span>
<span class="nc" id="L159">	}</span>

	public int getType() {
<span class="nc" id="L162">		return confictType;</span>
	}

	public ID getWorkResourceID() {
<span class="nc" id="L166">		return workResourceId;</span>
	}

	public String getDisplayStringVerticalized(Localizer locale, TimeZone tzView,
			Map&lt;String, String&gt; verticalizedStringMap) {

<span class="nc bnc" id="L172" title="All 4 branches missed.">		if (confictType != CAMPAIGN_HOO || verticalizedStringMap == null)</span>
<span class="nc" id="L173">			return getDisplayString(locale, tzView);</span>

<span class="nc" id="L175">		String formatDateTime = locale.formatDateTime(m_dtStart, tzView);</span>
<span class="nc" id="L176">		Object[] aArgs = { m_sWorkResouceName, formatDateTime };</span>

		// GMT clients may have custom strings in BPCONFIG table
<span class="nc" id="L179">		String stringCampaignHoo = verticalizedStringMap.get(BbmEjbBundleKey.CAMPAIGN_HOO);</span>
<span class="nc bnc" id="L180" title="All 2 branches missed.">		if (stringCampaignHoo == null)</span>
<span class="nc" id="L181">			return getDisplayString(locale, tzView);</span>

<span class="nc" id="L183">		return MessageFormat.format(stringCampaignHoo, aArgs);</span>
	}

	public String getDisplayString(Localizer locale, TimeZone tzView) {
<span class="nc" id="L187">		ResourceBundle pBundle = locale.getBundle(BbmEjbBundleKey.BUNDLE);</span>
<span class="nc" id="L188">		String formateDate = locale.formatDate(m_dtStart, tzView, RegionalFormatBundleKey.DATE_FORMAT);</span>
<span class="nc" id="L189">		String formatDateTime = locale.formatDateTime(m_dtStart, tzView);</span>

<span class="nc bnc" id="L191" title="All 2 branches missed.">		if (confictType == ORG_CONSECUTIVEDAY) {</span>
<span class="nc" id="L192">			Object[] aArgs = { m_sWorkResouceName, &quot;&quot; + (int) m_dAmount, formateDate };</span>
<span class="nc" id="L193">			return MessageFormat.format(locale.i18n(pBundle, BbmEjbBundleKey.SHIFTS_MAX_CONSEC_DAYS), aArgs);</span>
<span class="nc bnc" id="L194" title="All 2 branches missed.">		} else if (confictType == ORG_MINSPACING) {</span>
<span class="nc" id="L195">			Object[] aArgs = { m_sWorkResouceName, locale.formatDurationInMins((int) m_dTarget),</span>
<span class="nc" id="L196">					locale.formatDurationInMins((int) m_dAmount), formateDate };</span>
<span class="nc" id="L197">			return MessageFormat.format(locale.i18n(pBundle,BbmEjbBundleKey.SHIFTS_MIN_TIME_BETWEEN_SHIFTS), aArgs);</span>
<span class="nc bnc" id="L198" title="All 2 branches missed.">		} else if (confictType == MIN_HOURS) {</span>
<span class="nc" id="L199">			Object[] aArgs = { m_sWorkResouceName, locale.formatDurationInMins((int) m_dTarget),</span>
<span class="nc" id="L200">					locale.formatDurationInDecimalHours((int) m_dAmount), formateDate };</span>
<span class="nc" id="L201">			return MessageFormat.format(locale.i18n(pBundle,BbmEjbBundleKey.SHIFTS_MIN_HOURS), aArgs);</span>
<span class="nc bnc" id="L202" title="All 2 branches missed.">		} else if (confictType == SHIFT_DURATION) {</span>
<span class="nc" id="L203">			Object[] aArgs = { m_sWorkResouceName, name, formateDate };</span>
<span class="nc" id="L204">			return MessageFormat.format(locale.i18n(pBundle,BbmEjbBundleKey.SHIFT_DURATION), aArgs);</span>
<span class="nc bnc" id="L205" title="All 2 branches missed.">		} else if (confictType == SHIFT_STARTTIME) {</span>
<span class="nc" id="L206">			Object[] aArgs = { m_sWorkResouceName, name, formateDate };</span>
<span class="nc" id="L207">			return MessageFormat.format(locale.i18n(pBundle,BbmEjbBundleKey.SHIFT_STARTTIME), aArgs);</span>
<span class="nc bnc" id="L208" title="All 2 branches missed.">		} else if (confictType == SHIFTEVENT_DURATION) {</span>
<span class="nc" id="L209">			Object[] aArgs = { m_sWorkResouceName, name, formateDate };</span>
<span class="nc" id="L210">			return MessageFormat.format(locale.i18n(pBundle,BbmEjbBundleKey.SHIFTEVENT_DURATION), aArgs);</span>
<span class="nc bnc" id="L211" title="All 2 branches missed.">		} else if (confictType == SHIFTEVENT_STARTTIME) {</span>
<span class="nc" id="L212">			Object[] aArgs = { m_sWorkResouceName, name, formatDateTime };</span>
<span class="nc" id="L213">			return MessageFormat.format(locale.i18n(pBundle,BbmEjbBundleKey.SHIFTEVENT_STARTTIME), aArgs);</span>
<span class="nc bnc" id="L214" title="All 2 branches missed.">		} else if (confictType == SHIFTEVENT_MINSPACING) {</span>
<span class="nc" id="L215">			Object[] aArgs = { m_sWorkResouceName, new Integer((int) m_dAmount), formatDateTime };</span>
<span class="nc" id="L216">			return MessageFormat.format(locale.i18n(pBundle,BbmEjbBundleKey.SHIFTEVENT_MINSPACING), aArgs);</span>
<span class="nc bnc" id="L217" title="All 2 branches missed.">		} else if (confictType == SHIFTEVENT_MAXSPACING) {</span>
<span class="nc" id="L218">			Object[] aArgs = { m_sWorkResouceName, new Integer((int) m_dAmount), formatDateTime };</span>
<span class="nc" id="L219">			return MessageFormat.format(locale.i18n(pBundle,BbmEjbBundleKey.SHIFTEVENT_MAXSPACING), aArgs);</span>
<span class="nc bnc" id="L220" title="All 2 branches missed.">		} else if (confictType == SHIFTEVENT_INVALID) {</span>
<span class="nc" id="L221">			Object[] aArgs = { m_sWorkResouceName, name, formateDate };</span>
<span class="nc" id="L222">			return MessageFormat.format(locale.i18n(pBundle,BbmEjbBundleKey.SHIFTEVENT_INVALID), aArgs);</span>
<span class="nc bnc" id="L223" title="All 2 branches missed.">		} else if (confictType == ORG_HOO) {</span>
<span class="nc" id="L224">			Object[] aArgs = { m_sWorkResouceName, name, formatDateTime };</span>
<span class="nc" id="L225">			return MessageFormat.format(locale.i18n(pBundle,BbmEjbBundleKey.ORG_HOO), aArgs);</span>
<span class="nc bnc" id="L226" title="All 2 branches missed.">		} else if (confictType == CAMPAIGN_HOO) {</span>
<span class="nc" id="L227">			Object[] aArgs = { m_sWorkResouceName, formatDateTime };</span>
<span class="nc" id="L228">			return MessageFormat.format(locale.i18n(pBundle,BbmEjbBundleKey.CAMPAIGN_HOO), aArgs);</span>

<span class="nc bnc" id="L230" title="All 2 branches missed.">		} else if (confictType == WORKPATTERN_OCCURANCE) {</span>
<span class="nc" id="L231">			Object[] aArgs = { m_sWorkResouceName, formateDate };</span>
<span class="nc" id="L232">			return MessageFormat.format(locale.i18n(pBundle,BbmEjbBundleKey.WORKPATTERN_OCCURANCE), aArgs);</span>
<span class="nc bnc" id="L233" title="All 2 branches missed.">		} else if (confictType == WORKPATTERN_CONSISTENTSTART) {</span>
<span class="nc" id="L234">			Object[] aArgs = { m_sWorkResouceName, formateDate, name };</span>
<span class="nc" id="L235">			return MessageFormat.format(locale.i18n(pBundle,BbmEjbBundleKey.WORKPATTERN_CONSISTENTSTART), aArgs);</span>
<span class="nc bnc" id="L236" title="All 2 branches missed.">		} else if (confictType == WORKPATTERN_CONSISTENTSHIFTEVENT) {</span>
<span class="nc" id="L237">			Object[] aArgs = { m_sWorkResouceName, formateDate, name };</span>
<span class="nc" id="L238">			return MessageFormat.format(locale.i18n(pBundle,BbmEjbBundleKey.WORKPATTERN_CONSISTENTSHIFTEVENT), aArgs);</span>
<span class="nc bnc" id="L239" title="All 2 branches missed.">		} else if (confictType == ORG_MAXCONSECUTIVEDAY) {</span>
			// employeename, consecutive days setting, diff, shiftname, date
<span class="nc" id="L241">			Object[] aArgs = { m_sWorkResouceName, new Integer((int) m_dTarget), new Integer((int) m_dAmount),</span>
					m_sTarget, formateDate };
<span class="nc" id="L243">			return MessageFormat.format(locale.i18n(pBundle,BbmEjbBundleKey.WORKPATTERN_MAX_CONSECUTIVEDAYS), aArgs);</span>
<span class="nc bnc" id="L244" title="All 2 branches missed.">		} else if (confictType == ORG_MINCONSECUTIVEDAY) {</span>
			// employeename, consecutive days setting, diff, shiftname, date
<span class="nc" id="L246">			Object[] aArgs = { m_sWorkResouceName, new Integer((int) m_dTarget), new Integer((int) m_dAmount),</span>
					m_sTarget, formateDate };
<span class="nc" id="L248">			return MessageFormat.format(locale.i18n(pBundle,BbmEjbBundleKey.WORKPATTERN_MIN_CONSECUTIVEDAYS), aArgs);</span>
<span class="nc bnc" id="L249" title="All 2 branches missed.">		} else if (confictType == MEETING_ATTENDANCE) {</span>
<span class="nc" id="L250">			String startTime = locale.formatDate(m_dtStart, tzView, RegionalFormatBundleKey.TIME_FORMAT);</span>
<span class="nc" id="L251">			Calendar c = Calendar.getInstance();</span>
<span class="nc" id="L252">			c.setTime(m_dtStart);</span>
<span class="nc" id="L253">			c.add(Calendar.MINUTE, durationInMinutes);</span>
<span class="nc" id="L254">			Date end = c.getTime();</span>
<span class="nc" id="L255">			String endTime = locale.formatDate(end, tzView, RegionalFormatBundleKey.TIME_FORMAT);</span>
<span class="nc" id="L256">			Object[] aArgs = { m_sWorkResouceName, startTime, endTime, formateDate, activityName };</span>
<span class="nc" id="L257">			return MessageFormat.format(locale.i18n(pBundle,BbmEjbBundleKey.MEETING_ATTENDANCE), aArgs);</span>
<span class="nc bnc" id="L258" title="All 2 branches missed.">		} else if (confictType == MEETING_ATTENDANCE_TIMEOFF) {</span>
<span class="nc" id="L259">			String startTime = locale.formatDateTime(m_dtStart, tzView);</span>
<span class="nc" id="L260">			String endTime = locale.formatDateTime(m_dtEnd, tzView);</span>
<span class="nc" id="L261">			Object[] aArgs = { m_sWorkResouceName, locale.formatDurationInDecimalHours(overlapMin), startTime, endTime,</span>
<span class="nc" id="L262">					locale.formatDurationInDecimalHours(durationInMinutes) };</span>
<span class="nc" id="L263">			return MessageFormat.format(locale.i18n(pBundle,BbmEjbBundleKey.MEETING_ATTENDANCE_TIMEOFF), aArgs);</span>
<span class="nc bnc" id="L264" title="All 2 branches missed.">		} else if (confictType == SHIFT_OT_DAILY) {</span>
<span class="nc" id="L265">			Object[] aArgs = { m_sWorkResouceName, locale.formatDurationInDecimalHours((int) m_dAmount), formateDate };</span>
<span class="nc" id="L266">			return MessageFormat.format(locale.i18n(pBundle,BbmEjbBundleKey.SHIFT_OT_DAILY), aArgs);</span>
<span class="nc bnc" id="L267" title="All 2 branches missed.">		} else if (confictType == SHIFT_OT_WEEKLY) {</span>
<span class="nc" id="L268">			Object[] aArgs = { m_sWorkResouceName, locale.formatDurationInDecimalHours((int) m_dAmount), formateDate };</span>
<span class="nc" id="L269">			return MessageFormat.format(locale.i18n(pBundle,BbmEjbBundleKey.SHIFT_OT_WEEKLY), aArgs);</span>
<span class="nc bnc" id="L270" title="All 2 branches missed.">		} else if (confictType == SHIFT_VTO_DAILY) {</span>
<span class="nc" id="L271">			Object[] aArgs = { m_sWorkResouceName, locale.formatDurationInDecimalHours((int) m_dAmount), formateDate };</span>
<span class="nc" id="L272">			return MessageFormat.format(locale.i18n(pBundle,BbmEjbBundleKey.SHIFT_VTO_DAILY), aArgs);</span>
<span class="nc bnc" id="L273" title="All 2 branches missed.">		} else if (confictType == SHIFT_VTO_WEEKLY) {</span>
<span class="nc" id="L274">			Object[] aArgs = { m_sWorkResouceName, locale.formatDurationInDecimalHours((int) m_dAmount), formateDate };</span>
<span class="nc" id="L275">			return MessageFormat.format(locale.i18n(pBundle,BbmEjbBundleKey.SHIFT_VTO_WEEKLY), aArgs);</span>
<span class="nc bnc" id="L276" title="All 2 branches missed.">		} else if (confictType == SHIFT_CROSSORGDAY) {</span>
<span class="nc" id="L277">			Object[] aArgs = { m_sWorkResouceName, formateDate };</span>
<span class="nc" id="L278">			return MessageFormat.format(locale.i18n(pBundle,BbmEjbBundleKey.SHIFT_CROSSORGDAY), aArgs);</span>
<span class="nc bnc" id="L279" title="All 2 branches missed.">		} else if (confictType == UNASSIGNED_CLASS) {</span>
<span class="nc" id="L280">			Object[] aArgs = { m_sWorkResouceName, name };</span>
<span class="nc" id="L281">			return MessageFormat.format(locale.i18n(pBundle,BbmEjbBundleKey.UNASSIGNED_CLASS), aArgs);</span>
<span class="nc bnc" id="L282" title="All 2 branches missed.">		} else if (confictType == CLASS_MAX_ATTENDEE) {</span>
<span class="nc" id="L283">			Object[] aArgs = { m_sWorkResouceName, name, formatDateTime, desiredCount, (actCount - desiredCount) };</span>
<span class="nc" id="L284">			return MessageFormat.format(locale.i18n(pBundle,BbmEjbBundleKey.CLASS_MAX_ATTENDEE), aArgs);</span>
<span class="nc bnc" id="L285" title="All 2 branches missed.">		} else if (confictType == CLASS_MIN_ATTENDEE) {</span>
<span class="nc" id="L286">			Object[] aArgs = { m_sWorkResouceName, name, formatDateTime, desiredCount, (desiredCount - actCount) };</span>
<span class="nc" id="L287">			return MessageFormat.format(locale.i18n(pBundle,BbmEjbBundleKey.CLASS_MIN_ATTENDEE), aArgs);</span>
<span class="nc bnc" id="L288" title="All 2 branches missed.">		} else if (confictType == MAX_HOURS) {</span>
<span class="nc" id="L289">			Object[] aArgs = { m_sWorkResouceName, locale.formatDurationInMins((int) m_dTarget),</span>
<span class="nc" id="L290">					locale.formatDurationInDecimalHours((int) m_dAmount),</span>
<span class="nc" id="L291">					locale.formatDate(m_dtStart, tzView, RegionalFormatBundleKey.DATE_FORMAT) };</span>
<span class="nc" id="L292">			return MessageFormat.format(locale.i18n(pBundle,BbmEjbBundleKey.SHIFTS_MAX_HOURS), aArgs);</span>
<span class="nc bnc" id="L293" title="All 2 branches missed.">		} else if (confictType == MONTHLY_MAX_HOURS) {</span>
<span class="nc" id="L294">			Object[] aArgs = { m_sWorkResouceName, locale.formatDurationInMins((int) m_dTarget),</span>
<span class="nc" id="L295">					locale.formatDurationInDecimalHours((int) m_dAmount),</span>
<span class="nc" id="L296">					locale.formatDate(m_dtStart, tzView, RegionalFormatBundleKey.DATE_MONTH_YEAR_FORMAT) };</span>
<span class="nc" id="L297">			return MessageFormat.format(locale.i18n(pBundle,BbmEjbBundleKey.SHIFTS_MONTHLY_MAX_HOURS), aArgs);</span>
<span class="nc bnc" id="L298" title="All 2 branches missed.">		} else if (confictType == MONTHLY_MIN_HOURS) {</span>
<span class="nc" id="L299">			Object[] aArgs = { m_sWorkResouceName, locale.formatDurationInMins((int) m_dTarget),</span>
<span class="nc" id="L300">					locale.formatDurationInDecimalHours((int) m_dAmount),</span>
<span class="nc" id="L301">					locale.formatDate(m_dtStart, tzView, RegionalFormatBundleKey.DATE_MONTH_YEAR_FORMAT) };</span>
<span class="nc" id="L302">			return MessageFormat.format(locale.i18n(pBundle,BbmEjbBundleKey.SHIFTS_MONTHLY_MIN_HOURS), aArgs);</span>
		}
		/*
		 * else if (m_eType == SHIFT_DURATION) return &quot;Employee &quot;+
		 * m_sWorkResouceName+&quot; has an illegal duration for Shift: &quot; + m_sName +
		 * &quot; on &quot; + m_dtStart; else if (m_eType == SHIFT_STARTTIME) return
		 * &quot;Employee &quot;+
		 * m_sWorkResouceName+&quot; has an illegal start time for Shift: &quot; + m_sName
		 * + &quot; on &quot; + m_dtStart; else if (m_eType == SHIFTEVENT_DURATION) return
		 * &quot;Employee &quot;+
		 * m_sWorkResouceName+&quot; has an illegal Shift Event duration for Shift: &quot;
		 * + m_sName + &quot; on &quot; + m_dtStart; else if (m_eType ==
		 * SHIFTEVENT_STARTTIME) return &quot;Employee &quot;+
		 * m_sWorkResouceName+&quot; has an illegal Shift Event start time for Shift: &quot;
		 * + m_sName + &quot; on &quot; + m_dtStart; else if (m_eType ==
		 * SHIFTEVENT_SPACING) return &quot;Employee &quot;+
		 * m_sWorkResouceName+&quot; has an illegal Shift Event spacing for Shift: &quot;
		 * + m_sName + &quot; on &quot; + m_dtStart; else if (m_eType ==
		 * SHIFTEVENT_INVALID) return &quot;Employee &quot;+
		 * m_sWorkResouceName+&quot; has an invalid Shift Event for Shift: &quot; +
		 * m_sName + &quot; on &quot; + m_dtStart; else if (m_eType == ORG_HOO) return
		 * &quot;Employee &quot;+m_sWorkResouceName+
		 * &quot; has a Shift Assignment violating his/her Organization's Hours of operation on &quot;
		 * + m_dtStart; else if (m_eType == CAMPAIGN_HOO) return &quot;Employee &quot;+
		 * m_sWorkResouceName+
		 * &quot; has a Shift Assignment violating his/her Campaign's Hours of operation on &quot;
		 * + m_dtStart; else if (m_eType == WORKPATTERN_OCCURANCE) return
		 * &quot;Employee &quot;+m_sWorkResouceName+
		 * &quot; has a schedule does not match any of his/her Work Patterns for the period starting &quot;
		 * + m_dtStart; else if (m_eType == WORKPATTERN_CONSISTENTSTART) return
		 * &quot;Employee &quot;+m_sWorkResouceName+
		 * &quot; is violating his/her Work Pattern's Consistent Starts for the period starting &quot;
		 * + m_dtStart; else if (m_eType == WORKPATTERN_CONSISTENTSHIFTEVENT)
		 * return &quot;Employee &quot;+m_sWorkResouceName+
		 * &quot; is violating his/her Work Pattern's Consistent Shift Events for the period starting &quot;
		 * + m_dtStart; else if (m_eType == MEETING_ATTENDANCE) return
		 * &quot;Employee &quot;+
		 * m_sWorkResouceName+&quot; has a Calendar Event on &quot;+m_dtStart+
		 * &quot; with no overlapping Shift Assignment.&quot;;
		 */
<span class="nc" id="L342">		return name;</span>
	}

	public static String getStringKeyFromType(int type, Localizer localizer, Map&lt;String, String&gt; verticalizedStringMap) {
<span class="nc bnc" id="L346" title="All 19 branches missed.">		switch (type) {</span>
		case ShiftsConflict.ORG_CONSECUTIVEDAY:
		case ShiftsConflict.ORG_MAXCONSECUTIVEDAY:
		case ShiftsConflict.ORG_MINCONSECUTIVEDAY:
<span class="nc" id="L350">			return localizer.i18n(BbmEjbBundleKey.BUNDLE_NAME, BbmEjbBundleKey.FS_CAL_CONFLICTSGROUP_MAXCONSECDAYS);</span>
		case ShiftsConflict.ORG_MINSPACING:
<span class="nc" id="L352">			return localizer.i18n(BbmEjbBundleKey.BUNDLE_NAME, BbmEjbBundleKey.FS_CAL_CONFLICTSGROUP_MINSPACINGBETWEENSHIFTS);</span>
		case ShiftsConflict.MIN_HOURS:
		case ShiftsConflict.MAX_HOURS:
		case ShiftsConflict.MONTHLY_MIN_HOURS:
		case ShiftsConflict.MONTHLY_MAX_HOURS:	
<span class="nc" id="L357">			return localizer.i18n(BbmEjbBundleKey.BUNDLE_NAME, BbmEjbBundleKey.FS_CAL_CONFLICTSGROUP_MINMAXHOURS);</span>
		case ShiftsConflict.CAMPAIGN_HOO: {
			// GMT clients may have custom strings in BPCONFIG table
<span class="nc" id="L360">			String stringCampaignHoo = null;</span>
<span class="nc bnc" id="L361" title="All 2 branches missed.">			if (verticalizedStringMap != null)</span>
<span class="nc" id="L362">				stringCampaignHoo = verticalizedStringMap.get(BbmEjbBundleKey.FS_CAL_CONFLICTSGROUP_CAMPAIGNHOO);</span>
<span class="nc bnc" id="L363" title="All 2 branches missed.">			if (stringCampaignHoo == null)</span>
<span class="nc" id="L364">				stringCampaignHoo = localizer.i18n(BbmEjbBundleKey.BUNDLE_NAME, BbmEjbBundleKey.FS_CAL_CONFLICTSGROUP_CAMPAIGNHOO);</span>
<span class="nc" id="L365">			return stringCampaignHoo;</span>
		}
		case ShiftsConflict.ORG_HOO:
<span class="nc" id="L368">			return localizer.i18n(BbmEjbBundleKey.BUNDLE_NAME, BbmEjbBundleKey.FS_CAL_CONFLICTSGROUP_ORGHOO);</span>
		case ShiftsConflict.SHIFT_DURATION:
<span class="nc" id="L370">			return localizer.i18n(BbmEjbBundleKey.BUNDLE_NAME, BbmEjbBundleKey.FS_CAL_CONFLICTSGROUP_SHIFTS_SHIFTDURATION);</span>
		case ShiftsConflict.SHIFT_STARTTIME:
		case ShiftsConflict.SHIFT_CROSSORGDAY:
<span class="nc" id="L373">			return localizer.i18n(BbmEjbBundleKey.BUNDLE_NAME, BbmEjbBundleKey.FS_CAL_CONFLICTSGROUP_SHIFTS_SHIFTSTARTTIME);</span>
		case ShiftsConflict.SHIFTEVENT_DURATION:
<span class="nc" id="L375">			return localizer.i18n(BbmEjbBundleKey.BUNDLE_NAME, BbmEjbBundleKey.FS_CAL_CONFLICTSGROUP_SHIFTS_SHIFTEVENTDURATION);</span>
		case ShiftsConflict.SHIFTEVENT_INVALID:
<span class="nc" id="L377">			return localizer.i18n(BbmEjbBundleKey.BUNDLE_NAME, BbmEjbBundleKey.FS_CAL_CONFLICTSGROUP_SHIFTS_SHIFTEVENTINVALID);</span>
		case ShiftsConflict.SHIFTEVENT_SPACING:
		case ShiftsConflict.SHIFTEVENT_MINSPACING:
<span class="nc" id="L380">			return localizer.i18n(BbmEjbBundleKey.BUNDLE_NAME, BbmEjbBundleKey.FS_CAL_CONFLICTSGROUP_SHIFTS_SHIFTEVENTSPACING);</span>
		case ShiftsConflict.SHIFTEVENT_MAXSPACING:
<span class="nc" id="L382">			return localizer.i18n(BbmEjbBundleKey.BUNDLE_NAME, BbmEjbBundleKey.FS_CAL_CONFLICTSGROUP_SHIFTS_SHIFTEVENTSPACING);</span>
		case ShiftsConflict.SHIFTEVENT_STARTTIME:
<span class="nc" id="L384">			return localizer.i18n(BbmEjbBundleKey.BUNDLE_NAME, BbmEjbBundleKey.FS_CAL_CONFLICTSGROUP_SHIFTS_SHIFTEVENTSTARTTIME);</span>
		case ShiftsConflict.WORKPATTERN_CONSISTENTSHIFTEVENT:
<span class="nc" id="L386">			return localizer.i18n(BbmEjbBundleKey.BUNDLE_NAME, BbmEjbBundleKey.FS_CAL_CONFLICTSGROUP_WORKPATTERN_CONSISTENTSHIFTEVENT);</span>
		case ShiftsConflict.WORKPATTERN_CONSISTENTSTART:
<span class="nc" id="L388">			return localizer.i18n(BbmEjbBundleKey.BUNDLE_NAME, BbmEjbBundleKey.FS_CAL_CONFLICTSGROUP_WORKPATTERN_CONSISTENTSTART);</span>
		case ShiftsConflict.WORKPATTERN_OCCURANCE:
<span class="nc" id="L390">			return localizer.i18n(BbmEjbBundleKey.BUNDLE_NAME, BbmEjbBundleKey.FS_CAL_CONFLICTSGROUP_WORKPATTERN_OCCURANCE);</span>
		case ShiftsConflict.MEETING_ATTENDANCE:
<span class="nc" id="L392">			return localizer.i18n(BbmEjbBundleKey.BUNDLE_NAME, BbmEjbBundleKey.FS_CAL_CONFLICTSGROUP_MEETING_ATTENDANCE);</span>
		case ShiftsConflict.MEETING_ATTENDANCE_TIMEOFF:
		case ShiftsConflict.UNASSIGNED_CLASS:
		case ShiftsConflict.CLASS_MAX_ATTENDEE:
		case ShiftsConflict.CLASS_MIN_ATTENDEE:
<span class="nc" id="L397">			return localizer.i18n(BbmEjbBundleKey.BUNDLE_NAME, BbmEjbBundleKey.FS_CAL_CONFLICTSGROUP_MEETING_ATTENDANCE);</span>
		case ShiftsConflict.SHIFT_OT_DAILY:
		case ShiftsConflict.SHIFT_OT_WEEKLY:
		case ShiftsConflict.SHIFT_VTO_DAILY:
		case ShiftsConflict.SHIFT_VTO_WEEKLY:
<span class="nc" id="L402">			return localizer.i18n(BbmEjbBundleKey.BUNDLE_NAME, BbmEjbBundleKey.FS_CAL_CONFLICTSGROUP_OTVTO);</span>
		default:
<span class="nc" id="L404">			return localizer.i18n(BbmEjbBundleKey.BUNDLE_NAME, BbmEjbBundleKey.FS_CAL_CONFLICTSGROUP_UNKNOWN);</span>
		}
	}

	@Override
	public boolean equals(Object o) {
<span class="nc bnc" id="L410" title="All 2 branches missed.">		if (!(o instanceof ShiftsConflict))</span>
<span class="nc" id="L411">			return false;</span>
<span class="nc" id="L412">		ShiftsConflict n = (ShiftsConflict) o;</span>
<span class="nc bnc" id="L413" title="All 2 branches missed.">		return (confictType == n.getType());</span>
	}

	@Override
	public int hashCode() {
<span class="nc" id="L418">		return confictType;</span>
	}

	public int compareTo(Object o) {
<span class="nc" id="L422">		ShiftsConflict n = (ShiftsConflict) o;</span>
<span class="nc" id="L423">		return (new Integer(confictType).compareTo(new Integer(n.getType())));</span>
	}

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>