<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>ShiftSwapCalendarInfo.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">QA Code Coverage</a> &gt; <a href="index.source.html" class="el_package">com.bluepumpkin.ejb.bbm.rm</a> &gt; <span class="el_source">ShiftSwapCalendarInfo.java</span></div><h1>ShiftSwapCalendarInfo.java</h1><pre class="source lang-java linenums">package com.bluepumpkin.ejb.bbm.rm;

import java.io.Serializable;
import java.util.Date;
import java.util.TimeZone;

import com.bluepumpkin.common.datatypes.ID;
import com.bluepumpkin.common.l10n.RegionalFormatBundleKey;
import com.bluepumpkin.common.localization.Localizer;
import com.bluepumpkin.ejb.bbm.schedule.model.ShiftAssignment;
import com.bluepumpkin.ejb.bbm.shifts.model.ShiftsUtil;
import com.verint.ejb.wfm.l10n.WfmCommonBundleKey;

public class ShiftSwapCalendarInfo implements Serializable, Cloneable {
	private static final long serialVersionUID = -4095269540831722935L;

	// For this employee, the swapped current &quot;shift&quot; or &quot;time-off&quot; item
	private ID employeeID;
	private Date startOfSwapItem;
	private Date endOfSwapItem;
	// two way or one way
	private String shiftSwapType;
	// shift or time-off
	private String shiftType;
	// If this user received a shift, this is the shift hash to help identify that shift
	private Integer shiftHash;
	// The person this employee swapped with, the original &quot;shift&quot; or &quot;time-off&quot; item that was swapped away
	private ID originalEmployeeID;
	private Date startOriginalItem;
	private Date endOriginalSwapItem;
	// shift or time-off
	private String originalShiftType;
	// If this user gave away a shift, this is the shift hash of that original shift, to help identify that shift
	private Integer originalShiftHash;

	// tentative or approved
	private String requestStatus;
	private boolean isPartial;
	private String displayMessage;

	private boolean originalIsPartial;

<span class="nc" id="L43">	public ShiftSwapCalendarInfo() {</span>
		//default
<span class="nc" id="L45">	}</span>

	public ID getEmployeeID() {
<span class="nc" id="L48">		return employeeID;</span>
	}

	public void setEmployeeID(ID employeeID) {
<span class="nc" id="L52">		this.employeeID = employeeID;</span>
<span class="nc" id="L53">	}</span>

	public Date getStartOfSwapItem() {
<span class="nc" id="L56">		return startOfSwapItem;</span>
	}

	public void setStartOfSwapItem(Date startOfSwapItem) {
<span class="nc" id="L60">		this.startOfSwapItem = startOfSwapItem;</span>
<span class="nc" id="L61">	}</span>

	public Date getEndOfSwapItem() {
<span class="nc" id="L64">		return endOfSwapItem;</span>
	}

	public void setEndOfSwapItem(Date endOfSwapItem) {
<span class="nc" id="L68">		this.endOfSwapItem = endOfSwapItem;</span>
<span class="nc" id="L69">	}</span>

	public String getShiftSwapType() {
<span class="nc" id="L72">		return shiftSwapType;</span>
	}

	public void setShiftSwapType(String shiftSwapType) {
<span class="nc" id="L76">		this.shiftSwapType = shiftSwapType;</span>
<span class="nc" id="L77">	}</span>

	public ID getOriginalEmployeeID() {
<span class="nc" id="L80">		return originalEmployeeID;</span>
	}

	public void setOriginalEmployeeID(ID originalEmployeeID) {
<span class="nc" id="L84">		this.originalEmployeeID = originalEmployeeID;</span>
<span class="nc" id="L85">	}</span>

	public Date getStartOriginalItem() {
<span class="nc" id="L88">		return startOriginalItem;</span>
	}

	public void setStartOriginalItem(Date startOriginalItem) {
<span class="nc" id="L92">		this.startOriginalItem = startOriginalItem;</span>
<span class="nc" id="L93">	}</span>

	public Date getEndOriginalSwapItem() {
<span class="nc" id="L96">		return endOriginalSwapItem;</span>
	}

	public void setEndOriginalSwapItem(Date endOriginalSwapItem) {
<span class="nc" id="L100">		this.endOriginalSwapItem = endOriginalSwapItem;</span>
<span class="nc" id="L101">	}</span>

	public String getOriginalShiftType() {
<span class="nc" id="L104">		return originalShiftType;</span>
	}

	public void setOriginalShiftType(String originalShiftType) {
<span class="nc" id="L108">		this.originalShiftType = originalShiftType;</span>
<span class="nc" id="L109">	}</span>

	public String getShiftType() {
<span class="nc" id="L112">		return shiftType;</span>
	}

	public void setShiftType(String shifttype) {
<span class="nc" id="L116">		this.shiftType = shifttype;</span>
<span class="nc" id="L117">	}</span>

	public Integer getOriginalShiftHash() {
<span class="nc" id="L120">		return originalShiftHash;</span>
	}

	public void setOriginalShiftHash(Integer originalShiftHash) {
<span class="nc" id="L124">		this.originalShiftHash = originalShiftHash;</span>
<span class="nc" id="L125">	}</span>

	public Integer getShiftHash() {
<span class="nc" id="L128">		return shiftHash;</span>
	}

	public void setShiftHash(Integer shiftHash) {
<span class="nc" id="L132">		this.shiftHash = shiftHash;</span>
<span class="nc" id="L133">	}</span>

	public String getRequestStatus() {
<span class="nc" id="L136">		return requestStatus;</span>
	}

	public void setRequestStatus(String string) {
<span class="nc" id="L140">		requestStatus = string;</span>
<span class="nc" id="L141">	}</span>

	public boolean isApproved(){
<span class="nc" id="L144">		return &quot;approved&quot;.equals(requestStatus);</span>
	}

	public boolean isTentative(){
<span class="nc" id="L148">		return &quot;tentative&quot;.equals(requestStatus);</span>
	}

	public boolean getIsPartial() {
<span class="nc" id="L152">		return isPartial;</span>
	}

	public void setIsPartial(boolean partial) {
<span class="nc" id="L156">		isPartial = partial;</span>
<span class="nc" id="L157">	}</span>

	public boolean isPartial(){
<span class="nc" id="L160">		return isPartial;</span>
	}

	public void setDisplayMessage(String displayMessage) {
<span class="nc" id="L164">		this.displayMessage = displayMessage;</span>
<span class="nc" id="L165">	}</span>
	
	public void setOriginalIsPartial(boolean partial){
<span class="nc" id="L168">		this.originalIsPartial = partial;</span>
<span class="nc" id="L169">	}</span>
	public boolean getOriginalIsPartial(){
<span class="nc" id="L171">		return this.originalIsPartial;</span>
	}

	public boolean isShiftModified(ShiftAssignment shiftAssignment){
<span class="nc" id="L175">		int hash = ShiftsUtil.getShiftAssignmentHashCodeExtendedInRange(shiftAssignment, this.getStartOfSwapItem(), this.getEndOfSwapItem());</span>
<span class="nc bnc" id="L176" title="All 2 branches missed.">		return hash != this.getShiftHash();</span>
	}

	@Override
	public String toString() {
<span class="nc" id="L181">		return &quot;ShiftSwapCalendarInfo: &quot;</span>
<span class="nc" id="L182">				+ &quot;\n&quot; + &quot; EmployeeID: &quot; + this.getEmployeeID()</span>
<span class="nc" id="L183">				+ '\n' + &quot; Start: &quot; + this.getStartOfSwapItem()</span>
<span class="nc" id="L184">				+ '\n' + &quot; End: &quot; + this.getEndOfSwapItem()</span>
<span class="nc" id="L185">				+ '\n' + &quot; ShiftSwapType: &quot; + this.getShiftSwapType()</span>
<span class="nc" id="L186">				+ '\n' + &quot; ShiftType: &quot; + this.getShiftType()</span>
<span class="nc" id="L187">				+ '\n' + &quot; IsPartial: &quot; + this.getIsPartial()</span>
<span class="nc" id="L188">				+ '\n' + &quot; ShiftHash: &quot; + this.getShiftHash()</span>
<span class="nc" id="L189">				+ '\n' + &quot; OriginalEmployeeID: &quot; + this.getOriginalEmployeeID()</span>
<span class="nc" id="L190">				+ '\n' + &quot; OriginalStart: &quot; + this.getStartOriginalItem()</span>
<span class="nc" id="L191">				+ '\n' + &quot; OriginalEnd: &quot; + this.getEndOriginalSwapItem()</span>
<span class="nc" id="L192">				+ '\n' + &quot; OriginalShiftType: &quot; + this.getOriginalShiftType()</span>
<span class="nc" id="L193">				+ '\n' + &quot; OriginalShiftHash: &quot; + this.getOriginalShiftHash()</span>
<span class="nc" id="L194">				+ '\n' + &quot; RequestStatus: &quot; + this.getRequestStatus()</span>
<span class="nc" id="L195">				+ '\n' + &quot; OriginalIsPartial: &quot; + this.getOriginalIsPartial() + '\n';</span>

	}

	public String getDisplayMessage(Localizer localizer, TimeZone tz) {
<span class="nc bnc" id="L200" title="All 4 branches missed.">		if (displayMessage == null || displayMessage.isEmpty()) {</span>
<span class="nc" id="L201">			String partial = localizer.i18n(WfmCommonBundleKey.BUNDLE_NAME, WfmCommonBundleKey.ENTIRE_SHIFT);</span>
<span class="nc bnc" id="L202" title="All 2 branches missed.">			if (this.isPartial()</span>
			// Timeoff partials are set to not partial. No idea why.
			// We have to display them as partial to the user, however.
<span class="nc bnc" id="L205" title="All 4 branches missed.">					|| (this.getOriginalIsPartial() &amp;&amp; this.getShiftType().compareTo(&quot;time-off&quot;) == 0)) {</span>
<span class="nc" id="L206">				partial = localizer.i18n(WfmCommonBundleKey.BUNDLE_NAME, WfmCommonBundleKey.PARTIAL_SHIFT);</span>
			}

			// The original item is the one that was swapped away
<span class="nc" id="L210">			Object[] params = new Object[] {</span>
				partial,
<span class="nc" id="L212">				localizer.formatDate(this.getStartOriginalItem(), tz, RegionalFormatBundleKey.MEDIUM_DATE_FORMAT,</span>
						RegionalFormatBundleKey.TIME_FORMAT),
<span class="nc" id="L214">				localizer.formatDate(this.getEndOriginalSwapItem(), tz, RegionalFormatBundleKey.MEDIUM_DATE_FORMAT,</span>
						RegionalFormatBundleKey.TIME_FORMAT),
			};
<span class="nc" id="L217">			String key = WfmCommonBundleKey.SHIFT_SWAP_CALENDAR_INFO;</span>

<span class="nc bnc" id="L219" title="All 2 branches missed.">			if (this.getOriginalShiftType().compareTo(&quot;time-off&quot;) == 0) {</span>
<span class="nc" id="L220">				key = WfmCommonBundleKey.SHIFT_SWAP_CALENDAR_INFO_TIMEOFF;</span>
			}

<span class="nc" id="L223">			displayMessage = localizer.i18n(WfmCommonBundleKey.BUNDLE_NAME, key, params);</span>
		}
<span class="nc" id="L225">		return displayMessage;</span>
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>