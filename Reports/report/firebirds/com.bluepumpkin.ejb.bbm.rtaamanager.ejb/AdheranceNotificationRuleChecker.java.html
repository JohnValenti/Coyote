<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>AdheranceNotificationRuleChecker.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">QA Code Coverage</a> &gt; <a href="index.source.html" class="el_package">com.bluepumpkin.ejb.bbm.rtaamanager.ejb</a> &gt; <span class="el_source">AdheranceNotificationRuleChecker.java</span></div><h1>AdheranceNotificationRuleChecker.java</h1><pre class="source lang-java linenums">package com.bluepumpkin.ejb.bbm.rtaamanager.ejb;

/**
 * Title:        Blue Pumpkin Software Basic Business Model
 * Description:  This notification rule checker checks whether the schedule
 *               has been changed for any work resources and if so, constructs
 *               an action detail object with messages specific to work
 *               resources
 * Copyright:    Copyright (c) 2002
 * Company:      Blue Pumpkin Software, inc
 * @author       Greg Fichtenholtz
 * @version 1.0
 */
import java.util.ArrayList;
import java.util.Collection;
import java.util.HashMap;
import java.util.HashSet;
import java.util.Iterator;
import java.util.LinkedList;
import java.util.ResourceBundle;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;

import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.Node;

import com.bluepumpkin.common.datatypes.ID;
import com.bluepumpkin.common.jdmo.Jdmo;
import com.bluepumpkin.common.localization.LocaleContext;
import com.bluepumpkin.common.localization.Localizer;
import com.bluepumpkin.common.logging.Category;
import com.bluepumpkin.ejb.bbm.BbmManagerFactory;
import com.bluepumpkin.ejb.bbm.Log;
import com.bluepumpkin.ejb.bbm.activity.ejb.ActivityManager;
import com.bluepumpkin.ejb.bbm.activity.model.Activity;
import com.bluepumpkin.ejb.bbm.base.BbmException;
import com.bluepumpkin.ejb.bbm.dao.DAOUtil;
import com.bluepumpkin.ejb.bbm.employeefilter.ejb.EmployeeFilter;
import com.bluepumpkin.ejb.bbm.employeefilter.model.Filter;
import com.bluepumpkin.ejb.bbm.l10n.BbmEjbBundleKey;
import com.bluepumpkin.ejb.bbm.localization.DefaultLocalizationManager;
import com.bluepumpkin.ejb.bbm.notifyrules.model.ActionDetail;
import com.bluepumpkin.ejb.bbm.notifyrules.model.NotifyRule;
import com.bluepumpkin.ejb.bbm.notifyrules.model.NotifyRuleChecker;
import com.bluepumpkin.ejb.bbm.notifyrules.model.NotifyRuleParameter;
import com.bluepumpkin.ejb.bbm.notifyrules.model.NotifyRuleTemplate;
import com.bluepumpkin.ejb.bbm.rtaamanager.model.EmployeeAdheranceStatus;
import com.verint.ejb.wfm.WfmManagerFactory;
import com.witness.ejb.core.security.model.User;

<span class="nc" id="L53">public class AdheranceNotificationRuleChecker implements NotifyRuleChecker {</span>
	protected Localizer m_localizer;
	// private WorkResourceManager m_workResourceManager = null;
<span class="nc" id="L56">	private RTAAManager m_rtaaManager = null;</span>
<span class="nc" id="L57">	private EmployeeFilter m_employeeFilter = null;</span>
<span class="nc" id="L58">	private ActivityManager m_activityManager = null;</span>
<span class="nc" id="L59">	private DocumentBuilder m_parser = null;</span>
<span class="nc" id="L60">	private static Category m_cat = Log.initCategory(AdheranceNotificationRuleChecker.class.getName());</span>

	/**
	 * Initialize method called once per notify rule checker type to perform
	 * one-time initialization
	 */
	public void init() throws Exception {
		// m_workResourceManager = BbmManagerFactory.getWorkResourceManager();
<span class="nc" id="L68">		m_rtaaManager = BbmManagerFactory.getRTAAManager();</span>
<span class="nc" id="L69">		m_employeeFilter = BbmManagerFactory.getEmployeeFilter();</span>
<span class="nc" id="L70">		m_activityManager = WfmManagerFactory.getActivityManager();</span>
<span class="nc" id="L71">		DocumentBuilderFactory docBuilderFactory = DocumentBuilderFactory.newInstance();</span>
<span class="nc" id="L72">		docBuilderFactory.setValidating(false);</span>
<span class="nc" id="L73">		m_parser = docBuilderFactory.newDocumentBuilder();</span>
<span class="nc" id="L74">		m_localizer = DefaultLocalizationManager.getDefaultInstance().getLocalizer();</span>

<span class="nc" id="L76">	}</span>

	/**
	 * Tests whether this rule &quot;fires&quot;. If so, returns an action detail object
	 * with specific messages for each of the workresources whose schedule has
	 * been changed
	 */
	public ActionDetail testRule(NotifyRule notifyRule, Object actionContext) throws Exception {
<span class="nc bnc" id="L84" title="All 2 branches missed.">		if (m_cat.isDebugEnabled())</span>
<span class="nc" id="L85">			m_cat.debug(&quot;ENTER: testRule&quot;);</span>

<span class="nc" id="L87">		ActionDetail actionDetail = null;</span>
<span class="nc" id="L88">		int nOutOfAdheranceThreshold = -1;</span>
<span class="nc" id="L89">		Collection colActivityIDs = null;</span>

<span class="nc" id="L91">		int nActivityClause = 0;</span>
<span class="nc bnc" id="L92" title="All 2 branches missed.">		for (Iterator itRuleParameter = notifyRule.getRuleParameters().iterator(); itRuleParameter.hasNext();) {</span>
<span class="nc" id="L93">			NotifyRuleParameter notifyRuleParameter = (NotifyRuleParameter) itRuleParameter.next();</span>
<span class="nc bnc" id="L94" title="All 2 branches missed.">			if (notifyRuleParameter.getName().equals(&quot;OutOfAdheranceThreshold&quot;)) {</span>
<span class="nc" id="L95">				Integer integerOutOfAdheranceThreshold = (Integer) notifyRuleParameter.getValue();</span>
<span class="nc" id="L96">				nOutOfAdheranceThreshold = integerOutOfAdheranceThreshold.intValue();</span>
			}
<span class="nc bnc" id="L98" title="All 2 branches missed.">			if (notifyRuleParameter.getName().equals(&quot;Activity&quot;)) {</span>
<span class="nc bnc" id="L99" title="All 2 branches missed.">				if (notifyRuleParameter.getValue() instanceof ID) {</span>
<span class="nc" id="L100">					ID idActivity = (ID) notifyRuleParameter.getValue();</span>
<span class="nc" id="L101">					colActivityIDs = new LinkedList();</span>
<span class="nc" id="L102">					colActivityIDs.add(idActivity);</span>
<span class="nc" id="L103">				} else</span>
<span class="nc" id="L104">					colActivityIDs = (Collection) notifyRuleParameter.getValue();</span>
			}

<span class="nc bnc" id="L107" title="All 2 branches missed.">			if (notifyRuleParameter.getName().equals(&quot;ActivityClause&quot;))</span>
<span class="nc" id="L108">				nActivityClause = ((Integer) notifyRuleParameter.getValue()).intValue();</span>
<span class="nc" id="L109">		}</span>
<span class="nc bnc" id="L110" title="All 2 branches missed.">		if (nOutOfAdheranceThreshold == -1)</span>
<span class="nc" id="L111">			throw new BbmException(&quot;Bad Notify Rule: missing OutOfAdheranceThreshold&quot;);</span>
<span class="nc bnc" id="L112" title="All 4 branches missed.">		if ((colActivityIDs == null &amp;&amp; nActivityClause == 0))</span>
<span class="nc" id="L113">			throw new BbmException(&quot;Bad Notify Rule: missing Activity&quot;);</span>
<span class="nc bnc" id="L114" title="All 4 branches missed.">		if (nActivityClause &lt; 0 || nActivityClause &gt; 1)</span>
<span class="nc" id="L115">			throw new BbmException(&quot;Bad Notify Rule: bad Activity Clause&quot;);</span>

<span class="nc" id="L117">		Collection colEmployeeIDs = getRuleScopeEmployeeIDs(notifyRule);</span>

		// Date dateCurrent = Calendar.getInstance().getTime();

<span class="nc" id="L121">		Collection colEmployeeIDsChunk = new LinkedList();</span>
<span class="nc bnc" id="L122" title="All 2 branches missed.">		for (Iterator itEmployeeID = colEmployeeIDs.iterator(); itEmployeeID.hasNext();) {</span>
<span class="nc" id="L123">			ID idEmployee = (ID) itEmployeeID.next();</span>
<span class="nc" id="L124">			colEmployeeIDsChunk.add(idEmployee);</span>
<span class="nc bnc" id="L125" title="All 4 branches missed.">			if (colEmployeeIDsChunk.size() &lt; 100 &amp;&amp; itEmployeeID.hasNext())</span>
<span class="nc" id="L126">				continue;</span>
<span class="nc" id="L127">			m_cat.debug(&quot;Begin: getAdheranceStatusData: for EmployeeIDs&quot; + colEmployeeIDsChunk);</span>

			// AdheranceStatusData adheranceStatusData =
			// m_rtaaManager.getAdheranceStatusData(
			// colEmployeeIDsChunk,
			// new LinkedList(),
			// -1,
			// false,
			// 0,
			// Integer.MAX_VALUE,
			// nActivityClause == 1);
			// m_cat.debug(&quot;End: getAdheranceStatusData&quot;);

			// get employees' adherance status with 5 minute look back
<span class="nc bnc" id="L141" title="All 2 branches missed.">			HashMap hmEmployeesAdheranceStatus = m_rtaaManager.getAdheranceStatusForEmployees(colEmployeeIDsChunk, 5,</span>
					nActivityClause == 1);
			// HashMap hmEmployeeAdheranceStatus =
			// adheranceStatusData.getEmployeeAdheranceStatus();

<span class="nc bnc" id="L146" title="All 2 branches missed.">			for (Iterator itEmployeeIDChunk = colEmployeeIDsChunk.iterator(); itEmployeeIDChunk.hasNext();) {</span>
<span class="nc" id="L147">				idEmployee = (ID) itEmployeeIDChunk.next();</span>

<span class="nc" id="L149">				Collection colEmployeeAdheranceStatus = (Collection) hmEmployeesAdheranceStatus.get(idEmployee);</span>

<span class="nc" id="L151">				int nMinutesOutOfAdherance = 0;</span>
<span class="nc" id="L152">				String strEmployeeName = &quot;&quot;;</span>
<span class="nc" id="L153">				String strPlannedActivityName = &quot;&quot;;</span>
<span class="nc" id="L154">				String strActualActivityName = &quot;&quot;;</span>

				// only send noticication for the last out of adherance
				// exception which has number minutes greater than thresshold
<span class="nc bnc" id="L158" title="All 2 branches missed.">				for (Iterator i = colEmployeeAdheranceStatus.iterator(); i.hasNext();) {</span>
					// EmployeeAdheranceStatus employeeAdheranceStatus =
					// (EmployeeAdheranceStatus)
					// hmEmployeeAdheranceStatus.get(idEmployee);
<span class="nc" id="L162">					EmployeeAdheranceStatus employeeAdheranceStatus = (EmployeeAdheranceStatus) i.next();</span>

<span class="nc" id="L164">					ID idPlannedActivity = employeeAdheranceStatus.getPlannedActivityID();</span>
<span class="nc bnc" id="L165" title="All 2 branches missed.">					if (idPlannedActivity == null)</span>
<span class="nc" id="L166">						idPlannedActivity = Activity.ACTIVITY_NONE;</span>
<span class="nc" id="L167">					ID idActualActivity = employeeAdheranceStatus.getActualActivityID();</span>
<span class="nc bnc" id="L168" title="All 2 branches missed.">					if (idActualActivity == null)</span>
<span class="nc" id="L169">						idActualActivity = Activity.ACTIVITY_NONE;</span>
<span class="nc" id="L170">					int nMinutesOutOfAdheranceTemp = employeeAdheranceStatus.getSecondsOutOfAdherance() / 60;</span>
<span class="nc bnc" id="L171" title="All 2 branches missed.">					if (m_cat.isDebugEnabled()) {</span>
<span class="nc" id="L172">						m_cat.debug(&quot;EmployeeID = &quot; + idEmployee + &quot;Out of adherance: &quot;</span>
								+ new Integer(nMinutesOutOfAdheranceTemp) + &quot;minutes, PlannedActivity = &quot;
								+ idPlannedActivity + &quot;ActualActivity = &quot; + idActualActivity);
					}

<span class="nc bnc" id="L177" title="All 6 branches missed.">					if ((nActivityClause == 1 || colActivityIDs.contains(idPlannedActivity))</span>
							&amp;&amp; nMinutesOutOfAdheranceTemp &gt; nOutOfAdheranceThreshold) {
<span class="nc" id="L179">						strEmployeeName = m_localizer.formatName(employeeAdheranceStatus.getEmployeeName());</span>
<span class="nc bnc" id="L180" title="All 2 branches missed.">						if (m_cat.isDebugEnabled())</span>
<span class="nc" id="L181">							m_cat.debug(&quot;NOTIFY: Employee&quot; + strEmployeeName + &quot;Out of adherance&quot;);</span>

<span class="nc" id="L183">						Activity activity = null;</span>
<span class="nc bnc" id="L184" title="All 2 branches missed.">						if (idPlannedActivity != Activity.ACTIVITY_NONE) {</span>
<span class="nc" id="L185">							activity = m_activityManager.findActivityById(idPlannedActivity);</span>
<span class="nc bnc" id="L186" title="All 2 branches missed.">							if (activity != null)</span>
<span class="nc" id="L187">								strPlannedActivityName = activity.getName();</span>
						}

<span class="nc bnc" id="L190" title="All 2 branches missed.">						if (idActualActivity != Activity.ACTIVITY_NONE) {</span>
<span class="nc" id="L191">							activity = m_activityManager.findActivityById(idActualActivity);</span>
<span class="nc bnc" id="L192" title="All 2 branches missed.">							if (activity != null)</span>
<span class="nc" id="L193">								strActualActivityName = activity.getName();</span>
						}
<span class="nc" id="L195">						nMinutesOutOfAdherance = nMinutesOutOfAdheranceTemp;</span>
					}
<span class="nc" id="L197">				}</span>

				// send notification email
<span class="nc bnc" id="L200" title="All 2 branches missed.">				if (nMinutesOutOfAdherance &gt; 0) {</span>
<span class="nc" id="L201">					Element elementXmlMessage = createXmlMessage(idEmployee, strEmployeeName, strPlannedActivityName,</span>
							strActualActivityName, nMinutesOutOfAdherance);
<span class="nc bnc" id="L203" title="All 2 branches missed.">					if (actionDetail == null) {</span>
<span class="nc" id="L204">						actionDetail = new ActionDetail();</span>
<span class="nc" id="L205">						actionDetail.setObjectType(ActionDetail.WORKRESOUCEID);</span>
					}
<span class="nc" id="L207">					actionDetail.setDetails(idEmployee, elementXmlMessage);</span>
				}
<span class="nc" id="L209">			}</span>
<span class="nc" id="L210">			colEmployeeIDsChunk.clear();</span>
<span class="nc" id="L211">		}</span>

<span class="nc bnc" id="L213" title="All 2 branches missed.">		if (m_cat.isDebugEnabled())</span>
<span class="nc" id="L214">			m_cat.debug(&quot;EXIT: testRule&quot;);</span>

<span class="nc" id="L216">		return actionDetail;</span>
	}

	private Collection getRuleScopeEmployeeIDs(NotifyRule rule) throws Exception {
<span class="nc" id="L220">		HashSet ids = new HashSet();</span>
<span class="nc" id="L221">		ArrayList alParameters = new ArrayList();</span>
<span class="nc" id="L222">		Filter filter = null;</span>
<span class="nc bnc" id="L223" title="All 4 branches missed.">		switch (rule.getScopeType()) {</span>
		case NotifyRule.GENERIC_SCOPE:
<span class="nc" id="L225">			return ids;</span>
		case NotifyRule.ORG_SCOPE:
<span class="nc" id="L227">			ID idOrganization = rule.getScopeID();</span>
<span class="nc" id="L228">			Jdmo jdmo = null;</span>
<span class="nc" id="L229">			Collection colOrganizationIDs = null;</span>
			try {
<span class="nc" id="L231">				jdmo = new Jdmo();</span>
<span class="nc" id="L232">				colOrganizationIDs = DAOUtil.getChildOrganizations(idOrganization, jdmo);</span>
<span class="nc" id="L233">				colOrganizationIDs.add(idOrganization);</span>
			} finally {
<span class="nc" id="L235">				jdmo.cleanUp();</span>
<span class="nc" id="L236">			}</span>
<span class="nc" id="L237">			alParameters.add(colOrganizationIDs);</span>
<span class="nc" id="L238">			filter = new com.bluepumpkin.ejb.bbm.employeefilter.model.Filter(Filter.ORGANIZATIONID, Filter.OPERATOR_IN,</span>
					alParameters);
<span class="nc" id="L240">			break;</span>
		case NotifyRule.CAMPAIGN_SCOPE:
<span class="nc" id="L242">			ID idCampaign = rule.getScopeID();</span>
<span class="nc" id="L243">			ArrayList campaignIDs = new ArrayList();</span>
<span class="nc" id="L244">			campaignIDs.add(idCampaign);</span>
<span class="nc" id="L245">			alParameters.add(campaignIDs);</span>
<span class="nc" id="L246">			filter = new com.bluepumpkin.ejb.bbm.employeefilter.model.Filter(Filter.CAMPAIGNID, Filter.OPERATOR_IN,</span>
					alParameters);
			break;
		}
<span class="nc" id="L250">		filter.setUserID(User.SUPER_USERID);</span>
<span class="nc" id="L251">		filter.setTimePeriodType(Filter.TIMEPERIODTYPE_CURRENT);</span>
<span class="nc" id="L252">		return m_employeeFilter.getEmployeeIDs(filter, -1, true, 0, Integer.MAX_VALUE);</span>
	}

	/**
	 * Returns the XML node that represents the root of the tree that describes
	 * the schedule changes for a certain employee
	 */
	private Element createXmlMessage(ID idEmployee, String strEmployeeName, String strPlannedActivityName,
			String strActualActivityName, int nMinutesOutOfAdherance) throws Exception {
<span class="nc" id="L261">		Document doc = m_parser.newDocument();</span>
<span class="nc" id="L262">		Element xmlRoot = doc.createElement(&quot;OutOfAdherance&quot;);</span>
<span class="nc" id="L263">		doc.appendChild(xmlRoot);</span>
<span class="nc" id="L264">		Element xmlEmployee = doc.createElement(&quot;Employee&quot;);</span>
<span class="nc" id="L265">		xmlRoot.appendChild(xmlEmployee);</span>
<span class="nc" id="L266">		Node xmlId = doc.createElement(&quot;ID&quot;);</span>
<span class="nc" id="L267">		xmlId.appendChild(doc.createTextNode(idEmployee.toString()));</span>
<span class="nc" id="L268">		xmlEmployee.appendChild(xmlId);</span>
<span class="nc" id="L269">		Element xmlName = doc.createElement(&quot;Name&quot;);</span>
<span class="nc" id="L270">		xmlName.appendChild(doc.createTextNode(strEmployeeName));</span>
<span class="nc" id="L271">		xmlEmployee.appendChild(xmlName);</span>

<span class="nc" id="L273">		Element elementPlannedActivity = doc.createElement(&quot;PlannedActivity&quot;);</span>
<span class="nc" id="L274">		elementPlannedActivity.appendChild(doc.createTextNode(strPlannedActivityName));</span>
<span class="nc" id="L275">		xmlEmployee.appendChild(elementPlannedActivity);</span>

<span class="nc" id="L277">		Element elementActualActivity = doc.createElement(&quot;ActualActivity&quot;);</span>
<span class="nc" id="L278">		elementActualActivity.appendChild(doc.createTextNode(strActualActivityName));</span>
<span class="nc" id="L279">		xmlEmployee.appendChild(elementActualActivity);</span>

<span class="nc" id="L281">		Integer intMinutesOutOfAdherance = new Integer(nMinutesOutOfAdherance);</span>
<span class="nc" id="L282">		String strMinutesOutOfAdherance = intMinutesOutOfAdherance.toString();</span>
<span class="nc" id="L283">		Element elementMinutesOutOfAdherance = doc.createElement(&quot;MinutesOutOfAdherance&quot;);</span>
<span class="nc" id="L284">		elementMinutesOutOfAdherance.appendChild(doc.createTextNode(strMinutesOutOfAdherance));</span>
<span class="nc" id="L285">		xmlEmployee.appendChild(elementMinutesOutOfAdherance);</span>
<span class="nc" id="L286">		return xmlRoot;</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see
	 * com.bluepumpkin.ejb.bbm.notifyrules.model.NotifyRuleChecker#isRuleValid(
	 * com.bluepumpkin.ejb.bbm.notifyrules.model.NotifyRule,
	 * com.bluepumpkin.ejb.bbm.notifyrules.model.NotifyRuleTemplate)
	 */
	public boolean isRuleValid(NotifyRule notifyRule, NotifyRuleTemplate notifyRuleTemplate) {
<span class="nc bnc" id="L298" title="All 2 branches missed.">		for (Iterator itRuleParameter = notifyRule.getRuleParameters().iterator(); itRuleParameter.hasNext();) {</span>
<span class="nc" id="L299">			NotifyRuleParameter notifyRuleParameter = (NotifyRuleParameter) itRuleParameter.next();</span>
<span class="nc bnc" id="L300" title="All 2 branches missed.">			if (notifyRuleParameter.getName().equals(&quot;OutOfAdheranceThreshold&quot;)) {</span>
<span class="nc" id="L301">				Integer integerOutOfAdheranceThreshold = (Integer) notifyRuleParameter.getValue();</span>
<span class="nc" id="L302">				int nOutOfAdheranceThreshold = integerOutOfAdheranceThreshold.intValue();</span>
<span class="nc bnc" id="L303" title="All 2 branches missed.">				if (nOutOfAdheranceThreshold &lt; 0)</span>
<span class="nc" id="L304">					return false;</span>
			}
<span class="nc" id="L306">		}</span>
<span class="nc" id="L307">		return true;</span>
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see com.bluepumpkin.ejb.bbm.notifyrules.model.NotifyRuleChecker#
	 * getRuleViolation(com.bluepumpkin.ejb.bbm.notifyrules.model.NotifyRule,
	 * com.bluepumpkin.ejb.bbm.notifyrules.model.NotifyRuleTemplate,
	 * com.bluepumpkin.common.localization.LocaleContext)
	 */
	public String getRuleViolation(NotifyRule notifyRule, NotifyRuleTemplate notifyRuleTemplate,
			LocaleContext localeContext) {
<span class="nc bnc" id="L320" title="All 2 branches missed.">		for (Iterator itRuleParameter = notifyRule.getRuleParameters().iterator(); itRuleParameter.hasNext();) {</span>
<span class="nc" id="L321">			NotifyRuleParameter notifyRuleParameter = (NotifyRuleParameter) itRuleParameter.next();</span>
<span class="nc bnc" id="L322" title="All 2 branches missed.">			if (notifyRuleParameter.getName().equals(&quot;OutOfAdheranceThreshold&quot;)) {</span>
<span class="nc" id="L323">				Integer integerOutOfAdheranceThreshold = (Integer) notifyRuleParameter.getValue();</span>
<span class="nc" id="L324">				int nOutOfAdheranceThreshold = integerOutOfAdheranceThreshold.intValue();</span>
<span class="nc bnc" id="L325" title="All 2 branches missed.">				if (nOutOfAdheranceThreshold &lt; 0) {</span>
<span class="nc" id="L326">					return m_localizer.i18n(BbmEjbBundleKey.BUNDLE_NAME,</span>
							BbmEjbBundleKey.OUTOFADHERANCETHRESHOLD_CANNOT_BE_NEGATIVE);
				}
			}
<span class="nc" id="L330">		}</span>
<span class="nc" id="L331">		return null;</span>
	}

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>