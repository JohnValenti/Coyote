<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>MyTimeScheduleModel.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">QA Code Coverage</a> &gt; <a href="index.source.html" class="el_package">com.bluepumpkin.web.am.timecollection</a> &gt; <span class="el_source">MyTimeScheduleModel.java</span></div><h1>MyTimeScheduleModel.java</h1><pre class="source lang-java linenums">package com.bluepumpkin.web.am.timecollection;

import java.util.Calendar;
import com.bluepumpkin.ejb.core.profile.model.UserProfile;
import com.bluepumpkin.web.core.keys.PageKeys;
import com.witness.web.uif.keys.UserPreferenceKeys;
import com.witness.web.uif.system.RequestContext;


/**
 * Title:        Blue Pumpkin Software Activity Management
 * Description:  My Time page model
 * Copyright:    Copyright (c) 2001
 * Company:      Blue Pumpkin Software, inc
 * @author       Swati Tewari
 * @version      1.0
 */
public class MyTimeScheduleModel extends MyTimeModel{
	private boolean m_unavailPref;

	public MyTimeScheduleModel(RequestContext context) throws Exception {
<span class="nc" id="L22">		super(context,MyTimeModel.SCHEDULE_MODEL);</span>
<span class="nc" id="L23">		addJSVariable(PageKeys.LIST_OFFSET_JS_VAR, &quot;false&quot;);</span>
		try {
<span class="nc" id="L25">			Calendar aCalendar = getStartDateCalendar();</span>

			//end day=start day + 1 day
<span class="nc" id="L28">			Calendar aEndCal = getCalendar();</span>
<span class="nc" id="L29">			aEndCal.setTime(aCalendar.getTime());</span>
<span class="nc" id="L30">			aEndCal.add(Calendar.DATE,1);</span>
<span class="nc bnc" id="L31" title="All 2 branches missed.">			if ( empId != null )</span>
<span class="nc" id="L32">				myTimeEvent = MyTimeModelHandler.getScheduleEventsForDays(empId, aCalendar, aEndCal, m_unavailPref);</span>
<span class="nc" id="L33">		} catch ( Exception e ) {</span>
<span class="nc" id="L34">		}</span>
<span class="nc" id="L35">	}</span>

	public static MyTimeScheduleModel getInstance(RequestContext context)throws Exception{
<span class="nc" id="L38">		MyTimeScheduleModel model = (MyTimeScheduleModel) context.getAttribute(RequestContext.REQUEST_SCOPE,</span>
							MyTimeModel.MODEL_KEY);
<span class="nc bnc" id="L40" title="All 2 branches missed.">		if (model==null){</span>
			//create a new model
<span class="nc" id="L42">			model = new MyTimeScheduleModel(context);</span>
			// Cache model
<span class="nc" id="L44">			context.setAttribute(RequestContext.REQUEST_SCOPE, MyTimeModel.MODEL_KEY, model);</span>
		}

<span class="nc" id="L47">		return model;</span>
	}


	/**
	* getNeedNotes()
	* return boolean
	*/
	public boolean getNeedNotes(){
<span class="nc" id="L56">		return false;</span>
	}


	/**
	 * Return URL for HTML Form Action
	 */
	public String getFormAction() {
<span class="nc" id="L64">		return &quot;showschedule&quot;;</span>
	}

	protected void setUnavailPref(UserProfile aProfile) {
<span class="nc" id="L68">		String show = aProfile.loadProperty(UserPreferenceKeys.USER_SHOW_UNAVAILABLE,&quot;false&quot;);</span>

<span class="nc bnc" id="L70" title="All 2 branches missed.">        m_unavailPref = !(&quot;false&quot;.equalsIgnoreCase(show));</span>
<span class="nc" id="L71">	}</span>

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>