<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>TimeOffIntervalAllocationManagerEJB.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">QA Code Coverage</a> &gt; <a href="index.source.html" class="el_package">com.bluepumpkin.ejb.rm.requests.timeoff.intervalallocation.ejb</a> &gt; <span class="el_source">TimeOffIntervalAllocationManagerEJB.java</span></div><h1>TimeOffIntervalAllocationManagerEJB.java</h1><pre class="source lang-java linenums">package com.bluepumpkin.ejb.rm.requests.timeoff.intervalallocation.ejb;

import java.util.ArrayList;
import java.util.Collection;
import java.util.Collections;
import java.util.Date;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.TimeZone;

import com.bluepumpkin.common.datatypes.ID;
import com.bluepumpkin.common.datatypes.Pair;
import com.bluepumpkin.common.datatypes.TimeRange;
import com.bluepumpkin.common.logging.Category;
import com.bluepumpkin.ejb.bbm.base.BbmCreateException;
import com.bluepumpkin.ejb.bbm.base.BbmFinderException;
import com.bluepumpkin.ejb.bbm.base.BbmRemoveException;
import com.bluepumpkin.ejb.bbm.base.BbmUpdateException;
import com.bluepumpkin.ejb.bbm.schedule.model.ShiftAssignment;
import com.bluepumpkin.ejb.bbm.workresource.model.Organization;
import com.bluepumpkin.ejb.core.base.SessionEJBBase;
import com.bluepumpkin.ejb.rm.Log;
import com.bluepumpkin.ejb.rm.requests.timeoff.ejb.TOChoiceDAO;
import com.bluepumpkin.ejb.rm.requests.timeoff.ejb.TORequestDAO;
import com.bluepumpkin.ejb.rm.requests.timeoff.intervalallocation.TimeOffIntervalPaidSegmentCalculator;
import com.bluepumpkin.ejb.rm.requests.timeoff.intervalallocation.model.TimeOffIntervalPaidSegment;
import com.bluepumpkin.ejb.rm.requests.timeoff.model.TOChoice;
import com.bluepumpkin.ejb.rm.requests.timeoff.model.TORequest;
import com.bluepumpkin.ejb.rm.util.RmUtil;

<span class="fc" id="L32">public class TimeOffIntervalAllocationManagerEJB extends SessionEJBBase {</span>

	private static final long serialVersionUID = 3308628928481776660L;
<span class="fc" id="L35">	private static final String CLASSNAME = TimeOffIntervalAllocationManagerEJB.class</span>
<span class="fc" id="L36">			.getName();</span>
<span class="fc" id="L37">	private static final Category LOG = Log</span>
<span class="fc" id="L38">			.initCategory(TimeOffIntervalAllocationManagerEJB.CLASSNAME);</span>

	
	// non-static initializer
	{
<span class="fc" id="L43">		super.init(TimeOffIntervalAllocationManagerEJB.class.getName());</span>
<span class="fc" id="L44">	}</span>

	/**
	 * override the base class to provide the appropriate logging category
	 */
	@Override
	protected Category getCategory() {
<span class="nc" id="L51">		return LOG;</span>
	}


	public void deleteTimeOffIntervalPaidSegmentsForTimeOffChoice(
			TOChoice toChoice) throws BbmRemoveException{

<span class="nc" id="L58">		String methodName = &quot;deleteTimeOffIntervalPaidSegmentsForTimeOffChoice&quot;;</span>
<span class="nc" id="L59">		enterMethod(methodName);</span>

		

<span class="nc bnc" id="L63" title="All 2 branches missed.">		if (toChoice == null){</span>
<span class="nc" id="L64">			return;</span>
		}
	
<span class="nc" id="L67">		TimeOffIntervalPaidSegmentDAO dao = null;</span>

		try {
<span class="nc" id="L70">			dao = new TimeOffIntervalPaidSegmentDAO();</span>
<span class="nc" id="L71">			dao.deleteTimeOffIntervalPaidSegmentsForTimeOffChoice(toChoice</span>
<span class="nc" id="L72">					.getID());</span>
<span class="nc" id="L73">		} catch (Exception e) {</span>
<span class="nc" id="L74">			throw new BbmRemoveException(e);</span>
		} finally {
<span class="nc" id="L76">			cleanUp(dao);</span>
<span class="nc" id="L77">		}</span>
<span class="nc" id="L78">		exitMethod(methodName);</span>

<span class="nc" id="L80">	}</span>



	public void updateTimeOffIntervalPaidSegment(
			TimeOffIntervalPaidSegment segment) throws BbmUpdateException{

<span class="nc" id="L87">		String methodName = &quot;updateTimeOffIntervalPaidSegment&quot;;</span>
<span class="nc" id="L88">		enterMethod(methodName);</span>

		
<span class="nc" id="L91">		TimeOffIntervalPaidSegmentDAO dao = null;</span>

		try {
<span class="nc" id="L94">			dao = new TimeOffIntervalPaidSegmentDAO();</span>
<span class="nc" id="L95">			dao.updateTimeOffIntervalPaidSegment(segment);</span>
<span class="nc" id="L96">		} catch (Exception e) {</span>
<span class="nc" id="L97">			throw new BbmUpdateException(e);</span>
		} finally {
<span class="nc" id="L99">			cleanUp(dao);</span>
<span class="nc" id="L100">		}</span>
		
<span class="nc" id="L102">		exitMethod(methodName);</span>
<span class="nc" id="L103">	}</span>

	public TimeOffIntervalPaidSegment getTimeOffIntervalPaidSegment(ID id) throws BbmFinderException{

<span class="nc" id="L107">		String methodName = &quot;getTimeOffIntervalPaidSegment&quot;;</span>
<span class="nc" id="L108">		enterMethod(methodName);</span>

	
<span class="nc" id="L111">		TimeOffIntervalPaidSegmentDAO dao = null;</span>
<span class="nc" id="L112">		TimeOffIntervalPaidSegment segment = null;</span>
		try {
<span class="nc" id="L114">			dao = new TimeOffIntervalPaidSegmentDAO();</span>
<span class="nc" id="L115">			segment = dao.getObjectByID(id);</span>
<span class="nc" id="L116">		} catch (Exception e) {</span>
<span class="nc" id="L117">			throw new BbmFinderException(e);</span>
		} finally {
<span class="nc" id="L119">			cleanUp(dao);</span>
<span class="nc" id="L120">		}</span>
		
<span class="nc" id="L122">		exitMethod(methodName);</span>
<span class="nc" id="L123">		return segment;</span>
	}

	public List&lt;TimeOffIntervalPaidSegment&gt; findTimeOffIntervalPaidSegmentsForTimeOffChoice(
			TOChoice toChoice)  throws BbmFinderException {

		
<span class="nc" id="L130">		String methodName = &quot;findTimeOffIntervalPaidSegmentsForTimeOffChoice&quot;;</span>
<span class="nc" id="L131">		enterMethod(methodName);</span>

<span class="nc" id="L133">		List&lt;TimeOffIntervalPaidSegment&gt; list = null;</span>
		
<span class="nc" id="L135">		TimeOffIntervalPaidSegmentDAO dao = null;</span>

		try {
<span class="nc" id="L138">			dao = new TimeOffIntervalPaidSegmentDAO();</span>
<span class="nc" id="L139">			list = dao.findTimeOffIntervalPaidSegmentsForTimeOffChoice(toChoice</span>
<span class="nc" id="L140">					.getID());</span>
<span class="nc" id="L141">		} catch (Exception e) {</span>
<span class="nc" id="L142">			throw new BbmFinderException(e);</span>
		} finally {
<span class="nc" id="L144">			cleanUp(dao);</span>
<span class="nc" id="L145">		}</span>
		
<span class="nc" id="L147">		exitMethod(methodName);</span>

<span class="nc" id="L149">		return list;</span>

	}

	public List&lt;TimeOffIntervalPaidSegment&gt; findTimeOffIntervalPaidSegmentsIntersectTimeRange(
			TimeRange timeRange) throws BbmFinderException {
<span class="nc" id="L155">		String methodName = &quot;findTimeOffIntervalPaidSegmentsIntersectTimeRange&quot;;</span>
<span class="nc" id="L156">		enterMethod(methodName);</span>

<span class="nc" id="L158">		enterMethod(&quot;findTimeOffIntervalPaidSegmentsIntersectTimeRange&quot;);</span>
<span class="nc" id="L159">		TimeOffIntervalPaidSegmentDAO dao = null;</span>
<span class="nc" id="L160">		List&lt;TimeOffIntervalPaidSegment&gt; list = null;</span>

		try {
<span class="nc" id="L163">			dao = new TimeOffIntervalPaidSegmentDAO();</span>
<span class="nc" id="L164">			list = dao</span>
<span class="nc" id="L165">					.findTimeOffIntervalPaidSegmentsIntersectTimeRange(timeRange);</span>
<span class="nc" id="L166">		} catch (Exception e) {</span>
<span class="nc" id="L167">			throw new BbmFinderException(e);</span>
		} finally {
<span class="nc" id="L169">			cleanUp(dao);</span>
<span class="nc" id="L170">		}</span>
<span class="nc" id="L171">		exitMethod(methodName);</span>
<span class="nc" id="L172">		return list;</span>

	}



	List&lt;ID&gt; createTimeOffIntervalPaidSegments(
			Collection&lt;TimeOffIntervalPaidSegment&gt; listOfSegments, Map&lt;ID, ID&gt; mapTOChoiceToReferenceScheduleID) throws BbmCreateException{

<span class="fc" id="L181">		String methodName = &quot;createTimeOffIntervalPaidSegments&quot;;</span>
<span class="fc" id="L182">		enterMethod(methodName);</span>

<span class="fc" id="L184">		List&lt;ID&gt; listOfIDs = null;</span>
<span class="fc" id="L185">		TimeOffIntervalPaidSegmentDAO dao = null;</span>
<span class="fc" id="L186">		TOChoiceDAO toChoiceDAO = null;</span>
		
		try {
<span class="fc" id="L189">			dao = new TimeOffIntervalPaidSegmentDAO();</span>
<span class="fc" id="L190">			listOfIDs = (List&lt;ID&gt;) dao.createObjects(listOfSegments);</span>
			
			//Update the TOChoice reference schedule
<span class="pc bpc" id="L193" title="2 of 4 branches missed.">			if(mapTOChoiceToReferenceScheduleID != null &amp;&amp; !mapTOChoiceToReferenceScheduleID.isEmpty()){</span>
<span class="fc" id="L194">				toChoiceDAO = new TOChoiceDAO();</span>
<span class="fc" id="L195">				toChoiceDAO.updateReferenceScheduleIDs(mapTOChoiceToReferenceScheduleID);</span>
			}
			
<span class="nc" id="L198">		} catch (Exception e) {</span>
<span class="nc" id="L199">			throw new BbmCreateException(e);</span>
		} finally {
<span class="pc" id="L201">			cleanUp(dao);</span>
<span class="pc" id="L202">			cleanUp(toChoiceDAO);</span>
<span class="fc" id="L203">		}</span>
		
<span class="fc" id="L205">		exitMethod(methodName);</span>

<span class="fc" id="L207">		return listOfIDs;</span>

	}
	


	private List&lt;ID&gt; updateTimeOffIntervalPaidSegmentsForTORequest(TORequest toRequest) throws Exception{
<span class="fc" id="L214">		return onCreateTORequest(toRequest);</span>
	}
	
	/*
	 * updateTimeOffIntervalsbyTimeOffChoice
	 * Given a list of choices and requests, delete then recreate the segments per choice
	 * Called from publish/unpublish schedules. We only update the choices passed in.
	 * returns a list of segment ids created
	 */
	public List&lt;ID&gt; updateTimeOffIntervalsForTimeOffChoices(Collection&lt;TORequest&gt; listRequests, List&lt;ID&gt; timeOffChoiceIDs)
			throws BbmUpdateException {
<span class="fc" id="L225">		String methodName = &quot;updateTimeOffIntervalsForTimeOffChoices&quot;;</span>
<span class="fc" id="L226">		enterMethod(methodName);</span>
<span class="fc" id="L227">		List&lt;TimeOffIntervalPaidSegment&gt; listOfSegments = new ArrayList&lt;TimeOffIntervalPaidSegment&gt;();</span>
<span class="fc" id="L228">		Map&lt;ID, ID&gt; mapTOChoiceToReferenceScheduleID = new HashMap&lt;ID, ID&gt;();</span>
		
		try{
<span class="fc" id="L231">			deleteTimeOffIntervalsByTimeOffChoices(timeOffChoiceIDs);</span>
			
<span class="fc bfc" id="L233" title="All 2 branches covered.">			for( TORequest request : listRequests){</span>
				
<span class="fc" id="L235">				TimeOffIntervalPaidSegmentCalculator calculator = new TimeOffIntervalPaidSegmentCalculator();</span>
<span class="fc" id="L236">				List&lt;TimeOffIntervalPaidSegment&gt; segments = calculator</span>
<span class="fc" id="L237">						.updateTimeOffIntervalPaidSegmentsChoices(request, timeOffChoiceIDs);</span>
<span class="fc" id="L238">				listOfSegments.addAll(segments);</span>
				
				//Update the map of Choices to Reference Schedules
<span class="fc" id="L241">				Map&lt;ID, ID&gt; mapChoiceToRefSchedule = calculator.getMapTOChoiceReferenceScheduleID();</span>
<span class="fc" id="L242">				mapTOChoiceToReferenceScheduleID.putAll(mapChoiceToRefSchedule);</span>
<span class="fc" id="L243">			}</span>
		
<span class="fc" id="L245">		return createTimeOffIntervalPaidSegments(listOfSegments, mapTOChoiceToReferenceScheduleID);</span>
		
<span class="nc" id="L247">		} catch(Exception e){</span>
<span class="nc" id="L248">			throw new BbmUpdateException(e);</span>
		}finally{
<span class="pc" id="L250">			exitMethod(methodName);</span>
		}
		
	}
	
	// Load all requests from choiceIDs
	public Collection&lt;TORequest&gt; getTORequestsFromChoiceIDs(List&lt;ID&gt; timeOffChoiceIDs)
			throws BbmFinderException {
<span class="fc" id="L258">		String methodName = &quot;getTORequestsFromChoiceIDs&quot;;</span>
<span class="fc" id="L259">		enterMethod(methodName);</span>
<span class="fc" id="L260">		TORequestDAO toReqDao = null;</span>
		try{
<span class="fc" id="L262">			toReqDao = new TORequestDAO(TORequest.DL_BASIC| TORequest.DL_TIMEOFF_CHOICES  | TORequest.DL_TIMEOFF_CHOICES_LENGTH);</span>
<span class="fc" id="L263">			return toReqDao.getRequestsFromChoiceIDs(timeOffChoiceIDs);</span>
<span class="nc" id="L264">		}catch(Exception e){</span>
<span class="nc" id="L265">			throw new BbmFinderException(e);</span>
		} finally {
<span class="pc bpc" id="L267" title="3 of 4 branches missed.">			if (toReqDao != null) {</span>
<span class="pc" id="L268">				toReqDao.cleanUp();</span>
			}
<span class="pc" id="L270">			exitMethod(methodName);</span>
		}
	}
	
	private void deleteTimeOffIntervalsByTimeOffChoices(List&lt;ID&gt; timeOffChoiceIDs) throws BbmRemoveException{
	
<span class="fc" id="L276">		String methodName = &quot;updateTimeOffIntervalsForTimeOffChoice&quot;;</span>
<span class="fc" id="L277">		enterMethod(methodName);</span>
<span class="fc" id="L278">		TimeOffIntervalPaidSegmentDAO dao = null;</span>
		try {
<span class="fc" id="L280">			dao  = new TimeOffIntervalPaidSegmentDAO();</span>
<span class="fc" id="L281">			dao.deleteTimeOffIntervalsForTimeOffChoices(timeOffChoiceIDs);</span>
<span class="nc" id="L282">		} catch (Exception e) {</span>
<span class="nc" id="L283">			throw new BbmRemoveException(e);</span>
		} finally {
<span class="pc" id="L285">			cleanUp(dao);</span>
<span class="fc" id="L286">		}</span>
		
<span class="fc" id="L288">		exitMethod(methodName);</span>
<span class="fc" id="L289">	}</span>
		
	
	
	
	private void deleteTimeOffIntervalPaidSegmentsForTORequest(TORequest request) throws BbmRemoveException{
<span class="fc" id="L295">		String methodName = &quot;deleteTimeOffIntervalPaidSegmentsForTORequest&quot;;</span>
<span class="fc" id="L296">		enterMethod(methodName);</span>

<span class="fc" id="L298">		List&lt;ID&gt; toChoiceIDs = new ArrayList&lt;ID&gt;();</span>
		
		
		@SuppressWarnings(&quot;unchecked&quot;)
<span class="fc" id="L302">		List&lt;TOChoice&gt; list = request.getRequestChoiceList();</span>
<span class="fc bfc" id="L303" title="All 2 branches covered.">		for (TOChoice toChoice : list) {</span>
<span class="pc bpc" id="L304" title="1 of 2 branches missed.">			if(toChoice==null){</span>
<span class="nc" id="L305">				continue;</span>
			}
<span class="fc" id="L307">			toChoiceIDs.add(toChoice.getID());</span>
<span class="fc" id="L308">		}</span>
		
<span class="fc" id="L310">		TimeOffIntervalPaidSegmentDAO dao = null;</span>

		try {
<span class="fc" id="L313">			dao = new TimeOffIntervalPaidSegmentDAO();</span>
<span class="fc" id="L314">			dao.deleteTimeOffIntervalsForTimeOffChoices(toChoiceIDs);</span>
<span class="nc" id="L315">		} catch (Exception e) {</span>
<span class="nc" id="L316">			throw new BbmRemoveException(e);</span>
		} finally {
<span class="pc" id="L318">			cleanUp(dao);</span>
<span class="fc" id="L319">		}</span>
		
<span class="fc" id="L321">		exitMethod(methodName);</span>
<span class="fc" id="L322">	}</span>
	
	
	
	
	
	
	
	public List&lt;ID&gt; onUpdateTORequest(TORequest toRequest) throws Exception {
<span class="fc" id="L331">		return updateTimeOffIntervalPaidSegmentsForTORequest(toRequest);</span>
	}
	
	public List&lt;ID&gt; onCreateTORequest(TORequest toRequest) throws Exception {
<span class="fc" id="L335">		return createTimeOffIntervalPaidSegmentsForTORequest(toRequest);</span>
	}
	
	private List&lt;ID&gt; createTimeOffIntervalPaidSegmentsForTORequest(
			TORequest toRequest) throws Exception {
		
<span class="fc" id="L341">		deleteTimeOffIntervalPaidSegmentsForTORequest(toRequest);</span>
<span class="fc" id="L342">		TimeOffIntervalPaidSegmentCalculator calculator = new TimeOffIntervalPaidSegmentCalculator();</span>
<span class="fc" id="L343">		List&lt;TimeOffIntervalPaidSegment&gt; list = calculator.generateTimeOffIntervalPaidSegmentsForTORequest(toRequest);</span>
<span class="fc" id="L344">		Map&lt;ID, ID&gt; mapTOChoiceToReferenceSchedule = calculator.getMapTOChoiceReferenceScheduleID();</span>
<span class="fc" id="L345">		return createTimeOffIntervalPaidSegments(list, mapTOChoiceToReferenceSchedule);</span>
	}


	public List&lt;EmployeeSPTimeZone&gt; getReferenceScheduleTimeZones(Collection&lt;EmployeeDate&gt; employeeDates) throws BbmFinderException {
<span class="fc" id="L350">		ReferenceScheduleAssignmentsDAO dao = null;</span>
		try {
<span class="fc" id="L352">			dao = new ReferenceScheduleAssignmentsDAO();</span>
<span class="fc" id="L353">			return dao.getReferenceScheduleTimeZones(employeeDates);</span>
<span class="nc" id="L354">		} catch (Exception e) {</span>
<span class="nc" id="L355">			throw new BbmFinderException(e);</span>
		} finally {
<span class="pc" id="L357">			cleanUp(dao);</span>
		}
	}

	public Map&lt;EmployeeSpID, List&lt;ShiftAssignment&gt;&gt; getReferenceScheduleAssignments(Collection&lt;EmployeeSpID&gt; employeeSpIDs) throws BbmFinderException {
<span class="fc" id="L362">		ReferenceScheduleAssignmentsDAO dao = null;</span>
		try {
<span class="fc" id="L364">			dao = new ReferenceScheduleAssignmentsDAO();</span>
<span class="fc" id="L365">			return dao.getReferenceScheduleAssignments(employeeSpIDs);</span>
<span class="nc" id="L366">		} catch (Exception e) {</span>
<span class="nc" id="L367">			throw new BbmFinderException(e);</span>
		} finally {
<span class="pc" id="L369">			cleanUp(dao);</span>
		}
	}
	
	public Map&lt;EmployeeDate, ID&gt; getReferenceScheduleSPDEID(Collection&lt;EmployeeDate&gt; employeeDates) throws BbmFinderException {
<span class="nc" id="L374">		ReferenceScheduleAssignmentsDAO dao = null;</span>
		try {
<span class="nc" id="L376">			dao = new ReferenceScheduleAssignmentsDAO();</span>
<span class="nc" id="L377">			return dao.getReferenceScheduleSPDEID(employeeDates);</span>
<span class="nc" id="L378">		} catch (Exception e) {</span>
<span class="nc" id="L379">			throw new BbmFinderException(e);</span>
		} finally {
<span class="nc" id="L381">			cleanUp(dao);</span>
		}

	}
	
	public Map&lt;IdDateRange, Integer&gt; getPeriodStatus(Collection&lt;IdDateRange&gt; periods) throws BbmFinderException{
		
<span class="pc bpc" id="L388" title="2 of 4 branches missed.">		if (periods == null || periods.isEmpty()) {</span>
<span class="nc" id="L389">			return Collections.emptyMap();</span>
		}

<span class="fc" id="L392">		PublishingPeriodStatusDAO dao = null;</span>
		try {
<span class="fc" id="L394">			dao = new PublishingPeriodStatusDAO();</span>
<span class="fc" id="L395">			return dao.getPeriodStatus(periods);</span>
<span class="nc" id="L396">		} catch (Exception e) {</span>
<span class="nc" id="L397">			throw new BbmFinderException(e);</span>
		} finally {
<span class="pc" id="L399">			cleanUp(dao);</span>
		}
		
	}
	
	public Map&lt;Integer, TimeOffRequestChoiceSegment&gt; checkAllocation(List&lt;ID&gt; listOfRequestsIDs) throws BbmFinderException{
<span class="nc bnc" id="L405" title="All 4 branches missed.">		if (listOfRequestsIDs == null || listOfRequestsIDs.isEmpty()) {</span>
<span class="nc" id="L406">			return Collections.emptyMap();</span>
		}

<span class="nc" id="L409">		TimeoffIntervalAllocationUtilDAO dao = null;</span>
		try {
<span class="nc" id="L411">			dao = new TimeoffIntervalAllocationUtilDAO();</span>
<span class="nc" id="L412">			return dao.checkAllocation(listOfRequestsIDs);</span>
<span class="nc" id="L413">		} catch (Exception e) {</span>
<span class="nc" id="L414">			throw new BbmFinderException(e);</span>
		} finally {
<span class="nc" id="L416">			cleanUp(dao);</span>
		}
	}
	

	public List&lt;ShiftAssignment&gt; getReferenceSchedules(Organization organization,
			ID employeeID, Date start, Date end) throws BbmFinderException  {

<span class="fc" id="L424">		TimeZone tz = organization.getTimeZone();</span>

<span class="fc" id="L426">		List&lt;EmployeeDate&gt; employeeDates = Collections</span>
<span class="fc" id="L427">				.singletonList(new EmployeeDate(employeeID, start));</span>

<span class="fc" id="L429">		ReferenceScheduleLoader loader = new ReferenceScheduleLoader();</span>
<span class="fc" id="L430">		loader.initialize(employeeDates);</span>

<span class="fc" id="L432">		List&lt;ShiftAssignment&gt; referencedShiftEvents = (List&lt;ShiftAssignment&gt;) loader</span>
<span class="fc" id="L433">				.getReferenceSchedules(employeeID, start, end, tz);</span>
<span class="fc" id="L434">		return referencedShiftEvents;</span>
	}

	
	
	
	
	
	private void enterMethod(String method){
<span class="fc" id="L443">		LOG.debug(RmUtil</span>
<span class="fc" id="L444">				.dumpEnterMethod(method));</span>

<span class="fc" id="L446">	}</span>
	private void exitMethod(String method){
<span class="fc" id="L448">		LOG.debug(RmUtil</span>
<span class="fc" id="L449">				.dumpExitMethod(method));</span>

<span class="fc" id="L451">	}</span>
	
	private static void cleanUp(TimeoffIntervalAllocationUtilDAO dao) {
<span class="nc bnc" id="L454" title="All 2 branches missed.">		if (dao != null) {</span>
<span class="nc" id="L455">			dao.cleanUp();</span>
		}
<span class="nc" id="L457">	}</span>
	

	private static void cleanUp(PublishingPeriodStatusDAO dao) {
<span class="pc bpc" id="L461" title="1 of 2 branches missed.">		if (dao != null) {</span>
<span class="fc" id="L462">			dao.cleanUp();</span>
		}
<span class="fc" id="L464">	}</span>
	
	private static void cleanUp(ReferenceScheduleAssignmentsDAO dao) {
<span class="pc bpc" id="L467" title="1 of 2 branches missed.">		if (dao != null) {</span>
<span class="fc" id="L468">			dao.cleanUp();</span>
		}
<span class="fc" id="L470">	}</span>
	
	private static void cleanUp(TimeOffIntervalPaidSegmentDAO dao) {
<span class="pc bpc" id="L473" title="1 of 2 branches missed.">		if (dao != null) {</span>
<span class="fc" id="L474">			dao.cleanUp();</span>
		}
<span class="fc" id="L476">	}</span>
	private static void cleanUp(TOChoiceDAO toChoiceDAO) {
<span class="pc bpc" id="L478" title="1 of 2 branches missed.">		if (toChoiceDAO != null) {</span>
<span class="fc" id="L479">			toChoiceDAO.cleanUp();</span>
		}
<span class="fc" id="L481">	}</span>

	public Map&lt;Integer, Pair&lt;Integer, Integer&gt;&gt; getRefrenceSchedulesByDayOfWeek(TOChoice choice) throws BbmFinderException {
<span class="nc" id="L484">		return ReferenceScheduleLoader.getRefrenceSchedulesByDayOfWeek(choice);</span>
	}

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>