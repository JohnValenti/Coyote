<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>TOPoolSelectorContainerPC.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">QA Code Coverage</a> &gt; <a href="index.source.html" class="el_package">com.bluepumpkin.web.rm.people.timeoff</a> &gt; <span class="el_source">TOPoolSelectorContainerPC.java</span></div><h1>TOPoolSelectorContainerPC.java</h1><pre class="source lang-java linenums">package com.bluepumpkin.web.rm.people.timeoff;


import com.bluepumpkin.common.datatypes.*;
import com.witness.web.uif.util.*;
import com.witness.web.uif.util.js.JSUtil;
import com.witness.web.uif.system.RequestContext;
import com.witness.web.uif.l10n.UIFWebBundleKey;
import com.bluepumpkin.web.bbm.l10n.BbmWebBundleKey;
import com.bluepumpkin.web.bbm.people.profile.effectivedate.DataContainerPC;
import com.bluepumpkin.ejb.bbm.people.model.PeopleDataKey;
import com.bluepumpkin.ejb.rm.setup.calendartimeoff.model.TOPool;

import java.util.*;

/**
 * Title:        TOPoolSelectorContainerPC
 * Description:  Contains the selector with all of the available Time Off Pools for an amployee. 
 *               To be used by the Time Off Pool assignment effective dates popup, launched from 
 *               the &quot;People \ Time Off&quot; page (TimeOffPoolAssignmentPC to be exact).
 * @author       Gonzalo Quintanar
 */
public class TOPoolSelectorContainerPC extends DataContainerPC 
{
<span class="fc" id="L25">	private Collection m_dropdownData = null; //data from Model Handler used to generate dropdowns (an ArrayList of TOPool's)</span>
<span class="fc" id="L26">	private String m_jsRefreshPage = &quot;&quot;;</span>
<span class="fc" id="L27">	private String m_poolId = &quot;&quot;;  //the selected pool ID fromt he dropdown list</span>

<span class="fc" id="L29">	public boolean m_poolIDViewable= true;</span>
<span class="fc" id="L30">	public boolean m_poolIDEditable = true;</span>
	
	// form element names
	public static final String POOL_FN = TimeOffPoolAssignmentPC.POOL_ID_FN;

	/**
	 * default Constructor
	 */
	public TOPoolSelectorContainerPC(RequestContext context) 
	{
<span class="fc" id="L40">		super(context);</span>
<span class="fc" id="L41">		setName(&quot;TOPoolSelectorContainer&quot;);</span>
<span class="fc" id="L42">		m_mode = TimeOffPoolAssignmentPC.MODE_VIEW_POOL;</span>
<span class="pc bpc" id="L43" title="1 of 2 branches missed.">		setOnlyCurPeriodEditable(!m_poolIDEditable);</span>
<span class="fc" id="L44">		setIsCurPeriodViewable(m_poolIDViewable);</span>
<span class="fc" id="L45">	}</span>

	/**
	 * getters and setters for data fields
	 */ 

	public void setPoolId(String aVal) 
	{
<span class="fc" id="L53">		m_poolId = aVal;</span>
<span class="fc" id="L54">	}</span>

	public String getPoolId() 
	{
<span class="nc" id="L58">		return m_poolId;</span>
	}

	public boolean isPoolIDEditable() 
	{
<span class="fc" id="L63">		return m_poolIDEditable;</span>
	}

	public boolean isPoolIDViewable() 
	{
<span class="fc" id="L68">		return m_poolIDViewable;</span>
	}

	public void setPoolIDEditable(boolean editable) 
	{
<span class="nc" id="L73">		m_poolIDEditable = editable;</span>
<span class="nc bnc" id="L74" title="All 2 branches missed.">		setOnlyCurPeriodEditable(!m_poolIDEditable);</span>
<span class="nc" id="L75">	}</span>

	public void setPoolIDViewable(boolean Viewable) 
	{
<span class="nc" id="L79">		m_poolIDViewable = Viewable;</span>
<span class="nc bnc" id="L80" title="All 2 branches missed.">		setOnlyCurPeriodEditable(!m_poolIDViewable);</span>
<span class="nc" id="L81">		setIsCurPeriodViewable(m_poolIDViewable);</span>
<span class="nc" id="L82">	}</span>

	/** 
	 * Set the collection of TOPool's to be listed in the drop down selector.
	 * @param toPools - the collection of TOPool's to be listed in the drop down selector.
	 */
	public void setDropdownData(Collection toPools)
	{
<span class="pc bpc" id="L90" title="3 of 4 branches missed.">		if (toPools == null &amp;&amp; m_dropdownData == null)</span>
<span class="nc" id="L91">			m_dropdownData = new ArrayList();</span>
		else
<span class="fc" id="L93">			m_dropdownData = toPools;</span>
<span class="fc" id="L94">	}</span>

	/**
	 * Get string of the HTML representing this component.
	 */
	protected void addCustomDataRow() 
	{
<span class="pc bpc" id="L101" title="1 of 2 branches missed.">		if(isPoolIDViewable())</span>
<span class="fc" id="L102">			addRow(i18n(m_bundle, BbmWebBundleKey.PEOPLE_TIMEOFF_POOL_HEADER), </span>
<span class="fc" id="L103">					makeDropDownSelector(POOL_FN, PeopleDataKey.POOL_ID, m_poolId, false, </span>
<span class="fc" id="L104">							isPoolIDEditable(), true));</span>
<span class="fc" id="L105">	}</span>

	private String makeDropDownSelector(String name_fn, String dataKey, String itemId, 
			boolean emptyRow, boolean isEnabled, boolean isSorted)
	{
		String result;
		ArrayList pairs;
		
<span class="pc bpc" id="L113" title="1 of 2 branches missed.">		if (m_dropdownData == null)</span>
		{
<span class="nc" id="L115">			pairs = new ArrayList(2);</span>
		}
		else
		{
<span class="fc" id="L119">			pairs = new ArrayList(m_dropdownData.size());</span>
<span class="fc bfc" id="L120" title="All 2 branches covered.">			for (Iterator it=m_dropdownData.iterator(); it.hasNext();)</span>
			{
<span class="fc" id="L122">				TOPool pool = (TOPool)it.next();</span>
<span class="fc" id="L123">				pairs.add(0, new StringsPair(pool.getId().toString(), pool.getName()));</span>
<span class="fc" id="L124">			}</span>
		}		
		
        /*
		if (itemId.equals(&quot;*&quot;))
		{
			pairs.add(0, new StringsPair(&quot;*&quot;, &quot;*&quot;));
		}
		
		// add an empty row
		if (emptyRow)
			pairs.add(0, new StringsPair(&quot;&quot;, &quot;&quot;));
        */
            
<span class="pc bpc" id="L138" title="2 of 4 branches missed.">		if (pairs != null &amp;&amp; pairs.size() &gt;0 )</span>
		{
<span class="fc" id="L140">			result = HtmlUtil.makeSelectInput(</span>
					name_fn,					// inputname
					&quot;&quot;,  						// nameIndex 
					new String[] { itemId },	// SelectedValue
					JSUtil.ON_CHANGE,   		// onChange
					pairs,						// options
					null,						// width
					false,						// useDefaultOnChange
					false,						// isMultiple
					isEnabled,					// isEnabled
					isSorted);					// isSorted
		} 
		else 
		{
<span class="nc" id="L154">			result = i18n(m_common_bundle, UIFWebBundleKey.NO_OPTIONS_AVAILABLE);</span>
		}
<span class="fc" id="L156">		return result;</span>
	}//makeDropDownSelector

	public String getRequiredHTML() 
	{
<span class="fc" id="L161">		return super.getRequiredHTML() + </span>
<span class="fc" id="L162">		HtmlUtil.makeHiddenInput(TimeOffPoolAssignmentPC.POOL_EDITABLE_FN, isPoolIDEditable())</span>
<span class="fc" id="L163">		+ HtmlUtil.makeHiddenInput(TimeOffPoolAssignmentPC.POOL_VIEWABLE_FN, isPoolIDViewable());</span>
	}

	protected void setJSrefreshString(String js)
	{
<span class="fc" id="L168">		m_jsRefreshPage = js;</span>
<span class="fc" id="L169">	}</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>