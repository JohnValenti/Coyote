<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>MyAdherenceMH.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">QA Code Coverage</a> &gt; <a href="index.source.html" class="el_package">com.bluepumpkin.web.am.adherence.self</a> &gt; <span class="el_source">MyAdherenceMH.java</span></div><h1>MyAdherenceMH.java</h1><pre class="source lang-java linenums">package com.bluepumpkin.web.am.adherence.self;

import java.util.Collection;
import java.util.Date;
import java.util.HashMap;
import java.util.Map;

import com.bluepumpkin.common.datatypes.Pair;
import com.bluepumpkin.common.util.StringUtil;
import com.bluepumpkin.ejb.bbm.rtaamanager.model.RTAAData;
import com.bluepumpkin.ejb.bbm.BbmManagerFactory;
import com.bluepumpkin.ejb.bbm.config.ConfigKey;
import com.bluepumpkin.ejb.core.CoreManagerFactory;
import com.bluepumpkin.web.am.adherence.AdherenceEJBInvoker;
import com.bluepumpkin.web.am.adherence.keys.AdherenceKeys;
import com.bluepumpkin.web.am.l10n.AmWebBundleKey;
import com.witness.ejb.core.licensing.LicenseKeys;
import com.witness.ejb.core.licensing.ejb.LicenseManager;
import com.witness.web.uif.l10n.UIFWebBundleKey;
import com.witness.web.uif.system.RequestContext;
import com.bluepumpkin.web.am.adherence.AdherenceHelper;


<span class="nc" id="L24">public class MyAdherenceMH </span>
{
    
    /**
     *  Requests a completely new set of adherence data.
     *
     *  @param employeeIDs  A collection of all the candidate employeeIDs
     *  @param start The start time
     *  @param end The end time
     *  @return a HashMap. ADHERENCE_DATA: the RTAA data
     *                     TRACKING_EVENTS: the tracking events
     *                     TRACKING_ACTIVITY_MAP: the tracking activity mappings.
     */
    public static HashMap getAdherenceData(RequestContext context, Collection employeeIDs, 
            Date start, Date end) 
    {
<span class="nc" id="L40">        HashMap allData = new HashMap(3);</span>
        try 
        {
<span class="nc" id="L43">            Date timestamp = null;</span>
<span class="nc" id="L44">            int pageNum = 0; //The page number (for pagination), if negative, there is no pagination</span>
<span class="nc" id="L45">            int pageSize = 1; //The page size (for pagination), not used if there is no pagination.</span>
<span class="nc" id="L46">            int sortKey = -1; //The sort key. Since we're only viewing 1 agent, not used.</span>

<span class="nc" id="L48">            RTAAData data = AdherenceEJBInvoker.getAdherenceData(context, employeeIDs,</span>
                    start,
                    end,
                    sortKey,
                    pageNum,
                    pageSize,
                    timestamp,
<span class="nc" id="L55">                    AdherenceHelper.showUnavailable(context));</span>
            
            //add RTAAData
<span class="nc" id="L58">            allData.put(AdherenceKeys.ADHERENCE_DATA, data);</span>
            
            //get time tracking events
<span class="nc" id="L61">            HashMap trackingEvents = AdherenceEJBInvoker.getTimeTrackingEvents(data.getEmployeeIDs(),</span>
                    start,
                    end,
<span class="nc" id="L64">                    context.getViewingTimeZone());</span>
<span class="nc" id="L65">            allData.put(AdherenceKeys.TRACKING_EVENTS, trackingEvents);</span>
            
            //get the activity names for desktop monitoring
<span class="nc" id="L68">            allData.put(AdherenceKeys.TRACKING_ACTIVITY_MAP, AdherenceHelper.getActivityMap(context, trackingEvents));</span>
        } 
<span class="nc" id="L70">        catch (Exception ex) </span>
        {
            //notifyError(context, appletResponse, ex);
<span class="nc" id="L73">        }</span>
<span class="nc" id="L74">        return allData;</span>
    }
   
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>