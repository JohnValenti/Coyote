<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>TOHoursPerDay.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">QA Code Coverage</a> &gt; <a href="index.source.html" class="el_package">com.bluepumpkin.ejb.rm.requests.timeoff.hoursperday.model</a> &gt; <span class="el_source">TOHoursPerDay.java</span></div><h1>TOHoursPerDay.java</h1><pre class="source lang-java linenums">package com.bluepumpkin.ejb.rm.requests.timeoff.hoursperday.model;

import java.util.Date;
import java.util.HashMap;
import java.util.Map;
import java.util.StringTokenizer;

import com.bluepumpkin.common.datatypes.ID;
import com.bluepumpkin.ejb.bbm.vo.FieldInfo;
import com.bluepumpkin.ejb.bbm.vo.ValueObjectBase;
import com.bluepumpkin.ejb.rm.requests.common.model.RequestAuditTrail;
import com.bluepumpkin.ejb.rm.util.DAOUtil;

/**
 * User: sjoshi Date: Jun 24, 2007 Time: 2:46:39 PM
 */
public class TOHoursPerDay extends ValueObjectBase implements Comparable&lt;TOHoursPerDay&gt; {

	private static final long serialVersionUID = -8805567692053713293L;

<span class="fc" id="L21">	private static FieldInfo m_fieldInfo = new TOHoursPerDayFieldInfo();</span>
<span class="fc" id="L22">	private static String[] statusMap = { RequestAuditTrail.STATUS_PENDING, // 0</span>
			RequestAuditTrail.STATUS_APPROVED, // 1
			RequestAuditTrail.STATUS_DENIED, // 2
			RequestAuditTrail.STATUS_ESCALATED, // 3
			RequestAuditTrail.STATUS_NEGOTIATION, // 4
			RequestAuditTrail.STATUS_TENTATIVE, // 5
			RequestAuditTrail.STATUS_WITHDRAWN, // 6
			RequestAuditTrail.STATUS_INVALID, // 7
			RequestAuditTrail.STATUS_WAITLIST // 8
	};
<span class="fc" id="L32">	private static Map&lt;String, Integer&gt; statusHashMap = new HashMap&lt;String, Integer&gt;();</span>
<span class="fc" id="L33">	public static final Boolean ISDIRTY_VAL_BOOLEAN_CLEAN = new Boolean(false);</span>
<span class="fc" id="L34">	public static final Boolean ISDIRTY_VAL_BOOLEAN_DIRTY = new Boolean(true);</span>

	public boolean isRefreshOrignalMinutes() {
<span class="nc" id="L37">		return refreshOrignalMinutes;</span>
	}

	public void setRefreshOrignalMinutes(boolean refreshOrignalMinutes) {
<span class="nc" id="L41">		this.refreshOrignalMinutes = refreshOrignalMinutes;</span>
<span class="nc" id="L42">	}</span>

<span class="nc" id="L44">	public boolean refreshOrignalMinutes = false;</span>

	static {
<span class="fc bfc" id="L47" title="All 2 branches covered.">		for (int i = 0; i &lt; statusMap.length; i++) {</span>
<span class="fc" id="L48">			statusHashMap.put(statusMap[i], new Integer(i));</span>
		}
<span class="fc" id="L50">	}</span>

	// two objects with same to event /tochoice pair should equate to same
	// object irrespective of date.
	// only if they are not equal then we are interested in sorting by date for
	// Collections.sort usage
	@Override
	public int compareTo(TOHoursPerDay obj) {
<span class="nc" id="L58">		TOHoursPerDay item = obj;</span>
<span class="nc bnc" id="L59" title="All 2 branches missed.">		if (equals(item)) {</span>
<span class="nc" id="L60">			return 0;</span>
		}
<span class="nc" id="L62">		Date date1 = getStartTime();</span>
<span class="nc" id="L63">		Date date2 = item.getStartTime();</span>
<span class="nc bnc" id="L64" title="All 6 branches missed.">		if (date1 == null || date2 == null || date1.equals(date2)) {</span>
<span class="nc" id="L65">			int hash1 = hashCode();</span>
<span class="nc" id="L66">			int hash2 = item.hashCode();</span>
<span class="nc bnc" id="L67" title="All 2 branches missed.">			return (hash1 &gt; hash2) ? 1 : -1; // will return equal only if</span>
												// hashcodes are equal
		} else {
<span class="nc bnc" id="L70" title="All 2 branches missed.">			return (date1.before(date2)) ? -1 : 1;</span>
		}
	}

	@Override
	public int hashCode() {
<span class="nc" id="L76">		return 31 * 17 + getKey().hashCode();</span>
	}

	@Override
	public boolean equals(Object obj) {
<span class="nc" id="L81">		TOHoursPerDay item = (TOHoursPerDay) obj;</span>
<span class="nc bnc" id="L82" title="All 2 branches missed.">		if (item == null) {</span>
<span class="nc" id="L83">			return false;</span>
		}
<span class="nc" id="L85">		return getKey().equals(item.getKey());</span>
	}

	public String getKey() {
<span class="nc" id="L89">		ID event = getTOEventID();</span>
<span class="nc" id="L90">		ID choice = getTOChoiceID();</span>
<span class="nc bnc" id="L91" title="All 4 branches missed.">		return ((event == null) ? &quot;NA&quot; : event.toString()) + &quot;-&quot; + ((choice == null) ? &quot;NA&quot; : choice.toString());</span>
	}

	/**
	 * get field value in batch
	 */
	@Override
	protected FieldInfo getFieldInfo() {
<span class="nc" id="L99">		return m_fieldInfo;</span>
	}

	@Override
	public ID getID() {
<span class="nc" id="L104">		return getFieldValueID(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_I_ID);</span>
	}

	@Override
	public void setID(ID hoursperdayID) {
<span class="nc" id="L109">		setFieldValue(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_I_ID, hoursperdayID);</span>
<span class="nc" id="L110">	}</span>

	/**
	 * Get the employee ID
	 */
	public ID getEmployeeID() {
<span class="nc" id="L116">		return getFieldValueID(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_I_EMPLOYEEID);</span>
	}

	/**
	 * Set the employee ID
	 */
	public void setEmployeeID(ID empId) {
<span class="nc" id="L123">		setFieldValue(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_I_EMPLOYEEID, empId);</span>
<span class="nc" id="L124">	}</span>

	public ID getActivityID() {
<span class="nc" id="L127">		return getFieldValueID(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_I_ACTIVITYID);</span>
	}

	public void setActivityID(ID activityID) {
<span class="nc" id="L131">		setFieldValue(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_I_ACTIVITYID, activityID);</span>
<span class="nc" id="L132">	}</span>

	public ID getTOEventID() {
<span class="nc" id="L135">		return getFieldValueID(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_I_TIMEOFFEVENTID);</span>
	}

	public void setTOEventID(ID toEventID) {
<span class="nc" id="L139">		setFieldValue(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_I_TIMEOFFEVENTID, toEventID);</span>
<span class="nc" id="L140">	}</span>

	public ID getTOChoiceID() {
<span class="nc" id="L143">		return getFieldValueID(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_I_TIMEOFFCHOICEID);</span>
	}

	public void setTOChoiceID(ID toChoiceID) {
<span class="nc" id="L147">		setFieldValue(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_I_TIMEOFFCHOICEID, toChoiceID);</span>
<span class="nc" id="L148">	}</span>

	/**
	 * Returns the rank for the Time Off choice
	 */
	public int getTimeOffChoiceRank() {
<span class="nc" id="L154">		return getFieldValueInt(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_N_TIMEOFFCHOICERANK);</span>
	}

	/**
	 * Sets the rank for the Time Off choice
	 */
	public void setTimeOffChoiceRank(int rank) {
<span class="nc" id="L161">		setFieldValue(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_N_TIMEOFFCHOICERANK, rank);</span>
<span class="nc" id="L162">	}</span>

	/**
	 * Returns the number of minutes the event will count towards various rules,
	 * such as vacation allocation, min/max hours, etc.
	 */
	public int getTotalMinutes() {
<span class="nc" id="L169">		return getFieldValueInt(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_N_TOTALMINUTES);</span>
	}

	/**
	 * Sets the number of minutes the event will count towards various rules,
	 * such as vacation allocation, min/max hours, etc.
	 */
	public void setTotalMinutes(int mins) {
<span class="nc" id="L177">		setFieldValue(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_N_TOTALMINUTES, mins);</span>
<span class="nc" id="L178">	}</span>

	/**
	 * Returns the number of minutes the event will count towards various rules,
	 * such as vacation allocation, min/max hours, etc.
	 */
	public int getOriginalMinutes() {
<span class="nc" id="L185">		return getFieldValueInt(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_N_ORIGMINUTES);</span>
	}

	/**
	 * Sets the number of minutes the event will count towards various rules,
	 * such as vacation allocation, min/max hours, etc.
	 */
	public void setOriginalMinutes(int mins) {
<span class="nc" id="L193">		setFieldValue(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_N_ORIGMINUTES, mins);</span>
<span class="nc" id="L194">	}</span>

	public String getOriginalHoursPerDay() {
<span class="nc" id="L197">		return getFormattedFieldValue(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_S_ORIGHOURSPERDAY);</span>
	}

	public void setOriginalHoursPerDay(String hours) {
<span class="nc" id="L201">		setFieldValue(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_S_ORIGHOURSPERDAY, hours);</span>
<span class="nc" id="L202">	}</span>

	public void setStartTime(Date startDate) {
<span class="nc" id="L205">		setFieldValue(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_D_STARTTIME, startDate);</span>
<span class="nc" id="L206">	}</span>

	public Date getStartTime() {
<span class="nc" id="L209">		return getFieldValueDate(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_D_STARTTIME);</span>
	}

	public void setEndTime(Date endDate) {
<span class="nc" id="L213">		setFieldValue(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_D_ENDTIME, endDate);</span>
<span class="nc" id="L214">	}</span>

	public Date getEndTime() {
<span class="nc" id="L217">		return getFieldValueDate(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_D_ENDTIME);</span>
	}

	public void setIsDirty(boolean isDirty) {
<span class="nc" id="L221">		setFieldValue(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_B_ISDIRTY, isDirty);</span>
<span class="nc" id="L222">	}</span>

	public boolean getIsDirty() {
<span class="nc" id="L225">		return getFieldValueBoolean(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_B_ISDIRTY);</span>
	}

	/*
	 * public void setIsInPublishedPeriod(boolean IsInPublishedPeriod) {
	 * setFieldValue
	 * (TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_B_ISINPUBLISHPERIOD,
	 * IsInPublishedPeriod); }
	 * 
	 * public boolean getIsInPublishedPeriod() { return
	 * getFieldValueBoolean(TOHoursPerDayFieldInfo
	 * .TIMEOFFHOURSPERDAY_B_ISINPUBLISHPERIOD); }
	 */

	public void setDirtyTime(Date dirtyDate) {
<span class="nc" id="L240">		setFieldValue(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_D_DIRTYTIME, dirtyDate);</span>
<span class="nc" id="L241">	}</span>

	public Date getDirtyTime() {
<span class="nc" id="L244">		return getFieldValueDate(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_D_DIRTYTIME);</span>
	}

	public void setStatus(String status) {
<span class="nc" id="L248">		setFieldValue(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_N_STATUS, convertStatusToIntVal(status));</span>
<span class="nc" id="L249">	}</span>

	public String getStatus() {
<span class="nc" id="L252">		return convertStatusToString(getFieldValueInt(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_N_STATUS));</span>
	}

	public void setHoursPerDay(String hoursPerDay) {
<span class="nc" id="L256">		setFieldValue(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_S_HOURSPERDAY, hoursPerDay);</span>
<span class="nc" id="L257">	}</span>

	public String getHoursPerDay() {
<span class="nc" id="L260">		return getFormattedFieldValue(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_S_HOURSPERDAY);</span>
	}

	public TOHoursPerDay() {
<span class="nc" id="L264">		super();</span>
<span class="nc" id="L265">	}</span>

	/**
	 * this values indicates how to calculate the minutes indicates how event
	 * will count towards various rules Possible enumeration values are: use
	 * underlying shift or use the value specified by CountsMinutesTowardsRules
	 * property.
	 */
	public int getTimeOffRule() {
<span class="nc" id="L274">		return getFieldValueInt(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_N_TIMEOFFRULE);</span>
	}

	public void setTimeOffRule(int timeOffRule) {
<span class="nc" id="L278">		setFieldValue(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_N_TIMEOFFRULE, timeOffRule);</span>
<span class="nc" id="L279">	}</span>

	public static int convertStatusToIntVal(String reqStatus) {
<span class="fc" id="L282">		return statusHashMap.get(reqStatus).intValue();</span>
	}

	public static String convertStatusToString(int reqStatus) {
<span class="nc" id="L286">		return statusMap[reqStatus];</span>
	}

	public int getPeriodFlag() {
<span class="nc" id="L290">		String hrsPerDay = getHoursPerDay();</span>
<span class="nc" id="L291">		int retVal = -1;</span>
<span class="nc bnc" id="L292" title="All 2 branches missed.">		if (hrsPerDay != null) {</span>
<span class="nc" id="L293">			StringTokenizer st = new StringTokenizer(getHoursPerDay(), &quot;:&quot;);</span>
<span class="nc" id="L294">			retVal = ((new Integer(st.nextElement().toString())).intValue());</span>
		}
<span class="nc" id="L296">		return retVal;</span>
	}

	public boolean areOriginalMinutesAvailable() {
<span class="nc" id="L300">		Object obj = getFieldValue(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_N_ORIGMINUTES);</span>
<span class="nc bnc" id="L301" title="All 2 branches missed.">		return (obj != null);</span>
	}
	
	public boolean areOriginalHoursAvailable(){
<span class="nc" id="L305">		 Object obj = getFieldValue(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_S_ORIGHOURSPERDAY);</span>
<span class="nc bnc" id="L306" title="All 2 branches missed.">		 return (obj != null);</span>
	}
	 
	public void setExpiryDate(Date date) {
<span class="nc" id="L310">		setFieldValue(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_D_EXPIRYDATE, date);</span>
<span class="nc" id="L311">	}</span>

	public Date getExpiryDate() {
<span class="nc" id="L314">		return getFieldValueDate(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_D_EXPIRYDATE);</span>
	}

	public String getUniqueKey() {
<span class="nc bnc" id="L318" title="All 2 branches missed.">		return (getEmployeeID() != null ? getEmployeeID().toInt() : 0) + &quot;_&quot;</span>
<span class="nc bnc" id="L319" title="All 2 branches missed.">				+ (getTOEventID() != null ? getTOEventID().toInt() : 0) + &quot;_&quot;</span>
<span class="nc bnc" id="L320" title="All 2 branches missed.">				+ (getTOChoiceID() != null ? getTOChoiceID().toInt() : 0);</span>
	}

	/**
	 * Sets the total number of minutes derived from defaulted hours 
	 */
	public void setTotalMinutesFromDefault(int mins) {
<span class="nc" id="L327">		setFieldValue(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_S_TOTALMINUTESFROMDEFAULT, mins);</span>
<span class="nc" id="L328">	}</span>
	/**
	 * Gets the total number of minutes derived from defaulted hours 
	 */
	public int getTotalMinutesFromDefaulted() {
<span class="nc" id="L333">		return getFieldValueInt(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_S_TOTALMINUTESFROMDEFAULT);</span>
	}
	/**
	 * Sets the total number of minutes derived from scheduled hours 
	 */
	public void setTotalMinutesFromScheduled(int mins) {
<span class="nc" id="L339">		setFieldValue(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_S_TOTALMINUTESFROMSCHEDULE, mins);</span>
<span class="nc" id="L340">	}</span>
	/**
	 * Gets the total number of minutes derived from scheduled hours
	 */
	public int getTotalMinutesFromScheduled() {
<span class="nc" id="L345">		return getFieldValueInt(TOHoursPerDayFieldInfo.TIMEOFFHOURSPERDAY_S_TOTALMINUTESFROMSCHEDULE);</span>
	}

	public TOHoursPerDay deepCopy() {
<span class="nc" id="L349">		TOHoursPerDay copy = new TOHoursPerDay();</span>
<span class="nc" id="L350">		DAOUtil.copyValues(this, copy, getFieldInfo().getFieldCount());</span>
<span class="nc" id="L351">		return copy;</span>
	}

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>