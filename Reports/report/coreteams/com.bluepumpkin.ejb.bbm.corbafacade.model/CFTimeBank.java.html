<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>CFTimeBank.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">QA Code Coverage</a> &gt; <a href="index.source.html" class="el_package">com.bluepumpkin.ejb.bbm.corbafacade.model</a> &gt; <span class="el_source">CFTimeBank.java</span></div><h1>CFTimeBank.java</h1><pre class="source lang-java linenums">/*
 * Created on 2008-9-15
 *
 * TODO To change the template for this generated file go to
 * Window - Preferences - Java - Code Style - Code Templates
 */
package com.bluepumpkin.ejb.bbm.corbafacade.model;

import java.io.Serializable;
import java.util.ArrayList;
import java.util.Collection;
import java.util.Collections;
import java.util.Comparator;
import java.util.Date;
import java.util.Iterator;
import java.util.List;

import com.bluepumpkin.common.datatypes.ID;
import com.bluepumpkin.ejb.bbm.workrules.model.TimeBank;
import com.bluepumpkin.ejb.bbm.workrules.model.TimeBankInterPeriod;
import com.bluepumpkin.ejb.bbm.workrules.model.TimeBankTargetMinutes;
import com.bluepumpkin.ejb.bbm.workrules.model.TimeBankFieldInfo;

/**
 * @author LEngle
 *
 * TODO To change the template for this generated type comment go to
 * Window - Preferences - Java - Code Style - Code Templates
 */
<span class="nc" id="L30">public class CFTimeBank implements Serializable {</span>
	
	/**
	 * 
	 */
	private static final long serialVersionUID = 1L;
	public ID id;
	public String name;
	public String description;
	public Date startDate;
	public Date endDate;
	public int totalTargetMinutes;
	public ID organizationID;
	public boolean singleWeekTargets;
	public boolean isTotalMinutesLocked;
	
	//are the following required?
//	public String modifiedBy;
//	public Date modifiedDate;
	
	public CFTimeBankTargetMinutes[] targetMinutes;
	public CFTimeBankTargetMinutes[] addedTargetMinutes;
	public CFTimeBankTargetMinutes[] updatedTargetMinutes;
	public CFTimeBankTargetMinutes[] removedTargetMinutes;

	public CFTimeBankInterPeriod[] interPeriods;	
	public CFTimeBankInterPeriod[] addedInterPeriods;
	public CFTimeBankInterPeriod[] updatedInterPeriods;
	public CFTimeBankInterPeriod[] removedInterPeriods;
	
	public static CFTimeBank convert(TimeBank from) {
<span class="nc bnc" id="L61" title="All 2 branches missed.">		if (from == null)</span>
<span class="nc" id="L62">			return null;</span>
		
<span class="nc" id="L64">		CFTimeBank to = new CFTimeBank();</span>
		
<span class="nc" id="L66">		to.id = from.getID();</span>
<span class="nc" id="L67">		to.name = from.getName();</span>
<span class="nc" id="L68">		to.description = from.getDescription();</span>
<span class="nc" id="L69">		to.startDate = from.getStartDate();</span>
<span class="nc" id="L70">		to.endDate = from.getEndDate();</span>
<span class="nc" id="L71">		to.totalTargetMinutes = from.getTotalTargetMinutes();</span>
<span class="nc" id="L72">		to.organizationID = from.getOrganizationID();</span>
<span class="nc" id="L73">		to.singleWeekTargets = from.isSingleWeekTargets();</span>
<span class="nc" id="L74">		to.isTotalMinutesLocked = from.getIsTotalMinutesLocked();</span>
		
<span class="nc" id="L76">		Iterator i = null;</span>
<span class="nc" id="L77">		int ix = 0;</span>
		
<span class="nc" id="L79">		Collection col = from.getChildObjects(TimeBankFieldInfo.CHILD_INTERPERIOD);</span>
<span class="nc bnc" id="L80" title="All 2 branches missed.">		if (col != null) {</span>
//			Collections.sort((List&lt;TimeBankInterPeriod&gt;) col,new Comparator()
<span class="nc" id="L82">			Collections.sort((List) col,new Comparator()</span>
<span class="nc" id="L83">			{</span>
				public int compare(Object o1, Object o2) {
<span class="nc" id="L85">					Date dt1 = ((TimeBankInterPeriod)o1).getStartDate();</span>
<span class="nc" id="L86">					Date dt2 = ((TimeBankInterPeriod)o2).getStartDate();</span>
<span class="nc" id="L87">					return dt1.compareTo(dt2);</span>
				}
			});
<span class="nc" id="L90">			to.interPeriods = new CFTimeBankInterPeriod[col.size()];</span>
<span class="nc" id="L91">			ix = 0;</span>
<span class="nc bnc" id="L92" title="All 2 branches missed.">			for (i = col.iterator(); i.hasNext(); ix++)</span>
<span class="nc" id="L93">				to.interPeriods[ix] = CFTimeBankInterPeriod.convert((TimeBankInterPeriod)i.next());</span>
		}
		
<span class="nc" id="L96">		col = from.getChildObjects(TimeBankFieldInfo.CHILD_TARGETMINS);</span>
<span class="nc bnc" id="L97" title="All 2 branches missed.">		if (col != null) {</span>
<span class="nc" id="L98">			Collections.sort((List) col,new Comparator()</span>
<span class="nc" id="L99">			{</span>
				public int compare(Object o1, Object o2) {
<span class="nc" id="L101">					Date dt1 = ((TimeBankTargetMinutes)o1).getStartDate();</span>
<span class="nc" id="L102">					Date dt2 = ((TimeBankTargetMinutes)o2).getStartDate();</span>
<span class="nc" id="L103">					return dt1.compareTo(dt2);</span>
				}
			});
<span class="nc" id="L106">			to.targetMinutes = new CFTimeBankTargetMinutes[col.size()];</span>
<span class="nc" id="L107">			ix = 0;</span>
<span class="nc bnc" id="L108" title="All 2 branches missed.">			for (i = col.iterator(); i.hasNext(); ix++)</span>
<span class="nc" id="L109">				to.targetMinutes[ix] = CFTimeBankTargetMinutes.convert((TimeBankTargetMinutes)i.next());</span>
		}
		
<span class="nc" id="L112">		return to;</span>
	}
	
	public static TimeBank convert(CFTimeBank from) {
<span class="nc bnc" id="L116" title="All 2 branches missed.">		if (from == null)</span>
<span class="nc" id="L117">			return null;</span>
		
<span class="nc" id="L119">		TimeBank to = new TimeBank();</span>
		
<span class="nc" id="L121">		to.setID(from.id);</span>
<span class="nc" id="L122">		to.setName(from.name);</span>
<span class="nc" id="L123">		to.setDescription(from.description);</span>
<span class="nc" id="L124">		to.setStartDate(from.startDate);</span>
<span class="nc" id="L125">		to.setEndDate(from.endDate);</span>
<span class="nc" id="L126">		to.setTotalTargetMinutes(from.totalTargetMinutes);</span>
<span class="nc" id="L127">		to.setOrganizationID(from.organizationID);</span>
<span class="nc" id="L128">		to.isSingleWeekTargets(from.singleWeekTargets);</span>
<span class="nc" id="L129">		to.setIsTotalMinutesLocked(from.isTotalMinutesLocked);</span>
		
<span class="nc" id="L131">		int ix = 0;</span>
		
	//////////
		//time off defaults		
<span class="nc" id="L135">		CFTimeBankTargetMinutes[] arrTargetMinutes = from.targetMinutes;		</span>
<span class="nc bnc" id="L136" title="All 4 branches missed.">		if (arrTargetMinutes != null &amp;&amp; arrTargetMinutes.length &gt; 0) {</span>
<span class="nc bnc" id="L137" title="All 2 branches missed.">			for (ix = 0; ix &lt; arrTargetMinutes.length; ix++)</span>
<span class="nc" id="L138">				to.fillChildObject(TimeBankFieldInfo.CHILD_TARGETMINS, CFTimeBankTargetMinutes.convert(arrTargetMinutes[ix]));	</span>
		}
<span class="nc" id="L140">		arrTargetMinutes = from.addedTargetMinutes;		</span>
<span class="nc bnc" id="L141" title="All 4 branches missed.">		if (arrTargetMinutes != null &amp;&amp; arrTargetMinutes.length &gt; 0) {</span>
<span class="nc bnc" id="L142" title="All 2 branches missed.">			for (ix = 0; ix &lt; arrTargetMinutes.length; ix++)</span>
<span class="nc" id="L143">				to.addTimeBankTargetMinutes(CFTimeBankTargetMinutes.convert(arrTargetMinutes[ix]));	</span>
		}
<span class="nc" id="L145">		arrTargetMinutes = from.updatedTargetMinutes;		</span>
<span class="nc bnc" id="L146" title="All 4 branches missed.">		if (arrTargetMinutes != null &amp;&amp; arrTargetMinutes.length &gt; 0) {</span>
<span class="nc bnc" id="L147" title="All 2 branches missed.">			for (ix = 0; ix &lt; arrTargetMinutes.length; ix++)</span>
<span class="nc" id="L148">				to.updateTimeBankTargetMinutes(CFTimeBankTargetMinutes.convert(arrTargetMinutes[ix]));	</span>
		}
<span class="nc" id="L150">		arrTargetMinutes = from.removedTargetMinutes;		</span>
<span class="nc bnc" id="L151" title="All 4 branches missed.">		if (arrTargetMinutes != null &amp;&amp; arrTargetMinutes.length &gt; 0) {</span>
<span class="nc bnc" id="L152" title="All 2 branches missed.">			for (ix = 0; ix &lt; arrTargetMinutes.length; ix++)</span>
<span class="nc" id="L153">				to.removeTimeBankTargetMinutes(arrTargetMinutes[ix].id);	</span>
		}		
	/////////
<span class="nc" id="L156">		CFTimeBankInterPeriod[] arrInterPeriods = from.interPeriods;		</span>
<span class="nc bnc" id="L157" title="All 4 branches missed.">		if (arrInterPeriods != null &amp;&amp; arrInterPeriods.length &gt; 0) {</span>
<span class="nc bnc" id="L158" title="All 2 branches missed.">			for (ix = 0; ix &lt; arrInterPeriods.length; ix++)</span>
<span class="nc" id="L159">				to.fillChildObject(TimeBankFieldInfo.CHILD_INTERPERIOD, CFTimeBankInterPeriod.convert(arrInterPeriods[ix]));	</span>
		}
<span class="nc" id="L161">		arrInterPeriods = from.addedInterPeriods;		</span>
<span class="nc bnc" id="L162" title="All 4 branches missed.">		if (arrInterPeriods != null &amp;&amp; arrInterPeriods.length &gt; 0) {</span>
<span class="nc bnc" id="L163" title="All 2 branches missed.">			for (ix = 0; ix &lt; arrInterPeriods.length; ix++)</span>
<span class="nc" id="L164">				to.addTimeBankInterPeriod(CFTimeBankInterPeriod.convert(arrInterPeriods[ix]));	</span>
		}
<span class="nc" id="L166">		arrInterPeriods = from.updatedInterPeriods;		</span>
<span class="nc bnc" id="L167" title="All 4 branches missed.">		if (arrInterPeriods != null &amp;&amp; arrInterPeriods.length &gt; 0) {</span>
<span class="nc bnc" id="L168" title="All 2 branches missed.">			for (ix = 0; ix &lt; arrInterPeriods.length; ix++)</span>
<span class="nc" id="L169">				to.updateTimeBankInterPeriod(CFTimeBankInterPeriod.convert(arrInterPeriods[ix]));	</span>
		}
<span class="nc" id="L171">		arrInterPeriods = from.removedInterPeriods;		</span>
<span class="nc bnc" id="L172" title="All 4 branches missed.">		if (arrInterPeriods != null &amp;&amp; arrInterPeriods.length &gt; 0) {</span>
<span class="nc bnc" id="L173" title="All 2 branches missed.">			for (ix = 0; ix &lt; arrInterPeriods.length; ix++)</span>
<span class="nc" id="L174">				to.removeTimeBankInterPeriod(arrInterPeriods[ix].id);	</span>
		}		
	////////
<span class="nc" id="L177">		return to;		</span>
	}
	public static CFTimeBank[] convert(Collection from) {
<span class="nc bnc" id="L180" title="All 2 branches missed.">		if (from == null)</span>
<span class="nc" id="L181">			return null;</span>
		
<span class="nc" id="L183">		CFTimeBank[] to = new CFTimeBank[from.size()];</span>
<span class="nc" id="L184">		int ix = 0;</span>
<span class="nc bnc" id="L185" title="All 2 branches missed.">		for (Iterator i = from.iterator(); i.hasNext(); ix++)</span>
<span class="nc" id="L186">			to[ix] = CFTimeBank.convert((TimeBank)i.next());</span>
<span class="nc" id="L187">		return to;	</span>
	}

	public static Collection convert(CFTimeBank[] from) {
<span class="nc bnc" id="L191" title="All 2 branches missed.">		if (from == null)</span>
<span class="nc" id="L192">			return null;</span>
		
<span class="nc" id="L194">		ArrayList to = new ArrayList(from.length);</span>
<span class="nc bnc" id="L195" title="All 2 branches missed.">		for (int ix = 0; ix &lt; from.length; ix++) {</span>
<span class="nc" id="L196">			to.add(CFTimeBank.convert(from[ix]));</span>
		}
<span class="nc" id="L198">		return to;</span>
	}
		
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>