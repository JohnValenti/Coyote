<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>RfsReportParametersModelHandler.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">QA Code Coverage</a> &gt; <a href="index.source.html" class="el_package">com.verint.web.rfs.reports</a> &gt; <span class="el_source">RfsReportParametersModelHandler.java</span></div><h1>RfsReportParametersModelHandler.java</h1><pre class="source lang-java linenums">package com.verint.web.rfs.reports;

import java.rmi.RemoteException;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Collection;
import java.util.Collections;
import java.util.List;

import com.bluepumpkin.common.datatypes.ID;
import com.bluepumpkin.common.datatypes.StringsPair;
import com.bluepumpkin.common.logging.Category;
import com.bluepumpkin.common.localization.Localizer;
import com.bluepumpkin.ejb.bbm.base.BbmException;
import com.bluepumpkin.ejb.core.Log;
import com.verint.ejb.rfs.RfsManagerFactory;
import com.verint.ejb.rfs.reports.ejb.RfsReportsManager;
import com.verint.ejb.rfs.reports.model.RfsBranch;
import com.verint.ejb.rfs.reports.model.RfsStaffMixFilter;
import com.bluepumpkin.web.fs.l10n.FsWebBundleKey;
import com.verint.web.rfs.reports.util.RfsReportParameterConstants;
import com.witness.web.uif.system.RequestContext;

public class RfsReportParametersModelHandler {

<span class="nc" id="L26">	private static RfsReportsManager m_rfsReportsManager = null;</span>
<span class="nc" id="L27">	private static RfsReportParametersModelHandler instance = null;</span>
<span class="nc" id="L28">	private static final Category CAT = Log.initCategory(RfsReportParametersModelHandler.class.getName());</span>

<span class="nc" id="L30">	private RfsReportParametersModelHandler() {</span>
		try {
<span class="nc" id="L32">			m_rfsReportsManager = RfsManagerFactory.getRfsReportsManager();</span>
<span class="nc" id="L33">			CAT.info(&quot;Succeeded to obtain reference to rfs reports manager&quot;);</span>
<span class="nc" id="L34">		} catch (BbmException e) {</span>
<span class="nc" id="L35">			CAT.error(&quot;Failed to obtain reference to rfs reports manager :(&quot;, e);</span>
<span class="nc" id="L36">		}</span>
<span class="nc" id="L37">	}</span>

	public static RfsReportParametersModelHandler getInstance() {
<span class="nc bnc" id="L40" title="All 2 branches missed.">		if (instance == null) {</span>
<span class="nc" id="L41">			instance = new RfsReportParametersModelHandler();</span>
		}
<span class="nc" id="L43">		return instance;</span>
	}

	/**
	 * Get current scenario
	 * 
	 * @param context
	 * @return
	 * @throws Exception
	 */
	public String getCurrentScenario(RequestContext context) throws BbmException, RemoteException {
<span class="nc" id="L54">		String currentScenario = context.getRequest().getParameter(&quot;Scenario&quot;);</span>
<span class="nc bnc" id="L55" title="All 4 branches missed.">		if (currentScenario == null || currentScenario.isEmpty()) {</span>
<span class="nc" id="L56">			currentScenario = (String) context.getAttribute(RequestContext.SESSION_SCOPE, &quot;CurrentScenario&quot;);</span>
		}
<span class="nc bnc" id="L58" title="All 4 branches missed.">		if (currentScenario == null || currentScenario.isEmpty()) {</span>
<span class="nc" id="L59">			List&lt;StringsPair&gt; scenarios = getScenarios(context);</span>
<span class="nc bnc" id="L60" title="All 2 branches missed.">			currentScenario = scenarios != null ? scenarios.get(0).getKey() : &quot;&quot;;</span>
		}
<span class="nc" id="L62">		context.setAttribute(RequestContext.SESSION_SCOPE, &quot;CurrentScenario&quot;, currentScenario);</span>

<span class="nc" id="L64">		return currentScenario;</span>
	}

	public String getCurrentBranchView(RequestContext context) throws BbmException, RemoteException {
<span class="nc" id="L68">		String currentBranchView = context.getRequest().getParameter(RfsReportParameterConstants.BRANCH_VIEW);</span>
<span class="nc bnc" id="L69" title="All 4 branches missed.">		if (currentBranchView == null || currentBranchView.isEmpty()) {</span>
<span class="nc" id="L70">			currentBranchView = (String) context.getAttribute(RequestContext.SESSION_SCOPE, &quot;CurrentBranchView&quot;);</span>
		}
<span class="nc bnc" id="L72" title="All 4 branches missed.">		if (currentBranchView == null || currentBranchView.isEmpty()) {</span>
<span class="nc" id="L73">			currentBranchView = m_rfsReportsManager.getDefaultViewForScenario(getCurrentScenario(context));</span>
		}
<span class="nc" id="L75">		context.setAttribute(RequestContext.SESSION_SCOPE, &quot;CurrentBranchView&quot;, currentBranchView);</span>

<span class="nc" id="L77">		return currentBranchView;</span>
	}

	public String getDefaultValue(RequestContext context, String picker) throws BbmException, RemoteException {
<span class="nc" id="L81">		String defaultValue = null;</span>
<span class="nc bnc" id="L82" title="All 2 branches missed.">		if (RfsReportParameterConstants.BRANCH_VIEW.equals(picker)) {</span>
<span class="nc" id="L83">			defaultValue = getCurrentBranchView(context);</span>
		}
<span class="nc" id="L85">		return defaultValue;</span>
	}

	/**
	 * Get all branches in current scenario and selected view in branch picker
	 * 
	 * @param context
	 * @return
	 * @throws BbmException
	 *             , RemoteException
	 * 
	 */
	public Collection&lt;RfsBranch&gt; getBranches(RequestContext context) throws BbmException, RemoteException {
<span class="nc" id="L98">		Collection&lt;RfsBranch&gt; branches = Collections.emptyList();</span>
<span class="nc" id="L99">		String currentScenario = getCurrentScenario(context);</span>

<span class="nc" id="L101">		String branchView = context.getRequest().getParameter(RfsReportParameterConstants.BRANCH_VIEW);</span>
<span class="nc bnc" id="L102" title="All 2 branches missed.">		if (branchView == null) {</span>
<span class="nc" id="L103">			branchView = getDefaultValue(context, RfsReportParameterConstants.BRANCH_VIEW);</span>
		}
<span class="nc bnc" id="L105" title="All 4 branches missed.">		if (branchView == null || branchView.equals(&quot;-1&quot;)) {</span>
<span class="nc" id="L106">			branches = m_rfsReportsManager.getBranchesInCurrentScenario(currentScenario);</span>
		} else {
<span class="nc" id="L108">			branches = m_rfsReportsManager.getBranchesInCurrentView(branchView);</span>
		}
<span class="nc" id="L110">		return branches;</span>
	}

	/**
	 * Get branch views for dropdown in branch selector
	 * 
	 * @param scenario
	 * @return
	 * @throws BbmException
	 *             , RemoteException
	 */
	public List&lt;StringsPair&gt; getBranchViews(String scenario) throws BbmException, RemoteException {
<span class="nc" id="L122">		List&lt;StringsPair&gt; colBranchViews = new ArrayList&lt;StringsPair&gt;();</span>
<span class="nc" id="L123">		colBranchViews = m_rfsReportsManager.getBranchViews(scenario);</span>
<span class="nc" id="L124">		return colBranchViews;</span>
	}

	/**
	 * Get scenarios
	 * 
	 * @return
	 * @throws BbmException
	 *             , RemoteException
	 */
	public List&lt;StringsPair&gt; getScenarios(RequestContext context) throws BbmException, RemoteException {

<span class="nc" id="L136">		List&lt;StringsPair&gt; colScenarios = new ArrayList&lt;StringsPair&gt;();</span>
<span class="nc" id="L137">		colScenarios = m_rfsReportsManager.getScenarios();</span>

<span class="nc bnc" id="L139" title="All 4 branches missed.">		if (colScenarios == null || colScenarios.isEmpty()) {</span>
<span class="nc" id="L140">			return null;</span>
		}
<span class="nc" id="L142">		context.setAttribute(RequestContext.SESSION_SCOPE, &quot;CurrentScenario&quot;, colScenarios.get(0).getKey());</span>
<span class="nc" id="L143">		return colScenarios;</span>
	}

	/**
	 * Get business units
	 * 
	 * @param scenario
	 * @return
	 * @throws BbmException
	 *             , RemoteException
	 */
	public List&lt;StringsPair&gt; getBusinessUnits(String scenario) throws BbmException, RemoteException {

<span class="nc" id="L156">		List&lt;StringsPair&gt; colBu = new ArrayList&lt;StringsPair&gt;();</span>
<span class="nc" id="L157">		colBu = m_rfsReportsManager.getBusinessUnits(scenario);</span>

<span class="nc bnc" id="L159" title="All 4 branches missed.">		if (colBu == null || colBu.isEmpty()) {</span>
<span class="nc" id="L160">			return null;</span>
		}

<span class="nc" id="L163">		return colBu;</span>
	}

	public List&lt;StringsPair&gt; getIntervalSpinner() throws BbmException, RemoteException {

<span class="nc" id="L168">		List&lt;StringsPair&gt; lNumOfIntervals = new ArrayList&lt;StringsPair&gt;();</span>
<span class="nc" id="L169">		lNumOfIntervals.add(new StringsPair(&quot;1&quot;, &quot;1&quot;));</span>
<span class="nc" id="L170">		lNumOfIntervals.add(new StringsPair(&quot;2&quot;, &quot;2&quot;));</span>
<span class="nc" id="L171">		lNumOfIntervals.add(new StringsPair(&quot;3&quot;, &quot;3&quot;));</span>
<span class="nc" id="L172">		lNumOfIntervals.add(new StringsPair(&quot;4&quot;, &quot;4&quot;));</span>
<span class="nc" id="L173">		lNumOfIntervals.add(new StringsPair(&quot;5&quot;, &quot;5&quot;));</span>
<span class="nc" id="L174">		lNumOfIntervals.add(new StringsPair(&quot;6&quot;, &quot;6&quot;));</span>
<span class="nc" id="L175">		lNumOfIntervals.add(new StringsPair(&quot;7&quot;, &quot;7&quot;));</span>
<span class="nc" id="L176">		lNumOfIntervals.add(new StringsPair(&quot;8&quot;, &quot;8&quot;));</span>
<span class="nc" id="L177">		lNumOfIntervals.add(new StringsPair(&quot;9&quot;, &quot;9&quot;));</span>
<span class="nc" id="L178">		lNumOfIntervals.add(new StringsPair(&quot;10&quot;, &quot;10&quot;));</span>
<span class="nc" id="L179">		lNumOfIntervals.add(new StringsPair(&quot;11&quot;, &quot;11&quot;));</span>
<span class="nc" id="L180">		lNumOfIntervals.add(new StringsPair(&quot;12&quot;, &quot;12&quot;));</span>
<span class="nc" id="L181">		lNumOfIntervals.add(new StringsPair(&quot;13&quot;, &quot;13&quot;));</span>
<span class="nc" id="L182">		lNumOfIntervals.add(new StringsPair(&quot;14&quot;, &quot;14&quot;));</span>
<span class="nc" id="L183">		return lNumOfIntervals;</span>
	}

	public List&lt;StringsPair&gt; getMonthsList(RequestContext context) throws BbmException, RemoteException {

<span class="nc" id="L188">		Localizer localizer = context.getLocalizer();</span>

<span class="nc" id="L190">		List&lt;StringsPair&gt; lMonths = new ArrayList&lt;StringsPair&gt;();</span>
<span class="nc" id="L191">		lMonths.add(new StringsPair(&quot;1&quot;, localizer.i18n(FsWebBundleKey.BUNDLE_NAME, FsWebBundleKey.JANUARY)));</span>
<span class="nc" id="L192">		lMonths.add(new StringsPair(&quot;2&quot;, localizer.i18n(FsWebBundleKey.BUNDLE_NAME, FsWebBundleKey.FEBRUARY)));</span>
<span class="nc" id="L193">		lMonths.add(new StringsPair(&quot;3&quot;, localizer.i18n(FsWebBundleKey.BUNDLE_NAME, FsWebBundleKey.MARCH)));</span>
<span class="nc" id="L194">		lMonths.add(new StringsPair(&quot;4&quot;, localizer.i18n(FsWebBundleKey.BUNDLE_NAME, FsWebBundleKey.APRIL)));</span>
<span class="nc" id="L195">		lMonths.add(new StringsPair(&quot;5&quot;, localizer.i18n(FsWebBundleKey.BUNDLE_NAME, FsWebBundleKey.MAY)));</span>
<span class="nc" id="L196">		lMonths.add(new StringsPair(&quot;6&quot;, localizer.i18n(FsWebBundleKey.BUNDLE_NAME, FsWebBundleKey.JUNE)));</span>
<span class="nc" id="L197">		lMonths.add(new StringsPair(&quot;7&quot;, localizer.i18n(FsWebBundleKey.BUNDLE_NAME, FsWebBundleKey.JULY)));</span>
<span class="nc" id="L198">		lMonths.add(new StringsPair(&quot;8&quot;, localizer.i18n(FsWebBundleKey.BUNDLE_NAME, FsWebBundleKey.AUGUST)));</span>
<span class="nc" id="L199">		lMonths.add(new StringsPair(&quot;9&quot;, localizer.i18n(FsWebBundleKey.BUNDLE_NAME, FsWebBundleKey.SEPTEMBER)));</span>
<span class="nc" id="L200">		lMonths.add(new StringsPair(&quot;10&quot;, localizer.i18n(FsWebBundleKey.BUNDLE_NAME, FsWebBundleKey.OCTOBER)));</span>
<span class="nc" id="L201">		lMonths.add(new StringsPair(&quot;11&quot;, localizer.i18n(FsWebBundleKey.BUNDLE_NAME, FsWebBundleKey.NOVEMBER)));</span>
<span class="nc" id="L202">		lMonths.add(new StringsPair(&quot;12&quot;, localizer.i18n(FsWebBundleKey.BUNDLE_NAME, FsWebBundleKey.DECEMBER)));</span>

<span class="nc" id="L204">		return lMonths;</span>
	}

	public List&lt;StringsPair&gt; getDaysOfWeekList() throws BbmException, RemoteException {

<span class="nc" id="L209">		List&lt;StringsPair&gt; lMonths = new ArrayList&lt;StringsPair&gt;();</span>
<span class="nc" id="L210">		lMonths.add(new StringsPair(&quot;0&quot;, &quot;All&quot;));</span>
<span class="nc" id="L211">		lMonths.add(new StringsPair(&quot;1&quot;, &quot;Sunday&quot;));</span>
<span class="nc" id="L212">		lMonths.add(new StringsPair(&quot;2&quot;, &quot;Monday&quot;));</span>
<span class="nc" id="L213">		lMonths.add(new StringsPair(&quot;3&quot;, &quot;Tuesday&quot;));</span>
<span class="nc" id="L214">		lMonths.add(new StringsPair(&quot;4&quot;, &quot;Wednesday&quot;));</span>
<span class="nc" id="L215">		lMonths.add(new StringsPair(&quot;5&quot;, &quot;Thursday&quot;));</span>
<span class="nc" id="L216">		lMonths.add(new StringsPair(&quot;6&quot;, &quot;Friday&quot;));</span>
<span class="nc" id="L217">		lMonths.add(new StringsPair(&quot;7&quot;, &quot;Saturday&quot;));</span>

<span class="nc" id="L219">		return lMonths;</span>
	}

	public List&lt;StringsPair&gt; getResourceClasses(String scenario, String businessUnits) throws BbmException, RemoteException {
<span class="nc" id="L223">		List&lt;StringsPair&gt; colPositions = new ArrayList&lt;StringsPair&gt;();</span>
<span class="nc" id="L224">		colPositions = m_rfsReportsManager.getResourceClasses(scenario, businessUnits, false);</span>

<span class="nc bnc" id="L226" title="All 4 branches missed.">		if (colPositions == null || colPositions.isEmpty()) {</span>
<span class="nc" id="L227">			return null;</span>
		}
<span class="nc" id="L229">		return colPositions;</span>
	}

	public List&lt;StringsPair&gt; getResourceClassesForMultipleSelection(RequestContext context, String scenario, String businessUnits)
			throws BbmException, RemoteException {
<span class="nc" id="L234">		List&lt;StringsPair&gt; colPositions = new ArrayList&lt;StringsPair&gt;();</span>
<span class="nc" id="L235">		colPositions = m_rfsReportsManager.getResourceClasses(scenario, businessUnits, true);</span>

<span class="nc bnc" id="L237" title="All 4 branches missed.">		if (colPositions == null || colPositions.isEmpty()) {</span>
<span class="nc" id="L238">			return null;</span>
		}
<span class="nc" id="L240">		String allPositionsKey = &quot;&quot;;</span>
<span class="nc bnc" id="L241" title="All 2 branches missed.">		for (int i = 1; i &lt; colPositions.size(); i++) {</span>
<span class="nc bnc" id="L242" title="All 2 branches missed.">			if (i &gt; 1) {</span>
<span class="nc" id="L243">				allPositionsKey += &quot;|&quot;;</span>
			}
<span class="nc" id="L245">			allPositionsKey += colPositions.get(i).getKey();</span>
		}
<span class="nc" id="L247">		colPositions.set(0,</span>
<span class="nc" id="L248">				new StringsPair(allPositionsKey, context.getLocalizer().i18n(FsWebBundleKey.BUNDLE_NAME, FsWebBundleKey.OPTION_VALUE_ALL)));</span>
<span class="nc" id="L249">		return colPositions;</span>
	}

	public Collection&lt;RfsBranch&gt; getBranchObjectsByIDs(RequestContext context, Collection&lt;ID&gt; branchIDs) throws BbmException,
			RemoteException {
<span class="nc" id="L254">		return m_rfsReportsManager.getBranchObjectsByIDs(branchIDs);</span>
	}

	public Collection&lt;String&gt; getBranchesByIDs(RequestContext context, Collection&lt;ID&gt; branchIDs) throws BbmException, RemoteException {
<span class="nc" id="L258">		return m_rfsReportsManager.getBranchesByIDs(branchIDs);</span>
	}

	public Collection&lt;String&gt; getBranchesByIDString(String branchIDs) throws BbmException, RemoteException {
<span class="nc" id="L262">		return m_rfsReportsManager.getBranchesByIDString(branchIDs);</span>
	}

	public List&lt;StringsPair&gt; getYearsList() throws BbmException, RemoteException {

<span class="nc" id="L267">		List&lt;StringsPair&gt; colYears = new ArrayList&lt;StringsPair&gt;();</span>
<span class="nc" id="L268">		colYears = m_rfsReportsManager.getYearsList();</span>

<span class="nc bnc" id="L270" title="All 4 branches missed.">		if (colYears == null || colYears.isEmpty()) {</span>
<span class="nc" id="L271">			return null;</span>
		}

<span class="nc" id="L274">		return colYears;</span>
	}

	public List&lt;StringsPair&gt; getStaffMixes(String scenario, String businessUnits, int staffMixType) throws BbmException, RemoteException {

<span class="nc" id="L279">		List&lt;StringsPair&gt; colStaffMixes = new ArrayList&lt;StringsPair&gt;();</span>
<span class="nc" id="L280">		colStaffMixes = m_rfsReportsManager.getStaffMixes(scenario, businessUnits, staffMixType);</span>

<span class="nc bnc" id="L282" title="All 2 branches missed.">		if (colStaffMixes != null) {</span>
<span class="nc" id="L283">			colStaffMixes.add(0, new StringsPair(&quot;&quot;, &quot;&quot;));</span>
		}
<span class="nc bnc" id="L285" title="All 4 branches missed.">		if (colStaffMixes == null || colStaffMixes.isEmpty()) {</span>
<span class="nc" id="L286">			return null;</span>
		}

<span class="nc" id="L289">		return colStaffMixes;</span>
	}

	public List&lt;StringsPair&gt; getStaffMixFilters(String scenario) throws BbmException, RemoteException {
<span class="nc" id="L293">		List&lt;StringsPair&gt; colStaffMixFilters = new ArrayList&lt;StringsPair&gt;();</span>
<span class="nc" id="L294">		colStaffMixFilters = m_rfsReportsManager.getStaffMixFilters(scenario);</span>
<span class="nc bnc" id="L295" title="All 4 branches missed.">		if (colStaffMixFilters == null || colStaffMixFilters.isEmpty()) {</span>
<span class="nc" id="L296">			return null;</span>
		}
<span class="nc" id="L298">		colStaffMixFilters.add(0, new StringsPair(&quot;&quot;, &quot;&quot;));</span>
<span class="nc" id="L299">		return colStaffMixFilters;</span>
	}

	public List&lt;StringsPair&gt; getWorkgroups(RequestContext context, boolean includeAll) throws BbmException, RemoteException {

<span class="nc" id="L304">		List&lt;StringsPair&gt; colWorkgroups = new ArrayList&lt;StringsPair&gt;();</span>
<span class="nc" id="L305">		colWorkgroups = m_rfsReportsManager.getWorkgroups(context.getRequest().getParameter(</span>
				RfsReportParameterConstants.PARAM_PLANNED_STAFFMIX));

<span class="nc bnc" id="L308" title="All 4 branches missed.">		if (colWorkgroups == null || colWorkgroups.isEmpty()) {</span>
<span class="nc" id="L309">			return null;</span>
		}
<span class="nc bnc" id="L311" title="All 2 branches missed.">		if (includeAll) {</span>
<span class="nc" id="L312">			String allWorkgroupsKey = &quot;&quot;;</span>
<span class="nc bnc" id="L313" title="All 2 branches missed.">			for (int i = 1; i &lt; colWorkgroups.size(); i++) {</span>
<span class="nc bnc" id="L314" title="All 2 branches missed.">				if (i &gt; 1) {</span>
<span class="nc" id="L315">					allWorkgroupsKey += &quot;,&quot;;</span>
				}
<span class="nc" id="L317">				allWorkgroupsKey += colWorkgroups.get(i).getKey();</span>
			}
<span class="nc" id="L319">			colWorkgroups.add(</span>
					0,
<span class="nc" id="L321">					new StringsPair(allWorkgroupsKey, context.getLocalizer().i18n(FsWebBundleKey.BUNDLE_NAME,</span>
							FsWebBundleKey.OPTION_VALUE_ALL)));
		}
<span class="nc" id="L324">		return colWorkgroups;</span>
	}

	public List&lt;StringsPair&gt; getResources(String scenario, String resourceType, boolean useProdForecasts) throws BbmException,
			RemoteException {

<span class="nc" id="L330">		List&lt;StringsPair&gt; colResources = new ArrayList&lt;StringsPair&gt;();</span>
<span class="nc" id="L331">		colResources = m_rfsReportsManager.getResources(scenario, resourceType, useProdForecasts);</span>
<span class="nc bnc" id="L332" title="All 2 branches missed.">		if (RfsReportParameterConstants.RESOURCE_TYPE_DURATION.equals(resourceType)) {</span>
<span class="nc" id="L333">			colResources.addAll(m_rfsReportsManager.getResources(scenario, &quot;Resource&quot;, useProdForecasts));</span>
		}
<span class="nc bnc" id="L335" title="All 4 branches missed.">		if (colResources == null || colResources.isEmpty()) {</span>
<span class="nc" id="L336">			return null;</span>
		}

<span class="nc" id="L339">		return colResources;</span>
	}

	public List&lt;StringsPair&gt; getEmployeeCategories(int staffMix) throws BbmException, RemoteException {
<span class="nc" id="L343">		List&lt;StringsPair&gt; empCategories = new ArrayList&lt;StringsPair&gt;();</span>
<span class="nc" id="L344">		empCategories = m_rfsReportsManager.getEmployeeCategories(staffMix);</span>
<span class="nc" id="L345">		return empCategories;</span>
	}

	public List&lt;StringsPair&gt; getResourceCategories(String scenario) throws BbmException, RemoteException {
<span class="nc" id="L349">		List&lt;StringsPair&gt; colPositions = new ArrayList&lt;StringsPair&gt;();</span>
<span class="nc" id="L350">		colPositions = m_rfsReportsManager.getResourceCategories(scenario);</span>

<span class="nc bnc" id="L352" title="All 4 branches missed.">		if (colPositions == null || colPositions.isEmpty()) {</span>
<span class="nc" id="L353">			return null;</span>
		}

<span class="nc" id="L356">		return colPositions;</span>
	}

	public List&lt;StringsPair&gt; getTransactionCategories(String scenario) throws BbmException, RemoteException {
<span class="nc" id="L360">		List&lt;StringsPair&gt; colPositions = new ArrayList&lt;StringsPair&gt;();</span>
<span class="nc" id="L361">		colPositions = m_rfsReportsManager.getTransactionCategories(scenario);</span>

<span class="nc bnc" id="L363" title="All 4 branches missed.">		if (colPositions == null || colPositions.isEmpty()) {</span>
<span class="nc" id="L364">			return null;</span>
		}

<span class="nc" id="L367">		return colPositions;</span>
	}

	public List&lt;StringsPair&gt; getHierarchyGroupByList(String scenario) throws BbmException, RemoteException {
<span class="nc" id="L371">		List&lt;StringsPair&gt; colGroupBy = new ArrayList&lt;StringsPair&gt;();</span>
<span class="nc" id="L372">		colGroupBy = m_rfsReportsManager.getHierarchyGroupByList(scenario);</span>

<span class="nc bnc" id="L374" title="All 4 branches missed.">		if (colGroupBy == null || colGroupBy.isEmpty()) {</span>
<span class="nc" id="L375">			colGroupBy = new ArrayList&lt;StringsPair&gt;();</span>
		} else {
<span class="nc" id="L377">			colGroupBy.add(new StringsPair(&quot;-1&quot;, &quot;Workgroup&quot;));</span>
		}

<span class="nc" id="L380">		return colGroupBy;</span>
	}

	public RfsStaffMixFilter getStaffMixFilterDetails(String scenario, String staffMixFilter) throws BbmException, RemoteException {
<span class="nc" id="L384">		return m_rfsReportsManager.getStaffMixFilterDetails(scenario, staffMixFilter);</span>
	}

	public List&lt;StringsPair&gt; getRadioInputOptions(String pickerName, String filter) {

<span class="nc" id="L389">		List&lt;StringsPair&gt; lOptions = new ArrayList&lt;StringsPair&gt;();</span>

<span class="nc bnc" id="L391" title="All 2 branches missed.">		if (RfsReportParameterConstants.INTERVAL.equals(pickerName)) {</span>
			// Options for Interval - Monthly/Daily
<span class="nc" id="L393">			lOptions.add(new StringsPair(RfsReportParameterConstants.PERIODTYPE_MONTHLY, FsWebBundleKey.INTERVALTYPE_MONTHLY));</span>
<span class="nc" id="L394">			lOptions.add(new StringsPair(RfsReportParameterConstants.PERIODTYPE_DAILY, FsWebBundleKey.INTERVALTYPE_DAILY));</span>
<span class="nc bnc" id="L395" title="All 2 branches missed.">		} else if (RfsReportParameterConstants.CATEGORY.equals(pickerName)) {</span>
			// Options for Category - Resource Category / Transaction Category
<span class="nc" id="L397">			lOptions.add(new StringsPair(RfsReportParameterConstants.CATEGORYTYPE_RESOURCE, FsWebBundleKey.RESOURCE_CATEGORY));</span>
<span class="nc" id="L398">			lOptions.add(new StringsPair(RfsReportParameterConstants.CATEGORYTYPE_TRANSACTION, FsWebBundleKey.TRANSACTION_CATEGORY));</span>
<span class="nc bnc" id="L399" title="All 2 branches missed.">		} else if (RfsReportParameterConstants.TRANSACTIONSOURCE.equals(pickerName)) {</span>
			// Options for Transaction Source - Actual vs Forecasted / Actual vs
			// Merged / Actual vs Merged vs Forecasted
<span class="nc" id="L402">			lOptions.add(new StringsPair(RfsReportParameterConstants.TRANSACTIONSOURCE_ACTUALVSFORECAST,</span>
					FsWebBundleKey.TRANSACTIONSOURCE_ACTUALVSFORECAST));
<span class="nc" id="L404">			lOptions.add(new StringsPair(RfsReportParameterConstants.TRANSACTIONSOURCE_ACTUALVSMERGED,</span>
					FsWebBundleKey.TRANSACTIONSOURCE_ACTUALVSMERGED));
<span class="nc" id="L406">			lOptions.add(new StringsPair(RfsReportParameterConstants.TRANSACTIONSOURCE_ACTUALVSMERGEDVSFORECAST,</span>
					FsWebBundleKey.TRANSACTIONSOURCE_ACTUALVSMERGEDVSFORECAST));
<span class="nc bnc" id="L408" title="All 2 branches missed.">		} else if (RfsReportParameterConstants.RESOURCE_TYPE.equals(pickerName)</span>
<span class="nc bnc" id="L409" title="All 2 branches missed.">				&amp;&amp; RfsReportParameterConstants.FILTER_VOLUME_FORECAST.equals(filter)) {</span>
			// Volume Forecast , History Resources - for untracked
<span class="nc" id="L411">			lOptions.add(new StringsPair(RfsReportParameterConstants.RESOURCE_TYPE_VOLUME, FsWebBundleKey.VOLUME_FORECAST));</span>
<span class="nc" id="L412">			lOptions.add(new StringsPair(RfsReportParameterConstants.RESOURCE_TYPE_HISTORY, FsWebBundleKey.HISTORY_RESOURCES));</span>
<span class="nc bnc" id="L413" title="All 2 branches missed.">		} else if (RfsReportParameterConstants.RESOURCE_TYPE.equals(pickerName)) {</span>
			// Options for resources - Forecast Resources / History Resources
<span class="nc" id="L415">			lOptions.add(new StringsPair(RfsReportParameterConstants.RESOURCE_TYPE_FORECAST, FsWebBundleKey.FORECAST_RESOURCES));</span>
<span class="nc" id="L416">			lOptions.add(new StringsPair(RfsReportParameterConstants.RESOURCE_TYPE_HISTORY, FsWebBundleKey.HISTORY_RESOURCES));</span>
		}

<span class="nc" id="L419">		return lOptions;</span>
	}

	public String getBranchNames(RequestContext context, Object[] branchIds) throws BbmException, RemoteException {
<span class="nc" id="L423">		List&lt;String&gt; branchNames = new ArrayList&lt;String&gt;();</span>
<span class="nc" id="L424">		String brNames = &quot;&quot;;</span>
<span class="nc" id="L425">		branchNames = m_rfsReportsManager.getBranchNames(context.getRequest().getParameter(&quot;Scenario&quot;),</span>
<span class="nc" id="L426">				Arrays.copyOf(branchIds, branchIds.length, String[].class));</span>

<span class="nc bnc" id="L428" title="All 2 branches missed.">		int branchNamesDisplayLength = branchIds.length &gt; 3 ? 3 : branchIds.length;</span>

<span class="nc bnc" id="L430" title="All 2 branches missed.">		if (branchNames != null) {</span>
<span class="nc bnc" id="L431" title="All 2 branches missed.">			for (int i = 0; i &lt; branchNamesDisplayLength; i++) {</span>
<span class="nc" id="L432">				brNames += branchNames.get(i);</span>
<span class="nc bnc" id="L433" title="All 2 branches missed.">				if (i &lt; branchNamesDisplayLength - 1) {</span>
<span class="nc" id="L434">					brNames += &quot;,&quot;;</span>
				}
			}
<span class="nc bnc" id="L437" title="All 2 branches missed.">			if (branchIds.length &gt; 3) {</span>
<span class="nc" id="L438">				brNames += &quot;...&quot;;</span>
			}
		}
<span class="nc" id="L441">		return brNames;</span>
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>