<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>RfsReportsManagerEJB.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">QA Code Coverage</a> &gt; <a href="index.source.html" class="el_package">com.verint.ejb.rfs.reports.ejb</a> &gt; <span class="el_source">RfsReportsManagerEJB.java</span></div><h1>RfsReportsManagerEJB.java</h1><pre class="source lang-java linenums">/*
 * (c) 2009-2012 Verint Systems, Inc.
 */
package com.verint.ejb.rfs.reports.ejb;

import java.rmi.RemoteException;
import java.util.Collection;
import java.util.List;

import com.bluepumpkin.common.base.Log;
import com.bluepumpkin.common.datatypes.ID;
import com.bluepumpkin.common.datatypes.StringsPair;
import com.bluepumpkin.common.logging.Category;
import com.bluepumpkin.ejb.bbm.base.BbmFinderException;
import com.bluepumpkin.ejb.core.base.SessionEJBBase;
import com.verint.ejb.rfs.reports.model.RfsBranch;
import com.verint.ejb.rfs.reports.model.RfsReportParametersDAO;
import com.verint.ejb.rfs.reports.model.RfsStaffMixFilter;

/**
 * This session bean handles parameter pickers in WFM for RFS forecaster reports
 *
 * {@link RfsReportsManagerEJB}.
 */
@SuppressWarnings(&quot;serial&quot;)
<span class="nc" id="L26">public class RfsReportsManagerEJB extends SessionEJBBase {</span>
<span class="nc" id="L27">	private static Category cat = Log.initCategory(RfsReportsManagerEJB.class.getName());</span>

	// Instance initializer. Instance initializers are run after any superclass
	// constructors complete, and before any constructors in this class.
	{
<span class="nc" id="L32">		super.init(RfsReportsManagerEJB.class.getName());</span>
<span class="nc" id="L33">	}</span>

	@Override
	public void ejbCreate() {

<span class="nc" id="L38">	}</span>

	@Override
	protected Category getCategory() {
<span class="nc" id="L42">		return cat;</span>
	}

	public List&lt;StringsPair&gt; getBranchViews(String scenario) throws BbmFinderException {
<span class="nc" id="L46">		methodStart(&quot;getScenarios&quot;);</span>
<span class="nc" id="L47">		RfsReportParametersDAO dao = new RfsReportParametersDAO();</span>
		try {
<span class="nc" id="L49">			List&lt;StringsPair&gt; scenarios = dao.getBranchViews(scenario);</span>
<span class="nc bnc" id="L50" title="All 2 branches missed.">			if (scenarios.isEmpty())</span>
<span class="nc" id="L51">				return null;</span>
<span class="nc" id="L52">			return scenarios;</span>
<span class="nc" id="L53">		} catch (Exception e) {</span>
<span class="nc" id="L54">			handleException(e, false);</span>
<span class="nc" id="L55">			throw new BbmFinderException(e);</span>
		} finally {
<span class="nc" id="L57">			dao.cleanUp();</span>
<span class="nc" id="L58">			methodFinish();</span>
		}
	}

	public List&lt;StringsPair&gt; getScenarios() throws BbmFinderException {
<span class="nc" id="L63">		methodStart(&quot;getScenarios&quot;);</span>
<span class="nc" id="L64">		RfsReportParametersDAO dao = new RfsReportParametersDAO();</span>
		try {
<span class="nc" id="L66">			List&lt;StringsPair&gt; scenarios = dao.getScenarios();</span>
<span class="nc bnc" id="L67" title="All 2 branches missed.">			if (scenarios.isEmpty())</span>
<span class="nc" id="L68">				return null;</span>
<span class="nc" id="L69">			return scenarios;</span>
<span class="nc" id="L70">		} catch (Exception e) {</span>
<span class="nc" id="L71">			handleException(e, false);</span>
<span class="nc" id="L72">			throw new BbmFinderException(e);</span>
		} finally {
<span class="nc" id="L74">			dao.cleanUp();</span>
<span class="nc" id="L75">			methodFinish();</span>
		}
	}

	public List&lt;StringsPair&gt; getBusinessUnits(String scenario) throws BbmFinderException {
<span class="nc" id="L80">		methodStart(&quot;getBusinessUnits&quot;);</span>
<span class="nc" id="L81">		RfsReportParametersDAO dao = new RfsReportParametersDAO();</span>
		try {
<span class="nc" id="L83">			List&lt;StringsPair&gt; businessUnits = dao.getBusinessUnits(scenario);</span>
<span class="nc bnc" id="L84" title="All 2 branches missed.">			if (businessUnits.isEmpty())</span>
<span class="nc" id="L85">				return null;</span>
<span class="nc" id="L86">			return businessUnits;</span>
<span class="nc" id="L87">		} catch (Exception e) {</span>
<span class="nc" id="L88">			handleException(e, false);</span>
<span class="nc" id="L89">			throw new BbmFinderException(e);</span>
		} finally {
<span class="nc" id="L91">			dao.cleanUp();</span>
<span class="nc" id="L92">			methodFinish();</span>
		}
	}

	public List&lt;StringsPair&gt; getResourceClasses(String scenario, String businessUnits, boolean includeAllOption)
			throws BbmFinderException {
<span class="nc" id="L98">		methodStart(&quot;getResourceClasses&quot;);</span>
<span class="nc" id="L99">		RfsReportParametersDAO dao = new RfsReportParametersDAO();</span>
		try {
<span class="nc" id="L101">			List&lt;StringsPair&gt; resourceClasses = dao.getResourceClasses(scenario, businessUnits, includeAllOption);</span>
<span class="nc bnc" id="L102" title="All 2 branches missed.">			if (resourceClasses.isEmpty())</span>
<span class="nc" id="L103">				return null;</span>
<span class="nc" id="L104">			return resourceClasses;</span>
<span class="nc" id="L105">		} catch (Exception e) {</span>
<span class="nc" id="L106">			handleException(e, false);</span>
<span class="nc" id="L107">			throw new BbmFinderException(e);</span>
		} finally {
<span class="nc" id="L109">			dao.cleanUp();</span>
<span class="nc" id="L110">			methodFinish();</span>
		}
	}

	public List&lt;StringsPair&gt; getYearsList() throws BbmFinderException {
<span class="nc" id="L115">		methodStart(&quot;getYearList&quot;);</span>
<span class="nc" id="L116">		RfsReportParametersDAO dao = new RfsReportParametersDAO();</span>
		try {
<span class="nc" id="L118">			List&lt;StringsPair&gt; lYears = dao.getYearsList();</span>
<span class="nc bnc" id="L119" title="All 2 branches missed.">			if (lYears.isEmpty())</span>
<span class="nc" id="L120">				return null;</span>
<span class="nc" id="L121">			return lYears;</span>
<span class="nc" id="L122">		} catch (Exception e) {</span>
<span class="nc" id="L123">			handleException(e, false);</span>
		} finally {
<span class="nc" id="L125">			dao.cleanUp();</span>
<span class="nc" id="L126">			methodFinish();</span>
<span class="nc" id="L127">		}</span>
<span class="nc" id="L128">		return null;</span>
	}

	public List&lt;StringsPair&gt; getStaffMixes(String scenario, String businessUnits, int staffMixType) throws BbmFinderException {
<span class="nc" id="L132">		methodStart(&quot;getStaffMixes&quot;);</span>
<span class="nc" id="L133">		RfsReportParametersDAO dao = new RfsReportParametersDAO();</span>
		try {
<span class="nc" id="L135">			List&lt;StringsPair&gt; lStaffMixes = dao.getStaffMixes(scenario, businessUnits, staffMixType);</span>
<span class="nc bnc" id="L136" title="All 2 branches missed.">			if (lStaffMixes.isEmpty()) {</span>
<span class="nc" id="L137">				return null;</span>
			}
<span class="nc" id="L139">			return lStaffMixes;</span>
<span class="nc" id="L140">		} catch (Exception e) {</span>
<span class="nc" id="L141">			handleException(e, false);</span>
		} finally {
<span class="nc" id="L143">			dao.cleanUp();</span>
<span class="nc" id="L144">			methodFinish();</span>
<span class="nc" id="L145">		}</span>
<span class="nc" id="L146">		return null;</span>
	}

	public List&lt;StringsPair&gt; getStaffMixFilters(String scenario) throws BbmFinderException, RemoteException {
<span class="nc" id="L150">		methodStart(&quot;getStaffMixFilters&quot;);</span>
<span class="nc" id="L151">		RfsReportParametersDAO dao = new RfsReportParametersDAO();</span>
		try {
<span class="nc" id="L153">			List&lt;StringsPair&gt; lStaffMixFilters = dao.getStaffMixFilters(scenario);</span>
<span class="nc bnc" id="L154" title="All 2 branches missed.">			if (lStaffMixFilters.isEmpty()) {</span>
<span class="nc" id="L155">				return null;</span>
			}
<span class="nc" id="L157">			return lStaffMixFilters;</span>
<span class="nc" id="L158">		} catch (Exception e) {</span>
<span class="nc" id="L159">			handleException(e, false);</span>
		} finally {
<span class="nc" id="L161">			dao.cleanUp();</span>
<span class="nc" id="L162">			methodFinish();</span>
<span class="nc" id="L163">		}</span>
<span class="nc" id="L164">		return null;</span>
	}

	public RfsStaffMixFilter getStaffMixFilterDetails(String scenario, String staffMixFilter) throws BbmFinderException, RemoteException {
<span class="nc" id="L168">		methodStart(&quot;getStaffMixFilterDetails&quot;);</span>
<span class="nc" id="L169">		RfsReportParametersDAO dao = new RfsReportParametersDAO();</span>
		try {
<span class="nc" id="L171">			return dao.getStaffMixFilterDetails(scenario, staffMixFilter);</span>
<span class="nc" id="L172">		} catch (Exception e) {</span>
<span class="nc" id="L173">			handleException(e, false);</span>
		} finally {
<span class="nc" id="L175">			dao.cleanUp();</span>
<span class="nc" id="L176">			methodFinish();</span>
<span class="nc" id="L177">		}</span>
<span class="nc" id="L178">		return new RfsStaffMixFilter();</span>
	}
	
	public List&lt;StringsPair&gt; getWorkgroups(String staffMixResult) throws BbmFinderException {
<span class="nc" id="L182">		methodStart(&quot;getWorkgroups&quot;);</span>
<span class="nc" id="L183">		RfsReportParametersDAO dao = new RfsReportParametersDAO();</span>
		try {
<span class="nc" id="L185">			List&lt;StringsPair&gt; lWorkgroups = dao.getWorkgroups(staffMixResult);</span>
<span class="nc bnc" id="L186" title="All 2 branches missed.">			if (lWorkgroups.isEmpty())</span>
<span class="nc" id="L187">				return null;</span>
<span class="nc" id="L188">			return lWorkgroups;</span>
<span class="nc" id="L189">		} catch (Exception e) {</span>
<span class="nc" id="L190">			handleException(e, false);</span>
		} finally {
<span class="nc" id="L192">			dao.cleanUp();</span>
<span class="nc" id="L193">			methodFinish();</span>
<span class="nc" id="L194">		}</span>
<span class="nc" id="L195">		return null;</span>
	}

	public List&lt;StringsPair&gt; getResources(String scenario, String resourceType, boolean useProdForecasts) throws BbmFinderException {
<span class="nc" id="L199">		methodStart(&quot;getForecasts&quot;);</span>
<span class="nc" id="L200">		RfsReportParametersDAO dao = new RfsReportParametersDAO();</span>
		try {
<span class="nc" id="L202">			List&lt;StringsPair&gt; lForecasts = dao.getResources(scenario, resourceType, useProdForecasts);</span>
<span class="nc bnc" id="L203" title="All 2 branches missed.">			if (lForecasts.isEmpty())</span>
<span class="nc" id="L204">				return null;</span>
<span class="nc" id="L205">			return lForecasts;</span>
<span class="nc" id="L206">		} catch (Exception e) {</span>
<span class="nc" id="L207">			handleException(e, false);</span>
		} finally {
<span class="nc" id="L209">			dao.cleanUp();</span>
<span class="nc" id="L210">			methodFinish();</span>
<span class="nc" id="L211">		}</span>
<span class="nc" id="L212">		return null;</span>
	}

	public List&lt;StringsPair&gt; getEmployeeCategories(int staffMix) throws BbmFinderException {
<span class="nc" id="L216">		methodStart(&quot;getEmployeeCategories&quot;);</span>
<span class="nc" id="L217">		RfsReportParametersDAO dao = new RfsReportParametersDAO();</span>
		try {
<span class="nc" id="L219">			List&lt;StringsPair&gt; sEmpCategories = dao.getEmployeeCategories(staffMix);</span>
<span class="nc bnc" id="L220" title="All 4 branches missed.">			if (sEmpCategories == null || sEmpCategories.isEmpty())</span>
<span class="nc" id="L221">				return null;</span>
<span class="nc" id="L222">			return sEmpCategories;</span>
<span class="nc" id="L223">		} catch (Exception e) {</span>
<span class="nc" id="L224">			handleException(e, false);</span>
		} finally {
<span class="nc" id="L226">			dao.cleanUp();</span>
<span class="nc" id="L227">			methodFinish();</span>
<span class="nc" id="L228">		}</span>
<span class="nc" id="L229">		return null;</span>
	}

	public List&lt;StringsPair&gt; getResourceCategories(String scenario) throws BbmFinderException {
<span class="nc" id="L233">		methodStart(&quot;getResourceCategories&quot;);</span>
<span class="nc" id="L234">		RfsReportParametersDAO dao = new RfsReportParametersDAO();</span>
		try {
<span class="nc" id="L236">			List&lt;StringsPair&gt; businessUnits = dao.getResourceCategories(scenario);</span>
<span class="nc bnc" id="L237" title="All 2 branches missed.">			if (businessUnits.isEmpty())</span>
<span class="nc" id="L238">				return null;</span>
<span class="nc" id="L239">			return businessUnits;</span>
<span class="nc" id="L240">		} catch (Exception e) {</span>
<span class="nc" id="L241">			handleException(e, false);</span>
<span class="nc" id="L242">			throw new BbmFinderException(e);</span>
		} finally {
<span class="nc" id="L244">			dao.cleanUp();</span>
<span class="nc" id="L245">			methodFinish();</span>
		}
	}

	public List&lt;StringsPair&gt; getHierarchyGroupByList(String scenario) throws BbmFinderException {
<span class="nc" id="L250">		methodStart(&quot;getHierarchyGroupBy&quot;);</span>
<span class="nc" id="L251">		RfsReportParametersDAO dao = new RfsReportParametersDAO();</span>
		try {
<span class="nc" id="L253">			List&lt;StringsPair&gt; hierarchyGroupByList = dao.getHierarchyGroupByList(scenario);</span>
<span class="nc bnc" id="L254" title="All 2 branches missed.">			if (hierarchyGroupByList.isEmpty())</span>
<span class="nc" id="L255">				return null;</span>
<span class="nc" id="L256">			return hierarchyGroupByList;</span>
<span class="nc" id="L257">		} catch (Exception e) {</span>
<span class="nc" id="L258">			handleException(e, false);</span>
<span class="nc" id="L259">			throw new BbmFinderException(e);</span>
		} finally {
<span class="nc" id="L261">			dao.cleanUp();</span>
<span class="nc" id="L262">			methodFinish();</span>
		}
	}

	public List&lt;StringsPair&gt; getTransactionCategories(String scenario) throws BbmFinderException {
<span class="nc" id="L267">		methodStart(&quot;getTransactionCategories&quot;);</span>
<span class="nc" id="L268">		RfsReportParametersDAO dao = new RfsReportParametersDAO();</span>
		try {
<span class="nc" id="L270">			List&lt;StringsPair&gt; businessUnits = dao.getTransactionCategories(scenario);</span>
<span class="nc bnc" id="L271" title="All 2 branches missed.">			if (businessUnits.isEmpty())</span>
<span class="nc" id="L272">				return null;</span>
<span class="nc" id="L273">			return businessUnits;</span>
<span class="nc" id="L274">		} catch (Exception e) {</span>
<span class="nc" id="L275">			handleException(e, false);</span>
<span class="nc" id="L276">			throw new BbmFinderException(e);</span>
		} finally {
<span class="nc" id="L278">			dao.cleanUp();</span>
<span class="nc" id="L279">			methodFinish();</span>
		}
	}

	public Collection&lt;RfsBranch&gt; getBranchObjectsByIDs(Collection&lt;ID&gt; branchIDs) throws BbmFinderException {
<span class="nc" id="L284">		methodStart(&quot;getBranchObjectsByIDs&quot;);</span>
<span class="nc" id="L285">		RfsReportParametersDAO dao = new RfsReportParametersDAO();</span>
		try {
<span class="nc" id="L287">			Collection&lt;RfsBranch&gt; businessUnits = dao.getBranchObjectsByIDs(branchIDs);</span>
<span class="nc bnc" id="L288" title="All 2 branches missed.">			if (businessUnits.isEmpty())</span>
<span class="nc" id="L289">				return null;</span>
<span class="nc" id="L290">			return businessUnits;</span>
<span class="nc" id="L291">		} catch (Exception e) {</span>
<span class="nc" id="L292">			handleException(e, false);</span>
<span class="nc" id="L293">			throw new BbmFinderException(e);</span>
		} finally {
<span class="nc" id="L295">			dao.cleanUp();</span>
<span class="nc" id="L296">			methodFinish();</span>
		}
	}

	public Collection&lt;RfsBranch&gt; getBranchesInCurrentScenario(String scenario) throws BbmFinderException {
<span class="nc" id="L301">		methodStart(&quot;getBranchesInCurrentScenario&quot;);</span>
<span class="nc" id="L302">		RfsReportParametersDAO dao = new RfsReportParametersDAO();</span>
		try {
<span class="nc" id="L304">			Collection&lt;RfsBranch&gt; businessUnits = dao.getBranchesInCurrentScenario(scenario);</span>
<span class="nc bnc" id="L305" title="All 2 branches missed.">			if (businessUnits.isEmpty())</span>
<span class="nc" id="L306">				return null;</span>
<span class="nc" id="L307">			return businessUnits;</span>
<span class="nc" id="L308">		} catch (Exception e) {</span>
<span class="nc" id="L309">			handleException(e, false);</span>
<span class="nc" id="L310">			throw new BbmFinderException(e);</span>
		} finally {
<span class="nc" id="L312">			dao.cleanUp();</span>
<span class="nc" id="L313">			methodFinish();</span>
		}
	}

	public Collection&lt;RfsBranch&gt; getBranchesInCurrentView(String branchView) throws BbmFinderException {
<span class="nc" id="L318">		methodStart(&quot;getBranchesInCurrentView&quot;);</span>
<span class="nc" id="L319">		RfsReportParametersDAO dao = new RfsReportParametersDAO();</span>
		try {
<span class="nc" id="L321">			Collection&lt;RfsBranch&gt; businessUnits = dao.getBranchesInCurrentView(branchView);</span>
<span class="nc bnc" id="L322" title="All 2 branches missed.">			if (businessUnits.isEmpty())</span>
<span class="nc" id="L323">				return null;</span>
<span class="nc" id="L324">			return businessUnits;</span>
<span class="nc" id="L325">		} catch (Exception e) {</span>
<span class="nc" id="L326">			handleException(e, false);</span>
<span class="nc" id="L327">			throw new BbmFinderException(e);</span>
		} finally {
<span class="nc" id="L329">			dao.cleanUp();</span>
<span class="nc" id="L330">			methodFinish();</span>
		}
	}

	public List&lt;String&gt; getBranchNames(String scenario, String[] branchIds) throws BbmFinderException {
<span class="nc" id="L335">		methodStart(&quot;getBranchNames&quot;);</span>
<span class="nc" id="L336">		RfsReportParametersDAO dao = new RfsReportParametersDAO();</span>
		try {
<span class="nc" id="L338">			return dao.getBranchNames(scenario, branchIds);</span>
<span class="nc" id="L339">		} catch (Exception e) {</span>
<span class="nc" id="L340">			handleException(e, false);</span>
<span class="nc" id="L341">			throw new BbmFinderException(e);</span>
		} finally {
<span class="nc" id="L343">			dao.cleanUp();</span>
<span class="nc" id="L344">			methodFinish();</span>
		}
	}

	public Collection&lt;String&gt; getBranchesByIDs(Collection&lt;ID&gt; branchIDs) throws BbmFinderException {
<span class="nc" id="L349">		methodStart(&quot;getBranchesByIDs&quot;);</span>
<span class="nc" id="L350">		RfsReportParametersDAO dao = new RfsReportParametersDAO();</span>
		try {
<span class="nc" id="L352">			Collection&lt;String&gt; businessUnits = dao.getBranchesByIDs(branchIDs);</span>
<span class="nc bnc" id="L353" title="All 2 branches missed.">			if (businessUnits.isEmpty())</span>
<span class="nc" id="L354">				return null;</span>
<span class="nc" id="L355">			return businessUnits;</span>
<span class="nc" id="L356">		} catch (Exception e) {</span>
<span class="nc" id="L357">			handleException(e, false);</span>
<span class="nc" id="L358">			throw new BbmFinderException(e);</span>
		} finally {
<span class="nc" id="L360">			dao.cleanUp();</span>
<span class="nc" id="L361">			methodFinish();</span>
		}
	}

	public Collection&lt;String&gt; getBranchesByIDString(String branchIDs) throws BbmFinderException {
<span class="nc" id="L366">		methodStart(&quot;getBranchesByIDString&quot;);</span>
<span class="nc" id="L367">		RfsReportParametersDAO dao = new RfsReportParametersDAO();</span>
		try {
<span class="nc" id="L369">			Collection&lt;String&gt; businessUnits = dao.getBranchesByIDString(branchIDs);</span>
<span class="nc bnc" id="L370" title="All 2 branches missed.">			if (businessUnits.isEmpty())</span>
<span class="nc" id="L371">				return null;</span>
<span class="nc" id="L372">			return businessUnits;</span>
<span class="nc" id="L373">		} catch (Exception e) {</span>
<span class="nc" id="L374">			handleException(e, false);</span>
<span class="nc" id="L375">			throw new BbmFinderException(e);</span>
		} finally {
<span class="nc" id="L377">			dao.cleanUp();</span>
<span class="nc" id="L378">			methodFinish();</span>
		}
	}

	public String getDefaultViewForScenario(String scenario) throws BbmFinderException {
<span class="nc" id="L383">		methodStart(&quot;getDefaultViewForScenario&quot;);</span>
<span class="nc" id="L384">		RfsReportParametersDAO dao = new RfsReportParametersDAO();</span>
		try {
<span class="nc" id="L386">			return dao.getDefaultViewForScenario(scenario);</span>
<span class="nc" id="L387">		} catch (Exception e) {</span>
<span class="nc" id="L388">			handleException(e, false);</span>
<span class="nc" id="L389">			throw new BbmFinderException(e);</span>
		} finally {
<span class="nc" id="L391">			dao.cleanUp();</span>
<span class="nc" id="L392">			methodFinish();</span>
		}
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>